﻿
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://www.paypal.com/sdk/js?client-id=BAAL3mQ2rcEbdanwe3KkE5sbDUnKmaU01_QmtfijMRtf8ykcqndGsMpUAvsCBHOGqmjjsf2aOkS_PDWb-8&components=hosted-buttons&disable-funding=venmo&currency=USD">
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Berlin Store - Gaming shop & Products</title>

    <link rel="icon" href="/images/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon">

    <link rel="icon" type="image/png" sizes="32x32" href="/images/BerlinStore2.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/BerlinStore2.png">
    <link rel="apple-touch-icon" href="/images/BerlinStore2.png">

    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <style>


        /* تنسيق الكبسولات التفاعلية */
        .interactive-pill {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0); /* البداية مخفية وصغيرة */
            width: 150px; /* حجم الصورة */
            height: auto;
            z-index: 2147483647; /* فوق كل شيء */
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); /* حركة ناعمة "Pop" */
            filter: drop-shadow(0 0 20px rgba(255, 0, 0, 0.5)); /* توهج */
            display: none; /* مخفية في البداية */
        }

            /* كلاس التفعيل للظهور */
            .interactive-pill.show {
                display: block;
                transform: translate(-50%, -50%) scale(1);
            }

                /* تأثير عند مرور الماوس */
                .interactive-pill.show:hover {
                    transform: translate(-50%, -50%) scale(1.1) rotate(10deg);
                    filter: drop-shadow(0 0 30px rgba(255, 0, 0, 0.8));
                }
        /* ========================================= */
        /* 🏆 PLAYSTATION TROPHY STYLE 🏆 */
        /* ========================================= */
        .ps-trophy-alert {
            position: fixed;
            top: 20px; /* يظهر من أعلى اليسار */
            left: 20px;
            z-index: 100000;
            background: rgba(15, 15, 20, 0.95); /* خلفية داكنة */
            border-radius: 30px; /* شكل بيضاوي */
            padding: 10px 25px 10px 10px; /* مساحات داخلية */
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
            min-width: 250px;
            /* أنيميشن الدخول */
            animation: trophy-slide-in 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }

        /* النصوص داخل التروفي */
        .trophy-details {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            line-height: 1.2;
        }

        .trophy-subtitle {
            font-size: 10px;
            color: #ccc;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .trophy-title {
            font-size: 14px;
            font-weight: bold;
            color: white;
        }

        /* حركة الدخول */
        @keyframes trophy-slide-in {
            0% {
                transform: translateX(-150%);
                opacity: 0;
            }

            100% {
                transform: translateX(0);
                opacity: 1;
            }
        }
        /* ========================================= */
        /* 🏆 تعديل طبقة التروفي لتظهر فوق المذكرة 🏆 */
        /* ========================================= */

        .ps-trophy-alert {
            /* ... باقي التنسيقات ... */
            z-index: 2147483647 !important; /* أهم سطر عشان يظهر فوق المذكرة */
        }
        /* كلاس الاختفاء */
        .ps-trophy-alert.hide {
            animation: trophy-slide-out 0.5s forwards;
        }

        /* حركة الخروج */
        @keyframes trophy-slide-out {
            0% {
                transform: translateX(0);
                opacity: 1;
            }

            100% {
                transform: translateX(-150%);
                opacity: 0;
            }
        }
        /* ====================================================== */
        /* ✅ تنسيق كبسولة رقم فودافون (Compact Silver Glow) ✅ */
        /* ====================================================== */

        /* تعديل التنسيق ليكون عمودي ومتوسط */
        .transfer-instruction-line {
            display: flex;
            flex-direction: column; /* يرص العناصر فوق بعض */
            align-items: center; /* ✅ ده اللي بيخلي العناصر تيجي في النص */
            justify-content: center;
            gap: 10px; /* مسافة بين سطر الكلام وسطر الرقم */
            width: 100%;
            margin-bottom: 10px;
            font-size: 14px;
            color: var(--light-text);
            text-align: center; /* عشان لو الكلام نزل على سطرين يبقى متوسط برضه */
        }

        /* تنسيق الكبسولة نفسها */
        .number-copy-capsule {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 4px 12px;
            border-radius: 50px; /* حواف دائرية كاملة */
            /* الخلفية والإطار الفضي */
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid #C0C0C0; /* فضي */
            /* تأثير التوهج الفضي الخفيف */
            box-shadow: 0 0 5px rgba(192, 192, 192, 0.3);
            cursor: pointer;
            transition: all 0.3s ease;
        }

            /* تأثير عند مرور الماوس على الكبسولة */
            .number-copy-capsule:hover {
                background: rgba(255, 255, 255, 0.15);
                box-shadow: 0 0 10px rgba(192, 192, 192, 0.6); /* زيادة التوهج */
                transform: translateY(-1px);
            }

            /* تنسيق الرقم */
            .number-copy-capsule .vodafone-number {
                color: var(--accent-yellow);
                font-weight: bold;
                font-family: 'Tajawal', sans-serif; /* أو أي خط أرقام تفضله */
                letter-spacing: 1px;
                line-height: 1;
            }

            /* تنسيق أيقونة النسخ */
            .number-copy-capsule .copy-icon {
                font-size: 14px;
                color: #C0C0C0; /* لون فضي للأيقونة */
                transition: color 0.3s;
            }

            /* تغيير لون الأيقونة عند النسخ (سيتم تفعيل هذا الكلاس بالـ JS) */
            .number-copy-capsule.copied {
                border-color: #2ecc71; /* يتحول للأخضر عند النسخ */
                box-shadow: 0 0 10px rgba(46, 204, 113, 0.4);
            }

                .number-copy-capsule.copied .copy-icon {
                    color: #2ecc71; /* خضراء */
                }
        /* ====================================================== */
        /* ✅ MASTERPIECE SUPPORT MODAL STYLES 🛠️ */
        /* ====================================================== */



        /* 2. العنوان والوصف */
        .support-title {
            font-size: 2rem !important;
            color: #fff;
            margin-bottom: 5px !important;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.1);
        }

        .support-subtitle {
            color: #ccc;
            font-size: 0.9rem;
            margin-bottom: 30px;
            opacity: 0.8;
        }

        /* 3. حاوية البطاقات */
        .support-cards-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
            width: 100%;
            max-width: 450px;
            margin: 0 auto;
        }

        /* 4. التصميم الأساسي لبطاقة التواصل */
        .support-card {
            display: flex;
            align-items: center;
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.05), rgba(0, 0, 0, 0.2));
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 15px 20px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            position: relative;
            overflow: hidden;
            text-decoration: none; /* للروابط */
        }

            /* 5. أيقونة الخدمة (يسار/يمين) */
            .support-card .icon-wrapper {
                width: 50px;
                height: 50px;
                background: rgba(0, 0, 0, 0.3);
                border-radius: 12px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 24px;
                margin-left: 15px; /* مسافة في العربي */
                transition: transform 0.3s ease;
            }

            /* 6. النصوص داخل البطاقة */
            .support-card .text-wrapper {
                flex-grow: 1;
                text-align: right;
                display: flex;
                flex-direction: column;
            }

                .support-card .text-wrapper .label {
                    font-size: 12px;
                    color: #aaa;
                    margin-bottom: 2px;
                }

                .support-card .text-wrapper .value {
                    font-size: 15px;
                    font-weight: bold;
                    color: #fff;
                    font-family: 'Cairo', sans-serif; /* أو خط الإنجليزي للأرقام */
                    direction: ltr; /* عشان الإيميل يظهر صح */
                    text-align: right;
                }

            /* 7. أيقونة الإجراء (نسخ/فتح) */
            .support-card .action-icon {
                color: #666;
                font-size: 18px;
                transition: color 0.3s ease;
                position: relative;
            }

        /* --- تخصيص بطاقة الإيميل --- */
        .email-card:hover {
            border-color: var(--accent-yellow);
            box-shadow: 0 0 25px rgba(255, 204, 0, 0.15);
            transform: translateY(-3px);
        }

        .email-card .icon-wrapper {
            color: var(--accent-yellow);
        }

        .email-card:hover .icon-wrapper {
            background: var(--accent-yellow);
            color: #000;
            transform: scale(1.1) rotate(-10deg);
        }

        /* --- تخصيص بطاقة الديسكورد --- */
        .discord-card:hover {
            border-color: #5865F2;
            box-shadow: 0 0 25px rgba(88, 101, 242, 0.25);
            transform: translateY(-3px);
        }

        .discord-card .icon-wrapper {
            color: #5865F2;
        }

        .discord-card:hover .icon-wrapper {
            background: #5865F2;
            color: #fff;
            transform: scale(1.1) rotate(10deg);
        }

        /* 8. تولتيب النسخ */
        .tooltip {
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--green-buy-btn);
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 10px;
            opacity: 0;
            transition: opacity 0.2s;
            pointer-events: none;
            white-space: nowrap;
        }

        .copied .tooltip {
            opacity: 1;
            top: -35px;
        }

.support-footer {
    margin-top: 20px; /* قللت المسافة العلوية سنة بسيطة كمان */
    font-size: 12px;
    /* ✅ اللون بقى أبيض فاتح مع شفافية بسيطة جداً عشان يبقى مريح للعين */
    color: rgba(255, 255, 255, 0.9) !important; 
    border-top: 1px solid rgba(255,255,255,0.05);
    padding-top: 10px;
}
        /* ====================================================== */
        /* 🎧 تنسيق أيقونة الدعم الفني (Headset Icon) 🎧 */
        /* ====================================================== */

        .support-header-icon {
            color: var(--accent-yellow); /* لون أصفر مميز */
            margin-left: 10px; /* مسافة بينها وبين الكلمة */
            font-size: 1.2em; /* حجم أكبر سنة من الكلام */
            vertical-align: middle; /* محاذاة في النص */
            /* وهج خفيف */
            text-shadow: 0 0 10px rgba(255, 204, 0, 0.4);
            /* حركة نبض هادية (Breathing) */
            animation: support-icon-pulse 2s infinite ease-in-out;
        }

        @keyframes support-icon-pulse {
            0%, 100% {
                transform: scale(1);
                text-shadow: 0 0 10px rgba(255, 204, 0, 0.4);
            }

            50% {
                transform: scale(1.1); /* تكبير بسيط */
                text-shadow: 0 0 20px rgba(255, 204, 0, 0.8); /* الوهج يزيد */
            }
        }
        /* ====================================================== */
        /* ✅ تنسيق نص "رانكك الحالي" (White Neon Gaming Style) ✅ */
        /* ====================================================== */

        .rank-label {
            margin: 0 0 8px 0 !important;
            padding: 0 !important;
            font-size: 12px !important; /* كبرناه سنة عشان الوهج يبان */
            font-weight: bold !important; /* لازم يكون عريض عشان الإضاءة تبان */

            color: #ffffff !important; /* لون النص أبيض */
            letter-spacing: 1px; /* مسافة بين الحروف لستايل الجيمنج */
            text-transform: uppercase; /* حروف كبيرة (لو انجليزي) */
            /* ✅ بداية الوهج الثابت */
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.6);
            /* ✅ تشغيل أنيميشن النبض (Breathing Effect) */
            animation: white-gaming-pulse 1.5s ease-in-out infinite alternate;
        }

        /* ====================================================== */
        /* 🔥 أنيميشن النبض الأبيض (Gaming White Pulse) 🔥 */
        /* ====================================================== */

        @keyframes white-gaming-pulse {
            from {
                /* حالة الهدوء: وهج بسيط */
                text-shadow: 0 0 4px rgba(255, 255, 255, 0.4), 0 0 8px rgba(255, 255, 255, 0.2);
                opacity: 0.8;
                transform: scale(1);
            }

            to {
                /* حالة التوهج: وهج قوي وناصع */
                text-shadow: 0 0 8px rgba(255, 255, 255, 1), 0 0 15px rgba(255, 255, 255, 0.8), 0 0 20px rgba(255, 255, 255, 0.6);
                opacity: 1;
                transform: scale(1.05); /* تكبير بسيط جداً مع التوهج */
            }
        }
        /* ====================================================== */
        /* ✅ START: AVATAR SELECTION STYLES (إطار أبيض عند التحديد) ✅ */
        /* ====================================================== */

        /* 1. التنسيق الأساسي لصور الأفاتار داخل الشبكة */
        #avatar-selection-area .avatars-grid img {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            cursor: pointer;
            /* 🛑 الإطار الافتراضي شفاف (لإظهار الرتبة إن وجدت أو لإظهار الأبيض) */
            border: 3px solid transparent;
            transition: all 0.3s;
            box-sizing: border-box; /* للتأكد من أن البوردر لا يغير حجم الصورة */
        }

            /* 2. تأثير عند مرور الماوس (Hover) */
            #avatar-selection-area .avatars-grid img:hover {
                transform: scale(1.15);
                /* 🚀 التعديل الرئيسي: إطار أبيض ناصع عند المرور */
                border-color: #ffffff !important;
                box-shadow: 0 0 10px rgba(255, 255, 255, 0.7); /* وهج أبيض خفيف */
            }

            /* 3. الإطار عند التحديد (Selected) */
            /* هذا الكود هو المسؤول عن الإطار الأصفر عند اختيار الصورة */
            #avatar-selection-area .avatars-grid img.selected-avatar {
                /* الإطار الأصفر الثابت عند التحديد */
                border-color: var(--accent-yellow) !important;
                box-shadow: 0 0 15px var(--accent-yellow);
                transform: scale(1.1);
            }

                /* 4. تعديل الإطار في حالة المرور على الصورة المُختارة (لتجنب تضارب الألوان) */
                #avatar-selection-area .avatars-grid img.selected-avatar:hover {
                    /* نُبقي على الأصفر ونزيد الوهج قليلاً */
                    box-shadow: 0 0 20px var(--accent-yellow), 0 0 5px rgba(255, 255, 255, 0.8);
                }

        /* ====================================================== */
        /* ✅ END: AVATAR SELECTION STYLES ✅ */
        /* ====================================================== */
        /* ====================================================== */
        /* ✅ تنسيق زر الحفظ في حالة التعطيل (Disabled) ✅ */
        /* ====================================================== */
        .confirm-payment-btn:disabled {
            /* تغيير الخلفية إلى لون رمادي باهت */
            background: #44475a !important;
            /* جعل الحدود باهتة أيضاً */
            border-color: #44475a !important;
            /* تقليل الشفافية لجعل المظهر باهتاً */
            opacity: 0.65;
            /* إزالة تأثير الحركة عند مرور الماوس */
            transform: none !important;
            box-shadow: none !important;
            /* تغيير مؤشر الماوس */
            cursor: not-allowed !important;
        }
        /* ====================================================== */
        /* ✅ تنسيق اللودر الصغير داخل الأزرار (Small Spinner) ✅ */
        /* ====================================================== */
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--accent-yellow);
            animation: spin 1s ease-in-out infinite;
            /* لضمان ظهوره بجانب النص بشكل سليم */
            vertical-align: middle;
            margin-left: 8px; /* مسافة بسيطة من النص */
        }
        /* ====================================================== */
        /* ✅ START: تحسين تنسيق أزرار الحفظ وتغيير كلمة المرور ✅ */
        /* ====================================================== */

        /* 1. تنسيقات عامة لحاوية الأزرار */
        .profile-actions-container {
            display: flex; /* لعرض الأزرار بجانب بعضها */
            flex-wrap: wrap; /* للسماح لها بالانتقال لسطر جديد في الشاشات الصغيرة */
            gap: 15px; /* مسافة بين الأزرار */
            justify-content: flex-end; /* محاذاة الأزرار لليمين (لأن الموقع RTL) */
            align-items: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.08); /* خط فاصل خفيف */
        }

        /* 2. تنسيقات زر "حفظ التغييرات" (confirm-payment-btn) */
        .confirm-payment-btn {
            /* الشكل الأساسي */
            background: linear-gradient(135deg, var(--green-buy-btn) 0%, #208e40 100%) !important; /* تدرج لوني أخضر */
            color: #fff !important;
            font-size: 15px !important;
            font-weight: bold !important;
            padding: 12px 30px !important;
            border: 2px solid var(--green-buy-btn) !important; /* بوردر بنفس اللون */
            border-radius: 50px !important; /* حواف دائرية */
            cursor: pointer !important;
            transition: all 0.3s ease !important; /* حركة سلسة عند التفاعل */
            box-shadow: 0 5px 15px rgba(33, 150, 83, 0.4) !important; /* ظل أخضر */
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px; /* مسافة بين الأيقونة والنص */
            min-width: 180px; /* عرض أدنى للزر */
        }

            /* تأثير Hover لزر "حفظ التغييرات" */
            .confirm-payment-btn:hover {
                transform: translateY(-3px) scale(1.02); /* رفع وتكبير بسيط */
                box-shadow: 0 8px 20px rgba(33, 150, 83, 0.6) !important; /* ظل أقوى */
                filter: brightness(1.1); /* تفتيح بسيط */
            }

        /* 3. تنسيقات زر "تغيير كلمة المرور" (buy-btn) */
        .profile-actions-container .buy-btn {
            /* الشكل الأساسي */
            background: linear-gradient(135deg, #ff4757 0%, #e63946 100%) !important; /* تدرج لوني أحمر */
            color: #fff !important;
            font-size: 15px !important;
            font-weight: bold !important;
            padding: 12px 25px !important;
            border: 2px solid #ff4757 !important; /* بوردر بنفس اللون */
            border-radius: 50px !important; /* حواف دائرية */
            cursor: pointer !important;
            transition: all 0.3s ease !important; /* حركة سلسة عند التفاعل */
            box-shadow: 0 5px 15px rgba(255, 71, 87, 0.4) !important; /* ظل أحمر */
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px; /* مسافة بين الأيقونة والنص */
            min-width: 180px; /* عرض أدنى للزر */
        }

            /* تأثير Hover لزر "تغيير كلمة المرور" */
            .profile-actions-container .buy-btn:hover {
                transform: translateY(-3px) scale(1.02); /* رفع وتكبير بسيط */
                box-shadow: 0 8px 20px rgba(255, 71, 87, 0.6) !important; /* ظل أقوى */
                filter: brightness(1.1); /* تفتيح بسيط */
            }

        /* استجابة الأزرار للشاشات الصغيرة */
        @media (max-width: 768px) {
            .profile-actions-container {
                flex-direction: column; /* عرض الأزرار فوق بعضها */
                align-items: stretch; /* تمتد الأزرار على كامل العرض */
            }

                .profile-actions-container button {
                    width: 100%; /* جعل الأزرار تأخذ عرض 100% */
                    margin-right: 0 !important; /* إزالة الهوامش الجانبية */
                }
        }

        /* ====================================================== */
        /* ✅ END: تحسين تنسيق أزرار الحفظ وتغيير كلمة المرور ✅ */
        /* ====================================================== */
        /* ====================================================== */
        /* ✅ START: تعديل لون البوردر والأيقونة إلى الأبيض ✅ */
        /* ====================================================== */

        /* 1. تعديل الإطار إلى الأبيض وإزالة اللون البنفسجي الأساسي من الأيقونة */
        #profile-settings-page .input-wrapper#name-input-wrapper-center {
            /* تغيير لون الإطار (الحد) إلى الأبيض */
            border: 1px solid #ffffff !important;
            /* إضافة توهج أبيض خفيف لجعلها تبرز */
            box-shadow: 0 0 8px rgba(255, 255, 255, 0.4) !important;
        }

            /* 2. تغيير لون أيقونة الشخص إلى الأبيض */
            #profile-settings-page .input-wrapper#name-input-wrapper-center i.fas.fa-user {
                /* تغيير لون الأيقونة إلى الأبيض */
                color: #ffffff !important;
                /* إزالة أي ظل نصي أو تأثير قديم */
                text-shadow: none !important;
            }

            /* 3. تأثير الـ Focus (لتغيير التوهج إلى لون مميز عند الضغط/الكتابة) */
            #profile-settings-page .input-wrapper#name-input-wrapper-center:focus-within {
                /* عند التركيز: نرجع للون المميز (الذهبي مثلاً) لتمييز الحقل النشط */
                border-color: var(--accent-yellow) !important;
                box-shadow: 0 0 10px rgba(255, 204, 0, 0.6) !important;
            }

                /* 4. تغيير لون الأيقونة أيضاً عند التركيز */
                #profile-settings-page .input-wrapper#name-input-wrapper-center:focus-within i.fas.fa-user {
                    color: var(--accent-yellow) !important;
                }
        /* ====================================================== */
        /* ✅ END: تعديل لون البوردر والأيقونة إلى الأبيض ✅ */
        /* ====================================================== */
        /* ====================================================== */
        /* ✅ التعديلات على حاوية الأزرار داخل اختيار الأفاتار ✅ */
        /* ====================================================== */

        /* 1. تنسيق حاوية الأزرار لتكون Flexbox في المنتصف */
        .avatar-action-buttons {
            display: flex;
            justify-content: center; /* توسيط الأزرار */
            gap: 15px; /* مسافة بين زر الحفظ وزر الإلغاء */
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.1); /* خط فاصل بسيط */
        }

            /* 2. تنسيق زر الحفظ الجديد */
            .avatar-action-buttons .save-avatar-btn {
                background-color: var(--green-buy-btn); /* لون أخضر للحفظ */
                color: white;
                font-weight: bold;
                padding: 10px 25px;
                border-radius: 50px;
                border: none;
                cursor: pointer;
                transition: transform 0.2s;
            }

            /* 3. تنسيق زر الإلغاء (لجعله بنفس الحجم واللون الرمادي) */
            .avatar-action-buttons .cancel-avatar-btn {
                background-color: #6c757d; /* لون رمادي للإلغاء */
                color: white;
                font-weight: bold;
                padding: 10px 25px;
                border-radius: 50px;
                border: none;
                cursor: pointer;
                transition: transform 0.2s;
            }

            .avatar-action-buttons button:hover {
                transform: translateY(-2px);
            }
        /* ====================================================== */
        /* ✅ التعديلات على حاوية الأزرار داخل اختيار الأفاتار ✅ */
        /* ====================================================== */

        /* 1. تنسيق حاوية الأزرار لتكون Flexbox في المنتصف */
        .avatar-action-buttons {
            display: flex;
            justify-content: center; /* توسيط الأزرار */
            gap: 15px; /* مسافة بين زر الحفظ وزر الإلغاء */
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.1); /* خط فاصل بسيط */
        }

            /* 2. تنسيق زر الحفظ الجديد */
            .avatar-action-buttons .save-avatar-btn {
                background-color: var(--green-buy-btn); /* لون أخضر للحفظ */
                color: white;
                font-weight: bold;
                padding: 10px 25px;
                border-radius: 50px;
                border: none;
                cursor: pointer;
                transition: transform 0.2s;
            }

            /* 3. تنسيق زر الإلغاء (لجعله بنفس الحجم واللون الرمادي) */
            .avatar-action-buttons .cancel-avatar-btn {
                background-color: #6c757d; /* لون رمادي للإلغاء */
                color: white;
                font-weight: bold;
                padding: 10px 25px;
                border-radius: 50px;
                border: none;
                cursor: pointer;
                transition: transform 0.2s;
            }

            .avatar-action-buttons button:hover {
                transform: translateY(-2px);
            }
        /* ========================================= */
        /* ✅ START: TROPHY ALERT (PS Style) ✅ */
        /* ========================================= */

        @keyframes trophy-slide-in {
            0% {
                transform: translate(120%, -50%);
            }

            20% {
                transform: translate(-10%, -50%);
            }

            100% {
                transform: translate(0, -50%);
            }
        }

        .ps-trophy-alert {
            position: fixed;
            top: 50px;
            left: 0px; /* يبدأ من اليسار (خارج الشاشة) */
            transform: translate(-120%, 0); /* مخفي في البداية */
            z-index: 10002;
            background: linear-gradient(90deg, #0070D1 0%, #00457C 100%); /* أزرق بلايستيشن */
            color: white;
            padding: 10px 15px;
            border-radius: 0 8px 8px 0;
            box-shadow: 0 0 15px rgba(0, 112, 209, 0.8);
            font-family: 'Arial', sans-serif;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 12px;
            animation: trophy-slide-in 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }

            .ps-trophy-alert .trophy-icon {
                font-size: 20px;
                color: #FFD700; /* لون التروفي (ذهبي) */
                text-shadow: 0 0 5px #ffcc00;
            }

            .ps-trophy-alert .trophy-text {
                font-weight: bold;
                direction: ltr;
            }

            /* حركة الإخفاء (Fade Out) */
            .ps-trophy-alert.hide {
                animation: none;
                opacity: 0;
                transform: translate(0, -50%);
                transition: opacity 0.5s ease-out 1s, transform 0.5s ease-out 1s; /* تأخير قبل الاختفاء */
            }
        /* ====================================================== */
        /* ✅ التعديلات على صندوق ملخص الطلبات (#my-orders-page) ✅ */
        /* ====================================================== */

        /* 1. تنسيق قيمة العداد (لرفعها للأعلى) */
        #my-orders-page .summary-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--accent-yellow);
            line-height: 1;
            /* 🛑 التعديل الرئيسي لرفع العنصر وتقليل المسافة العلوية */
            margin-top: -10px !important;
            margin-bottom: 5px !important;
        }

        /* 2. تنسيق الرتبة الجديدة (تحت العداد) */
        #my-orders-page .user-rank-display-small {
            font-size: 14px;
            font-weight: bold;
            color: #00e5ff; /* لون سماوي ليتناسب مع الدايموند */
            text-shadow: 0 0 5px rgba(0, 229, 255, 0.4);
            margin-top: -5px !important; /* لتقريبها أكثر من العدد */
        }
        /* ====================================================== */
        /* ✅ تنسيقات نافذة الشكر (#confirmationMessage) باللون الأخضر النيون ✅ */
        /* ====================================================== */

        /* 1. تنسيق أيقونة علامة الصح (Fa-Check-Circle) */
        .checkmark-icon {
            font-size: 5rem;
            /* حجم كبير */
            color: #0f0 !important; /* ✅ اللون الأخضر النيون القوي */
            margin-bottom: 25px;
            /* لإضافة التوهج النيون */
            text-shadow: 0 0 15px rgba(0, 255, 0, 0.7), 0 0 30px rgba(0, 255, 0, 0.5);
            animation: pulse-checkmark 1.5s infinite alternate;
            /* أنيميشن نبض خفيف */
        }

        /* 2. تنسيق عنوان الشكر */
        .thank-you-title {
            font-size: 2.2rem !important;
            /* حجم الخط */
            color: #0f0 !important;
            /* ✅ لون أخضر نيون */
            margin: 0 !important;
            text-shadow: 0 0 8px rgba(0, 255, 0, 0.7);
            /* توهج أخضر خفيف */
            font-weight: bold;
        }

        /* 3. تنسيق الخط الفاصل */
        .thank-you-divider {
            border: none;
            border-top: 2px solid rgba(0, 255, 0, 0.4); /* ✅ خط أخضر نيون */
            width: 60%;
            /* عرض الخط */
            margin: 15px auto 25px auto;
            /* توسيط الخط مع مسافة كافية */
        }

        /* 4. تنسيق نص الرسالة التفصيلي */
        .thank-you-text {
            font-size: 1.3rem !important;
            /* حجم الخط */
            color: #c0f0c0 !important; /* لون فاتح متناسق */
            line-height: 1.6;
            margin-top: 0 !important;
        }

        /* 5. إزالة التوهج النيون من النافذة نفسها (لتحقيق التباين الذي طلبته) */
        #paymentModal.is-visible {
            border: 1px solid var(--main-purple) !important; /* إرجاع للإطار البنفسجي الأساسي */
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.4) !important; /* إرجاع للظل الداكن القياسي */
            border-radius: 25px !important;
        }

        #my-orders-page .page-header-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 10px 0;
        }

        #my-orders-page #orders-page-icon {
            max-width: 120px;
            height: auto;
            filter: drop-shadow(0 0 8px rgba(255, 204, 0, 0.6));
            margin: 0;
            flex-shrink: 0;
        }

        #my-orders-page #orders-summary-box {
            text-align: left;
            padding-left: 15px;
        }

        #my-orders-page .thin-divider {
            border: none;
            border-top: 1px solid rgba(255, 255, 255, 0.15);
            /* خط رفيع باللون الأبيض الشفاف */
            margin: 0 0 30px 0;
            /* مسافة فاصلة عن القائمة */
        }

        /* 5. تنسيق الأرقام والنصوص داخل العداد */
        #my-orders-page .summary-label {
            font-size: 14px;
            color: #ccc;
            margin: 0 0 5px 0;
        }

        #my-orders-page .summary-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--accent-yellow);
            /* اللون الذهبي المميز */
            line-height: 1;
        }
        /* ====================================================== */
        /* ✅ إضافة CSS: توسيط حقل إدخال الاسم (Final Center) ✅ */
        /* ====================================================== */

        #name-input-wrapper-center {
            /* الخصائص المسؤولة عن التوسيط */
            margin: 0 auto !important; /* توسيط أفقي */
            /* تحديد عرض مناسب لكي يتمكن من التوسيط */
            width: 100% !important;
            max-width: 400px !important; /* عرض أقصى للحقل */
        }

        /* ====================================================== */
        /* ✅ إضافة CSS: محاذاة حقل تعديل الاسم على سطر واحد ✅ */
        /* ====================================================== */
        .input-label-group {
            display: flex;
            align-items: center; /* توسيط عمودي */
            justify-content: space-between; /* توزيع العناصر على الأطراف */
            gap: 15px; /* مسافة بين الليبل وحقل الإدخال */
            width: 100%;
        }

            .input-label-group .input-label-text {
                /* السماح لليبل بأخذ المساحة الكافية (وليس سطر كامل) */
                flex-shrink: 0;
                font-weight: bold;
                /* ✅ إزالة الـ display: block الموروث من الليبل */
                display: inline-block !important;
            }

            .input-label-group .input-wrapper {
                /* جعل حقل الإدخال يأخذ المساحة المتبقية كاملة */
                flex-grow: 1;
                /* تحديد أقصى عرض لحقل الإدخال ليبقى أنيقاً */
                max-width: 350px;
            }

        .profile-actions-container {
            display: flex;
            justify-content: center; /* توسيط المجموعة بالكامل */
            gap: 15px; /* تقليل المسافة بين الزرين */
            margin-top: 35px; /* زيادة الهامش العلوي للفصل عن حقل الاسم */
            flex-wrap: wrap;
        }

            .profile-actions-container button {
                /* تحديد عرض موحد (اختياري لكن يفضل للمظهر) */
                width: 180px !important;
                /* جعل النص والأيقونة في المنتصف تمامًا داخل الزر */
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                /* توحيد الـ Padding */
                padding: 12px 15px !important;
                font-size: 15px !important;
            }

            /* 3. تعديل الأيقونة في زر تغيير كلمة المرور لتبتعد قليلاً عن النص */
            .profile-actions-container .buy-btn i {
                /* ✅ السطر المضاف لضبط المسافة على اليمين */
                margin-left: 8px !important;
                margin-right: 0 !important;
            }

            /* 4. تعديل الأيقونة في زر حفظ التغييرات لتبتعد قليلاً عن النص */
            .profile-actions-container .confirm-payment-btn i {
                /* ✅ السطر المضاف لضبط المسافة على اليسار */
                margin-right: 8px !important;
                margin-left: 0 !important;
            }
        /* ====================================================== */
        /* ✅ START: AVATAR SELECTION ANIMATION (انسدال سلس) ✅ */
        /* ====================================================== */

        #profile-settings-page::after {
            content: '';
            position: absolute;
            inset: 3px;
            background-image: linear-gradient(rgba(30, 17, 50, 0.7), rgba(17, 10, 26, 0.9)), url('./images/my-keys-bg.png') !important;
            background-size: cover !important;
            background-position: center !important;
            background-attachment: fixed !important;
            border-radius: 18px;
            z-index: -1;
            /* ✅ التعديل هنا: زيادة البلور لـ 15px */
            filter: blur(15px);
            transition: filter 0.5s ease-in-out;
            /* ✅ الإضافة: توهج ناعم للخلفية */
            box-shadow: 0 0 50px rgba(205, 161, 255, 0.2); /* توهج بنفسجي خفيف */
        }

        /* 2. تنسيق الخطوط الفاصلة الجديدة */
        .avatar-category-divider {
            border-bottom: 1px solid rgba(255, 255, 255, 0.15); /* خط فاصل خفيف */
            padding-bottom: 20px;
            margin-bottom: 20px;
        }

        /* 3. تطبيق انيميشن الانسدال (Max-Height + Opacity) */
        #avatar-selection-area {
            /* الحالة الافتراضية: مخفية */
            max-height: 0;
            opacity: 0;
            overflow: hidden;
            transition: max-height 0.4s cubic-bezier(0.23, 1, 0.32, 1), opacity 0.3s ease-in-out;
            padding: 0 15px; /* نحافظ على البادينج الأفقي لكي لا يؤثر على الارتفاع، وسنضيفه في كلاس الإظهار */
            margin: 0 auto;
            border-bottom: 1px solid transparent;
        }

            /* 4. كلاس الإظهار (يتم إضافته بواسطة JS عند النقر) */
            #avatar-selection-area.open-dropdown {
                /* قيمة كبيرة تكفي لاحتواء كل الصور */
                max-height: 800px;
                opacity: 1;
                /* نضيف البادينج والخط الفاصل هنا فقط عندما تكون مفتوحة */
                padding: 15px 15px 25px 15px;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
                margin-bottom: 20px;
            }

        /* ====================================================== */
        /* ✅ END: AVATAR SELECTION ANIMATION ✅ */
        /* ====================================================== */
        @media (max-width: 992px) {

            /* 1. إخفاء شريط البحث بالكامل */

            .navbar-search-container {
                display: none !important;
            }



            /* 2. إعادة هيكلة شريط التنقل ليتناسب مع صف واحد */

            #navbar {
                flex-wrap: nowrap !important;
                justify-content: space-between !important; /* لتوزيع العناصر على الطرفين */

                padding: 4px 10px !important;
                height: auto !important; /* لكي لا يتمدد الشريط عمودياً */
            }



                /* 3. إخفاء الروابط الرئيسية (التي كانت تظهر في صف منفصل) */

                #navbar .nav-middle-section {
                    display: none !important;
                }



            /* 4. التأكد من أن قسم الحساب (Utility Section) يظهر على الطرف */

            .nav-utility-section {
                display: flex !important;
                order: 2 !important; /* وضعه في الطرف الأيمن/الأيسر حسب الـ RTL/LTR */

                align-items: center !important;
                gap: 10px !important;
            }



            /* 5. تثبيت عنصر الصورة/الاسم ليكون مرئياً ومضغوطاً */

            #user-account-btn {
                display: flex !important;
                padding: 0 !important;
                margin: 0 !important;
            }



            /* 6. إزالة أي حشو علوي زائد من الجسم (Body) */

            body {
                padding-top: 55px !important; /* مسافة بسيطة كافية لإزاحة المحتوى تحت الناف بار */
            }
        }
        /* ====================================================== */
        /* ✅ ITAKURA TRICK STYLING (الخدعة البرمجية) ✅ */
        /* ====================================================== */

        #itakura-trick-text {
            /* ✅✅ الحل الحاسم: نستخدم متغير لون الخلفية الأساسي لضمان التطابق التام ✅✅ */
            color: var(--dark-bg) !important;
            font-size: 10px;
            font-weight: normal;
            text-shadow: none !important; /* نلغي أي ظل نصي يجعله يلمع */
        }

            /* باقي كود الإظهار عند التحديد يبقى كما هو */
            #itakura-trick-text::selection {
                background: var(--accent-yellow);
                color: #000000;
            }

            #itakura-trick-text::-moz-selection {
                background: var(--accent-yellow);
                color: #000000;
            }

        /* ====================================================== */
        /* ✅ START: FINAL STORE REVIEWS STYLING (المُصحح) ✅ */
        /* ====================================================== */

        /* 1. تنسيق الحاوية الرئيسية للتقييمات (قائمة مرتبة) */
        #store-reviews-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
            max-width: 600px;
            /* ✅✅ التعديل الحاسم: تقليل الهامش السفلي إلى 10px فقط ✅✅ */
            margin: 20px auto 10px auto !important;
        }

            /* 2. تصميم بطاقة التقييم الواحدة (Comment Card) */
            #store-reviews-list .comment-card {
                background: rgba(44, 26, 64, 0.4); /* خلفية زجاجية شفافة وداكنة */
                padding: 15px 20px;
                border-radius: 10px;
                border: 1px solid rgba(142, 106, 191, 0.5);
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
                transition: transform 0.2s ease-in-out;
            }

                /* تأثير الرفع عند مرور الماوس */
                #store-reviews-list .comment-card:hover {
                    transform: translateY(-3px);
                    border-color: var(--accent-yellow);
                    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
                }

            /* 3. تنسيق رأس البطاقة (الاسم والتاريخ) */
            #store-reviews-list .comment-card-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 10px;
            }

            /* تنسيق اسم الكاتب */
            #store-reviews-list .comment-author {
                font-size: 16px;
                font-weight: bold;
                color: var(--accent-yellow);
            }

            /* 4. تصميم النجوم داخل البطاقة (إعدادات الجلو) */
            #store-reviews-list .comment-rating,
            #store-average-rating-display .stars {
                font-size: 18px;
                direction: ltr;
            }
                /* ====================================================== */
                /* ✅ FINAL FIX: GLOWING STARS STYLING (الدمج) ✅ */
                /* ====================================================== */

                /* 1. تنسيق النجمة نفسها */
                #store-reviews-list .comment-rating .star,
                #store-average-rating-display .stars .star {
                    font-size: 24px;
                    transition: all 0.2s ease;
                }

                    /* 2. تطبيق تأثير الوهج على النجوم الممتلئة فقط */
                    #store-reviews-list .comment-rating .star.filled,
                    #store-average-rating-display .stars .star.filled {
                        color: var(--accent-yellow) !important;
                        text-shadow: 0 0 5px rgba(255, 204, 0, 0.7), /* ظل خفيف وواضح */
                        0 0 10px rgba(255, 204, 0, 0.5), /* ظل أوسع */
                        0 0 15px rgba(255, 204, 0, 0.3); /* ظل منتشر لخلق الوهج */
                    }

                    /* 3. تنسيق النجوم الفارغة (لتكون هادئة) */
                    #store-reviews-list .comment-rating .star.empty,
                    #store-average-rating-display .stars .star.empty {
                        color: #444; /* لون رمادي داكن وهادئ */
                        text-shadow: none;
                    }

            /* 5. تنسيق نص التعليق */
            #store-reviews-list .comment-text {
                font-size: 15px;
                color: var(--light-text);
                line-height: 1.6;
                margin: 0;
            }

        /* 6. تنسيق قسم التقييم الرئيسي في صفحة الإعدادات/المتوسط */
        #store-average-rating-display {
            padding: 20px;
            border-radius: 15px;
            background: linear-gradient(145deg, #1f1133, #110e1a);
            border: 1px solid var(--accent-yellow);
            box-shadow: 0 0 25px rgba(255, 204, 0, 0.3); /* وهج قوي لشريط المتوسط */
            /* ✅ التعديل هنا: تقليل الهامش العلوي والسفلي لصندوق المتوسط */
            margin-top: 5px !important;
            margin-bottom: 10px !important;
        }
        /* هذا الكود يضمن إلغاء أي هامش سفلي موروث على آخر عنصر في قسم التقييمات */
        #feedback-section > *:last-child {
            margin-bottom: 0 !important;
        }

        #store-average-rating-display .stars {
            font-size: 2.5rem;
            color: var(--accent-yellow);
            margin-bottom: 10px;
        }

        #store-average-rating-display .summary-text {
            color: #fff;
            font-size: 1.1rem;
        }

        /* ====================================================== */
        /* ✅ END: FINAL STORE REVIEWS STYLING (المُصحح) ✅ */
        /* ====================================================== */
        /* هذا الكود يستهدف زر الخروج تحديداً ويزيل أي وهج نصي أو ظل خارجي منه */
        #user-dropdown-menu a.nav-link:hover,
        #user-dropdown-menu a.nav-link {
            /* يزيل الوهج من النص الأحمر (النص والظل) */
            text-shadow: none !important;
            /* يزيل الظل من الخلفية (Box Shadow) */
            box-shadow: none !important;
            /* يزيل الوهج من الأيقونة نفسها */
            filter: none !important;
            /* لضمان بقاء اللون الأحمر صافياً بدون تأثيرات */
            color: #ff4757 !important;
        }
        /* ✅ استهداف رواد الدروب داون عند المرور (لإزالة أي جلو متبقي) */
        .dropdown-content a:hover {
            /* يُزيل الظل الخارجي */
            box-shadow: none !important;
            /* يُزيل الوهج من النص (Text Glow) */
            text-shadow: none !important;
            /* ✅ السطر الحاسم: لضمان أن اللون لا يتغير بتأثير الوهج الملون */
            filter: brightness(1) !important;
        }
        /* تنسيق حاوية بيانات المستخدم في الناف بار */
        #logged-user-content {
            display: none; /* بيتم التحكم فيه بالـ JS */
            flex-direction: row !important; /* العناصر جنب بعض */
            align-items: center !important; /* توسيط عمودي */
            gap: 8px !important; /* مسافة بين العناصر */
        }
        /* تنسيق بادج الرانك نفسه (النسخة المدمجة والمصغرة) */
        #navbar-rank-badge {
            font-family: 'Tajawal', sans-serif; /* نفس خط الموقع */
            /* 🛑 التعديل: تصغير حجم الخط */
            font-size: 9px !important;
            font-weight: 900 !important;
            /* 🛑 التعديل: تقليل الحشو الداخلي */
            padding: 2px 6px !important;
            border-radius: 6px !important; /* حواف دائرية */
            /* نعتمد على الـ JS لتحديد اللون، لكن نُبقي على لون نص أبيض كإعداد أساسي */
            color: #fff !important;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            line-height: 1;
            /* نعتمد على الـ JS لتحديد الـ Box Shadow (لضمان ظهور الـ DIAMOND) */
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
            min-width: 50px; /* عرض أدنى عشان الكلام يبان */
            text-align: center;
            margin-top: 0 !important; /* إلغاء أي هوامش غلط */
            display: none; /* مخفي لحد ما الجافاسكريبت يملاه */
            /* 🛑 حذف أي محاولة لفرض الخلفية الصفراء من الـ CSS */
        }

        /* ========================================= */
        /* 🎮 GAMIFICATION: User Ranks Styles */
        /* ========================================= */

        /* 1. الانتقال السلس لتغيير اللون */
        .profile-avatar-large,
        #nav-user-img {
            transition: all 0.5s ease-in-out;
            box-sizing: border-box; /* عشان البوردر مايكبرش الصورة */
        }

        #avatar-selection-area .avatars-grid img.selected-avatar {
            /* الإطار الأصفر الثابت عند التحديد */
            border-color: var(--accent-yellow) !important;
            box-shadow: 0 0 15px var(--accent-yellow);
            transform: scale(1.1);
        }
        /* 🥉 رتبة البرونز (الافتراضي) */
        .rank-bronze {
            border: 3px solid #cd7f32 !important; /* لون نحاسي */
            filter: grayscale(0.2); /* تغميق بسيط */
        }

        /* 🥇 رتبة الجولد (بعد أول شراء) */
        .rank-gold {
            border: 3px solid #ffd700 !important; /* لون ذهبي */
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.6); /* وهج ذهبي */
        }

        /* 💎 رتبة الدايموند (للكبار فقط) */
        .rank-diamond {
            border: 3px solid #00e5ff !important; /* سماوي */
            box-shadow: 0 0 20px rgba(0, 229, 255, 0.8); /* وهج أزرق قوي */
            animation: diamond-pulse 2s infinite alternate; /* حركة تنفس */
        }

        /* حركة النبض للدايموند */
        @keyframes diamond-pulse {
            0% {
                box-shadow: 0 0 15px rgba(0, 229, 255, 0.5);
                border-color: #00e5ff;
            }

            100% {
                box-shadow: 0 0 30px rgba(0, 229, 255, 1);
                border-color: #fff;
            }
        }

        /* بادج اسم الرتبة (يظهر تحت الاسم) */
        .user-rank-badge {
            font-size: 10px;
            font-weight: bold;
            padding: 2px 8px;
            border-radius: 10px;
            margin-top: 3px;
            display: inline-block;
            color: #110e1a; /* لون النص أسود */
        }

        .auth-modal-body {
            display: flex !important;
            flex-direction: column !important;
            align-items: center !important;
            justify-content: center !important;
            gap: 15px !important; /* مسافة موحدة بين كل العناصر */
            padding: 40px 30px !important;
            width: 100% !important;
            max-width: 400px !important; /* عرض مثالي */
            margin: 0 auto !important;
        }

            .auth-modal-body h2 {
                color: white !important;
                margin: 0 0 10px 0 !important;
                font-size: 24px !important;
                border: none !important;
            }

        /* 2. حاوية الحقول (لضمان العرض الكامل) */
        .auth-fields-container {
            width: 100% !important;
            display: flex !important;
            flex-direction: column !important;
            gap: 12px !important; /* مسافة بين الايميل والباسورد */
        }

        .auth-input-group {
            width: 100% !important;
            margin: 0 !important;
        }

        /* 3. توحيد شكل الحقول */
        .auth-field {
            width: 100% !important;
            height: 50px !important;
            padding: 0 15px !important;
            border-radius: 10px !important;
            border: 1px solid #8e6abf !important;
            background: rgba(255, 255, 255, 0.05) !important;
            color: white !important;
            font-size: 16px !important;
            text-align: center !important;
            box-sizing: border-box !important;
            transition: all 0.3s ease !important;
        }

            .auth-field:focus {
                border-color: var(--accent-yellow) !important;
                background: rgba(255, 255, 255, 0.1) !important;
                box-shadow: 0 0 10px rgba(255, 204, 0, 0.2) !important;
                outline: none !important;
            }

        /* 4. توحيد شكل الأزرار (زر الدخول وزر جوجل) */
        .modal-submit-btn, .google-auth-btn {
            width: 100% !important;
            height: 50px !important; /* نفس ارتفاع الحقول */
            display: flex !important;
            align-items: center !important; /* توسيط عمودي */
            justify-content: center !important; /* توسيط أفقي (أهم سطر) */
            border-radius: 10px !important;
            font-size: 16px !important;
            font-weight: bold !important;
            cursor: pointer !important;
            margin: 0 !important;
            transition: transform 0.2s !important;
            padding: 0 !important; /* إزالة أي حشو قد يؤثر على التوسيط */
        }

        /* زر الدخول */
        .modal-submit-btn {
            background-color: var(--accent-yellow) !important;
            color: var(--black-text) !important;
            border: none !important;
        }

        /* زر جوجل */
        .google-auth-btn {
            background-color: white !important;
            color: #333 !important;
            gap: 10px !important; /* مسافة ثابتة بين اللوجو والنص */
            border: none !important;
        }

            /* ✅ إضافة هامة: ضمان عدم تمدد الصورة أو النص للأطراف */
            .google-auth-btn img,
            .google-auth-btn span {
                flex-grow: 0 !important; /* يمنع العنصر من أخذ مساحة فارغة */
                margin: 0 !important;
            }

            .modal-submit-btn:hover, .google-auth-btn:hover {
                transform: translateY(-2px) !important;
                filter: brightness(1.1);
            }

        /* 5. تنسيق الفاصل (أو) */
        .auth-separator {
            width: 100% !important;
            display: flex !important;
            align-items: center !important;
            color: rgba(255,255,255,0.5) !important;
            font-size: 14px !important;
            margin: 5px 0 !important;
        }

            .auth-separator::before, .auth-separator::after {
                content: "";
                flex: 1 !important;
                height: 1px !important;
                background: rgba(255,255,255,0.2) !important;
            }

            .auth-separator span {
                padding: 0 10px !important;
            }

        /* 6. النصوص السفلية */
        .auth-footer-text {
            margin-top: 10px !important;
            color: #ccc !important;
            font-size: 14px !important;
            line-height: 1.6 !important;
        }

        .auth-toggle-btn {
            color: var(--accent-yellow) !important;
            font-weight: bold !important;
            cursor: pointer !important;
            text-decoration: underline !important;
            display: inline-block !important;
            margin-right: 5px !important;
        }

        /* ========================================= */
        /* ✅ تنسيقات زر جوجل والفاصل */
        /* ========================================= */

        /* 1. تنسيق الفاصل (كلمة "أو") */
        .auth-separator {
            display: flex;
            align-items: center;
            text-align: center;
            margin: 15px 0;
            color: #aaa;
            font-size: 14px;
            width: 100%;
        }

            .auth-separator::before,
            .auth-separator::after {
                content: '';
                flex: 1;
                border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            }

            .auth-separator span {
                padding: 0 10px;
            }

        /* 2. تنسيق زر جوجل */
        .google-auth-btn {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            background-color: white !important; /* لون أبيض */
            color: #333 !important; /* نص غامق */
            border: none !important;
            border-radius: 8px !important;
            padding: 12px !important;
            font-size: 16px !important;
            font-weight: bold !important;
            cursor: pointer !important;
            transition: transform 0.2s, box-shadow 0.2s !important;
            margin-top: 0 !important; /* إلغاء الهامش العلوي الافتراضي للأزرار */
        }

            .google-auth-btn img {
                width: 20px;
                height: 20px;
            }

            .google-auth-btn:hover {
                transform: translateY(-2px);
                box-shadow: 0 4px 15px rgba(255, 255, 255, 0.3) !important;
                background-color: #f1f1f1 !important;
            }

            .google-auth-btn:active {
                transform: scale(0.98);
            }

        /* تنسيق أيقونات القائمة المنسدلة للمستخدم */
        .user-dropdown-icon {
            width: 22px !important; /* حجم الأيقونة */
            height: 22px !important;
            object-fit: contain;
            margin-left: 10px !important; /* مسافة بين الصورة والنص (لأن الموقع RTL) */
            filter: brightness(0) invert(1); /* (اختياري) يخلي الأيقونة بيضاء لو هي سوداء */
        }

        /* تنسيق خاص لأيقونة الخروج عشان لونها يبقى أحمر */
        .logout-icon-style {
            filter: none !important; /* عشان نحافظ على لون الصورة الأصلي لو كانت حمراء */
        }
        /* ✅ استهداف زر تسجيل الخروج (عن طريق اللون #ff4757) */
        #user-dropdown-menu a[style*="#ff4757"] {
            color: #ff4757 !important; /* اللون الأحمر الفاتح */
            text-shadow: 1px 1px 3px rgba(255, 71, 87, 0.5) !important; /* ظل خفيف للبروز */
        }

            /* ✅ حالة التفاعل على زر تسجيل الخروج (نجعله أحمر داكن) */
            #user-dropdown-menu a[style*="#ff4757"]:hover {
                color: #cc3947 !important; /* أحمر داكن عند المرور */
                background-color: rgba(255, 71, 87, 0.1) !important; /* خلفية حمراء خفيفة عند المرور */
            }
        /* ✅ القاعدة الموحدة لكل الروابط داخل القائمة (تعطيها اللون الأبيض) */
        #user-dropdown-menu a.nav-link {
            color: var(--light-text) !important; /* اللون الأبيض الرمادي */
            /* نلغي أي ظل نصي قد يسبب الوهج الأحمر */
            text-shadow: none !important;
            transition: all 0.3s ease;
        }

            /* ✅ حالة التفاعل (Hover): نحافظ على اللون الأبيض الناصع أو الأصفر الأساسي */
            #user-dropdown-menu a.nav-link:hover {
                color: var(--accent-yellow) !important; /* اللون الأصفر عند المرور */
                background-color: rgba(255, 255, 255, 0.1) !important; /* خلفية شفافة عند المرور */
            }

        #my-orders-auth-page,
        #my-orders-page {
            /* ✅ نضبط الهامش العلوي لـ 'صفر' لمنع تضاعف الفجوات */
            margin-top: 0 !important;
            /* نضبط الهامش السفلي لمسافة مناسبة */
            margin-bottom: 40px !important;
            /* نلغي أي بادينج علوي داخلي قد يتعارض */
            padding-top: 0 !important;
        }


        /* ====================================================== */
        /* ✅ إصلاح الفراغ العلوي لصفحات الطلبات والتسجيل */
        /* ====================================================== */

        #my-orders-auth-page,
        #my-orders-page {
            /* نلغي أي هامش علوي مبالغ فيه (نعتمد على Body Padding فقط) */
            margin-top: 20px !important;
            /* إذا كنت قد وضعت قيمة كبيرة مثل 80px في الـ HTML،
        استبدلها بـ 20px أو أقل لترك مسافة تنفس بسيطة تحت الناف بار */
            padding-top: 0 !important;
        }

        /* لضمان ثبات النافذة المنبثقة وعدم تأثرها بالـ body padding */
        .modal {
            margin-top: 0 !important;
        }

        /* لضمان أن الروابط الرئيسية في الناف بار لا تحتوي على هامش علوي يدفعها لأسفل */
        .nav-link {
            margin-top: 0 !important;
        }
        /* ====================================================== */
        /* ✅ START: تنسيقات نافذة تسجيل الدخول (#authModal) */
        /* ====================================================== */

        /* تنسيق جسم النافذة ليكون متناسق */
        #authModal .modal-body {
            max-width: 450px !important; /* زيادة العرض */
            width: 95% !important;
            padding: 40px 30px !important; /* زيادة المساحة الداخلية */
            display: flex !important;
            flex-direction: column !important;
            align-items: center !important;
        }

        /* 1. ضبط الحاوية الخاصة بالحقول */
        #authModal .auth-input-group {
            width: 100% !important;
            display: block !important;
            margin-bottom: 15px !important;
        }

        /* 2. تنسيق حقل الإدخال (عريض وشكله مودرن) */
        #authModal input.auth-field {
            width: 100% !important;
            min-width: 100% !important;
            max-width: 100% !important;
            box-sizing: border-box !important; /* لضمان احتساب الحواف والمسافات داخل العرض */
            padding: 15px !important;
            height: 55px !important; /* ارتفاع ثابت ومريح */
            font-size: 16px !important;
            text-align: center !important;
            /* تنسيق الشكل */
            background: rgba(255, 255, 255, 0.05) !important;
            border: 1px solid #8e6abf !important;
            border-radius: 10px !important;
            color: white !important;
            margin: 0 !important;
            transition: all 0.3s ease !important;
        }

        /* تنسيق الـ Placeholder */
        #authModal .auth-field::placeholder {
            color: #cccccc;
            text-align: center;
            opacity: 0.7;
            font-size: 14px;
        }

        /* تأثير التركيز (Focus) */
        #authModal input.auth-field:focus {
            border-color: var(--accent-yellow) !important;
            background-color: rgba(255, 255, 255, 0.1) !important;
            outline: none !important;
            box-shadow: 0 0 15px rgba(255, 204, 0, 0.15) !important; /* إضافة توهج خفيف */
        }

        /* 3. تنسيق زر التنفيذ (عريض ومميز) */
        #authModal .modal-submit-btn {
            width: 100% !important;
            padding: 15px !important;
            font-size: 18px !important;
            margin-top: 15px !important;
            background-color: var(--accent-yellow) !important;
            color: var(--black-text) !important;
            border: none !important;
            border-radius: 10px !important;
            font-weight: bold !important;
            cursor: pointer !important;
            box-shadow: 0 4px 15px rgba(255, 204, 0, 0.3);
            transition: transform 0.2s, box-shadow 0.2s;
        }

            #authModal .modal-submit-btn:hover {
                box-shadow: 0 6px 20px rgba(255, 204, 0, 0.5);
                transform: translateY(-2px);
                background-color: #e6b800 !important;
            }

        /* 4. تنسيق رابط تبديل الوضع */
        .auth-toggle-btn {
            color: var(--accent-yellow) !important;
            cursor: pointer;
            font-weight: bold;
            font-size: 1.1rem; /* تكبير الخط قليلاً */
            text-decoration: underline;
            transition: color 0.2s ease;
        }

            .auth-toggle-btn:hover {
                color: #ffffff !important;
            }

        /* ====================================================== */
        /* ✅ END: تنسيقات نافذة تسجيل الدخول (#authModal) */
        /* ====================================================== */

        /* تنسيقات مجموعة الأزرار */
        .auth-buttons-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
            width: 100%;
            max-width: 300px; /* عرض موحد للأزرار */
            margin: 20px auto 0 auto;
        }

            .auth-buttons-group .auth-action-btn {
                width: 100%;
                padding: 12px 0;
                font-size: 16px;
                font-weight: bold;
                border-radius: 8px;
                transition: all 0.3s ease;
            }

            .auth-buttons-group .btn-signup {
                background-color: var(--accent-yellow);
                color: var(--black-text);
                border: none;
                box-shadow: 0 4px 10px rgba(255, 204, 0, 0.4);
            }

            .auth-buttons-group .btn-login {
                background: transparent;
                color: var(--light-text);
                /* ✅✅ التعديل هنا: استخدام اللون الأبيض (#FFFFFF) للإطار ✅✅ */
                border: 2px solid white;
            }

                .auth-buttons-group .btn-login:hover {
                    border-color: var(--accent-yellow); /* يتحول إلى الذهبي عند المرور */
                    color: var(--accent-yellow);
                    transform: translateY(-2px);
                }

            .auth-buttons-group .btn-signup:hover {
                box-shadow: 0 6px 15px rgba(255, 204, 0, 0.6);
                transform: translateY(-2px);
            }

        /* ====================================================== */
        /* ✅ START: تنسيقات صفحة تسجيل الدخول الجديدة (#my-orders-auth-page) */
        /* ====================================================== */

        /* 1. ضبط الحاوية الرئيسية لتكون في المنتصف بأبعاد محددة */
        #my-orders-auth-page {
            /* تقليل أقصى عرض و إضافة هوامش علوية لتحسين المظهر */
            max-width: 500px !important;
            padding: 40px 25px !important;
            margin-top: 80px !important;
        }

        /* 2. تنسيق مجموعة الأزرار (لضمان العرض المتساوي والمسافة) */
        .auth-buttons-group {
            display: flex;
            flex-direction: column;
            gap: 12px; /* مسافة بين الأزرار */
            width: 100%;
            max-width: 300px; /* عرض موحد للأزرار */
            margin: 20px auto 0 auto; /* توسيط المجموعة */
        }

            /* 3. تنسيق الأزرار المشتركة (الحجم والحواف) */
            .auth-buttons-group .auth-action-btn {
                width: 100%;
                padding: 12px 0;
                font-size: 16px;
                font-weight: bold;
                border-radius: 8px;
                transition: all 0.3s ease;
            }

            /* 4. تنسيق زر التسجيل (الأساسي - الأصفر) */
            .auth-buttons-group .btn-signup {
                background-color: var(--accent-yellow);
                color: var(--black-text);
                border: none;
                box-shadow: 0 4px 10px rgba(255, 204, 0, 0.4);
            }

            .auth-buttons-group .btn-login {
                background: transparent;
                color: var(--light-text);
                /* ✅✅ التعديل هنا: استخدام اللون الأبيض (#FFFFFF) للإطار ✅✅ */
                border: 2px solid white;
            }

                .auth-buttons-group .btn-login:hover {
                    border-color: var(--accent-yellow); /* يتحول إلى الذهبي عند المرور */
                    color: var(--accent-yellow);
                    transform: translateY(-2px);
                }

            .auth-buttons-group .btn-signup:hover {
                box-shadow: 0 6px 15px rgba(255, 204, 0, 0.6);
                transform: translateY(-2px);
            }
        /* ====================================================== */
        /* ✅ END: تنسيقات صفحة تسجيل الدخول الجديدة */
        /* ====================================================== */

        #user-account-btn {
            /* المسافة دي هتدفع الزر بالكامل مسافة 20 بيكسل لليسار */
            margin-right: 20px !important;
            /* لو حابب تزود المسافة اكتر خليها 30px مثلاً */
        }

            /* عشان نلغي أي تضارب محتمل من أكواد قديمة */
            #user-account-btn span {
                margin-right: 0 !important;
                margin-left: 0 !important;
            }

        /* تنسيق صفحة البروفايل */
        .current-avatar-wrapper {
            position: relative;
            display: inline-block;
            width: 120px;
            height: 120px;
        }
        /* ====================================================== */
        /* 7. تنسيق صور البروفايل (Avatar Selection) */
        /* ====================================================== */

        .current-avatar-wrapper {
            position: relative;
            display: inline-block;
            width: 120px;
            height: 120px;
            margin-bottom: 15px;
        }

        .profile-avatar-large {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
            border: 3px solid var(--accent-yellow);
            box-shadow: 0 0 20px rgba(255, 204, 0, 0.4);
        }

        .edit-avatar-icon {
            position: absolute;
            bottom: 5px;
            right: 5px;
            background: var(--main-purple);
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border: 2px solid white;
            font-size: 14px;
            transition: transform 0.2s;
        }

            .edit-avatar-icon:hover {
                transform: scale(1.1);
                background-color: var(--accent-yellow);
                color: black;
            }

        .avatars-grid {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            padding: 10px;
        }

            .avatars-grid img {
                width: 60px;
                height: 60px;
                border-radius: 50%;
                cursor: pointer;
                border: 3px solid transparent;
                transition: all 0.3s;
            }

        #profile-settings-page {
            position: relative !important; /* ضروري جداً */
            overflow: hidden !important; /* عشان البلور مايخرجش بره الحواف */
            border-radius: 24px !important;
            border: 1px solid rgba(255, 255, 255, 0.15) !important;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.6) !important;
            padding: 40px 30px !important;
            background: transparent !important; /* خلينا الخلفية شفافة عشان الصورة اللي ورا تبان */
            z-index: 1; /* عشان نضمن انه فوق أي حاجة تانية */
        }

            /* 2. ده الكود المسؤول عن الصورة والبلور (بيتحط في طبقة ورا الكلام) */
            #profile-settings-page::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                z-index: -1; /* أهم سطر: بيرجع الصورة ورا الكلام */
                /* الصورة وطبقة تغميق خفيفة */
                background-image: linear-gradient(rgba(20, 10, 30, 0.4), rgba(20, 10, 30, 0.4)), url('./images/my-keys-bg.png') !important;
                background-size: cover !important;
                background-position: center !important;
                background-attachment: fixed !important;
                /* سحر البلور */
                filter: blur(20px) !important; /* زود أو قلل الرقم براحتك */
                transform: scale(1.1); /* تكبير بسيط عشان حواف البلور متبقاش بيضا */
            }

        .avatars-grid img:hover {
            transform: scale(1.15);
            border-color: var(--accent-yellow);
            box-shadow: 0 0 15px rgba(255, 204, 0, 0.5);
        }

        /* تنسيق خاص بصفحة طلباتي عشان تظهر بشكل سليم */
        #my-orders-page {
            margin-top: 100px !important; /* عشان تنزل تحت الناف بار */
            margin-bottom: 50px !important; /* مسافة فوق الفوتر */
            min-height: 60vh; /* عشان الفوتر ميعلاش لفوق لو مفيش طلبات */
            width: 90%;
            max-width: 800px; /* عرض مناسب للكروت */
            margin-left: auto;
            margin-right: auto;
            display: none; /* مخفية افتراضياً */
            flex-direction: column;
        }

        /* تغيير خلفية قسم الطلبات وتسجيل الدخول */
        #my-orders-page,
        #my-orders-auth-page {
            /* الصورة مع طبقة تعتيم خفيفة عشان الكلام يبان */
            background-image: linear-gradient(rgba(20, 10, 30, 0.85), rgba(20, 10, 30, 0.85)), url('./images/my-keys-bg.png') !important;
            /* خصائص تثبيت الخلفية */
            background-size: cover !important;
            background-position: center !important;
            background-attachment: fixed !important;
            /* إلغاء أي لون أو تأثير زجاجي قديم */
            background-color: transparent !important;
            margin-top: 0 !important;
            padding-top: 0 !important;
            backdrop-filter: none !important;
            -webkit-backdrop-filter: none !important;
            /* لون الإطار */
            border: 1px solid #8e6abf !important;
        }

        #my-orders-auth-page {
            /* 1. إلغاء الهامش العلوي المبالغ فيه (لو كان هناك هامش كبير في كود آخر) */
            margin-top: 0 !important;
            /* 2. ✅✅ السطر الحاسم: إضافة حشو علوي لضمان نزول الصفحة تحت الناف بار الثابت */
            padding-top: 70px !important;
            /* 3. الإبقاء على التوسيط الأفقي */
            margin-left: auto !important;
            margin-right: auto !important;
        }

        /* تنسيق كارت الطلب في صفحة طلباتي */
        .order-history-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: transform 0.2s ease;
        }

            .order-history-card:hover {
                transform: translateY(-3px);
                background: rgba(255, 255, 255, 0.08);
                border-color: var(--accent-yellow);
            }

        .order-card-img {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            object-fit: cover;
        }

        .order-card-info {
            flex-grow: 1;
            text-align: right;
        }

        .order-card-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }

        .order-id {
            font-size: 12px;
            color: #aaa;
            font-family: monospace;
        }

        .order-date {
            font-size: 12px;
            color: #aaa;
        }

        .order-product-name {
            font-size: 16px;
            font-weight: bold;
            color: white;
            margin: 0;
        }

        .order-card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 8px;
        }

        .order-price {
            color: var(--accent-yellow);
            font-weight: bold;
        }

        .order-status {
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: bold;
        }

        .status-pending {
            background: rgba(255, 165, 0, 0.2);
            color: orange;
        }

        .status-completed {
            background: rgba(40, 167, 69, 0.2);
            color: #28a745;
        }

        .status-rejected {
            background: rgba(220, 53, 69, 0.2);
            color: #dc3545;
        }

        /* ========================================= */
        /* 🎩 KAITO KID EASTER EGG STYLES */
        /* ========================================= */

        /* 1. تصميم بطاقة كايتو كيد */
        #kaito-card {
            position: fixed;
            z-index: 9999; /* فوق كل شيء */
            width: 60px; /* حجم تقريبي لنفس حجم اللوجو */
            height: auto;
            display: none; /* مخفي في البداية */
            /* تأثير الظل عشان يبان طاير */
            filter: drop-shadow(5px 10px 10px rgba(0,0,0,0.5));
            /* الحركة الانتقالية للطيران */
            transition: all 1s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

            #kaito-card img {
                width: 100%;
                height: auto;
                background-color: white; /* خلفية بيضاء للكارت */
                padding: 2px;
                border-radius: 4px;
                border: 1px solid #ccc;
            }

        /* تنسيق الدخان */
        #kid-smoke {
            position: fixed;
            z-index: 10001;
            width: 120px;
            height: 120px;
            background: radial-gradient(circle, #ffffff 0%, transparent 70%);
            border-radius: 50%;
            opacity: 0;
            pointer-events: none;
            transform: scale(0.1);
        }

        /* حركة انفجار الدخان */
        @keyframes smokePoof {
            0% {
                opacity: 0.9;
                transform: scale(0.1);
            }

            50% {
                opacity: 0.7;
                transform: scale(1.5);
            }

            100% {
                opacity: 0;
                transform: scale(2.5);
            }
        }

        .poof-effect {
            animation: smokePoof 0.6s ease-out forwards;
        }


        /* ========================================= */
        /* 🕵️‍♂️ SOHAYL'S DIARY (NEW) STYLES */
        /* ========================================= */

        #sohayl-diary-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            /* خلفية مختلفة للتمييز - مثلاً لون فاتح أو سكري */
            background-color: #f8f8e8;
            z-index: 99999;
            display: none; /* مخفية بشكل افتراضي */
            overflow-y: auto;
            padding: 50px;
            box-sizing: border-box;
            direction: rtl;
            text-align: right;
            cursor: text;
            /* خط هادئ يناسب مذكراتك */
            font-family: 'Tajawal', sans-serif;
            color: #303030;
        }

        /* 1. ستايل الأكواد المخفية */
        .hidden-sohayl-line {
            /* لون النص مطابق للخلفية */
            color: #f8f8e8 !important;
            display: block;
            font-weight: bold;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 2.5;
        }

        /* 2. ستايل التظليل (Highlighting) للكشف عن النص المخفي */
        #sohayl-diary-overlay ::selection {
            /* لون تظليل مختلف عن مذكرة إيتاكورا (أصفر قوي مثلاً) */
            background-color: #ffcc00 !important;
            color: #000000 !important;
        }

        /* دعم متصفح فايرفوكس */
        #sohayl-diary-overlay ::-moz-selection {
            background-color: #ffcc00 !important;
            color: #000000 !important;
        }

        /* 3. تنسيق زر الإغلاق ليتناسب مع الخلفية الفاتحة */
        #sohayl-diary-overlay .close-diary-btn {
            color: #000000;
        }


        /* ========================================= */
        /* ✅ إصلاح النافذة المنبثقة في وضع التقلص */
        /* ========================================= */

        /* -------------------------------------------------------------------------- */
        /* القاعدة الموحدة للكمبيوتر (Default body.aptx-child-mode)                   */
        /* التصغير: scale(0.60) / التعويض: scale(1 / 0.60 = 1.666)                   */
        /* -------------------------------------------------------------------------- */
        body.aptx-child-mode {
            /* غيرنا الوقت من 2s لـ 8s (ثماني ثواني كاملة) */
            transition: transform 8s cubic-bezier(0.68, -0.55, 0.27, 1.55) !important;
            /* باقي الخصائص زي ما هي */
            transform: scale(0.8);
            transform-origin: center top;
            border: 15px solid #111;
            border-radius: 30px;
            box-shadow: 0 0 100px rgba(0,0,0,0.9);
            margin: 20px auto;
            height: 100vh;
            overflow-y: auto !important;
            overflow-x: hidden;
            background-color: #1e1132;
            width: 90%;
        }

        @media (max-width: 768px) {
            body.aptx-child-mode .modal {
                transform: translate(-50%, -50%) scale(1.176) !important;
            }
        }
        /* -------------------------------------------------------------------------- */
        /* القاعدة الموحدة للإصلاح العام لطبقات Fixed & Overlay                       */
        /* -------------------------------------------------------------------------- */
        body.aptx-child-mode .overlay,
        body.aptx-child-mode .modal {
            /* نضمن أن هذه العناصر تعود لتثبت على الـ Viewport الحقيقي */
            position: fixed !important;
            perspective: none !important;
            transform-style: flat !important;
            transform-origin: center !important;
        }

        body.aptx-child-mode .overlay {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100vw !important; /* عرض الشاشة بالكامل */
            height: 100vh !important; /* ارتفاع الشاشة بالكامل */
            transform: none !important; /* إلغاء أي تصغير موروث */
            z-index: 2147483646 !important;
        }

        @media (max-width: 768px) {
            body.aptx-child-mode {
                transform: scale(0.85) !important;
                transform-origin: center center;
            }

                /* ✅ تعويض التصغير في الموبايل (1 / 0.85 ≈ 1.176) */
                body.aptx-child-mode .modal {
                    transform: translate(-50%, -50%) scale(1.176) !important;
                }
        }
        /* 3. منع التمرير في الخلفية تماماً عند فتح النافذة في هذا الوضع */
        body.aptx-child-mode.modal-open {
            overflow: hidden !important;
        }

        /* 4. التأكد من أن نافذة الدفع (paymentModal) تظهر في أعلى طبقة */
        #paymentModal.is-visible {
            z-index: 9999999 !important;
        }

        /* ========================================= */
        /* 📱 APTX 4869: Responsive Shrink Mode */
        /* (هذه القواعد تبقى كما هي - مسؤولة عن تصغير الجسم) */
        /* ========================================= */
        body.aptx-child-mode {
            /* ❌ هذا السطر يسبب المشكلة - الحل هو جعله ينشئ سياق تكديس جديد */
            /* ✅ الحل: إضافة خاصية 'isolation: isolate' */
            isolation: isolate;
            transform: scale(0.60) !important;
            transform-origin: top center;
            /* ✅ تم تعديل زمن الانيميشن ليصبح 1.5 ثانية */
            transition: transform 1.5s ease-in-out;
            border: 15px solid #000;
            border-radius: 25px;
            box-shadow: 0 0 100px rgba(0,0,0,0.9), 0 0 0 1000px #100a1c;
            height: 100vh;
            width: 100%;
            overflow-y: scroll !important;
            overflow-x: hidden;
            background-color: #1e1132;
            pointer-events: auto !important;
            cursor: auto !important;
        }

        @media (max-width: 768px) {
            body.aptx-child-mode {
                /* ✅ تصغير للموبايل إلى 85% */
                transform: scale(0.85) !important;
                transform-origin: center center;
                border: 5px solid #000;
                border-radius: 15px;
                height: 98vh;
                margin-top: 1vh;
            }

                /* -------------------------------------------------------------------------- */
                /* ✅ تصحيح التعويض في الموبايل (1 / 0.85 = 1.176) */
                /* -------------------------------------------------------------------------- */
                body.aptx-child-mode .modal {
                    /* ✅ هذا هو مفتاح الحل: position: fixed يعمل الآن بالنسبة لشاشة العرض */
                    position: fixed !important;
                    top: 50% !important;
                    left: 50% !important;
                    /* ✅ تعويض التصغير (1 / 0.60 ≈ 1.66) لتبدو بحجمها الطبيعي */
                    transform: translate(-50%, -50%) scale(1.66) !important;
                    /* خصائص لضمان عدم وجود أي تشويه موروث */
                    z-index: 2147483647 !important;
                    transform-style: flat !important;
                    transform-origin: center !important;
                    /* إعدادات الحجم والسكرول */
                    width: 90% !important;
                    max-width: 600px !important;
                    max-height: 85vh !important;
                    overflow-y: auto !important;
                }
        }

        /* 3. إصلاح العناصر المثبتة (Navbar & Cart) */
        body.aptx-child-mode #navbar,
        body.aptx-child-mode .fixed-cart-button,
        body.aptx-child-mode #theme-toggle-btn,
        body.aptx-child-mode #mobile-nav {
            position: absolute !important;
            width: 100%;
            left: 0;
            right: 0;
        }

        /* ================================================== */
        /* 1. Global Highlight (لباقي الموقع بالكامل)         */
        /* ================================================== */
        ::selection {
            /* لون بنفسجي فاتح جداً وشفاف */
            background-color: rgba(200, 180, 255, 0.5);
            color: inherit; /* يحافظ على لون النص الأصلي */
        }

        ::-moz-selection {
            background-color: rgba(200, 180, 255, 0.5);
            color: inherit;
        }

        /* ================================================== */
        /* 2. Itakura Diary Highlight (خاص بصفحة المذكرات فقط) */
        /* ================================================== */

        /* نستخدم ID المذكرات لضمان أن هذا اللون يظهر هناك فقط */
        #itakura-diary-overlay ::selection {
            background-color: #3B6298 !important; /* ⬅️ الأزرق الخاص بالأنمي */
            color: #ffffff !important; /* النص يتحول للأبيض */
        }

        /* دعم متصفح فايرفوكس للمذكرات */
        #itakura-diary-overlay ::-moz-selection {
            background-color: #3B6298 !important;
            color: #ffffff !important;
        }
        /* ========================================= */
        /* 🛒 إصلاح زر كود الخصم (مربع ثابت) */
        /* ========================================= */

        /* 1. الحاوية: تضمن أن العناصر بجانب بعضها في اليسار */
        #cartModal .discount-code-container {
            display: flex !important;
            flex-wrap: nowrap !important;
            align-items: center !important;
            justify-content: flex-end !important; /* محاذاة لليسار في RTL */
            gap: 8px !important;
            width: 100% !important;
        }

            /* 2. حقل الإدخال: يأخذ مساحة مناسبة */
            #cartModal .discount-code-container input {
                width: 140px !important; /* عرض مناسب للكود */
                height: 38px !important; /* ارتفاع موحد */
                padding: 0 10px !important;
                font-size: 13px !important;
                margin: 0 !important;
                border-radius: 6px !important;
                text-align: center !important;
            }

            /* 3. الزر: مربع صغير وثابت لا ينضغط */
            #cartModal .discount-code-container button {
                width: 38px !important; /* العرض */
                height: 38px !important; /* الارتفاع (نفس حقل الإدخال) */
                min-width: 38px !important; /* ⛔ هذا السطر يمنع الانكماش */
                flex-shrink: 0 !important; /* ⛔ وهذا السطر يؤكد منع الانكماش */

                padding: 0 !important;
                margin: 0 !important;
                border-radius: 6px !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                font-size: 18px !important;
                font-weight: bold !important;
                line-height: 1 !important;
            }

        #xboxPopularGamesContainer {
            animation: none !important; /* إيقاف الحركة */
            transform: none !important; /* إلغاء التحويل */
            display: flex;
            flex-wrap: wrap !important; /* السماح للمنتجات بالنزول لسطر جديد */
            justify-content: center !important; /* توسيط المنتجات في الصفحة */
            width: 100% !important; /* العرض يملأ المساحة المتاحة فقط */
        }

            /* إلغاء التوقف عند الهوفر لأنه لم يعد يتحرك أصلاً */
            #xboxPopularGamesContainer:hover {
                animation-play-state: running;
            }

        /* ========================================= */
        /* 💊 APTX 4869: Intense Poison & Shrink */
        /* ========================================= */

        /* 1. الأنيميشن القوي (فترة الألم - أول 10 ثواني) */
        @keyframes poison-pulse {
            0% {
                transform: scale(1);
                filter: sepia(0) hue-rotate(0) blur(0);
            }

            10% {
                transform: scale(1.01) translate(1px, 1px);
                filter: sepia(1) hue-rotate(-50deg) blur(2px) contrast(1.2);
            }

            20% {
                transform: scale(0.99) translate(-1px, -1px);
                filter: sepia(1) hue-rotate(-50deg) blur(4px) contrast(1.5);
            }

            30% {
                transform: scale(1.02) translate(-2px, 2px);
                filter: sepia(1) hue-rotate(-50deg) blur(6px) contrast(2);
            }

            40% {
                transform: scale(0.98) translate(2px, -2px);
                filter: sepia(1) hue-rotate(-50deg) blur(3px) contrast(1.5);
            }

            50% {
                transform: scale(1.01);
                filter: sepia(1) hue-rotate(-50deg) blur(10px) contrast(2);
            }

            100% {
                transform: scale(1);
                filter: sepia(0) hue-rotate(0) blur(0);
            }
        }

        /* كلاس التسمم (يعمل لمدة 10 ثواني) */
        body.aptx-poisoned {
            animation: poison-pulse 4s ease-in-out infinite;
            overflow: hidden; /* منع الحركة أثناء الألم */
            pointer-events: none;
        }

        /* 2. وضع الطفل (الوضع الدائم بعد التقلص) */
        body.aptx-child-mode {
            transform: scale(0.8); /* تصغير لـ 80% عشان يبقى مقروء */
            transform-origin: center top; /* التثبيت من المنتصف بالأعلى */
            transition: transform 2s cubic-bezier(0.68, -0.55, 0.27, 1.55);
            /* إطار وتنسيق ليوحي بأنه شاشة صغيرة */
            border: 15px solid #111;
            border-radius: 30px;
            box-shadow: 0 0 100px rgba(0,0,0,0.9);
            margin: 20px auto; /* توسيط */
            /* أهم خصائص عشان السكرول يشتغل */
            height: 100vh;
            overflow-y: auto !important; /* إجبار السكرول */
            overflow-x: hidden;
            background-color: #1e1132;
            width: 90%; /* تقليل العرض شوية عشان يبان في النص */
        }

            /* ✅ إصلاح العناصر المثبتة (Navbar & Cart) عشان متبوظش */
            body.aptx-child-mode #navbar,
            body.aptx-child-mode .fixed-cart-button,
            body.aptx-child-mode #theme-toggle-btn,
            body.aptx-child-mode #mobile-nav {
                position: absolute !important; /* تتحول من fixed لـ absolute */
                width: 100%; /* عشان تفضل مالية العرض */
                top: auto;
                left: 0;
                right: 0;
            }

            /* إصلاح خاص للناف بار عشان يفضل فوق */
            body.aptx-child-mode #navbar {
                top: 0;
            }

        #aptx-overlay {
            position: fixed;
            /* نبدأ من خارج الشاشة لضمان التغطية الكاملة */
            top: -50vh;
            left: -50vw;
            /* حجم مضاعف للشاشة */
            width: 200vw;
            height: 200vh;
            background: black;
            z-index: 2147483647; /* أقصى طبقة ممكنة */
            display: none;
            opacity: 0;
            pointer-events: none;
            /* انتقال ناعم جداً للظهور والاختفاء */
            transition: opacity 3.5s cubic-bezier(0.4, 0, 0.2, 1);
            /* خدعة لضمان بقائها ثابتة بصرياً حتى لو الأب تحرك */
            transform: translate3d(0,0,0);
        }

        @keyframes blackout {
            from {
                opacity: 0.3;
            }

            to {
                opacity: 0.9;
            }
        }

        /* رسالة التحذير */
        #aptx-warning {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #ff0000;
            font-family: 'Courier New', monospace;
            font-size: 2.5rem;
            font-weight: bold;
            text-align: center;
            z-index: 200001;
            display: none;
            text-shadow: 0 0 20px black, 0 0 10px red;
            background: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border: 2px solid red;
        }

        /* ================================================== */
        /* 2. Itakura Diary Highlight (خاص بالمذكرات فقط - أزرق) */
        /* ================================================== */

        /* نستخدم !important لضمان عدم تأثر المذكرات باللون البنفسجي العام */
        #itakura-diary-overlay .diary-paper div::selection,
        #itakura-diary-overlay .diary-paper p::selection,
        #itakura-diary-overlay .diary-paper span::selection,
        #itakura-diary-overlay .diary-paper .hidden-line::selection {
            background-color: #3B6298 !important; /* ⬅️ الأزرق الخاص بالأنمي */
            color: #ffffff !important; /* النص يتحول للأبيض */
        }

        /* دعم متصفح فايرفوكس للمذكرات */
        #itakura-diary-overlay .diary-paper div::-moz-selection,
        #itakura-diary-overlay .diary-paper p::-moz-selection,
        #itakura-diary-overlay .diary-paper span::-moz-selection,
        #itakura-diary-overlay .diary-paper .hidden-line::-moz-selection {
            background-color: #3B6298 !important;
            color: #ffffff !important;
        }

        /* ========================================= */
        /* 🕵️‍♂️ Itakura Diary: Anime Accurate (Japanese) */
        /* ========================================= */

        #itakura-diary-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #fdfdf5; /* لون الورق الكريمي الفاتح */
            z-index: 99999;
            display: none;
            overflow-y: auto;
            padding: 50px;
            box-sizing: border-box;
            direction: ltr;
            text-align: left;
            cursor: text;
        }

            #itakura-diary-overlay.active {
                display: block;
            }

        .diary-paper {
            max-width: 800px;
            margin: 0 auto;
            padding-bottom: 150px;
            /* خط ياباني يشبه الويندوز القديم */
            font-family: 'MS Gothic', 'Hiragino Kaku Gothic ProN', sans-serif;
            font-weight: 500;
            font-size: 20px;
            line-height: 1.8;
        }

        /* التواريخ */
        .diary-date {
            font-weight: bold;
            margin-top: 40px;
            margin-bottom: 10px;
            color: #000;
            display: block;
        }

        /* النصوص الظاهرة (التمويه - بالأسود) */
        .visible-line {
            color: #000000;
            display: block;
            margin-bottom: 5px;
        }

        /* النصوص المخفية (نفس لون الخلفية - لا تظهر إلا بالهايلايت) */
        .hidden-line {
            color: #fdfdf5; /* نفس لون الخلفية بالظبط */
            display: inline;
        }



        /* الجملة الإنجليزية في النهاية (مخفية أيضاً) */
        .english-quote {
            font-family: 'Courier New', monospace;
            font-weight: bold;
            margin-top: 20px;
            display: block;
            direction: ltr;
        }

        /* شاشة الهاكينج */
        #itakura-console-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #000000;
            z-index: 100000;
            display: none;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            font-family: 'Courier New', monospace;
            overflow: hidden;
            cursor: none;
        }

        .console-text {
            color: #fff;
            font-size: 22px;
            font-weight: bold;
            text-align: left;
            white-space: pre-wrap;
            max-width: 800px;
            padding: 20px;
        }

        .console-highlight {
            color: #ff0000;
            text-shadow: 0 0 15px #ff0000;
        }

        .blinking-cursor {
            display: inline-block;
            width: 12px;
            height: 24px;
            background-color: #fff;
            animation: blink 0.8s infinite;
        }

        @keyframes blink {
            0%, 100% {
                opacity: 1;
            }

            50% {
                opacity: 0;
            }
        }

        .close-diary-btn {
            position: fixed;
            top: 20px;
            right: 30px;
            font-size: 30px;
            color: #000;
            cursor: pointer;
            z-index: 100001;
            font-weight: bold;
        }


        /* ========================================= */
        /* ✅ START: نظام إشعارات الجيمنج المخصص 🔔 */
        /* ========================================= */
        .game-alert-box {
            position: fixed;
            top: -100px; /* مخفية في الأعلى */
            left: 50%;
            transform: translateX(-50%);
            background: rgba(20, 10, 30, 0.95); /* خلفية بنفسجي غامق جداً */
            color: #fff;
            padding: 15px 30px;
            border-radius: 12px;
            border: 2px solid #ffcc00; /* إطار أصفر */
            box-shadow: 0 0 25px rgba(255, 204, 0, 0.4); /* توهج أصفر */
            z-index: 10000; /* فوق كل شيء */
            font-family: 'Tajawal', sans-serif;
            font-weight: bold;
            font-size: 16px;
            text-align: center;
            min-width: 300px;
            transition: top 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55); /* حركة بوب ناعمة */
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

            /* تنسيق الأيقونة داخل الرسالة */
            .game-alert-box i {
                font-size: 20px;
                color: #ffcc00;
            }

            /* كلاس لتفعيل الظهور */
            .game-alert-box.show {
                top: 30px; /* تنزل لمستوى الرؤية */
            }

            /* ألوان مختلفة حسب نوع الرسالة (اختياري) */
            .game-alert-box.error {
                border-color: #ff4757;
                box-shadow: 0 0 25px rgba(255, 71, 87, 0.4);
            }

            .game-alert-box.success {
                border-color: #2ecc71;
                box-shadow: 0 0 25px rgba(46, 204, 113, 0.4);
            }
        /* ========================================= */
        /* END: نظام إشعارات الجيمنج */
        /* ========================================= */

        /* ========================================= */
        /* ✅ START: Hacker Mode (Matrix Effect) 🕵️‍♂️ */
        /* ========================================= */
        body.hacker-mode {
            background: black !important;
            color: #00ff00 !important;
            font-family: 'Courier New', monospace !important;
            background-image: none !important; /* إلغاء خلفيات الصور */
        }

            /* تلوين كل العناصر بالأخضر والأسود */
            body.hacker-mode * {
                background-color: black !important;
                background-image: none !important;
                color: #00ff00 !important;
                border-color: #00ff00 !important;
                box-shadow: none !important;
                text-shadow: none !important;
            }

            /* تعديل الصور لتبدو خضراء (اختياري) */
            body.hacker-mode img {
                filter: grayscale(100%) sepia(100%) hue-rotate(50deg) saturate(500%) !important;
            }
        /* ========================================= */
        /* END: Hacker Mode */
        /* ========================================= */

        @media (max-width: 768px) {

            /* 1. إخفاء جملة "السعر يبدأ من" داخل كروت الاشتراكات */
            .subscription-item .sub-price {
                display: none !important;
            }

            /* 2. إخفاء زر "أضف إلى السلة" (أيقونة السلة) داخل كروت الاشتراكات */
            .subscription-item .add-to-cart-btn {
                display: none !important;
            }

            /* 3. تحسين شكل زر "اشتري الآن" ليأخذ العرض الكامل بعد اختفاء زر السلة */
            .subscription-item .buy-btn {
                width: 100% !important;
                margin: 0 !important;
            }
        }
        /* ====================================================== */
        /* ✅ تحسين وتنسيق كروت الإيجار (CO-OP) للموبايل */
        /* ====================================================== */

        @media (max-width: 768px) {

            /* 1. تحويل الكارت ليصبح عمودي (الصورة فوق والتفاصيل تحت) */
            .rental-card {
                flex-direction: column !important;
                height: auto !important;
                min-height: auto !important;
                width: 100% !important;
                max-width: 100% !important;
                margin-bottom: 20px !important;
            }

            /* 2. ضبط الصورة لتأخذ العرض الكامل وارتفاع مناسب */
            .rental-card-image {
                width: 100% !important;
                flex: none !important; /* إلغاء التمدد */
                height: 180px !important; /* ارتفاع ثابت للصورة */
                border-left: none !important;
                border-bottom: 1px solid rgba(166, 123, 91, 0.4) !important; /* خط فاصل تحت الصورة */
            }

            /* 3. ضبط شارة "ختمها الآن" */
            .rental-badge {
                top: 10px !important;
                right: -35px !important;
                font-size: 12px !important;
                padding: 4px 35px !important;
            }

            /* 4. تنسيق قسم التفاصيل (النص والأزرار) */
            .rental-card-details {
                text-align: center !important; /* توسيط الكلام */
                padding: 15px !important;
            }

                .rental-card-details h3 {
                    font-size: 1.3rem !important;
                    margin-bottom: 5px !important;
                }

                .rental-card-details p {
                    font-size: 0.9rem !important;
                    margin-bottom: 15px !important;
                    min-height: auto !important; /* إلغاء الطول الثابت للوصف */
                }

            /* 5. تنظيم أزرار المدة لتكون 2 في كل صف */
            .duration-selector-buttons {
                display: grid !important;
                grid-template-columns: 1fr 1fr; /* عمودين متساويين */
                gap: 8px !important;
                justify-content: center !important;
            }

            .duration-btn {
                width: 100% !important;
                font-size: 13px !important;
                padding: 8px 5px !important;
                margin: 0 !important;
            }

            /* 6. ضبط السعر وزر الإضافة للسلة */
            .rental-price-display {
                font-size: 1.4rem !important;
                margin: 15px 0 10px 0 !important;
            }

            .rental-card .buy-btn {
                width: 100% !important;
                padding: 12px !important;
                font-size: 16px !important;
            }

            /* 7. التأكد من ظهور قسم التحكم في الأسفل */
            .rental-controls {
                padding-top: 0 !important;
                margin-top: 0 !important;
            }
        }
        /* ====================================================== */
        /* ✅ تحسين كروت Steam Gift Cards للموبايل (شبكة ثنائية) */
        /* ====================================================== */

        @media (max-width: 768px) {

            /* 1. تحويل الحاوية إلى شبكة (Grid) من عمودين */
            #steamGiftCardsHomeContainer,
            #steamGiftCardsPageContainer {
                display: grid !important;
                grid-template-columns: 1fr 1fr !important; /* عمودين متساويين */
                gap: 10px !important; /* مسافة صغيرة بين الكروت */
                justify-content: center !important;
            }

                /* 2. ضبط أبعاد الكارت ليكون مرناً */
                #steamGiftCardsHomeContainer .product-item,
                #steamGiftCardsPageContainer .product-item {
                    width: 100% !important; /* يملأ العمود الخاص به */
                    min-width: 0 !important; /* منع التمدد الزائد */
                    margin: 0 !important;
                    padding: 8px !important; /* تقليل الحشو الداخلي */
                    min-height: auto !important; /* الارتفاع حسب المحتوى */
                }

                /* 3. تصغير ارتفاع الصورة لتناسب الكارت الصغير */
                #steamGiftCardsHomeContainer .product-image-wrapper,
                #steamGiftCardsPageContainer .product-image-wrapper {
                    height: 90px !important; /* ارتفاع مناسب للموبايل */
                    margin-bottom: 5px !important;
                }

                /* 4. ضبط حجم الخطوط (العنوان والسعر) */
                #steamGiftCardsHomeContainer h3,
                #steamGiftCardsPageContainer h3 {
                    font-size: 13px !important;
                    min-height: 25px !important; /* مسافة أمان للعنوان */
                    margin: 5px 0 !important;
                }

                #steamGiftCardsHomeContainer .product-price,
                #steamGiftCardsPageContainer .product-price {
                    font-size: 14px !important;
                    margin-bottom: 5px !important;
                }

                /* 5. تحسين الأزرار (إخفاء زر السلة الصغير وجعل زر الشراء يملأ العرض) */
                #steamGiftCardsHomeContainer .add-to-cart-btn,
                #steamGiftCardsPageContainer .add-to-cart-btn {
                    display: none !important; /* إخفاء زر السلة لتوفير مساحة */
                }

                #steamGiftCardsHomeContainer .buy-btn,
                #steamGiftCardsPageContainer .buy-btn {
                    width: 100% !important;
                    font-size: 12px !important;
                    padding: 6px !important;
                    margin-top: 0 !important;
                }

                /* 6. إخفاء أي نصوص وصفية إضافية قد تشوه الشكل */
                #steamGiftCardsHomeContainer .product-description-text,
                #steamGiftCardsPageContainer .product-description-text {
                    display: none !important;
                }
        }
        /* 1. تعريف حركة الاهتزاز (خفيفة، ناعمة، وأنيقة) */
        @keyframes soft-smooth-shake {
            0% {
                transform: translateY(-8px) rotate(0deg);
            }

            25% {
                transform: translateY(-8px) rotate(2deg);
            }
            /* زاوية صغيرة (2 درجة) لهزة خفيفة */
            75% {
                transform: translateY(-8px) rotate(-2deg);
            }
            /* عكس الحركة بنعومة */
            100% {
                transform: translateY(-8px) rotate(0deg);
            }
        }

        /* 2. التطبيق على قسم الأكثر مبيعاً فقط */
        #gamesContainer .product-item:hover {
            /* 0.5s: زمن الهزة الواحدة (خليناها أبطأ سنة عشان النعومة)
            ease-in-out: حركة انسيابية في البداية والنهاية
            6: عدد مرات التكرار (0.5 × 6 = 3 ثواني بالظبط)
         */
            animation: soft-smooth-shake 0.3s ease-in-out 3 !important;
        }

        html {
            scroll-behavior: smooth; /* يجعل السكرول ناعم عند الضغط على الروابط */
        }



        /* تنسيق اللمعة الهادئة (Soft Glow) - النسخة المحسنة */
        .glow-text-rtl {
            /* 1. الألوان: جعلنا التدرج أوسع قليلاً (30% - 70%) لتكون اللمعة أنعم وأكثر واقعية */
            background: linear-gradient(to left, #e6e6e6 30%, #ffffff 50%, #e6e6e6 70%);
            background-size: 200% auto;
            /* 2. قص الخلفية على النص */
            color: transparent; /* لضمان الشفافية في كل المتصفحات */
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            /* 3. التوهج: ناعم وهادئ */
            filter: drop-shadow(0 0 2px rgba(255, 255, 255, 0.5));
            /* 4. إعدادات الحركة */
            animation: glow-move 3s linear infinite;
            display: inline-block;
            font-weight: bold;
            /* تحسين الأداء */
            will-change: background-position;
        }
        /* 1. إعداد اللوجو ليكون ناعم في الحركة */
        #navbar .logo-area img {
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94); /* حركة ناعمة جداً */
            filter: drop-shadow(0 0 0 rgba(255, 255, 255, 0)); /* بداية بدون توهج */
            cursor: pointer;
            /* هذا السطر يمنع التفاعل مع المساحات الفارغة حول الصورة */
            pointer-events: auto;
        }

        /* 2. تعريف حركة "النبض الأبيض" الهادئة */
        @keyframes distinct-white-glow {
            0% {
                filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.6));
                transform: scale(1.08);
            }

            50% {
                /* التوهج يزيد في المنتصف */
                filter: drop-shadow(0 0 20px rgba(255, 255, 255, 1));
                transform: scale(1.12);
            }

            100% {
                filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.6));
                transform: scale(1.08);
            }
        }

        /* 3. التشغيل فقط عند لمس "الصورة" نفسها */
        #navbar .logo-area img:hover {
            /* تشغيل الأنيميشن */
            animation: distinct-white-glow 2s infinite ease-in-out;
        }
        /* تعريف الحركة (من اليمين لليسار) */
        @keyframes glow-move {
            0% {
                background-position: 200% center; /* تبدأ من أقصى اليمين */
            }

            100% {
                background-position: -200% center; /* تنتهي في أقصى اليسار */
            }
        }
        /* ====================================================== */
        /* ✅ START: تعديل توهج خيارات الاشتراك (بنفسجي ثابت) */
        /* ====================================================== */

        /* 1. هذا الكود يبقى كما هو (الكارت في وضعه الطبيعي) */
        .subscription-option-card {
            background-image: linear-gradient(135deg, #2c1a40, #1a2a40);
            border: 2px solid #8e6abf; /* الإطار البنفسجي الأساسي */
            border-radius: 8px;
            padding: 12px;
            text-align: center;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: none;
            animation: none;
        }

            /* 2. (لا تغيير) تنسيق النصوص الداخلية */
            .subscription-option-card .period {
                display: block;
                font-size: 16px;
                color: var(--white-text);
                transition: color 0.3s ease;
            }

            .subscription-option-card .price {
                display: block;
                font-size: 14px;
                color: var(--accent-yellow);
                margin-top: 5px;
                transition: color 0.3s ease;
            }

        /* 3. ✅ التعديل الأهم: التوهج البنفسجي عند الـ Hover (بدلاً من RGB) */
        .subscription-option-label:hover .subscription-option-card {
            transform: translateY(-3px);
            /* استبدال الأنيميشن بتوهج بنفسجي ثابت */
            border-color: #cda1ff; /* إطار بنفسجي فاتح */
            box-shadow: 0 0 20px rgba(170, 100, 255, 0.7); /* توهج بنفسجي */
            animation: none; /* إلغاء حركة RGB القديمة */
        }

        /* 4. (لا تغيير) حالة الاختيار (Checked) - إطار أصفر بدون توهج */
        .subscription-option-label input[type="radio"]:checked + .subscription-option-card {
            border-color: var(--accent-yellow);
            box-shadow: none;
            animation: none;
        }

        /* 5. ✅ التعديل الثاني: حالة الاختيار + الـ Hover في نفس الوقت */
        .subscription-option-label:hover input[type="radio"]:checked + .subscription-option-card {
            /* نحافظ على الإطار الأصفر (لأنه مختار) */
            border-color: var(--accent-yellow);
            /* نضيف التوهج البنفسجي (لأنه hover) */
            box-shadow: 0 0 20px rgba(170, 100, 255, 0.7);
            animation: none; /* إلغاء حركة RGB */
        }

        /* 6. (لا تغيير) تغيير لون السعر عند الاختيار */
        .subscription-option-label input[type="radio"]:checked + .subscription-option-card .price {
            color: #ffffff;
        }

        /* ====================================================== */
        /* ✅ END: تعديل توهج خيارات الاشتراك */
        /* ====================================================== */

        /* هذا الكود يبقى كما هو إذا كان موجوداً لديك */
        .dropdown-logo {
            display: inline-block;
            vertical-align: middle;
            width: 16px;
            height: 16px;
            margin-right: 5px;
            fill: currentColor;
        }



        /* ====================================================== */
        /* ✅ START: تصميم اختيارات نوع الموقع (Website Options) ✅ */
        /* ====================================================== */

        .site-type-grid {
            display: grid;
            grid-template-columns: 1fr 1fr; /* عمودين متساويين */
            gap: 15px;
            width: 100%;
        }

        .site-type-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            /* 💡 التعديل هنا: تقليل الـ padding من 15px 10px إلى 12px 8px */
            padding: 12px 8px;
            border-radius: 10px;
            border: 2px solid #8e6abf;
            background-color: rgba(255, 255, 255, 0.05);
            color: var(--white-text);
            font-weight: bold;
            /* 💡 التعديل هنا: تقليل حجم الخط من 14px إلى 13px */
            font-size: 13px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            /* 💡 التعديل هنا: تقليل الـ min-height من 100px إلى 90px */
            min-height: 90px;
        }

            .site-type-option:hover {
                transform: translateY(-5px);
                border-color: var(--accent-yellow);
                box-shadow: 0 0 15px rgba(255, 204, 0, 0.5);
            }

            /* تغيير لون عند التحديد أو الضغط */
            .site-type-option:active {
                background-color: #3c1870;
                transform: scale(0.98);
                box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
            }

            /* تنسيق الخيار المخصص (الأصغر والمستطيل) */
            .site-type-option.custom-order-type {
                grid-column: 1 / span 2; /* يمتد على عمودين */
                max-width: 60%; /* ليصبح مستطيل وأصغر أفقياً */
                justify-self: center; /* يتوسط في شبكة الـ grid */
                /* 💡 التعديل هنا: تقليل الـ padding ليناسب التنسيق الجديد */
                padding: 8px 15px;
                margin-top: 10px;
                font-size: 13px;
                min-height: auto;
            }

                .site-type-option.custom-order-type svg {
                    /* 💡 التعديل هنا: تقليل حجم أيقونة SVG الخاصة بالخيار المخصص */
                    width: 25px;
                    height: 25px;
                }

                .site-type-option.custom-order-type small {
                    font-size: 11px;
                }

            .site-type-option svg {
                /* 💡 التعديل هنا: تقليل المسافة أسفل الأيقونة */
                margin-bottom: 5px;
                color: currentColor;
                /* 💡 التعديل هنا: تصغير حجم أيقونات SVG لباقي الخيارات */
                width: 25px;
                height: 25px;
            }

            .site-type-option:hover svg {
                color: var(--accent-yellow);
            }

        /* ====================================================== */
        /* ✅ END: تنسيق أيقونات SVG داخل الأزرار الجديدة ✅ */
        /* ====================================================== */

        /* توحيد تنسيق الزر داخل الـ overlay ليكون أكبر */
        #developing .offer-overlay .offer-order-btn {
            font-size: 16px;
            padding: 12px 30px;
        }

        /* ====================================================== */
        /* ✅ START: توسيط نص اختيار طريقة الدفع */
        /* ====================================================== */

        /* هذا الكود يستهدف النص داخل زر اختيار الدفع،
               يمنحه العرض الكامل، ويقوم بتوسيط النص بداخله.
             */
        .custom-select-selected span {
            width: 100%;
            text-align: center;
        }

        /* ====================================================== */
        /* ✅ END: توسيط نص اختيار طريقة الدفع */
        /* ====================================================== */

        /* ====================================================== */
        /* ✅ START: التوهج البنفسجي (خلف الصورة) */
        /* ====================================================== */

        /* 1. (التوهج الخارجي) الظل الخفيف حول الكارت */
        .product-item:hover,
        .subscription-item:hover {
            transform: translateY(-8px);
            /* 💡 التعديل هنا: تقليل الظل الخارجي لجعله أخف وأقل انتشارًا */
            /* القيمة القديمة: 0 10px 25px rgba(170, 100, 255, 0.4) */
            /* القيمة الجديدة: 0 8px 15px rgba(170, 100, 255, 0.3) */
            box-shadow: 0 8px 40px rgba(170, 100, 255, 0.3); /* توهج أقل عمقًا وأكثر نعومة */
        }

        /* 2. (التوهج الداخلي) إضافة عنصر التوهج الداخلي (خلف الصورة) */
        .product-item::after,
        .subscription-item::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient( circle at center, rgba(170, 100, 255, 0.3) 0%, /* بنفسجي (30% شفافية) في المنتصف */
            rgba(170, 100, 255, 0.0) 70% /* شفاف تماماً في الأطراف */
            );
            border-radius: 12px;
            opacity: 0;
            transition: opacity 0.4s ease-in-out;
            /* ✅✅ التعديل الأهم: وضع التوهج خلف الصورة (z-index: 0) ✅✅ */
            /* الصورة في الكود الأصلي z-index: 1 */
            z-index: 0;
            pointer-events: none;
        }

        /* 3. إظهار التوهج الداخلي عند مرور الماوس */
        .product-item:hover::after,
        .subscription-item:hover::after {
            opacity: 1;
        }

        /* 4. (استثناءات) إلغاء هذا التوهج من الكروت المخصصة */
        /* هذا يمنع التوهج البنفسجي من الظهور على كروت ستيم وكود وإكسبوكس... إلخ */
        #all-cod-games-container .product-item::after,
        #steamGiftCardsHomeContainer .product-item::after,
        #steamGiftCardsPageContainer .product-item::after,
        #xboxGiftCardsContainer .product-item::after,
        #xboxPopularGamesContainer .product-item::after,
        #psn-gift-cards-container .product-item::after,
        .ps-plus-card.subscription-item::after {
            background: none !important; /* إلغاء الخلفية الشعاعية */
        }

        /* 5. (استثناءات) إلغاء التوهج الخارجي البنفسجي من الكروت المخصصة */
        .ps-plus-card.subscription-item:hover {
            box-shadow: 0 10px 25px rgba(0, 112, 209, 0.5) !important; /* إبقاء التوهج الأزرق الخاص بها */
            animation: none !important;
        }
        /* ====================================================== */
        /* ✅ END: التوهج البنفسجي (خلف الصورة) */
        /* ====================================================== */



        /* ====================================================== */
        /* ✅ START: تنسيق زر اختيار العملة في نافذة Xbox */
        /* ====================================================== */

        /* 1. تعديل الحاوية لتقبل الحقل والزر */
        #xbox-price-wrapper {
            padding-right: 15px; /* الحفاظ على مسافة للأيقونة اليمنى */
            padding-left: 8px; /* إضافة مسافة للزر الجديد على اليسار */
            gap: 8px; /* مسافة بسيطة بين الحقل والزر */
        }

            /* 2. جعل حقل الإدخال يملأ المساحة المتبقية */
            #xbox-price-wrapper input {
                flex-grow: 1; /* هذا هو الأهم: يجعل الحقل يتمدد */
                width: auto; /* إلغاء العرض الثابت */
            }

        /* 3. تنسيق زر اختيار العملة الجديد */
        #xboxGameCurrency {
            flex-shrink: 0; /* منع الزر من الانكماش */
            width: 70px; /* عرض ثابت للزر */
            padding: 8px 5px; /* تقليل الحشو ليتناسب */
            font-size: 14px;
            font-weight: bold;
            background-color: var(--main-purple); /* لون بنفسجي غامق */
            color: var(--accent-yellow); /* لون أصفر */
            border: 1px solid var(--border-color);
            border-radius: 6px;
            margin-top: 0; /* إلغاء أي هوامش افتراضية */
            cursor: pointer;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            text-align: center; /* توسيط النص (EGP/USD) */
        }

            #xboxGameCurrency:focus {
                outline: none;
                border-color: var(--accent-yellow);
                box-shadow: 0 0 8px rgba(255, 204, 0, 0.5);
            }

        /* ====================================================== */
        /* ✅ END: تنسيق زر اختيار العملة في نافذة Xbox */
        /* ====================================================== */

        /* =================================================================== */
        /* ✅ START: [الكود الموحد والنهائي] لجميع تنسيقات الموبايل والتابلت ✅ */
        /* =================================================================== */

        /* --- 1. تعريف شريط التنقل السفلي (للموبايل) --- */
        /* (يتم تعريفه هنا ليصبح متاحًا) */
        #mobile-nav {
            display: none; /* مخفي على الكمبيوتر */
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: linear-gradient(145deg, #1d1033, #0b0714);
            border-top: 1px solid var(--border-color);
            box-shadow: 0 -2px 15px rgba(0, 0, 0, 0.4);
            z-index: 1999;
            align-items: center;
            justify-content: space-around;
        }

        @media (max-width: 768px) {
            /* 💡 الأهم: إيقاف تأثير اللمعان التفاعلي على كل الكروت */
            .product-item::before,
            .subscription-item::before,
            .service-offer-card::before,
            .rental-card::before {
                /* يجعل التوهج يظل مخفيًا ولا يظهر عند حركة الإصبع */
                opacity: 0 !important;
                background: none !important;
                /* نلغي أي انبعاث دائري */
                content: none !important;
            }
        }

        .mobile-nav-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: var(--light-text);
            text-decoration: none;
            font-size: 11px;
            font-weight: bold;
            flex-grow: 1;
            height: 100%;
            opacity: 0.7;
            transition: opacity 0.2s, color 0.2s;
            position: relative; /* لوضع رقم السلة */
        }

        @media (max-width: 768px) {
            /* يستهدف الفقرات التي تحمل الكلاس 'hide-on-mobile' ويخفيها */
            .calculator-card .hide-on-mobile {
                display: none !important;
            }
        }



        .mobile-nav-btn:hover,
        .mobile-nav-btn.active {
            color: var(--accent-yellow);
            opacity: 1;
        }

        .mobile-nav-btn svg {
            width: 24px;
            height: 24px;
            margin-bottom: 2px;
        }

        .mobile-nav-btn .cart-count {
            position: absolute;
            top: 5px;
            right: 20px;
            background-color: red;
            color: white;
            border-radius: 50%;
            padding: 2px 6px;
            font-size: 11px;
            border: 1px solid white;
        }

        /* --- 2. تنسيقات الشاشات المتوسطة (التابلت) --- */
        @media (max-width: 992px) {
            /* 2.1. تعديل الشريط العلوي (Navbar) - مع السيرش بار */
            #navbar {
                flex-direction: row;
                flex-wrap: wrap;
                align-items: center;
                justify-content: space-between;
                padding: 10px 20px;
                height: auto;
            }

                #navbar .logo-area {
                    order: 1;
                }

            .navbar-search-container {
                display: flex !important; /* إظهار السيرش بار */
                order: 2; /* وضعه بعد اللوجو */
                flex-grow: 1; /* جعله يأخذ المساحة المتبقية */
                margin: 0 15px; /* هوامش ليفصله */
            }

            .navbar-search-input {
                width: 100% !important; /* جعل حقل الإدخال يملأ الحاوية */
            }

            #navbar .support-button {
                order: 3;
                display: none; /* إخفاء زر الدعم العلوي */
            }

            @media (max-width: 768px) {

                /* يستهدف كل المنتجات التي لديها هذا الكلاس لإخفاء الوصف القصير */
                .product-item .product-description-text,
                .subscription-item .product-description-text,
                .product-item p:has(.product-description-text) {
                    display: none !important;
                }

                .subscription-item .sub-content p.sub-description {
                    display: none !important;
                }
            }

            #navbar .nav-middle-section {
                margin-top: 15px;
                order: 4; /* الروابط تنزل السطر الثاني */
                width: 100%;
                flex-wrap: wrap;
                justify-content: center;
                flex-grow: 1;
                gap: 15px 20px;
            }

            body {
                padding-top: 70px;
            }

            /* 2.2. تعديل تخطيط الأقسام المعقدة */
            .product-main-view,
            .ps-grid-container,
            .payment-layout,
            #discord-calculator-card {
                flex-direction: column;
                align-items: center;
            }

                #discord-calculator-card .card-icon {
                    margin-top: -50px;
                    width: 220px;
                    height: 220px;
                }

            /* 2.3. تعديل حجم الخطوط الرئيسية */
            h1, #productPageTitle {
                font-size: 2rem !important;
            }

            h2 {
                font-size: 1.6rem !important;
            }

            /* 2.4. تعديل عرض كروت الخدمات */
            .service-offer-card,
            .custom-order-card {
                width: calc(50% - 30px);
                min-width: 300px;
            }
        }


        /* --- 3. تنسيقات الشاشات الصغيرة (الموبايل) --- */
        @media (max-width: 768px) {

            /* 3.1. إصلاحات عامة للموبايل */
            .glass-card {
                margin: 15px;
                padding: 15px;
            }

            /* 3.2. (الأهم) إصلاح النوافذ المنبثقة (Modals) */
            .modal {
                width: 95% !important;
                max-width: 95% !important;
                max-height: 90vh !important; /* 90% من ارتفاع الشاشة */
                padding: 15px !important;
                box-sizing: border-box !important;
            }

                .modal .modal-body {
                    overflow-y: auto !important; /* ✅ إضافة سكرول (شريط تمرير) عمودي عند الحاجة */
                    overflow-x: hidden !important; /* منع السكرول الأفقي */
                    flex-grow: 1 !important;
                    padding: 10px !important;
                    display: flex !important;
                    flex-direction: column !important;
                }

            /* 3.3. (الأهم) وضع منتجين جنب بعض */
            .products-container {
                display: grid !important;
                grid-template-columns: 1fr 1fr !important; /* إنشاء عمودين متساويين */
                gap: 15px;
            }

            /* توحيد شكل جميع الكروت لتناسب الشبكة الجديدة */
            .product-item,
            .subscription-item,
            .rental-card,
            .psn-gift-card-item,
            .service-offer-card,
            .custom-order-card {
                width: 100% !important;
                min-width: unset !important;
                height: auto !important;
                margin: 0 !important;
            }

            /* تعديل خاص لكروت CoD */
            #all-cod-games-container .product-item {
                width: 100% !important;
                aspect-ratio: 2 / 3;
                height: auto !important;
            }

            /* 3.4. تصغير الخطوط والأزرار */
            .product-item h3, .subscription-item h3 {
                font-size: 14px !important;
                min-height: 40px;
            }

            .product-item p, .subscription-item p, .product-description-text {
                font-size: 12px !important;
            }

            .product-item .buy-btn, .subscription-item .buy-btn {
                font-size: 13px !important;
                padding: 8px 10px !important;
            }

            h1, #productPageTitle {
                font-size: 1.8rem !important;
            }

            h2 {
                font-size: 1.5rem !important;
            }

            /* 3.5. ضغط نافذة الدفع */
            #paymentModal .payment-header-container {
                margin-bottom: 15px !important;
                flex-direction: column !important;
                gap: 8px !important;
            }

            #vodafoneDetails .qr-code-container {
                padding: 10px !important;
                gap: 10px !important;
                flex-direction: column-reverse !important;
            }

            #vodafoneDetails .qr-text-content p {
                margin: 5px 0 !important;
            }

            #vodafoneForm .input-wrapper {
                margin: 0 auto 8px auto !important;
            }

            #vodafoneForm .button-container {
                gap: 5px !important;
            }

            #vodafoneForm .discount-code-container {
                margin-top: 5px !important;
            }

            /* 3.6. إصلاح سكرول السلة */
            #cartModal .modal-body {
                height: calc(90vh - 100px) !important;
            }

            #cartItemsContainer {
                flex-grow: 1 !important;
                overflow-y: auto !important;
                padding-right: 10px !important;
                margin-right: -10px !important;
            }

            /* 3.7. تفعيل شريط التنقل السفلي */
            #mobile-nav {
                display: flex; /* إظهار الشريط السفلي */
            }

            .fixed-cart-button,
            #theme-toggle-btn {
                display: none !important; /* إخفاء الأزرار العائمة القديمة */
            }

            body {
                /* 60px (الشريط السفلي) + 10px (هامش أمان) */
                padding-bottom: 70px !important;
            }

            #backToTopBtn {
                bottom: 80px; /* 60px (الشريط) + 20px (هامش) */
                left: 20px;
                right: auto;
            }

            /* 3.8. تحسين مساحة النقر */
            .toggle-discount {
                padding: 10px 15px;
                display: inline-block;
            }
        }

        /* --- 4. تنسيقات الشاشات الصغيرة جدًا --- */
        @media (max-width: 400px) {
            .products-container {
                gap: 10px;
            }

            .product-item h3, .subscription-item h3 {
                font-size: 12px !important;
            }

            .product-item p, .subscription-item p, .product-description-text {
                font-size: 11px !important;
            }
        }
        /* =================================================================== */
        /* ✅ END: [الكود الموحد والنهائي] لجميع تنسيقات الموبايل والتابلت ✅ */
        /* =================================================================== */

        /* ====================================================== */
        /* ✅ START: إضافة إطار أزرق متوهج لقسم ستيم بالكامل */
        /* ====================================================== */

        @keyframes steam-section-glow {
            0% {
                border-color: rgba(0, 192, 255, 0.6);
                box-shadow: 0 0 15px rgba(0, 192, 255, 0.3);
            }

            50% {
                border-color: rgba(0, 192, 255, 1);
                box-shadow: 0 0 25px rgba(0, 192, 255, 0.6), 0 0 10px rgba(0, 192, 255, 0.4) inset;
            }

            100% {
                border-color: rgba(0, 192, 255, 0.6);
                box-shadow: 0 0 15px rgba(0, 192, 255, 0.3);
            }
        }

        #steam-gift-cards-section {
            /* (الخصائص الحالية للخلفية تبقى كما هي) */
            background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('./images/steamwallpaper.png');
            background-size: cover;
            background-position: center;
            position: relative;
            z-index: 1;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(6px);
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
            /* --- ✅✅ التعديلات الجديدة هنا ✅✅ --- */
            /* 1. إرجاع الحواف الدائرية */
            border-radius: 15px;
            /* 2. إضافة الإطار الأزرق */
            border: 1px solid #00c0ff;
            /* 3. إضافة حركة التوهج الأزرق */
            animation: steam-section-glow 3s infinite linear;
        }

        /* ====================================================== */
        /* ✅ END: إضافة إطار أزرق متوهج لقسم ستيم */
        /* ====================================================== */

        /* ====================================================== */
        /* ✅ START: Steam Gift Cards Blue Theme (FINAL v4) */
        /* ====================================================== */

        /* 1. استهداف الحاويات المخصصة لبطاقات ستيم لضمان تطبيق الثيم الأزرق */
        #steamGiftCardsHomeContainer .product-item,
        #steamGiftCardsPageContainer .product-item {
            background: linear-gradient(145deg, #1A283B, #101822) !important;
            box-shadow: 0 6px 20px rgba(0, 102, 255, 0.4), 0 0 12px rgba(0, 102, 255, 0.5) inset !important;
            border: 1px solid rgba(0, 102, 255, 0.6) !important;
        }

            /* 2. تأثير اللمعان الأزرق عند مرور الماوس */
            #steamGiftCardsHomeContainer .product-item::before,
            #steamGiftCardsPageContainer .product-item::before {
                background: radial-gradient(circle at var(--mouse-x) var(--mouse-y), rgba(0, 102, 255, 0.6) 0%, transparent 75%) !important;
            }

            /* 3. وميض الصورة الأزرق */
            #steamGiftCardsHomeContainer .product-item .product-image-wrapper::before,
            #steamGiftCardsPageContainer .product-item .product-image-wrapper::before {
                background: linear-gradient(90deg, transparent, rgba(0, 102, 255, 0.4) 30%, transparent 70%) !important;
            }

            /* 4. لون العنوان (أزرق سماوي) */
            #steamGiftCardsHomeContainer .product-item h3,
            #steamGiftCardsPageContainer .product-item h3 {
                color: #87CEEB !important;
                text-shadow: 0 0 7px rgba(135, 206, 235, 0.8) !important;
            }

            /* 5. لون نصوص السعر (كلمة "السعر" و "EGP") */
            #steamGiftCardsHomeContainer .product-item p,
            #steamGiftCardsPageContainer .product-item p {
                color: #ccc !important;
                font-size: 13px !important; /* تصغير الخط العادي */
            }

            /* 6. لون أرقام السعر (جعله أزرق ساطع) */
            #steamGiftCardsHomeContainer .product-item .product-price,
            #steamGiftCardsPageContainer .product-item .product-price {
                color: #00BFFF !important;
                font-size: 1.1em !important; /* تكبير الأرقام نسبةً للخط الصغير */
                font-weight: bold;
                text-shadow: 0 0 6px rgba(0, 191, 255, 0.8) !important;
            }

            /* 7. لون العملة (تصغيرها قليلاً) */
            #steamGiftCardsHomeContainer .product-item .currency-symbol,
            #steamGiftCardsPageContainer .product-item .currency-symbol {
                font-size: 0.9em !important;
                opacity: 0.8 !important;
            }

            /* 8. أزرار "أضف إلى السلة" (الخضراء) -> تحويلها للأزرق */
            #steamGiftCardsHomeContainer .product-item .add-to-cart-text-btn,
            #steamGiftCardsPageContainer .product-item .add-to-cart-text-btn {
                background-color: #007ACC !important;
                border-color: #005A9C !important;
                box-shadow: 0 5px 15px rgba(0, 90, 156, 0.6) !important;
                color: #E0F2F7 !important;
            }

                #steamGiftCardsHomeContainer .product-item .add-to-cart-text-btn:hover,
                #steamGiftCardsPageContainer .product-item .add-to-cart-text-btn:hover {
                    background-color: #008DDF !important;
                    border-color: #006BBF !important;
                    box-shadow: 0 8px 20px rgba(0, 107, 191, 0.8) !important;
                    transform: translateY(-4px) !important;
                }

            /* 9. أزرار "شراء الآن" (الخضراء) -> تحويلها للأزرق */
            #steamGiftCardsHomeContainer .product-item .buy-btn,
            #steamGiftCardsPageContainer .product-item .buy-btn {
                background: linear-gradient(145deg, #007ACC, #005A9C) !important;
                border: 1px solid #005A9C !important;
                box-shadow: 0 5px 15px rgba(0, 90, 156, 0.6) !important;
                color: #E0F2F7 !important;
            }

                #steamGiftCardsHomeContainer .product-item .buy-btn:hover,
                #steamGiftCardsPageContainer .product-item .buy-btn:hover {
                    background: linear-gradient(145deg, #008DDF, #006BBF) !important;
                    box-shadow: 0 8px 20px rgba(0, 107, 191, 0.8) !important;
                    transform: translateY(-4px) !important;
                }

            /* 10. تأثير الهوفر على الكارت (توهج أزرق) */
            #steamGiftCardsHomeContainer .product-item:hover,
            #steamGiftCardsPageContainer .product-item:hover {
                transform: translateY(-8px) !important;
                box-shadow: 0 15px 35px rgba(0, 102, 255, 0.6) !important;
            }

        /* ====================================================== */
        /* ✅ END: Steam Gift Cards Blue Theme */
        /* ====================================================== */

        /* ==================================== */
        /* Steam Offer Cards Theme     */
        /* ==================================== */
        .product-item[data-platform="steam"],
        .product-item[data-category="steam-popular"] {
            /* الخلفية الرئيسية للكارت */
            background: linear-gradient(145deg, #1A283B, #101822);
            box-shadow: 0 5px 15px rgba(0, 102, 255, 0.2), 0 0 10px rgba(0, 102, 255, 0.3) inset; /* ظل أزرق وداخلي */
            border: 1px solid rgba(0, 102, 255, 0.4); /* إطار أزرق فاتح */
        }

            .product-item[data-platform="steam"]::before,
            .product-item[data-category="steam-popular"]::before {
                /* تأثير اللمعان الأزرق عند مرور الماوس */
                background: radial-gradient(circle at var(--mouse-x) var(--mouse-y), rgba(0, 102, 255, 0.4) 0%, transparent 70%);
            }

            .product-item[data-platform="steam"] .product-image-container::before,
            .product-item[data-category="steam-popular"] .product-image-container::before {
                /* تأثير الوميض الأزرق على الصورة */
                background: linear-gradient(90deg, transparent, rgba(0, 102, 255, 0.2) 30%, transparent 70%);
            }

            .product-item[data-platform="steam"] .product-title,
            .product-item[data-category="steam-popular"] .product-title {
                color: #87CEEB; /* لون أزرق فاتح للعناوين */
                text-shadow: 0 0 5px rgba(135, 206, 235, 0.5); /* ظل نص أزرق */
            }

            .product-item[data-platform="steam"] .product-price,
            .product-item[data-category="steam-popular"] .product-price {
                color: #4CAF50; /* يمكنك الاحتفاظ بالأخضر للسعر إذا أردت، أو تغيره لأزرق مثل #00BFFF */
                text-shadow: 0 0 4px rgba(76, 175, 80, 0.6);
            }

            /* أزرار ستيم - إضافة للسلة / شراء الآن */
            .product-item[data-platform="steam"] .add-to-cart-button,
            .product-item[data-category="steam-popular"] .buy-now-button {
                background: linear-gradient(145deg, #007ACC, #005A9C); /* تدرج أزرق داكن */
                border: 1px solid #005A9C;
                box-shadow: 0 4px 10px rgba(0, 90, 156, 0.4);
                color: #E0F2F7; /* نص أبيض مائل للزرقة */
            }

                .product-item[data-platform="steam"] .add-to-cart-button:hover,
                .product-item[data-category="steam-popular"] .buy-now-button:hover {
                    background: linear-gradient(145deg, #008DDF, #006BBF);
                    box-shadow: 0 6px 15px rgba(0, 107, 191, 0.6);
                    transform: translateY(-2px);
                }

                .product-item[data-platform="steam"] .add-to-cart-button:active,
                .product-item[data-category="steam-popular"] .buy-now-button:active {
                    transform: scale(0.96);
                    box-shadow: 0 2px 5px rgba(0, 90, 156, 0.4);
                }

            /* شعار ستيم في الزاوية */
            .product-item[data-platform="steam"] .product-header .platform-icon img,
            .product-item[data-category="steam-popular"] .product-header .platform-icon img {
                filter: drop-shadow(0 0 8px rgba(0, 102, 255, 0.8)); /* ظل أزرق للشعار */
            }

            /* التوهج حول الكارت عند الإشارة بالماوس (إذا كان الكارت يتحرك بالـ transform) */
            .product-item[data-platform="steam"]:hover {
                transform: translateY(-5px); /* حركة خفيفة للأعلى */
                box-shadow: 0 10px 25px rgba(0, 102, 255, 0.4); /* ظل أكبر وأزرق */
            }

            /* إذا كان هناك عنصر توهج إضافي (glow-border) */
            .product-item[data-platform="steam"] .glow-border::before,
            .product-item[data-category="steam-popular"] .glow-border::before {
                background: conic-gradient(from var(--angle), transparent, #007ACC, #005A9C, #007ACC, transparent);
            }

            .product-item[data-platform="steam"] .platform-badge,
            .product-item[data-category="steam-popular"] .platform-badge {
                background-color: #007ACC; /* لون الخلفية لشارة المنصة */
                box-shadow: 0 0 8px rgba(0, 102, 255, 0.6);
            }

        #xbox-gifting-section .calculator-card .calculator-card-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            /* ✅ هنا التعديل: زودنا الشفافية من 0.8 إلى 0.9 عشان تبقى أغمق */
            background-image: linear-gradient(rgba(10, 25, 10, 0.9), rgba(0, 0, 0, 0.9)), url('images/image_1651dd.png');
            background-size: cover, cover;
            background-position: center, center;
            background-repeat: no-repeat, no-repeat;
            /* ده البلور اللي إنت كنت ظابطه (ممكن تقلله لو حابب) */
            filter: blur(5px);
            -webkit-filter: blur(5px);
        }

        /* ====================================================== */
        /* ✅ START: إصلاح تأثير الضغط (Active) لأزرار ستيم الزرقاء */
        /* ====================================================== */

        #steamGiftCardsHomeContainer .product-item .add-to-cart-text-btn:active,
        #steamGiftCardsPageContainer .product-item .add-to-cart-text-btn:active,
        #steamGiftCardsHomeContainer .product-item .buy-btn:active,
        #steamGiftCardsPageContainer .product-item .buy-btn:active {
            transform: scale(0.96) translateY(2px) !important;
            box-shadow: inset 0 3px 8px rgba(0, 0, 0, 0.4) !important;
            /* ✅ السطر المعدل: يغمق قليلاً جداً */
            transition: transform 0.1s ease, background 0.1s ease, box-shadow 0.1s ease !important;
        }

        /* ====================================================== */
        /* ✅ END: إصلاح تأثير الضغط (Active) */
        /* ====================================================== */

        /* ================================================================= */
        /* ✅ START: تحويل زر السلة (صورة) إلى زر نصي (كتابة) لـ Xbox */
        /* ================================================================= */

        /* --- الخطوة 1: إخفاء صورة السلة الأصلية من كل كروت الإكسبوكس --- */
        #xboxGiftCardsContainer .product-item .add-to-cart-btn img,
        #xboxPopularGamesContainer .product-item .add-to-cart-btn img {
            display: none !important;
        }

        /* --- الخطوة 2: تحويل الزر الشفاف إلى زر أخضر --- */
        /* (هذا الكود يستهدف الزر في الحاويتين) */
        #xboxGiftCardsContainer .product-item .add-to-cart-btn,
        #xboxPopularGamesContainer .product-item .add-to-cart-btn {
            background-color: #107C10 !important; /* لون الزر الأخضر */
            color: var(--white-text) !important;
            border: 2px solid #107C10 !important;
            border-radius: 8px !important; /* توحيد الحواف */
            width: auto !important; /* ليتمدد حسب النص */
            height: auto !important;
            transition: all 0.3s ease !important;
        }

        /* --- الخطوة 3: إضافة النص وتنسيقه (للكروت الرفيعة) --- */
        #xboxGiftCardsContainer .product-item .add-to-cart-btn {
            padding: 4px 8px !important; /* حجم صغير يناسب الكارت الرفيع */
        }

            #xboxGiftCardsContainer .product-item .add-to-cart-btn::after {
                content: "إضافة"; /* نص قصير يناسب الزر الصغير */
                font-size: 10px !important;
                font-weight: bold;
            }

        /* --- الخطوة 4: إضافة النص وتنسيقه (للكروت العريضة) --- */
        #xboxPopularGamesContainer .product-item .add-to-cart-btn {
            padding: 8px 10px !important; /* حجم أكبر قليلاً */
        }

            #xboxPopularGamesContainer .product-item .add-to-cart-btn::after {
                content: "إضافة للسلة"; /* نص كامل يناسب الزر العريض */
                font-size: 13px !important;
                font-weight: bold;
            }

            /* --- الخطوة 5: إضافة تأثير الـ Hover (موحد للكل) --- */
            #xboxGiftCardsContainer .product-item .add-to-cart-btn:hover,
            #xboxPopularGamesContainer .product-item .add-to-cart-btn:hover {
                background-color: #10E510 !important;
                border-color: #10E510 !important;
                box-shadow: 0 0 15px rgba(16, 229, 16, 0.6) !important;
                transform: scale(1.05); /* حركة بسيطة عند التمرير */
            }

                /* تغيير لون النص عند الـ Hover */
                #xboxGiftCardsContainer .product-item .add-to-cart-btn:hover::after,
                #xboxPopularGamesContainer .product-item .add-to-cart-btn:hover::after {
                    color: var(--black-text) !important;
                }

        /* ================================================================= */
        /* ✅ END: تحويل زر السلة إلى زر نصي */
        /* ================================================================= */

        /* ====================================================== */
        /* ✅ START: أنيميشن الحركة المستمرة لمنتجات Xbox */
        /* ====================================================== */

        @keyframes auto-scroll-rtl {
            0% {
                transform: translateX(0);
            }

            100% {
                /* 500px = (عرض المنتج 230px + المسافة 20px) * 2 */
                transform: translateX(-500px);
            }
        }

        /* 2. نحتاج إلى حاوية "أب" لإخفاء المحتوى الزائد */
        /* هذا الكود يستهدف العمود الذي يحتوي على المنتجات العريضة */
        #xbox-gifting-section .ps-grid-column:nth-child(2) {
            overflow: hidden; /* هذا السطر هو الأهم لإخفاء المنتجات الزائدة */
            position: relative; /* لضمان عمل الإخفاء بشكل سليم */
        }

        #xboxPopularGamesContainer {
            display: flex;
            flex-wrap: nowrap !important; /* منع نزول السطر */
            justify-content: flex-start !important;
            /* جعل العرض يساوي ضعف المحتوى (بعد المضاعفة بالجافاسكريبت) */
            width: max-content;
            /* تطبيق الأنيميشن */
            /* ✅ 1. تم تغيير المدة إلى 10s لتناسب المسافة القصيرة */
            /* ✅ 2. تم إضافة 'alternate' لجعلها تذهب وتعود */
            animation: auto-scroll-rtl 10s linear infinite alternate;
            /* إيقاف الحركة عند تمرير الماوس */
            animation-play-state: running;
        }

            #xboxPopularGamesContainer:hover {
                animation-play-state: paused;
            }

        /* 4. التأكد من أن الكروت الرفيعة لا تتأثر */
        #xboxGiftCardsContainer {
            justify-content: flex-start !important; /* تبدأ من اليمين كالمعتاد */
        }

        /* ====================================================== */
        /* ✅ END: أنيميشن الحركة المستمرة لمنتجات Xbox */
        /* ====================================================== */

        /* 2. خلفية القسم الرئيسي (اختياري: أضف صورة 'xbox-bg.jpg' لمجلد images) */
        #xbox-gifting-section {
            background-image: linear-gradient(rgba(10, 25, 10, 0.8), rgba(0, 0, 0, 0.9)), url('./images/xbox-bg.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            border-color: #107C10;
            box-shadow: 0 0 25px rgba(16, 124, 16, 0.3);
            text-align: right !important;
        }

        #xbox-gifting-section {
            /* ✅ ضيف !important هنا */
            background-image: linear-gradient(rgba(10, 25, 10, 0.8), rgba(0, 0, 0, 0.9)), url('./images/my-new-xbox-bg.png') !important;
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            border-color: #107C10;
            box-shadow: 0 0 25px rgba(16, 124, 16, 0.3);
            text-align: right !important;
        }

        /* ====================================================== */
        /* ✅ START: تنظيم أزرار الدفع (Pay now هو الأكبر - عمودي) */
        /* ====================================================== */

        /* 1. الحاوية الرئيسية: نجعلها عمودية (فوق بعض) */
        .payment-actions-container {
            display: flex;
            flex-direction: column; /* <-- 1. رص العناصر فوق بعض */
            align-items: center; /* 2. توسيط الأزرار في النص */
            gap: 15px; /* 3. مسافة 15px بين الزرين */
            margin-top: 25px;
            width: 100%;
        }

            /* 2. حاوية زر البايبال (الأسود) */
            .payment-actions-container form[action*="paypal.com"] {
                flex: unset; /* <-- إلغاء أي مرونة */
                min-width: unset; /* <-- إلغاء أي عرض أدنى */
                display: inline-grid;
                justify-items: center !important;
                align-content: start;
                gap: 0.5rem;
                margin: 0;
                width: 100%; /* <-- جعل الحاوية تأخذ عرض */
                max-width: 320px; /* <-- تحديد عرض أقصى للحاوية */
            }

        /* 3. الزر الأسود (Pay now) - ليكون هو الأكبر */
        .pp-AB69NXSVUNP78 {
            width: 100% !important; /* <-- جعل الزر يملأ الحاوية بتاعته */
            min-width: unset !important;
            box-sizing: border-box;
        }

        /* 4. الزر الأزرق (لقد قمت بالدفع) - ليكون هو الأصغر */
        .paypal-confirm-btn {
            flex: unset; /* <-- إلغاء أي مرونة */
            min-width: unset; /* <-- إلغاء أي عرض أدنى */
            width: auto; /* <-- العرض على قد الكلام */
            margin-top: 0;
            box-sizing: border-box;
            /* ✅ إرجاع الحجم ليكون "أصغر" */
            height: auto;
            padding: 10px 20px; /* بادينج أصغر */
            font-size: 14px; /* خط أصغر */
            line-height: normal; /* ارتفاع سطر طبيعي */
        }

        /* ====================================================== */
        /* ✅ END: تنظيم أزرار الدفع (عمودي) */
        /* ====================================================== */

        /* ====================================================== */
        /* ✅ START: Custom Dropdown (Payment Method) Styles */
        /* ====================================================== */

        /* 1. الحاوية الرئيسية */
        .custom-select-container {
            position: relative;
            width: 100%;
            max-width: 400px; /* عرض مناسب */
            margin: 0 auto; /* توسيط الحاوية */
            font-family: 'Tajawal', sans-serif;
            font-weight: bold;
        }

        /* 2. الزر المختار (التصميم الزجاجي) */
        .custom-select-selected {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            background-color: rgba(0, 0, 0, 0.2);
            border: 1px solid var(--main-purple);
            border-radius: 8px;
            color: var(--white-text);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        /* 3. السهم المخصص داخل الزر */
        .custom-select-arrow {
            width: 20px;
            height: 20px;
            transition: transform 0.3s ease;
        }

        /* 4. تأثير التوهج عند التمرير أو الفتح */
        .custom-select-container.open .custom-select-selected,
        .custom-select-selected:hover {
            border-color: var(--accent-yellow);
            box-shadow: 0 0 10px rgba(255, 204, 0, 0.5);
        }

        /* 5. قلب السهم عند الفتح */
        .custom-select-container.open .custom-select-arrow {
            transform: rotate(180deg);
        }

        .custom-select-options {
            display: none; /* مخفية افتراضيًا */
            position: absolute;
            top: 110%; /* تظهر أسفل الزر */
            left: 0;
            right: 0;
            /* ✅ 1. تغيير الخلفية لتكون متدرجة ومميزة (مثل الفوتر) */
            background: linear-gradient(145deg, #0b0714, #1d1033);
            border: 1px solid #8e6abf; /* <-- تغيير لون الإطار ليصبح أوضح */
            border-radius: 8px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
            z-index: 2100; /* فوق النافذة المنبثقة */
            overflow: hidden; /* لإخفاء أي زوائد */
            max-height: 200px;
        }

        /* 7. إظهار القائمة عند الفتح */
        .custom-select-container.open .custom-select-options {
            display: block;
        }

        .custom-option {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 12px 15px;
            color: var(--light-text);
            cursor: pointer;
            transition: background-color 0.2s ease, color 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease;
            /* border-bottom: 1px solid rgba(255, 255, 255, 0.05); */ /* <-- ✅ امسح السطر ده */
        }


            .custom-option:hover {
                background-color: rgba(142, 106, 191, 0.1); /* ✅ خلفية بنفسجية خفيفة */
                color: #cda1ff; /* ✅ لون بنفسجي فاتح للنص */
                /* ✅ 3. إضافة التوهج (Glow) البنفسجي وحركة بسيطة */
                box-shadow: 0 0 15px rgba(142, 106, 191, 0.6); /* <-- التوهج البنفسجي */
                transform: scale(1.03); /* حركة "pop" بسيطة */
            }
            /* 10. ✅✅ ((--- هذا هو الكود الناقص ---)) ✅✅ */
            /* هذا الكود يلغي الهامش القديم من اللوجو لضمان التوسيط */
            .custom-option .payment-option-logo {
                margin-left: 0 !important;
                margin-right: 0 !important; /* لضمان التوسيط في كل اللغات */
            }
        /* ====================================================== */
        /* ✅ END: Custom Dropdown Styles */
        /* ====================================================== */

        /* ================================================================= */
        /* ✅ START: الكود النهائي والموحد لقسم XBOX بالكامل */
        /* ================================================================= */

        /* 1. تعريف حركة التوهج الأخضر */
        @keyframes smooth-xbox-glow {
            0% {
                box-shadow: 0 0 8px rgba(16, 229, 16, 0.3);
                border-color: rgba(16, 229, 16, 0.5);
            }

            50% {
                box-shadow: 0 0 16px rgba(16, 229, 16, 0.7), 0 0 25px rgba(16, 229, 16, 0.3);
                border-color: rgba(16, 229, 16, 1);
            }

            100% {
                box-shadow: 0 0 8px rgba(16, 229, 16, 0.3);
                border-color: rgba(16, 229, 16, 0.5);
            }
        }

        /* 2. تنسيق خلفية وتخطيط قسم Xbox الرئيسي */
        #xbox-gifting-section {
            background-image: linear-gradient(rgba(10, 25, 10, 0.8), rgba(0, 0, 0, 0.9)), url('./images/xbox-bg.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            border-color: #107C10;
            box-shadow: 0 0 25px rgba(16, 124, 16, 0.3);
            text-align: right !important;
        }

            /* 3. إصلاح محاذاة عمود الحاسبة مع عمود المنتجات */
            #xbox-gifting-section .ps-grid-container {
                align-items: start !important;
            }

            /* 4. تنسيق العناوين الفرعية (موحد) */
            #xbox-gifting-section .playstation-subcategory-label {
                border-bottom: 1px solid rgba(255, 255, 255, 0.2) !important;
                color: #90ee90;
                margin-top: 20px !important;
                margin-bottom: 15px !important;
            }

            /* 5. تنسيق بطاقة حاسبة Xbox (داخل القسم) */
            #xbox-gifting-section .calculator-card {
                background: linear-gradient(145deg, rgba(16, 40, 16, 0.5), rgba(0, 15, 0, 0.6));
                backdrop-filter: blur(12px);
                -webkit-backdrop-filter: blur(12px);
                border: 1px solid rgba(16, 229, 16, 0.5);
                animation: smooth-xbox-glow 2.5s infinite alternate ease-in-out;
                padding: 3px;
            }



                #xbox-gifting-section .calculator-card .calculator-card-icon {
                    filter: drop-shadow(0 0 15px rgba(16, 229, 16, 0.7));
                }

                #xbox-gifting-section .calculator-card h3 {
                    color: #90ee90;
                }

                #xbox-gifting-section .calculator-card .buy-btn {
                    background-color: #107C10;
                    color: var(--white-text);
                    border: 2px solid #107C10;
                }

                    #xbox-gifting-section .calculator-card .buy-btn:hover {
                        background-color: #10E510;
                        border-color: #10E510;
                        color: var(--black-text);
                        box-shadow: 0 0 20px rgba(16, 229, 16, 0.8);
                        transform: translateY(-3px) scale(1.05);
                    }

                #xbox-gifting-section .calculator-card:hover {
                    transform: translateY(-8px);
                    animation-name: none;
                    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5), 0 0 30px rgba(16, 229, 16, 0.6);
                    border-color: #10E510;
                }

        #xboxGiftCardsContainer .product-item {
            width: 90px !important; /* ✅✅ تم التعديل هنا: 90px */
            min-height: 160px !important;
            padding: 6px !important;
            background: linear-gradient(145deg, rgba(16, 40, 16, 0.5), rgba(0, 15, 0, 0.6)) !important;
            border: 1px solid rgba(16, 229, 16, 0.5) !important;
            animation: smooth-xbox-glow 2.5s infinite alternate ease-in-out;
        }

            #xboxGiftCardsContainer .product-item .product-image-wrapper {
                height: 70px !important;
                margin-bottom: 3px;
            }

            #xboxGiftCardsContainer .product-item h3 {
                font-size: 11px !important;
                min-height: 25px !important;
                margin-top: 3px;
                margin-bottom: 2px;
                line-height: 1.2;
            }

            #xboxGiftCardsContainer .product-item .product-description-text {
                display: none !important;
            }

            #xboxGiftCardsContainer .product-item p {
                /* (أوامر لضمان بقاء كل شيء على سطر واحد) */
                white-space: nowrap;
                display: flex;
                justify-content: center;
                align-items: baseline;
                gap: 0.3em;
                /* (تصغير حجم الخط الأساسي لكلمة "السعر" و "EGP") */
                font-size: 10px !important;
                color: #ccc;
            }

        /* 2. استهداف فقرة السعر في الكروت العريضة (ماينكرافت وجيم باس) */
        #xboxPopularGamesContainer .product-item p {
            /* (أوامر لضمان بقاء كل شيء على سطر واحد) */
            white-space: nowrap;
            display: flex;
            justify-content: center;
            align-items: baseline;
            gap: 0.3em;
            /* (تصغير حجم الخط الأساسي لكلمة "السعر" و "EGP") */
            font-size: 12px !important;
            color: #ccc;
        }

            /* 3. لا تقلق بشأن الأرقام. الكود الحالي الخاص بك سيتكفل بتكبيرها:
                #xboxGiftCardsContainer .product-item .product-price { font-size: 11px !important; }
                #xboxPopularGamesContainer .product-item .product-price { font-size: 14px !important; }
             */

            /* 4. (اختياري) تعديل بسيط على العملة "EGP" لجعلها أصغر */
            #xboxGiftCardsContainer .product-item p .currency-symbol,
            #xboxPopularGamesContainer .product-item p .currency-symbol {
                font-size: 0.9em; /* تصغيرها أكثر قليلاً */
                opacity: 0.8;
                padding-top: 1px; /* لضبط المحاذاة العمودية قليلاً */
            }



        #xboxGiftCardsContainer .product-item .product-price {
            font-size: 11px !important;
            margin-top: 0px;
            margin-bottom: 3px;
        }

        #xboxGiftCardsContainer .product-item .buy-btn {
            display: none !important; /* إخفاء زر شراء الآن */
        }

        #xboxGiftCardsContainer .product-item .add-to-cart-btn img {
            width: 20px !important;
            height: 20px !important;
        }

        /* 7. تنسيق الكروت العريضة (ماينكرافت وجيم باس) */
        #xboxPopularGamesContainer .product-item {
            width: 230px !important;
            min-height: 200px !important;
            padding: 10px !important;
            background: linear-gradient(145deg, rgba(16, 40, 16, 0.5), rgba(0, 15, 0, 0.6)) !important;
            border: 1px solid rgba(16, 229, 16, 0.5) !important;
            animation: smooth-xbox-glow 2.5s infinite alternate ease-in-out;
        }

            #xboxPopularGamesContainer .product-item .product-image-wrapper {
                height: 100px !important;
            }

            #xboxPopularGamesContainer .product-item .product-description-text {
                display: none !important; /* إخفاء الوصف لحل تداخل ماينكرافت */
            }

            #xboxPopularGamesContainer .product-item h3 {
                font-size: 14px !important;
                min-height: 35px !important;
                line-height: 1.3;
            }

            #xboxPopularGamesContainer .product-item .product-price {
                font-size: 14px !important;
                margin-bottom: 5px;
            }

            #xboxPopularGamesContainer .product-item .buy-btn {
                font-size: 14px !important;
                padding: 8px 15px !important;
                background-color: #107C10;
                color: var(--white-text);
                border: 2px solid #107C10;
                /* الزر ظاهر هنا بشكل طبيعي */
            }

            #xboxPopularGamesContainer .product-item .add-to-cart-btn img {
                width: 31px !important;
                height: 31px !important;
            }

        /* 8. تنسيق نافذة حاسبة Xbox المنبثقة */
        #xboxGiftingModal h2 {
            color: #10E510;
            border: none;
            text-align: center;
        }

        #xboxFinalPriceDisplay .price-label {
            color: #ccc;
            font-size: 1.1rem;
            font-weight: bold;
            display: block;
            text-align: center;
        }

        #xboxFinalPriceDisplay .price-value {
            display: block;
            font-size: 2.2rem;
            font-weight: bold;
            color: lightgreen;
            margin-top: 5px;
            text-align: center;
        }

        #xboxGiftingModal .button-primary {
            background-color: #107C10;
            color: white;
            border: none;
            animation: none;
        }

            #xboxGiftingModal .button-primary:hover {
                background-color: #10E510;
                color: var(--black-text);
                box-shadow: 0 0 20px rgba(16, 229, 16, 0.8);
            }
        /* ================================================================= */
        /* ✅ END: الكود النهائي والموحد لقسم XBOX بالكامل */
        /* ================================================================= */

        /* ==================================================================== */
        /* ✅ START: تصغير وتوسيط عنوان حاسبة فورتنايت (نسخة مُعززة) ✅ */
        /* ==================================================================== */

        .fn-boosting-content h3 {
            display: block;
            width: 100%;
            text-align: center;
            color: var(--white-text);
            border: none;
            padding: 0;
            margin-right: 0;
            /* ✅ تم تصغير حجم الخط وإضافة !important لضمان تطبيق التعديل */
            font-size: 1rem !important;
        }

        /* ================================================================== */
        /* ✅ END: تصغير وتوسيط عنوان حاسبة فورتنايت (نسخة مُعززة) ✅ */
        /* ================================================================== */

        /* ======================================================== */
        /* ✅ START: زيادة المسافة بين حقول إدخال فورتنايت ✅ */
        /* ======================================================== */

        .fn-calculator {
            display: flex;
            justify-content: center;
            gap: 30px; /* ✅ تم زيادة المسافة هنا من 20px إلى 30px */
            margin: 30px 0;
            flex-wrap: wrap;
        }

        /* ====================================================== */
        /* ✅ END: زيادة المسافة بين حقول إدخال فورتنايت ✅ */
        /* ====================================================== */

        /* ======================================================== */
        /* ✅ START: تصغير حجم حقول إدخال لفل فورتنايت ✅ */
        /* ======================================================== */

        .level-input-group {
            flex: 1;
            min-width: 150px; /* تصغير الحد الأدنى للعرض من 200px إلى 150px */
            max-width: 180px; /* إضافة حد أقصى للعرض لمنعها من التمدد الزائد */
        }

            .level-input-group input {
                padding: 10px; /* تقليل المساحة الداخلية لجعل الحقل أقصر */
                font-size: 1.3rem; /* تصغير حجم الخط داخل الحقل */
            }

        /* ====================================================== */
        /* ✅ END: تصغير حجم حقول إدخال لفل فورتنايت ✅ */
        /* ====================================================== */

        ارفع مستواك الآن في الباتل باس!
        /* ==================================================================== */
        /* ✅ START: توسيط عنوان Fortnite Level Boosting (نسخة مُعززة) ✅ */
        /* ==================================================================== */
        .fn-boosting-title {
            /* خصائص المظهر */
            color: #00c0ff;
            font-size: 2.5rem !important;
            text-shadow: 0 0 15px rgba(0, 192, 255, 0.7);
            border: none !important;
            margin-bottom: 30px;
            direction: ltr;
            /* خصائص لفرض التوسيط بشكل كامل */
            display: block !important; /* للتأكد من أنه يأخذ السطر كاملًا */
            width: 100% !important; /* للتأكد من أنه يملأ عرض البطاقة */
            text-align: center !important; /* لتوسيط النص بداخله */
            margin-right: 0 !important; /* لإلغاء أي هوامش قديمة */
            padding-right: 0 !important; /* لإلغاء أي مسافات داخلية قديمة */
        }

        /* ================================================================== */
        /* ✅ END: توسيط عنوان Fortnite Level Boosting (نسخة مُعززة) ✅ */
        /* ================================================================== */

        /* ================================================================= */
        /* ✅ START: VALORANT BOOSTING SECTION (التعديلات الجديدة بالكامل) ✅ */
        /* ================================================================= */

        /* ✅ التعديل الأول: تعريف حركة دوران الألوان للإطار بشكل سلس */
        @keyframes animated-rgb-border {
            from {
                transform: translate(-50%, -50%) rotate(0deg);
            }

            to {
                transform: translate(-50%, -50%) rotate(360deg);
            }
        }

        /* 1. تنسيق القسم الرئيسي ليعتمد على العناصر الوهمية للإطار والخلفية */
        #valorant-boosting {
            position: relative;
            overflow: hidden;
            padding: 2px; /* مساحة بسمك الإطار */
            border-radius: 17px; /* حواف خارجية أكبر قليلاً */
            border: none; /* إزالة الإطار القديم */
            animation: none; /* إزالة حركة الألوان القديمة */
            /* الخصائص الأخرى تبقى كما هي */
            background-size: cover !important;
            background-position: center !important;
        }

            /* 2. العنصر الوهمي (::before) لإنشاء الإطار المتحرك بالألوان الداكنة */
            #valorant-boosting::before {
                content: '';
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                width: 250%; /* حجم كبير للسماح بالدوران الكامل */
                height: 250%;
                z-index: -1; /* وضعه خلف كل شيء */
                /* تدرج لوني مخروطي (conic) بالألوان الداكنة التي طلبتها */
                background: conic-gradient( #c31432, /* أحمر داكن */
                #8A2BE2, /* بنفسجي */
                #240b36, /* بنفسجي غامق */
                #0D1B2A, /* أزرق داكن */
                #c31432 /* العودة للأحمر لإكمال الدورة */
                );
                /* تطبيق حركة الدوران السلسة التي تعطي تأثير الـ fade */
                animation: animated-rgb-border 6s linear infinite;
            }

            /* 3. العنصر الوهمي (::after) لإنشاء الخلفية الداخلية وتأثير البلور */
            #valorant-boosting::after {
                content: '';
                position: absolute;
                inset: 2px; /* تحديد سمك الإطار (2px) */
                background-image: url('./images/valorantreynass.png') !important;
                background-size: cover !important;
                background-position: center !important;
                border-radius: 15px; /* حواف داخلية */
                z-index: -1;
                /* حركة انتقالية ناعمة لتأثير البلور والتعتيم */
                transition: filter 0.5s ease-in-out;
            }

            /* ✅ التعديل الرابع: تطبيق تأثير السواد والبلور على الخلفية عند الدخول للحاسبة */
            #valorant-boosting.calculator-view-active::after {
                filter: blur(8px) brightness(0.4); /* تطبيق البلور مع تعتيم الصورة */
            }

            /* التأكد من أن محتوى القسم (الكارت) يظهر فوق كل التأثيرات */
            #valorant-boosting > * {
                position: relative;
                z-index: 1;
            }

        /* ✅ التعديل الثالث: إضافة حركة صعود للكارت عند مرور الماوس */
        #boosting-cover {
            transition: transform 0.3s ease-in-out;
        }

        #valorant-boosting:not(.calculator-view-active):hover #boosting-cover {
            transform: translateY(-10px); /* حركة للأعلى بمقدار 10 بكسل */
        }

        /* ✅ التعديل الثاني: تكبير حجم زر "ابدأ الآن" وإضافة توهج قوي عند الـ hover */
        #boosting-cover .start-boosting-btn {
            background-color: #ff4655;
            color: white;
            font-size: 18px; /* تكبير حجم الخط */
            padding: 15px 40px; /* زيادة المساحة الداخلية للزر */
            border-radius: 50px;
            border: 2px solid #ff4655;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.4);
            cursor: pointer;
        }

            #boosting-cover .start-boosting-btn:hover {
                background-color: #e6324b;
                color: #fff;
                /* توهج قوي وواضح باللون الأحمر مع لمسة بيضاء */
                box-shadow: 0 0 25px rgba(255, 70, 85, 0.8), 0 0 10px rgba(255, 255, 255, 0.3);
                transform: translateY(-5px) scale(1.05); /* حركة للأعلى مع تكبير بسيط */
            }

        /* =============================================================== */
        /* ✅ END: VALORANT BOOSTING SECTION (التعديلات الجديدة بالكامل) ✅ */
        /* =============================================================== */

        /* ✅✅ تعريف حركة ألوان RGB ثابتة وهادئة ✅✅ */
        @keyframes static-rgb-calm {
            0%, 100% {
                border-color: #c31432;
            }
            /* أحمر داكن */
            25% {
                border-color: #8A2BE2;
            }
            /* بنفسجي */
            50% {
                border-color: #240b36;
            }
            /* بنفسجي غامق */
            75% {
                border-color: #0D1B2A;
            }
            /* أزرق داكن */
        }

        /* ======================================= */
        /* ✅ START: الحل النهائي لتغيير لون البطاقات ✅ */
        /* ======================================= */

        #designs .custom-order-card {
            /* 1. التدرج اللوني الأحمر الشفاف (مع !important لضمان التطبيق) */
            background: linear-gradient(145deg, rgba(220, 53, 69, 0.25), rgba(100, 15, 25, 0.4)) !important;
            /* 2. الحفاظ على التأثير الزجاجي */
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            /* 3. تغيير لون الإطار (مع !important) */
            border: 1px solid rgba(255, 70, 85, 0.4) !important;
            /* 4. إضافة توهج خفيف باللون الأحمر عند التفاعل */
            transition: transform 0.3s, box-shadow 0.3s;
        }

            #designs .custom-order-card:hover {
                box-shadow: 0 0 25px rgba(255, 70, 85, 0.5);
                transform: translateY(-10px);
            }

        /* ======================================= */
        /* ✅ END: الحل النهائي  ✅ */
        /* ======================================= */

        #designs {
            /* الخصائص الحالية للخلفية تبقى كما هي */
            background-image: linear-gradient(rgba(30, 17, 50, 0.8), rgba(30, 17, 50, 0.8)), url('./images/my-new-gaming-bg.png');
            background-size: cover;
            background-position: center;
            backdrop-filter: none;
            -webkit-backdrop-filter: none;
            /* ✅✅ التعديلات الجديدة هنا ✅✅ */
            border-width: 2px; /* زيادة سمك الإطار قليلاً ليكون أوضح */
            border-style: solid;
            /* تطبيق الأنيميشن الخاص بالـ RGB */
            animation: rgb-outline 4s linear infinite;
        }

        /* ✅✅ START: خلفية جديدة لقسم التقييمات بالكامل ✅✅ */
        #feedback-section {
            /* 1. التدرج اللوني الغامق الجديد */
            background: linear-gradient(145deg, #0b0714, #1d1033, #0b0714);
            /* 2. تعديل الإطار ليتناسب مع الخلفية الداكنة */
            border: 1px solid #4a2f6c; /* إطار بنفسجي أغمق */
            box-shadow: 0 0 25px rgba(44, 26, 64, 0.5); /* توهج بنفسجي خفيف */
            padding-bottom: 30px !important;
        }
        /* ✅✅ END: خلفية قسم التقييمات ✅✅ */

        .comment-card {
            /* ✅✅ هذا هو التدرج اللوني الجديد ✅✅ */
            background: linear-gradient(135deg, #1d2b4a, #1a1a2a);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            /* ✅ قمنا بتغيير لون الخط الجانبي ليتناسب مع الخلفية الجديدة */
            border-right: 3px solid #0070d1; /* يمكنك تغيير هذا اللون للأزرق أو أي لون آخر */
            box-shadow: 0 4px 15px rgba(0,0,0,0.2); /* إضافة ظل خفيف لعمق التصميم */
        }

        /* ✅✅ كود لتقليل البادينج لبطاقة ألعاب بلايستيشن ✅✅ */
        #ps-games-offer-card {
            padding: 5px; /* القيمة الافتراضية كانت 10px، يمكنك تعديل هذا الرقم كما تريد */
        }
        /* ✅✅ START: خلفية قسم ألعاب بلايستيشن ✅✅ */
        #playstation-games-page {
            /* 1. مسار صورة الخلفية مع طبقة تعتيم */
            background-image: linear-gradient(rgba(10, 20, 45, 0.85), rgba(10, 20, 45, 0.85)), url('./images/playstation52253.png');
            /* 2. خصائص لجعل الخلفية تملأ الشاشة وتكون ثابتة */
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            /* 3. تحسينات إضافية للإطار ليتناسب مع هوية بلايستيشن */
            border-color: #0070d1; /* لون PlayStation الأزرق الرسمي */
            box-shadow: 0 0 25px rgba(0, 112, 209, 0.3); /* توهج أزرق خفيف */
        }
        /* ✅✅ END: خلفية قسم ألعاب بلايستيشن ✅✅ */


        /* 1. تعريف الحاوية الرئيسية كـ Grid من عمودين متساويين */
        .ps-grid-container {
            display: grid;
            /* هذا السطر هو الأهم: يقسم المساحة إلى عمودين متساويين تمامًا */
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
            align-items: stretch; /* يجعل طول العمودين متساويًا */
        }

        /* 2. تنسيق بسيط لكل عمود لضمان تمدد المحتوى */
        .ps-grid-column {
            display: flex;
            flex-direction: column;
        }

            .ps-grid-column > .products-container {
                /* flex-grow: 1; */ /* <-- ✅ اتأكد إن السطر ده ملغي أو ممسوح */
            }

        /* 3. جعل حاوية الاشتراكات قابلة للتمرير أفقيًا إذا زاد محتواها */
        #ps-plus-container {
            display: flex;
            overflow-x: auto;
            padding-bottom: 15px; /* مسافة لشريط التمرير */
            scrollbar-width: thin;
            scrollbar-color: #8e6abf var(--main-purple);
        }

            #ps-plus-container::-webkit-scrollbar {
                height: 8px;
            }

            #ps-plus-container::-webkit-scrollbar-thumb {
                background: #8e6abf;
                border-radius: 4px;
            }

        /* 4. كود لضبط العرض في شاشات الموبايل */
        @media (max-width: 768px) {
            .ps-grid-container {
                /* تحويلها إلى عمود واحد فقط في الشاشات الصغيرة */
                grid-template-columns: 1fr;
            }
        }

        /* ✅✅ END: الحل النهائي ✅✅ */

        #subscription-group {
            max-height: 35vh; /* يمكنك تعديل هذا الرقم (مثلاً 40vh) ليناسبك */
            overflow-y: auto; /* يضيف شريط تمرير رأسي عند الحاجة */
            padding: 10px 15px; /* يحسن شكل المحتوى داخل الإطار */
            margin: 20px 0; /* يضيف مسافة قبل وبعد القائمة */
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* ✅✅ START: الحل النهائي لفرض عرض متساوي للبطاقات ✅✅ */

        .playstation-flex-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            align-items: stretch; /* ✅ هذا التعديل سيجعل طول القسمين متساويًا */
            justify-content: center;
            margin-bottom: 30px;
        }

        /* هذا هو التعديل الأهم */
        .playstation-flex-item {
            /* بدلًا من flex: 1، سنعطي كل قسم عرضًا ثابتًا بالنسبة المئوية */
            flex-basis: 45%; /* كل قسم سيأخذ حوالي 45% من عرض الحاوية الرئيسية */
            min-width: 350px; /* مهم للشاشات الصغيرة */
            display: flex; /* ✅ إضافة مهمة لتنظيم المحتوى الداخلي */
            flex-direction: column; /* ✅ لجعل المحتوى ينمو لأسفل */
        }

            /* هذا الكود سيجعل حاويات المنتجات تتمدد لتملأ المساحة المتاحة */
            .playstation-flex-item .products-container {
                flex-grow: 1;
            }

        /* ✅✅ END: الحل النهائي ✅✅ */

        /* ====================================================== */
        /* ✅ START: تعريف حركة توهج الـ RGB للإطار           ✅ */
        /* ====================================================== */
        @keyframes rgb-outline {
            0% {
                border-color: #ff0000;
                box-shadow: 0 0 15px #ff0000;
            }

            16% {
                border-color: #ffff00;
                box-shadow: 0 0 15px #ffff00;
            }

            33% {
                border-color: #00ff00;
                box-shadow: 0 0 15px #00ff00;
            }

            50% {
                border-color: #00ffff;
                box-shadow: 0 0 15px #00ffff;
            }

            66% {
                border-color: #0000ff;
                box-shadow: 0 0 15px #0000ff;
            }

            83% {
                border-color: #ff00ff;
                box-shadow: 0 0 15px #ff00ff;
            }

            100% {
                border-color: #ff0000;
                box-shadow: 0 0 15px #ff0000;
            }
        }
        /* ====================================================== */
        /* ✅ END: تعريف حركة توهج الـ RGB للإطار             ✅ */
        /* ====================================================== */

        /* ====================================================== */
        /* ✅ START: تصميم بطاقات خدمات الجيمنج (RGB & Neon)    ✅ */
        /* ====================================================== */

        /* 1. تعريف حركة دوران ألوان الإطار */
        @keyframes rotate-glow {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        #gaming-services-section .service-offer-card {
            position: relative;
            z-index: 1;
            /* ✅ الخلفية الجديدة المتدرجة */
            background: linear-gradient(145deg, #0c0c0e, #002244, #2c1a40);
            border: 2px solid transparent;
            overflow: hidden;
        }

            /* 3. إنشاء الإطار المتحرك باستخدام عنصر زائف (pseudo-element) */
            #gaming-services-section .service-offer-card::before {
                content: '';
                position: absolute;
                top: -50%;
                left: -50%;
                width: 200%;
                height: 200%;
                z-index: -1; /* وضعه خلف محتوى البطاقة */
                /* تدرج لوني مخروطي (conic) بألوان الجيمنج */
                background: conic-gradient( transparent, #00c0ff, /* أزرق سماوي */
                #ff4655, /* أحمر فالورانت */
                #39FF14, /* أخضر نيون */
                #cda1ff, /* بنفسجي فاتح */
                #00c0ff /* العودة للأزرق لإكمال الدورة */
                );
                /* تطبيق حركة الدوران */
                animation: rotate-glow 4s linear infinite;
            }

            /* ==================================================================== */
            /* ✅ START: FINAL ULTIMATE FIX for Gaming Services Hover Effect ✅ */
            /* ==================================================================== */

            /* --- 1. إعادة تعيين أي تأثيرات قديمة --- */
            #gaming-services-section .service-offer-card:hover {
                transform: translateY(-8px) !important; /* حركة الرفع فقط */
                /* ✅✅ الحل القاطع: إلغاء أي توهج ملون قديم بالقوة */
                box-shadow: 0 12px 30px rgba(0, 0, 0, 0.6) !important;
                /* ✅✅ الحل القاطع: إجبار لون الإطار على الأبيض عند التفاعل */
                border-color: #ffffff !important;
                /* إلغاء أي animations قديمة قد تسبب ألوانًا */
                animation: none !important;
            }

                /* --- 2. إعادة تعيين العنصر الزائف ::before الذي قد يكون سبب التوهج --- */
                #gaming-services-section .service-offer-card:hover::before {
                    opacity: 0 !important;
                    animation: none !important;
                }
            /* ================================================================== */
            /* ✅ END: FINAL ULTIMATE FIX for Gaming Services Hover Effect ✅ */
            /* ================================================================== */

            /* 5. جعل الزر يتفاعل مع التصميم الجديد */
            #gaming-services-section .service-offer-card button {
                border-color: #00c0ff;
                color: #00c0ff;
            }

            #gaming-services-section .service-offer-card:hover button {
                background-color: #00c0ff;
                color: #110e1a;
                box-shadow: 0 0 15px #00c0ff;
            }

        /* ====================================================== */
        /* ✅ END: تصميم بطاقات خدمات الجيمنج (RGB & Neon)      ✅ */
        /* ====================================================== */

        /* ====================================================== */
        /* ✅ START: تصميم نظام التبويب لاشتراكات PS Plus      ✅ */
        /* ====================================================== */

        /* 1. الحاوية الرئيسية لنظام التبويب */
        #subscription-options-container.tabbed-layout {
            display: flex;
            flex-direction: column;
            width: 100%;
            gap: 15px;
        }

        /* 2. شريط الأزرار الخاص بالفئات */
        .tier-tabs {
            display: flex;
            justify-content: center;
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: 50px;
            padding: 5px;
            border: 1px solid var(--main-purple);
        }

        /* 3. تصميم كل زر تبويب */
        .tier-tab-button {
            flex: 1; /* لجعل الأزرار متساوية في العرض */
            padding: 10px 15px;
            font-size: 1rem;
            font-weight: bold;
            color: var(--light-text);
            background-color: transparent;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap; /* لمنع نزول النص لسطر جديد */
        }

            /* 4. تصميم الزر النشط (الذي تم الضغط عليه) */
            .tier-tab-button.active {
                background-color: #0070d1; /* لون أزرق بلايستيشن */
                color: white;
                box-shadow: 0 0 10px rgba(0, 112, 209, 0.5);
            }

        /* 5. حاوية عرض الخيارات (المدد) */
        .tier-content-container {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        /* 6. إخفاء جميع الخيارات بشكل افتراضي */
        .tier-content {
            display: none;
            width: 100%;
            animation: fadeIn 0.4s ease;
        }

            /* 7. إظهار الخيارات الخاصة بالتبويب النشط فقط */
            .tier-content.active {
                display: block;
            }

        /* ====================================================== */
        /* ✅ END: تصميم نظام التبويب لاشتراكات PS Plus        ✅ */
        /* ====================================================== */

        /* ====================================================== */
        /* ✅ START: PlayStation Section Styles              ✅ */
        /* ====================================================== */

        #playstation-section {
            /* 1. مسار صورة الخلفية مع فلتر تعتيم أزرق داكن */
            /* ❗ تأكد من وجود صورة باسم 'playstation-bg.jpg' في مجلد images */
            background-image: linear-gradient(rgba(10, 20, 45, 0.85), rgba(10, 20, 45, 0.85)), url('./images/playstation-bg.jpg');
            /* 2. خصائص لجعل الخلفية تملأ الشاشة وتكون ثابتة (تأثير Parallax) */
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            /* 3. خصائص الإطار والتوهج لتتناسب مع هوية بلايستيشن */
            border-color: #0070d1; /* لون PlayStation الأزرق الرسمي */
            box-shadow: 0 0 25px rgba(0, 112, 209, 0.3);
        }

        /* ====================================================== */
        /* ✅ END: PlayStation Section Styles                ✅ */
        /* ====================================================== */

        /* ================================================================= */
        /* ✅ START: PlayStation Gift Card Blue Theme (Final Corrected) ✅ */
        /* ================================================================= */

        /* استهداف كروت المنتجات الموجودة داخل قسم بطاقات الشحن تحديداً */
        #psn-gift-cards-container .product-item {
            background: linear-gradient(145deg, rgba(0, 112, 209, 0.7), rgba(10, 20, 45, 0.9)) !important;
            border-color: #0070d1 !important;
        }

            #psn-gift-cards-container .product-item:hover {
                box-shadow: 0 10px 25px rgba(0, 112, 209, 0.5) !important;
                border-color: #3a9dff !important;
                animation: none !important; /* لمنع أي حركة اهتزاز قديمة */
            }

            /* تعديل الأزرار أيضاً لتكون باللون الأزرق */
            #psn-gift-cards-container .product-item .buy-btn {
                background-color: #0070d1 !important;
                border-color: #3a9dff !important;
            }

                #psn-gift-cards-container .product-item .buy-btn:hover {
                    background-color: #00457c !important;
                    box-shadow: 0 0 15px #3a9dff !important;
                }

        /* ================================================================= */
        /* ✅ END: PlayStation Gift Card Blue Theme (Final Corrected)   ✅ */
        /* ================================================================= */

        /* ====================================================== */
        /* ✅ START: PlayStation Plus Card Blue Theme          ✅ */
        /* ====================================================== */

        .ps-plus-card {
            /* خلفية متدرجة باللون الأزرق الخاص بالبلايستيشن */
            background: linear-gradient(145deg, rgba(0, 112, 209, 0.7), rgba(10, 20, 45, 0.9)) !important;
            /* إطار أزرق */
            border-color: #0070d1 !important;
        }

            .ps-plus-card:hover {
                box-shadow: 0 10px 25px rgba(0, 112, 209, 0.5) !important;
                border-color: #3a9dff !important;
            }

            /* تعديل ألوان الأزرار لتتناسب مع الثيم الأزرق */
            .ps-plus-card .buy-btn {
                background-color: #0070d1 !important;
                color: white !important;
                border-color: #3a9dff !important;
            }

                .ps-plus-card .buy-btn:hover {
                    background-color: #00457c !important;
                    box-shadow: 0 0 15px #3a9dff !important;
                }
        /* ====================================================== */
        /* ✅ END: PlayStation Plus Card Blue Theme            ✅ */
        /* ====================================================== */

        /* ====================================================== */
        /* ✅ START: تصغير حجم بطاقات شحن PlayStation Store     ✅ */
        /* ====================================================== */

        /* 1. استهداف البطاقات داخل حاوية PSN وتقليل حجمها الرئيسي */
        #psn-gift-cards-container .psn-gift-card-item {
            width: 145px !important;
            min-height: 250px !important;
            padding: 10px !important;
        }

            /* 2. تعديل ارتفاع حاوية الصورة بشكل متناسب */
            #psn-gift-cards-container .psn-gift-card-item .product-image-wrapper {
                height: 130px !important;
            }

            /* 3. تعديل حجم خط العنوان والحد الأدنى لارتفاعه */
            #psn-gift-cards-container .psn-gift-card-item h3 {
                font-size: 14px !important;
                min-height: 40px !important;
            }

            /* 4. تعديل حجم خط السعر */
            #psn-gift-cards-container .psn-gift-card-item p {
                font-size: 14px !important;
            }

            /* 5. تعديل حجم زر "شراء الآن" */
            #psn-gift-cards-container .psn-gift-card-item .buy-btn {
                font-size: 13px !important;
                padding: 8px 12px !important;
            }

            /* 6. تعديل حجم أيقونة السلة */
            #psn-gift-cards-container .psn-gift-card-item .add-to-cart-btn img {
                width: 30px !important;
                height: 30px !important;
            }

        /* ====================================================== */
        /* ✅ END: تصغير حجم بطاقات شحن PlayStation Store       ✅ */
        /* ====================================================== */

        /* ====================================================== */
        /* ✅ START: PlayStation Gift Card Styles              ✅ */
        /* ====================================================== */

        .psn-gift-card-item {
            background: linear-gradient(145deg, rgba(0, 112, 209, 0.6), rgba(0, 50, 100, 0.8));
            border-color: #0070d1;
        }

            .psn-gift-card-item:hover {
                transform: translateY(-8px) scale(1.02);
                box-shadow: 0 10px 25px rgba(0, 112, 209, 0.4);
                border-color: #3a9dff;
            }

        /* ====================================================== */
        /* ✅ END: PlayStation Gift Card Styles                ✅ */
        /* ====================================================== */

        /* ====================================================== */
        /* ✅ START: PlayStation Section Styles                ✅ */
        /* ====================================================== */

        #playstation-section {
            /* خلفية مميزة للقسم مع طبقة تعتيم زرقاء داكنة */
            background-image: linear-gradient(rgba(10, 20, 45, 0.85), rgba(10, 20, 45, 0.85)), url('./images/playstation-bg.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            border-color: #0070d1; /* لون PlayStation الأزرق الرسمي */
            box-shadow: 0 0 25px rgba(0, 112, 209, 0.3);
        }

        /* تنسيق العناوين الفرعية داخل القسم */
        .playstation-subcategory-label {
            text-align: center;
            color: #a9c0de; /* لون أزرق فاتح */
            margin-top: 30px;
            margin-bottom: 20px;
            border-bottom: 2px solid #0070d1;
            padding-bottom: 10px;
            display: inline-block;
            width: auto;
            border-right: none;
            padding-right: 0;
        }

        /* ====================================================== */
        /* ✅ END: PlayStation Section Styles                  ✅ */
        /* ====================================================== */

        /* ====================================================== */
        /* ✅ START: Gaming Services Section Background        ✅ */
        /* ====================================================== */

        #gaming-services-section {
            /* ... خصائص الخلفية تبقى كما هي ... */
            background-image: linear-gradient(rgba(30, 17, 50, 0.85), rgba(30, 17, 50, 0.85)), url('./images/my-new-gaming-bg.png');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            /* --- ✅ التعديلات الجديدة تبدأ هنا --- */
            border-width: 2px; /* زيادة سمك الإطار قليلاً */
            border-style: solid;
            /* تطبيق الأنيميشن الذي أنشأناه */
            animation: rgb-outline 4s linear infinite;
        }

        /* ====================================================== */
        /* ✅ END: Gaming Services Section Background          ✅ */
        /* ====================================================== */

        /* ====================================================== */
        /* ✅ START: Custom Order Discord Button Styles        ✅ */
        /* ====================================================== */

        /* 1. حاوية جديدة لتنظيم الأزرار بجانب بعضها */
        .offer-buttons-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px; /* مسافة بين الزرين */
            width: 100%;
            margin-top: 20px; /* مسافة من الأعلى */
        }

            /* 2. تعديل حجم زر "اطلب الآن" ليتناسب مع الزر الجديد */
            .offer-buttons-container .offer-order-btn {
                flex-grow: 1; /* لجعل الزر يأخذ نصف المساحة */
                margin: 0;
                padding: 12px 15px; /* تعديل الحشو ليكون متناسقًا */
                font-size: 16px;
            }

        /* 3. تصميم زر "اطلب عبر ديسكورد" الجديد */
        .offer-discord-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            flex-grow: 1; /* لجعل الزر يأخذ نصف المساحة الآخر */
            padding: 12px 15px;
            font-size: 16px;
            font-weight: bold;
            color: #ffffff;
            background-color: #5865F2; /* لون الديسكورد الرسمي */
            border-radius: 50px;
            text-decoration: none;
            transition: all 0.3s ease;
            border: 2px solid #5865F2;
        }

            .offer-discord-btn:hover {
                background-color: transparent;
                color: #5865F2;
                transform: translateY(-2px);
                box-shadow: 0 0 10px rgba(88, 101, 242, 0.7);
            }

            .offer-discord-btn img {
                width: 20px;
                height: 20px;
            }

        /* ====================================================== */
        /* ✅ END: Custom Order Discord Button Styles          ✅ */
        /* ====================================================== */

        /* ====================================================== */
        /* ✅ START: Black Shadow for CoD Price Text           ✅ */
        /* ====================================================== */

        #all-cod-games-container .product-item p {
            /* ظل أسود ناعم وواضح لتحسين الوضوح فوق الصورة */
            text-shadow: 0px 1px 5px rgba(0, 0, 0, 0.9);
        }

        /* ====================================================== */
        /* ✅ END: Black Shadow for CoD Price Text             ✅ */
        /* ====================================================== */

        /* ====================================================== */
        /* ✅ START: Black Stroke for CoD Price Text           ✅ */
        /* ====================================================== */

        #all-cod-games-container .product-item p {
            /* إنشاء ستروك أسود 1px باستخدام أربعة ظلال للنص */
            text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;
        }

        /* ====================================================== */
        /* ✅ END: Black Stroke for CoD Price Text             ✅ */
        /* ====================================================== */

        /* ====================================================== */
        /* ✅ START: Stylish Price Badge Style                 ✅ */
        /* ====================================================== */

        .stylish-price-badge {
            display: inline-block; /* للسماح بتطبيق الحشو والإطار بشكل صحيح */
            padding: 8px 18px; /* مساحة داخلية حول النص */
            border-radius: 50px; /* لجعل الحواف دائرية بالكامل */
            /* التأثير الزجاجي الشفاف */
            background-color: rgba(0, 0, 0, 0.25); /* خلفية سوداء شفافة */
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
            /* 1. البوردر الخفيف */
            border: 1px solid rgba(255, 255, 255, 0.15); /* إطار أبيض شفاف خفيف */
            /* تنسيق النص الداخلي */
            color: #90ee90; /* لون أخضر فاتح للسعر */
            font-weight: bold;
            font-size: 1.1rem; /* يمكنك تعديل حجم الخط حسب رغبتك */
            /* 2. الستروك الخفيف (باستخدام ظل النص) */
            text-shadow: 0px 1px 3px rgba(0, 0, 0, 0.5);
            box-shadow: 0 2px 5px rgba(0,0,0,0.2); /* ظل خفيف للبطاقة نفسها */
        }

        /* ====================================================== */
        /* ✅ END: Stylish Price Badge Style                   ✅ */
        /* ====================================================== */

        /* ====================================================== */
        /* ✅ START: Call of Duty Page Background Style 🎖️      ✅ */
        /* ====================================================== */

        #all-cod-games {
            /* 1. مسار صورة الخلفية مع طبقة تعتيم داكنة */
            background-image: linear-gradient(rgba(10, 10, 15, 0.8), rgba(10, 10, 15, 0.8)), url('./images/cod_background.jpg');
            /* 2. خصائص لجعل الخلفية تملأ الشاشة وتكون ثابتة */
            background-size: cover;
            background-position: center;
            background-attachment: fixed; /* هذا السطر يعطي تأثير الـ Parallax */
            /* 3. تحسينات إضافية للإطار ليتناسب مع التصميم */
            border-color: #7a8d9a; /* نفس لون إطار البطاقات المعدني */
            box-shadow: 0 0 25px rgba(122, 141, 154, 0.3); /* توهج خفيف للإطار */
        }

        /* ====================================================== */
        /* ✅ END: Call of Duty Page Background Style           ✅ */
        /* ====================================================== */

        /* ================================================================= */
        /* ✅ START: Special Call of Duty Card Styles (Final Poster v2) 🎖️ ✅ */
        /* ================================================================= */

        /* 1. تعريف حركة خطوط المسح (Scanlines) تبقى كما هي */
        @keyframes scan-anim {
            0% {
                background-position: 0 0;
            }

            100% {
                background-position: 0 100%;
            }
        }

        /* 2. التصميم الجديد للبطاقة بشكل البوستر الطولي */
        #all-cod-games-container .product-item {
            width: 180px;
            height: 270px;
            padding: 0;
            border: 1px solid #7a8d9a;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: flex-end;
        }

            /* 3. جعل الصورة تملأ البطاقة بالكامل وتكون في الخلفية */
            #all-cod-games-container .product-item .product-image-wrapper {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                z-index: 1;
            }

            /* 4. إخفاء العنوان تمامًا */
            #all-cod-games-container .product-item h3 {
                display: none;
            }

            /* 5. تصميم المحتوى ليظهر فوق الصورة */
            #all-cod-games-container .product-item .product-content-overlay {
                position: relative;
                z-index: 2;
                width: 100%;
                padding: 15px 10px;
                box-sizing: border-box;
                background: transparent;
            }

            /* ✅ 1. إخفاء الوصف الأصفر بالكامل */
            #all-cod-games-container .product-item .product-description-text {
                display: none;
            }

            #all-cod-games-container .product-item .product-price {
                color: #90ee90;
                font-size: 14px;
                text-shadow: 0px 1px 4px rgba(0, 0, 0, 0.9);
            }

            #all-cod-games-container .product-item p {
                margin-bottom: 10px;
                min-height: 0;
            }

            /* ✅ 2. التصميم الجديد لزر الشراء باللون الأزرق الزجاجي */
            #all-cod-games-container .product-item .buy-btn {
                background-color: rgba(98, 125, 143, 0.5); /* لون أزرق معدني شفاف */
                backdrop-filter: blur(5px);
                -webkit-backdrop-filter: blur(5px);
                border: 1px solid rgba(159, 179, 196, 0.8);
                color: #e5e5e5;
                font-weight: bold;
                font-size: 13px;
                padding: 8px 15px;
            }

                #all-cod-games-container .product-item .buy-btn:hover {
                    background-color: rgba(122, 141, 154, 0.7);
                    border-color: #e5e5e5;
                    box-shadow: 0 0 12px rgba(159, 179, 196, 0.7); /* تأثير التوهج */
                }

            #all-cod-games-container .product-item .add-to-cart-btn img {
                width: 28px;
                height: 28px;
            }

            /* 7. تأثير خطوط المسح يبقى كما هو */
            #all-cod-games-container .product-item::after {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: repeating-linear-gradient(0deg, rgba(144, 238, 144, 0) 0px, rgba(144, 238, 144, 0.15) 1px, rgba(144, 238, 144, 0) 2px);
                opacity: 0;
                transition: opacity 0.4s ease-in-out;
                pointer-events: none;
                z-index: 3;
            }

            #all-cod-games-container .product-item:hover::after {
                opacity: 1;
                animation: scan-anim 1s linear infinite;
            }

        /* ================================================================= */
        /* ✅ END: Special Call of Duty Card Styles (Final Poster v2)       ✅ */
        /* ================================================================= */

        /* ✅ START: أيقونات جديدة لروابط الفوتر ✅ */
        .footer-link-icon {
            margin-right: 8px; /* مسافة بين النص والأيقونة في RTL */
            width: 20px; /* حجم الأيقونة */
            height: 20px;
            vertical-align: middle; /* لمحاذاة الأيقونة عموديًا مع النص */
            color: currentColor; /* لكي تأخذ الأيقونة لون النص الحالي */
        }

        html[dir="ltr"] .footer-link-icon {
            margin-right: 0;
            margin-left: 8px; /* مسافة بين النص والأيقونة في LTR */
        }
        /* ✅ END: أيقونات جديدة لروابط الفوتر ✅ */

        /* ====================================================== */
        /* ✅ START: إصلاح بلور خلفية قسم الخدمات (النسخة النهائية) ✅ */
        /* ====================================================== */

        /* الخطوة 1: تجهيز القسم الرئيسي ليكون حاوية للخلفية */
        #services-section {
            position: relative; /* مهم لوضع طبقة الخلفية */
            overflow: hidden; /* لإخفاء أطراف البلور خارج الحواف المستديرة */
            background-color: transparent !important; /* نجعل الخلفية الأساسية شفافة تمامًا */
            z-index: 1; /* لضمان أن المحتوى يظهر فوق الخلفية */
            /* --- أبقِ على هذه الخصائص كما هي --- */
            border: 1px solid #8e6abf;
            padding: 20px;
            margin: 20px;
            border-radius: 15px;
        }

            /* الخطوة 2: إنشاء طبقة الخلفية الضبابية المنفصلة */
            #services-section::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                z-index: -1; /* لوضع هذه الطبقة خلف المحتوى */
                /* خصائص صورة الخلفية */
                background-image: linear-gradient(rgba(30, 17, 50, 0.85), rgba(30, 17, 50, 0.85)), url('./images/services-background.png');
                background-size: cover;
                background-position: center;
                background-attachment: fixed;
                /* ✅ هذا هو السطر الذي يضيف تأثير البلور للخلفية فقط */
                filter: blur(5px);
                /* هذا السطر يكبر الخلفية قليلاً لمنع ظهور حواف باهتة بسبب البلور */
                transform: scale(1.1);
            }

        /* ====================================================== */
        /* ✅ END: إصلاح بلور خلفية قسم الخدمات                 ✅ */
        /* ====================================================== */

        /* ====================================================== */
        /* ✅ START: تأثير لمعان بطاقات الباندل (إصلاح الطبقات) ✅ */
        /* ====================================================== */

        /* 1. إنشاء طبقة اللمعان فوق الصورة */
        .product-item.bundle-card .product-image-wrapper::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 50%;
            height: 100%;
            background: linear-gradient(to right, rgba(255,255,255,0) 0%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0) 100%);
            transform: translateX(-100%) skewX(-25deg);
            /* ✅✅ التعديل الرئيسي: رفع الطبقة لتظهر فوق الصورة وليس خلفها */
            z-index: 2;
        }

        /* 2. التأكد من أن الصورة نفسها في طبقة خلفية */
        .product-item.bundle-card .product-image-wrapper img {
            position: relative;
            z-index: 1;
        }

        /* 3. عند مرور الماوس، يتم تشغيل الأنيميشن (بدون تغيير) */
        .product-item.bundle-card:hover .product-image-wrapper::before {
            animation: shine-effect 0.85s ease-in-out;
        }

        /* ====================================================== */
        /* ✅ END: تأثير لمعان بطاقات الباندل (إصلاح الطبقات) ✅ */
        /* ====================================================== */

        /* ====================================================== */
        /* ✅ START: توحيد حجم بطاقات فورتنايت وفالورانت مع مارفل ✅ */
        /* ====================================================== */

        /* 1. استهداف البطاقات وتحديد الحجم الجديد (145px) */
        #valorantPoints .product-item,
        #fortnite .product-item {
            width: 145px !important;
            min-height: 250px !important;
            padding: 10px !important;
        }

            /* 2. تعديل ارتفاع حاوية الصورة بشكل متناسب */
            #valorantPoints .product-item .product-image-wrapper,
            #fortnite .product-item .product-image-wrapper {
                height: 130px !important;
            }

            /* 3. تعديل حجم خط العنوان */
            #valorantPoints .product-item h3,
            #fortnite .product-item h3 {
                font-size: 14px !important;
                min-height: 40px !important;
            }

            /* 4. تعديل حجم خط السعر والوصف */
            #valorantPoints .product-item p,
            #fortnite .product-item p {
                font-size: 14px !important;
            }

            /* 5. تعديل حجم زر "شراء الآن" */
            #valorantPoints .product-item .buy-btn,
            #fortnite .product-item .buy-btn {
                font-size: 13px !important;
                padding: 8px 12px !important;
            }

            /* 6. تعديل حجم أيقونة السلة */
            #valorantPoints .product-item .add-to-cart-btn img,
            #fortnite .product-item .add-to-cart-btn img {
                width: 30px !important;
                height: 30px !important;
            }

        /* ====================================================== */
        /* ✅ END: توحيد حجم بطاقات فورتنايت وفالورانت مع مارفل ✅ */
        /* ====================================================== */

        /* ====================================================== */
        /* ✅ START: تأثير النار المتطايرة (النسخة النهائية باللون البنفسجي) ✅ */
        /* ====================================================== */

        @keyframes fly-up {
            0% {
                transform: translateY(0) scale(1);
                opacity: 1;
            }

            100% {
                transform: translateY(-180px) scale(0);
                opacity: 0;
            }
        }

        /* 1. حاوية النار تكون في الطبقة الوسطى */
        .fire-particles-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
            z-index: 2;
        }

            /* 2. التنسيق المبدئي لكل شرارة مع اللون البنفسجي */
            .fire-particles-container i {
                position: absolute;
                bottom: -10px;
                /* ✅ تم تغيير اللون الأساسي إلى بنفسجي فاتح */
                background: #e0b0ff;
                border-radius: 50%;
                opacity: 0;
                animation: none;
                /* ✅ تم تغيير لون التوهج إلى درجات بنفسجية */
                box-shadow: 0 0 5px #bf00ff, 0 0 10px #9932CC;
                filter: blur(3px);
            }

        /* 3. التأكد من أن حاوية المحتوى هي الطبقة العلوية */
        .product-item .product-content-overlay {
            position: relative;
            z-index: 3;
            display: flex;
            flex-direction: column;
            align-items: center;
            flex-grow: 1;
            width: 100%;
        }

        /* 4. التأكد من أن حاوية الصورة هي الطبقة السفلية */
        .product-item .product-image-wrapper {
            position: relative;
            z-index: 1;
        }

        /* 5. تشغيل الأنيميشن عند مرور الماوس */
        .product-item.bundle-card:hover .fire-particles-container i {
            animation-name: fly-up;
            animation-timing-function: ease-out;
            animation-iteration-count: infinite;
        }

            /* 6. التوزيع العشوائي للشرارات بألوان بنفسجية مختلفة */
            .product-item.bundle-card:hover .fire-particles-container i:nth-child(1) {
                left: 20%;
                animation-delay: 0.2s;
                animation-duration: 2.5s;
                width: 4px;
                height: 4px;
            }

            .product-item.bundle-card:hover .fire-particles-container i:nth-child(2) {
                left: 80%;
                animation-delay: 0.5s;
                animation-duration: 3s;
                width: 5px;
                height: 5px;
                background: #cda1ff;
            }
            /* ✅ بنفسجي أغمق */
            .product-item.bundle-card:hover .fire-particles-container i:nth-child(3) {
                left: 50%;
                animation-delay: 0.1s;
                animation-duration: 2.2s;
                width: 3px;
                height: 3px;
            }

            .product-item.bundle-card:hover .fire-particles-container i:nth-child(4) {
                left: 30%;
                animation-delay: 0.8s;
                animation-duration: 3.5s;
                width: 6px;
                height: 6px;
            }

            .product-item.bundle-card:hover .fire-particles-container i:nth-child(5) {
                left: 70%;
                animation-delay: 1s;
                animation-duration: 2s;
                width: 4px;
                height: 4px;
                background: #a450ff;
            }
            /* ✅ بنفسجي مشبع */
            .product-item.bundle-card:hover .fire-particles-container i:nth-child(6) {
                left: 40%;
                animation-delay: 0.4s;
                animation-duration: 2.8s;
                width: 5px;
                height: 5px;
            }

            .product-item.bundle-card:hover .fire-particles-container i:nth-child(7) {
                left: 60%;
                animation-delay: 1.2s;
                animation-duration: 3.2s;
                width: 3px;
                height: 3px;
            }

            .product-item.bundle-card:hover .fire-particles-container i:nth-child(8) {
                left: 15%;
                animation-delay: 0.6s;
                animation-duration: 2.4s;
                width: 5px;
                height: 5px;
            }

            .product-item.bundle-card:hover .fire-particles-container i:nth-child(9) {
                left: 85%;
                animation-delay: 1.5s;
                animation-duration: 3.8s;
                width: 4px;
                height: 4px;
                background: #cda1ff;
            }
            /* ✅ بنفسجي أغمق */
            .product-item.bundle-card:hover .fire-particles-container i:nth-child(10) {
                left: 55%;
                animation-delay: 0.3s;
                animation-duration: 2.6s;
                width: 6px;
                height: 6px;
            }

            .product-item.bundle-card:hover .fire-particles-container i:nth-child(11) {
                left: 35%;
                animation-delay: 1.1s;
                animation-duration: 3.1s;
                width: 3px;
                height: 3px;
            }

            .product-item.bundle-card:hover .fire-particles-container i:nth-child(12) {
                left: 75%;
                animation-delay: 0.7s;
                animation-duration: 2.3s;
                width: 5px;
                height: 5px;
            }

            .product-item.bundle-card:hover .fire-particles-container i:nth-child(13) {
                left: 25%;
                animation-delay: 1.4s;
                animation-duration: 3.6s;
                width: 4px;
                height: 4px;
            }

            .product-item.bundle-card:hover .fire-particles-container i:nth-child(14) {
                left: 65%;
                animation-delay: 0.9s;
                animation-duration: 2.9s;
                width: 6px;
                height: 6px;
                background: #a450ff;
            }
            /* ✅ بنفسجي مشبع */
            .product-item.bundle-card:hover .fire-particles-container i:nth-child(15) {
                left: 45%;
                animation-delay: 1.3s;
                animation-duration: 3.3s;
                width: 3px;
                height: 3px;
            }

        /* ====================================================== */
        /* ✅ END: تأثير النار المتطايرة ✅ */
        /* ====================================================== */

        /* ✅✅ START: تأثير التوهج لكلمة "باندل" ✅✅ */
        .bundle-glow-effect {
            /* جعل النص بارزًا قليلاً */
            font-weight: bold;
            color: var(--secondary-color); /* يمكن تعديل هذا اللون ليناسب تصميمك، هذا مجرد اقتراح */
            /* تأثير الظل الذي يعطي التوهج */
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.7), /* توهج أبيض خفيف */
            0 0 10px rgba(102, 192, 244, 0.6), /* توهج أزرق متوسط */
            0 0 15px rgba(102, 192, 244, 0.5), /* توهج أزرق أقوى */
            0 0 20px rgba(102, 192, 244, 0.4); /* توهج أزرق منتشر */
            /* إضافة أنيميشن لجعله يتوهج بشكل متقطع أو متحرك */
            animation: pulse-glow 2s infinite alternate ease-in-out;
            display: inline-block; /* لضمان تطبيق الظل بشكل صحيح */
        }

        /* تعريف أنيميشن التوهج المتقطع */
        @keyframes pulse-glow {
            0% {
                text-shadow: 0 0 5px rgba(255, 255, 255, 0.7), 0 0 10px rgba(102, 192, 244, 0.6), 0 0 15px rgba(102, 192, 244, 0.5);
            }

            100% {
                text-shadow: 0 0 8px rgba(255, 255, 255, 0.8), 0 0 15px rgba(102, 192, 244, 0.7), 0 0 25px rgba(102, 192, 244, 0.6), 0 0 35px rgba(102, 192, 244, 0.5);
            }
        }
        /* ✅✅ END: تأثير التوهج لكلمة "باندل" ✅✅ */

        /* ====================================================== */
        /* ✅ START: New Offline Steam Card Styles ✅ */
        /* ====================================================== */

        /* 1. التصميم الأساسي للكارت الجديد */
        .product-item--offline {
            /* خلفية متدرجة بلون ستيم الأزرق الداكن */
            background: linear-gradient(145deg, #1b2838, #0a192f);
            /* إطار بلون أزرق سماوي مميز */
            border: 1px solid #66c0f4;
            box-shadow: 0 4px 15px rgba(102, 192, 244, 0.1); /* ظل خفيف بنفس اللون */
        }

            /* 2. تأثير الـ Hover (عند مرور الماوس) */
            .product-item--offline:hover {
                transform: translateY(-8px) scale(1.03); /* حركة رفع وتكبير بسيطة */
                border-color: #90d8f8; /* جعل الإطار أكثر إشراقًا */
                /* وهج أزرق قوي لإعطاء تأثير جذاب */
                box-shadow: 0 8px 25px rgba(102, 192, 244, 0.3), 0 0 10px rgba(102, 192, 244, 0.5);
                /* ✅ تم إضافة !important لضمان إلغاء الاهتزاز */
                animation: none !important;
            }

            /* 3. تغيير لون السعر ليتناسب مع التصميم الجديد */
            .product-item--offline .product-price {
                color: #66c0f4; /* نفس لون الإطار */
            }

            /* 4. تغيير ألوان أزرار الشراء والإضافة للسلة */
            .product-item--offline .buy-btn {
                background-color: #66c0f4;
                color: #1b2838; /* لون نص داكن ليكون واضحًا */
                border-color: #66c0f4;
            }

                .product-item--offline .buy-btn:hover {
                    background-color: #90d8f8;
                    border-color: #90d8f8;
                    box-shadow: 0 0 12px #90d8f8; /* وهج عند التمرير */
                }

            .product-item--offline .add-to-cart-btn img {
                /* تغيير لون أيقونة السلة باستخدام فلتر CSS */
                filter: brightness(0) saturate(100%) invert(80%) sepia(50%) saturate(500%) hue-rotate(170deg);
            }

            .product-item--offline .add-to-cart-btn:hover img {
                filter: brightness(0) saturate(100%) invert(100%) sepia(0%) saturate(0%) hue-rotate(0deg);
            }


        /* ====================================================== */
        /* ✅ END: New Offline Steam Card Styles ✅ */
        /* ====================================================== */

        /* ====================================================== */
        /* ✅✅ START: Combined & Corrected Product Card Styles ✅✅ */
        /* ====================================================== */

        /* 2. تنسيق خاص ببطاقات الباندل (لتكون أفقية) */
        /* هذا الكود ينطبق فقط على البطاقات التي تحمل كلاس "bundle-card" */
        .product-item.bundle-card .product-image-wrapper {
            position: relative;
            /* النسبة الذهبية للصورة: (الارتفاع / العرض) = (833 / 1024) ≈ 0.813 */
            padding-top: 81.3%;
            overflow: hidden;
            border-radius: 8px;
            margin-bottom: 15px;
            width: 100%;
            /* Override the default square behavior */
            height: auto;
        }


            .product-item.bundle-card .product-image-wrapper img {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                object-fit: cover;
                border-radius: 8px;
                transition: transform 0.4s ease;
            }

        .product-item.bundle-card:hover .product-image-wrapper img {
            transform: scale(1.1);
        }

        /* ====================================================== */
        /* ✅✅ END: Combined & Corrected Product Card Styles ✅✅ */
        /* ====================================================== */

        /* ====================================================== */
        /* ✅✅ START: Bundle Product Card Styles ✅✅ */
        /* ====================================================== */
        /* تنسيق خاص ببطاقات الباندل */
        .product-item.bundle-card {
            position: relative;
            overflow: hidden;
            background: linear-gradient(135deg, #3c1870, #0d061c);
            border: 1px solid var(--accent-yellow);
            box-shadow: 0 0 20px rgba(255, 204, 0, 0.2);
            min-width: 250px;
        }



        /* تصميم الشارة الجديدة الخاصة بكلمة Bundle */
        .bundle-badge {
            position: absolute;
            top: 15px;
            right: -30px;
            background-color: var(--accent-yellow);
            color: var(--black-text);
            padding: 5px 30px;
            font-size: 14px;
            font-weight: bold;
            transform: rotate(45deg);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            text-align: center;
            z-index: 10;
        }

        /* ====================================================== */
        /* ✅✅ END: Bundle Product Card Styles ✅✅ */
        /* ====================================================== */

        /* ======================================= */
        /* START: Product Separator With Text      */
        /* ======================================= */

        /* 1. الحاوية الرئيسية للخط والكلمة */
        .product-separator {
            position: relative; /* ضروري لوضع الكلمة في المنتصف */
            width: 90%;
            height: 1px;
            background-color: rgba(255, 255, 255, 0.2); /* هذا هو الخط نفسه */
            margin: 35px auto 25px auto; /* زيادة المسافة العلوية قليلاً */
            border-radius: 1px;
            text-align: center;
        }

            /* 2. الكلمة التي ستظهر فوق الخط */
            .product-separator::before {
                content: 'Bundles'; /* النص الذي سيظهر */
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                /* هذا اللون يجب أن يتطابق مع لون خلفية القسم لإخفاء الخط خلف الكلمة */
                background-color: var(--main-purple);
                color: rgba(255, 255, 255, 0.6); /* لون رمادي فاتح */
                font-size: 14px;
                font-weight: bold;
                padding: 0 15px; /* مسافة على يمين ويسار الكلمة */
                text-transform: uppercase; /* لجعل الحروف كبيرة لمظهر أفضل */
            }
        /* ======================================= */
        /* END: Product Separator With Text        */
        /* ======================================= */

        /* ✅ إضافة جديدة: زيادة ارتفاع القائمة عند الضغط على Enter */
        #navbar-search-results.expanded {
            max-height: 70vh; /* استخدام 70% من ارتفاع الشاشة كحد أقصى */
        }

        /* ✅✅ الكود الجديد بخلفية الفوتر ✅✅ */
        #navbar-search-results {
            position: absolute;
            top: 110%;
            right: 0;
            width: 350px;
            max-height: 400px;
            overflow-y: auto;
            /* ✅ تم تغيير الخلفية لتطابق الفوتر وإلغاء البلور */
            background: linear-gradient(145deg, #0b0714, #1d1033, #0b0714);
            /* ✅ تم تعديل الإطار ليتطابق مع إطار الفوتر */
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            z-index: 2001;
            opacity: 0;
            transform: translateY(-10px);
            pointer-events: none;
            transition: opacity 0.2s ease-out, transform 0.2s ease-out;
        }

            #navbar-search-results.visible {
                opacity: 1;
                transform: translateY(0);
                pointer-events: auto;
            }

        .search-result-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 15px;
            text-decoration: none;
            color: var(--light-text);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            transition: background-color 0.2s ease;
        }

            .search-result-item:last-child {
                border-bottom: none;
            }

            .search-result-item:hover {
                background-color: rgba(255, 255, 255, 0.1);
            }

            .search-result-item img {
                width: 45px;
                height: 45px;
                object-fit: cover;
                border-radius: 6px;
                flex-shrink: 0;
            }

            .search-result-item .result-details {
                display: flex;
                flex-direction: column;
                text-align: right;
                overflow: hidden;
            }

            .search-result-item .result-title {
                font-weight: bold;
                font-size: 15px;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }

            .search-result-item .result-price {
                font-size: 13px;
                color: var(--accent-yellow);
                font-weight: bold;
            }

        .no-results-item {
            padding: 20px;
            text-align: center;
            color: #ccc;
        }
        /* END: Instant Navbar Search Results Dropdown Styles */

        /* ====================================================== */
        /* START: Instant Navbar Search Results Dropdown Styles */
        /* ====================================================== */

        #navbar-search-results {
            position: absolute;
            top: 110%;
            right: 0;
            width: 350px;
            max-height: 400px;
            overflow-y: auto;
            background-color: rgba(44, 26, 64, 0.8);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            z-index: 2001;
            opacity: 0;
            transform: translateY(-10px);
            pointer-events: none;
            transition: opacity 0.2s ease-out, transform 0.2s ease-out;
        }

            #navbar-search-results.visible {
                opacity: 1;
                transform: translateY(0);
                pointer-events: auto;
            }

        .search-result-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 15px;
            text-decoration: none;
            color: var(--light-text);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            transition: background-color 0.2s ease;
        }

            .search-result-item:last-child {
                border-bottom: none;
            }

            .search-result-item:hover {
                background-color: rgba(255, 255, 255, 0.1);
            }

            .search-result-item img {
                width: 45px;
                height: 45px;
                object-fit: cover;
                border-radius: 6px;
                flex-shrink: 0;
            }

            .search-result-item .result-details {
                display: flex;
                flex-direction: column;
                text-align: right;
                overflow: hidden;
            }

            .search-result-item .result-title {
                font-weight: bold;
                font-size: 15px;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }

            .search-result-item .result-price {
                font-size: 13px;
                color: var(--accent-yellow);
                font-weight: bold;
            }

        .no-results-item {
            padding: 20px;
            text-align: center;
            color: #ccc;
        }
        /* ====================================================== */
        /* END: Instant Navbar Search Results Dropdown Styles   */
        /* ====================================================== */

        /* START: About Us Logo Style */
        #about {
            position: relative; /* ضروري لجعل التموضع المطلق للحاوية نسبةً لهذه البطاقة */
        }

        /* 1. الحاوية الجديدة التي ستضم اللوجوهين معًا */
        .about-us-logos-container {
            position: absolute;
            top: 25px;
            left: 25px; /* في RTL، اليسار هو المكان المناسب في الزاوية العلوية */
            display: flex; /* لجعل اللوجوهات بجانب بعضها */
            align-items: center; /* لمحاذاة اللوجوهات عموديًا */
            gap: 15px; /* مسافة بين اللوجوهين */
            z-index: 5; /* لضمان ظهوره فوق المحتوى */
        }

        /* 2. تعديل بسيط على تنسيق اللوجو الأصلي (إلغاء التموضع المطلق) */
        .about-us-logo {
            /* تم إلغاء التموضع المطلق من هنا ونقله للحاوية */
            width: 100px;
            height: auto;
            opacity: 0.7;
            border-radius: 8px;
            display: block;
        }

        /* 3. إضافة تنسيق للوجو الديسكورد الجديد */
        .about-us-discord-logo {
            width: 50px; /* حجم أصغر ليكون ثانويًا */
            height: auto;
            opacity: 0.8;
            border-radius: 50%; /* لجعله دائريًا */
            transition: all 0.3s ease;
        }

            .about-us-discord-logo:hover {
                opacity: 1;
                transform: scale(1.1);
                box-shadow: 0 0 10px #5865F2; /* توهج بلون الديسكورد */
            }
        /* END: About Us Logo Style */

        /* ✅✅ فيد باك شامل لكل العناصر القابلة للنقر في الموقع ✅✅ */

        /*
                               هذا الكود يستهدف:
                               - كل الأزرار (button)
                               - الروابط في الشريط العلوي (a.nav-link)
                               - الأزرار العائمة (fixed-cart-button)
                               - بطاقات المنتجات والاشتراكات والخدمات (product-item, subscription-item, service-offer-card)
                               - خيارات اختيار الرتب (rank-option)
                               - خيارات الاشتراكات (subscription-option-label)
                             */
        button:active,
        a.nav-link:active,
        a.footer-link:active,
        a.discord-button:active,
        .fixed-cart-button:active,
        .product-item:active,
        .subscription-item:active,
        .service-offer-card:active,
        .subscription-option-label:active .subscription-option-card,
        .rank-option:active .rank-icon-wrapper {
            transform: scale(0.96) translateY(2px) !important; /* يصغر العنصر وينزل لأسفل قليلاً */
            box-shadow: inset 0 3px 7px rgba(0, 0, 0, 0.2) !important; /* يضيف ظلًا داخليًا */
            transition: transform 0.1s, box-shadow 0.1s; /* لجعل الحركة سريعة */
        }

        /* تنسيق إضافي لتغميق لون بعض الأزرار عند الضغط */
        .buy-btn:active,
        .add-to-cart-product-page:active,
        .confirm-payment-btn:active {
            background-color: #218838; /* لون أخضر أغمق قليلاً */
        }

        /* تنسيق رابط إظهار الحقل */
        .toggle-discount-container {
            text-align: center;
            margin: 10px 0;
        }

        .toggle-discount {
            color: var(--accent-yellow);
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            text-decoration: underline;
            transition: color 0.3s ease;
        }

            .toggle-discount:hover {
                color: #fff;
            }

        /* تنسيق حاوية الخصم لجعلها مخفية وقابلة للحركة */
        .discount-wrapper {
            max-height: 0;
            overflow: hidden;
            opacity: 0;
            transition: max-height 0.4s ease-in-out, opacity 0.4s ease-in-out, margin-top 0.4s ease-in-out;
        }
            /* ✅ الكود بعد التعديل */
            .discount-wrapper.visible {
                max-height: 150px; /* ✅ قمنا بزيادة الارتفاع للسماح بظهور المحتوى بالكامل */
                opacity: 1;
                margin-top: 15px;
            }

        /* تنسيقات بسيطة لحقل الخصم والزر */
        .discount-code-container {
            display: flex;
            justify-content: center;
            align-items: stretch;
            margin-top: 2px;
            margin-bottom: 5px;
        }

        #discountMessage {
            min-height: 18px; /* لمنع اهتزاز التصميم */
        }

        /* ✅✅ حل مشكلة زر إتمام الشراء في السلة ✅✅ */

        /* 1. نهيئ جسم النافذة ليستخدم Flexbox ويحتوي على العناصر بشكل صحيح */
        #cartModal .modal-body {
            display: flex;
            flex-direction: column;
            /* نحدد ارتفاعًا ليملأ النافذة ويسمح بالتمرير الداخلي */
            /* 90vh هو ارتفاع النافذة، نطرح منه مساحة للعنوان والتذييل */
            height: calc(90vh - 120px);
        }

        /* 2. هذا هو الجزء الأهم: نجعل حاوية المنتجات هي التي تتمدد وتسكرول */
        #cartItemsContainer {
            flex-grow: 1; /* يسمح لهذا العنصر بالتمدد ليملأ المساحة المتاحة */
            overflow-y: auto; /* يضيف شريط تمرير رأسي عند الحاجة فقط */
            padding: 10px; /* يضيف مسافة داخلية بسيطة لراحة العين */
            margin-bottom: 15px; /* يضيف مسافة بين المنتجات والجزء السفلي */
            border-top: 1px solid rgba(255,255,255,0.1);
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        /* 3. نتأكد من أن باقي العناصر (مثل الإجمالي والزر) لا تتمدد */
        #cartModal h2,
        #cartModal .discount-code-container,
        #cartModal #cartTotalContainer,
        #cartModal .checkout-btn-centered {
            flex-shrink: 0; /* يمنع هذه العناصر من الانكماش */
        }



        /* ✅ أضف هذا الكود لرفع القسم بأكمله للأعلى */
        #offline-steam-section {
            padding-top: 5px;
        }

        /* ✅ استبدل الكود القديم بهذا لتعريف حركة التوهج الأبيض */
        @keyframes white-pulse-animation {
            0% {
                box-shadow: 0 0 7px 1px rgba(255, 255, 255, 0.25); /* توهج أبيض خفيف */
            }

            50% {
                box-shadow: 0 0 14px 3px rgba(255, 255, 255, 0.5); /* توهج أبيض أقوى قليلاً */
            }

            100% {
                box-shadow: 0 0 7px 1px rgba(255, 255, 255, 0.25); /* العودة للتوهج الخفيف */
            }
        }

        /* ✅✅ START: تعديل أنيميشن ظهور المنتجات ليكون أكثر سلاسة ✅✅ */
        @keyframes smooth-enter-animation {
            from {
                opacity: 0;
                /* زدنا مسافة الصعود قليلاً */
                transform: scale(0.97) translateY(20px);
            }

            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .card-enter {
            /* زدنا المدة واستخدمنا منحنى تسارع أكثر نعومة */
            animation: smooth-enter-animation 0.6s cubic-bezier(0.23, 1, 0.32, 1) forwards;
        }
        /* ✅✅ END: تعديل أنيميشن ظهور المنتجات ✅✅ */

        /* ✅ تحديث بسيط لكلاس الأنيميشن لزيادة المدة وتحسين الحركة */
        .card-enter {
            animation: smooth-enter-animation 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        }

        /* هذا الكود يبقى كما هو دون تغيير */
        .newly-added {
            /* لا يحتاج أي تنسيقات */
        }

        .category-header {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px !important; /* ✅ تم تقليل المسافة وإضافة !important لضمان تطبيقها */
            margin-bottom: 15px !important;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

            .category-header h2 {
                margin-right: 0;
                border-right: none;
                padding-right: 0;
            }

        .category-search-container {
            position: relative;
        }

            .category-search-container svg {
                position: absolute;
                top: 50%;
                right: 12px;
                transform: translateY(-50%);
                color: rgba(224, 224, 224, 0.6);
            }

        #offlineSearchInput {
            padding: 8px 15px;
            padding-right: 40px;
            font-size: 14px;
            border-radius: 20px;
            /* ✅ تم تعديل شفافية اللون الأبيض إلى 0.3 (أي 30%) */
            border: 1px solid rgba(255, 255, 255, 0.3) !important;
            background-color: rgba(0, 0, 0, 0.2);
            color: var(--white-text);
            font-family: 'Tajawal', sans-serif;
            transition: all 0.3s ease;
            backdrop-filter: blur(1px) !important;
            -webkit-backdrop-filter: blur(1px) !important;
        }

            #offlineSearchInput:focus {
                outline: none;
                border-color: var(--accent-yellow);
                background-color: rgba(0, 0, 0, 0.5);
            }

        .category-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .search-and-filter-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .category-search-container {
            position: relative;
        }

            .category-search-container svg {
                position: absolute;
                top: 50%;
                right: 12px;
                transform: translateY(-50%);
                color: rgba(224, 224, 224, 0.6);
            }

        #offlineSearchInput, #genreFilterSelect {
            padding: 8px 15px;
            font-size: 14px;
            border-radius: 20px;
            border: 1px solid var(--main-purple);
            background-color: rgba(0, 0, 0, 0.3);
            color: var(--white-text);
            font-family: 'Tajawal', sans-serif;
            transition: all 0.3s ease;
        }

        #offlineSearchInput {
            padding-right: 40px; /* لإعطاء مساحة للأيقونة */
        }

            #offlineSearchInput:focus, #genreFilterSelect:focus {
                outline: none;
                border-color: #ffffff;
                box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
                background-color: rgba(0, 0, 0, 0.5);
            }

        .load-more-container {
            text-align: center;
            margin-top: 25px;
        }

        .load-more-btn {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid var(--light-text);
            color: var(--light-text);
            padding: 10px 5px;
            padding-right: 30px;
            width: 210px;
            max-width: 60%;
            border-radius: 40px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 3px;
            backdrop-filter: blur(2px);
            -webkit-backdrop-filter: blur(2px);
            animation: white-pulse-animation 2.5s infinite ease-in-out;
        }

            .load-more-btn:hover {
                background-color: var(--main-purple);
                color: var(--accent-yellow);
                border-color: var(--accent-yellow);
                transform: translateY(-3px);
                box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            }

        .volume-discount-badge {
            background: linear-gradient(45deg, var(--accent-yellow), #ff9900);
            color: var(--black-text);
            padding: 6px 18px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            margin-top: 5px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            animation: gold-pulse 2s infinite alternate; /* لإضافة تأثير نبض جذاب */
        }

        #discord-calculator-card select {
            width: 180px; /* زيادة بسيطة في العرض */
            padding: 10px 15px; /* تحسين المساحة الداخلية */
            text-align: right; /* محاذاة النص لليمين */
            font-size: 1.2rem; /* تعديل حجم الخط ليتناسب */
            font-weight: bold;
            border: 1px solid #7289DA;
            background-color: rgba(17, 14, 26, 0.5); /* خلفية أغمق قليلاً */
            color: white;
            border-radius: 8px;
            font-family: 'Tajawal', sans-serif;
            cursor: pointer;
            transition: all 0.3s ease; /* حركة انتقالية ناعمة */
            /* إخفاء السهم الافتراضي للمتصفح */
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            /* إضافة سهم مخصص باستخدام SVG كخلفية */
            background-image: url("data:image/svg+xml;utf8,<svg fill='white' height='24' viewBox='0 0 24 24' width='24' xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/><path d='M0 0h24v24H0z' fill='none'/></svg>");
            background-repeat: no-repeat;
            background-position: left 15px center;
        }

            /* تأثير توهج عند التركيز على القائمة */
            #discord-calculator-card select:focus {
                border-color: #8a99f5;
                box-shadow: 0 0 10px rgba(88, 101, 242, 0.7);
            }

            /* جعل الخيار الافتراضي يظهر بلون رمادي */
            #discord-calculator-card select option[value=""] {
                color: #888;
            }

        /* ================================================= */
        /* START: New Discord Decoration Calculator Card   */
        /* ================================================= */

        #discordDecorationsPageContainer {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px 0;
        }

        #discord-calculator-card {
            background: linear-gradient(145deg, rgba(88, 101, 242, 0.2), rgba(44, 26, 64, 0.4));
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(88, 101, 242, 0.5);
            border-radius: 20px;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
            padding: 35px;
            max-width: 900px; /* ✅ زيادة عرض البطاقة */
            width: 100%;
            display: flex;
            flex-direction: row; /* ✅ تحويل الاتجاه إلى أفقي */
            align-items: center; /* ✅ محاذاة القسمين رأسيًا */
            gap: 30px; /* ✅ مسافة بين القسمين */
            transition: all 0.3s ease;
        }

        .card-info-section, .card-form-section {
            flex: 1; /* ✅ جعل القسمين يأخذان مساحة متساوية */
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .card-info-section {
            gap: 15px;
        }

        .card-form-section {
            gap: 10px; /* تقليل المسافة بين عناصر الفورم */
        }

        /* ✅ الكود القديم */
        #discord-calculator-card .card-icon {
            width: 200px;
            height: 200px;
            object-fit: contain;
            margin-bottom: 10px;
            filter: drop-shadow(0 0 15px rgba(88, 101, 242, 0.6));
        }

        /* ✅✅ الكود الجديد والمعدل ✅✅ */
        #discord-calculator-card .card-icon {
            width: 280px; /* <-- تم تكبير الحجم أكثر */
            height: 280px; /* <-- تم تكبير الحجم أكثر */
            object-fit: contain;
            filter: drop-shadow(0 0 15px rgba(88, 101, 242, 0.6));
            margin-top: -70px; /* <-- هذا السطر يرفع الصورة للأعلى */
            margin-bottom: -15px; /* <-- لتقليل المسافة الفارغة أسفلها */
        }

        #discord-calculator-card h3 {
            color: #fff;
            font-size: 1.8rem;
            border: none;
            padding: 0;
            margin: 0;
        }

        #discord-calculator-card p {
            color: var(--light-text);
            max-width: 350px;
            line-height: 1.6;
        }

        #discord-calculator-card .input-wrapper textarea {
            background: transparent;
            border: none;
            outline: none;
            width: 100%;
            flex-grow: 1;
            color: white;
            font-size: 14px;
            text-align: right;
            font-family: 'Tajawal', sans-serif;
            resize: vertical;
            min-height: 50px;
        }

        #discord-calculator-card .calculator-controls {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: flex-end; /* محاذاة العناصر للأسفل */
            gap: 20px;
            margin: 10px 0;
        }

        #discord-calculator-card .input-group {
            text-align: center;
        }

            #discord-calculator-card .input-group label {
                display: block;
                font-weight: bold;
                color: #7289DA;
                margin-bottom: 8px;
                font-size: 14px;
            }

        #discord-calculator-card select {
            width: 120px;
            padding: 8px;
            text-align: center;
            font-size: 1.2rem;
            font-weight: bold;
            border: 1px solid #7289DA;
            background-color: #110e1a;
            color: white;
            border-radius: 8px;
            font-family: 'Tajawal', sans-serif;
            cursor: pointer;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-image: url("data:image/svg+xml;utf8,<svg fill='white' height='24' viewBox='0 0 24 24' width='24' xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/><path d='M0 0h24v24H0z' fill='none'/></svg>");
            background-repeat: no-repeat;
            background-position: left 5px center;
        }

        .quantity-selector-inline {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

            .quantity-selector-inline input {
                width: 50px;
                padding: 8px;
                font-size: 1.2rem;
                text-align: center;
                font-weight: bold;
                border: 1px solid #7289DA;
                background-color: #110e1a;
                color: white;
                border-radius: 8px;
                -moz-appearance: textfield;
            }

                .quantity-selector-inline input::-webkit-outer-spin-button,
                .quantity-selector-inline input::-webkit-inner-spin-button {
                    -webkit-appearance: none;
                    margin: 0;
                }

            .quantity-selector-inline button {
                width: 35px;
                height: 35px;
                font-size: 1.5rem;
                font-weight: bold;
                cursor: pointer;
                padding: 0;
                margin: 0;
                line-height: 35px;
                background-color: #5865F2;
                color: white;
                border: none;
                border-radius: 50%;
            }

        #discord-price-display {
            background-color: rgba(0, 0, 0, 0.2);
            border: 1px solid #7289DA;
            border-radius: 12px;
            padding: 10px 20px;
            width: 100%;
            max-width: 300px;
        }

            #discord-price-display .price-label {
                color: #ccc;
                font-size: 0.9rem;
                display: block;
            }

            #discord-price-display .price-value {
                color: lightgreen;
                font-size: 1.8rem;
                font-weight: bold;
            }

        #discord-calculator-card .buy-btn {
            color: white;
            width: 100%;
            max-width: 300px;
            padding: 12px;
            font-size: 1.1rem;
            border: none;
            background-image: linear-gradient(45deg, #5865F2, #9945FF);
            margin-top: 5px;
        }

            #discord-calculator-card .buy-btn:hover {
                transform: translateY(-2px);
                box-shadow: 0 0 20px rgba(153, 69, 255, 0.7);
                background-image: linear-gradient(45deg, #6975f3, #a35aff);
            }

        #discord-calc-error {
            color: #ff4757;
            font-weight: bold;
            min-height: 20px;
            margin-bottom: -5px;
        }
        /* ================================================= */
        /* END: New Discord Decoration Calculator Card     */
        /* ================================================= */



        /* ========================================= */
        /* START: Skeleton Loader Styles             */
        /* ========================================= */
        @keyframes skeleton-glow {
            0% {
                background-position: -200px 0;
            }

            100% {
                background-position: calc(200px + 100%) 0;
            }
        }

        .skeleton-card {
            border-radius: 12px;
            padding: 10px;
            background-color: var(--card-bg); /* يستخدم لون الكارت ليتناسب مع الثيم */
            border: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            gap: 10px;
            width: 180px; /* نفس عرض كارت المنتج العادي */
        }

            .skeleton-card .skeleton-image {
                width: 100%;
                height: 160px;
                border-radius: 8px;
                background-color: var(--skeleton-bg);
                background-image: linear-gradient(90deg, var(--skeleton-bg), var(--skeleton-shimmer), var(--skeleton-bg));
                background-size: 200px 100%;
                background-repeat: no-repeat;
                animation: skeleton-glow 1.5s infinite linear;
            }

            .skeleton-card .skeleton-text {
                height: 20px;
                border-radius: 4px;
                background-color: var(--skeleton-bg);
                background-image: linear-gradient(90deg, var(--skeleton-bg), var(--skeleton-shimmer), var(--skeleton-bg));
                background-size: 200px 100%;
                background-repeat: no-repeat;
                animation: skeleton-glow 1.5s infinite linear;
            }

                .skeleton-card .skeleton-text.short {
                    width: 60%;
                }

            .skeleton-card .skeleton-button {
                height: 38px;
                border-radius: 8px;
                margin-top: auto;
                background-color: var(--skeleton-bg);
                background-image: linear-gradient(90deg, var(--skeleton-bg), var(--skeleton-shimmer), var(--skeleton-bg));
                background-size: 200px 100%;
                background-repeat: no-repeat;
                animation: skeleton-glow 1.5s infinite linear;
            }
        /* ========================================= */
        /* END: Skeleton Loader Styles               */
        /* ========================================= */

        /* ========================================= */
        /* START: Smaller Size for Rental Cards      */
        /* ========================================= */

        .rental-product-item {
            width: 120px !important; /* ✅ تم التصغير أكثر مع إضافة !important */
            min-height: 240px !important; /* تثبيت الطول لمنع التفاوت */
        }

            .rental-product-item .product-image-wrapper {
                height: 100px !important; /* ✅ تصغير ارتفاع الصورة */
            }

            .rental-product-item h3 {
                font-size: 12px !important; /* ✅ تصغير الخطوط */
                min-height: 30px !important;
            }

            .rental-product-item p {
                font-size: 11px !important;
            }

            .rental-product-item .rental-duration-selector {
                font-size: 11px !important; /* ✅ تصغير عناصر التحكم */
                padding: 4px !important;
            }

            .rental-product-item .buy-btn {
                font-size: 12px !important;
                padding: 6px 8px !important;
            }

        /* ========================================= */
        /* END: Smaller Size for Rental Cards        */
        /* ========================================= */

        /* ========================================= */
        /* START: Hide Homepage Review Submission Form */
        /* ========================================= */

        /* إخفاء كل عناصر إدخال التقييم في الصفحة الرئيسية */
        #feedback-section #rating-name,
        #feedback-section .rating-input,
        #feedback-section #rating-text,
        #feedback-section button[onclick="submitStoreRating()"],
        #feedback-section #feedback-message {
            display: none;
        }

        /* ========================================= */
        /* END: Hide Homepage Review Submission Form */
        /* ========================================= */

        /* ========================================= */
        /* START: Hide Comment Submission Form       */
        /* ========================================= */

        /* إخفاء العنوان "اترك تعليقك" */
        #customer-reviews h3:first-of-type {
            display: none;
        }

        /* إخفاء نموذج الإدخال بالكامل (الاسم والنجوم ومربع النص والزر) */
        #customer-reviews .comment-form {
            display: none;
        }

        /* إخفاء الخط الفاصل الذي يقع بعد النموذج مباشرة */
        #customer-reviews hr {
            display: none;
        }

        /* ========================================= */
        /* END: Hide Comment Submission Form         */
        /* ========================================= */

        /* ====================================================== */
        /* START: New "Shatter & Fly" Animation for Rental Cards */
        /* ====================================================== */
        @keyframes shatter-fly-effect {
            0% {
                opacity: 1;
                transform: scale(1) rotate(0deg);
            }

            30% {
                opacity: 0.8;
                transform: scale(1.1) rotate(-5deg);
            }

            100% {
                opacity: 0;
                transform: scale(0.1) rotate(360deg) translate(200px, -100px);
            }
        }

        /* ====================================================== */
        /* START: Intense RGB Glowing Animation                 */
        /* ====================================================== */

        @keyframes rgb-glow-pulse-intense {
            0% {
                box-shadow: 0 0 10px 1px rgba(255, 0, 0, 0.75);
            }
            /* أحمر */
            16% {
                box-shadow: 0 0 10px 1px rgba(255, 255, 0, 0.75);
            }
            /* أصفر */
            33% {
                box-shadow: 0 0 10px 1px rgba(0, 255, 0, 0.75);
            }
            /* أخضر */
            50% {
                box-shadow: 0 0 10px 1px rgba(0, 255, 255, 0.75);
            }
            /* سماوي */
            66% {
                box-shadow: 0 0 10px 1px rgba(0, 0, 255, 0.75);
            }
            /* أزرق */
            83% {
                box-shadow: 0 0 10px 1px rgba(255, 0, 255, 0.75);
            }
            /* بنفسجي */
            100% {
                box-shadow: 0 0 10px 1px rgba(255, 0, 0, 0.75);
            }
            /* العودة إلى الأحمر */
        }

        .main-products-section.glass-card.darker {
            /* الإطار البنفسجي الأصلي */
            border: 1px solid #8e6abf;
            /* ✅ التعديل: تم تغيير لون التوهج إلى بنفسجي داكن (Midnight Purple) */
            box-shadow: 0 0 20px 4px rgba(44, 26, 64, 0.7);
            /* الانتقال السلس يبقى موجودًا */
            transition: all 0.3s ease-in-out;
        }

        /* ====================================================== */
        /* START: RENTAL CARD - (Final Beige Glassmorphism Theme) */
        /* ====================================================== */

        /* 1. تعريف حركة اللمعان */
        @keyframes shine-effect {
            0% {
                transform: translateX(-100%) skewX(-25deg);
            }

            100% {
                transform: translateX(250%) skewX(-25deg);
            }
        }

        .rental-card {
            display: flex;
            flex-direction: row;
            width: 100%;
            max-width: 580px;
            min-height: 210px;
            border-radius: 15px;
            position: relative;
            /* ✅ التعديل: خلفية زجاجية جديدة تمزج بين الأبيض والبني الشفاف */
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.7), rgba(160, 116, 79, 0.7)); /* مزيج أبيض وبني شفاف */
            backdrop-filter: blur(10px); /* تأثير البلور (الضبابية) */
            -webkit-backdrop-filter: blur(10px); /* لدعم متصفح سفاري */
            /* ✅ التعديل: إطار أبيض خفيف لتعزيز التأثير الزجاجي */
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2); /* ظل أغمق قليلاً ليتناسب مع الخلفيات المتنوعة */
            overflow: hidden;
            transition: all 0.4s ease;
        }

            .rental-card:hover {
                transform: translateY(-8px);
                box-shadow: 0 12px 40px rgba(119, 107, 85, 0.25);
                border-color: rgba(166, 123, 91, 1);
            }

        /* 3. قسم الصورة مع البرواز وتأثير اللمعان */
        .rental-card-image {
            flex: 0 0 200px;
            position: relative;
            overflow: hidden;
            padding: 8px;
            box-sizing: border-box;
            background-clip: content-box;
            border-left: 1px solid rgba(166, 123, 91, 0.4);
            background-size: cover;
            background-position: center;
        }

            .rental-card-image::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                width: 50%;
                height: 100%;
                background: linear-gradient(to right, rgba(255,255,255,0) 0%, rgba(255,255,255,0.3) 50%, rgba(255,255,255,0) 100%);
                transform: translateX(-100%) skewX(-25deg);
            }

        .rental-card:hover .rental-card-image::before {
            animation: shine-effect 0.85s ease-in-out;
        }

        /* 4. شارة "العب الآن" */
        .rental-badge {
            position: absolute;
            top: 15px;
            right: -30px;
            background-color: #8C5A3B;
            color: white;
            padding: 5px 30px;
            font-size: 14px;
            font-weight: bold;
            transform: rotate(45deg);
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            text-align: center;
        }

        /* 5. قسم التفاصيل (بألوان بنية داكنة) */
        .rental-card-details {
            display: flex;
            flex-direction: column;
            padding: 20px 25px;
            flex-grow: 1;
            text-align: right;
            color: #4A2C2A;
        }

            .rental-card-details h3 {
                color: #4A2C2A;
                margin: 0 0 10px 0;
                font-size: 1.4rem;
                border: none;
                padding: 0;
            }

            .rental-card-details p {
                font-size: 0.9rem;
                color: #5E454B;
                flex-grow: 1;
                line-height: 1.5;
            }

        /* 6. قسم التحكم والأزرار (بالثيم البني) */
        .rental-controls {
            margin-top: auto;
            padding-top: 15px;
        }

            .rental-controls label {
                font-size: 0.9rem;
                font-weight: bold;
                margin-bottom: 8px;
                color: #8C5A3B;
            }

        .duration-selector-buttons {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }

        .duration-btn {
            flex-grow: 1;
            padding: 8px 10px;
            font-size: 14px;
            font-weight: bold;
            font-family: 'Tajawal', sans-serif;
            border: 1px solid #c8bda5;
            background-color: transparent;
            color: #6e6658;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
            margin: 0;
            position: relative;
            overflow: hidden;
            z-index: 1;
        }

            .duration-btn::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 75%;
                height: 100%;
                background: linear-gradient(to right, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0.25) 50%, rgba(255, 255, 255, 0) 100%);
                transform: skewX(-25deg);
                z-index: -1;
                transition: left 0.8s;
            }

            .duration-btn:hover::before {
                left: 125%;
            }

            .duration-btn:hover {
                background-color: rgba(140, 90, 59, 0.1);
                border-color: #8C5A3B;
                color: #8C5A3B;
            }

            .duration-btn.active {
                background-color: #8C5A3B;
                color: white;
                border-color: #8C5A3B;
            }

                .duration-btn.active:hover::before {
                    left: -100%;
                }

        .rental-price-display {
            font-size: 1.5rem;
            font-weight: bold;
            color: #4A2C2A;
            min-height: 30px;
            margin-top: 10px;
        }

        .rental-card .buy-btn {
            width: 100%;
            margin-top: 10px;
            background-color: #6B462D;
            color: white;
            padding: 10px;
            font-size: 1rem;
        }

            .rental-card .buy-btn:hover {
                background-color: #4A2C2A;
                box-shadow: 0 0 15px #6B462D;
            }

        #game-rentals-section {
            /* ❗مهم: غيّر اسم الصورة إلى صورة مناسبة من عندك */
            background-image: url('./images/your-coop-image.png');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            border-color: #8e6abf;
        }


        /* ====================================================== */
        /* START: Lazy Loading Placeholder Effect (Corrected)     */
        /* ====================================================== */

        /* 1. تعريف حركة اللمعان */
        @keyframes placeholder-shine {
            0% {
                background-position: -200% 0;
            }

            100% {
                background-position: 200% 0;
            }
        }

        /* 2. تطبيق التأثير على حاويات الصور (باستثناء الاشتراكات) */
        .product-image-wrapper,
        .main-image-placeholder {
            position: relative;
            overflow: hidden;
            background-color: rgba(0, 0, 0, 0.7);
            background-image: url('./images/minecraft_loading.gif'); /* تأكد من صحة مسار الصورة */
            background-size: 60%;
            background-repeat: no-repeat;
            background-position: center center;
        }

            /* 3. إضافة طبقة اللمعان المتحركة (باستثناء الاشتراكات) */
            .product-image-wrapper::before,
            .main-image-placeholder::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: linear-gradient(to right, transparent 0%, rgba(255,255,255,0.1) 50%, transparent 100%);
                animation: placeholder-shine 1.5s infinite linear;
            }

            /* 4. التأكد من أن الصور الفعلية تظهر فوق التأثير */
            .product-image-wrapper img,
            .sub-image-wrapper img {
                position: relative;
                z-index: 2;
                background-color: transparent;
            }
        /* ====================================================== */
        /* END: Lazy Loading Placeholder Effect                 */
        /* ====================================================== */

        /* =================== START: Fortnite Boosting Section Styles =================== */

        /* خلفية القسم الرئيسي */
        #fortnite-boosting {
            background-image: linear-gradient(rgba(30, 17, 50, 0.85), rgba(30, 17, 50, 0.85)), url('./images/fortnite-boosting-bg.jpg'); /* <-- تأكد من وجود صورة بهذا الاسم */
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            padding: 40px 20px;
        }

        .fn-boosting-title {
            text-align: center !important;
            direction: ltr; /* أضف هذا السطر */
            color: #00c0ff;
            font-size: 2.5rem !important;
            text-shadow: 0 0 15px rgba(0, 192, 255, 0.7);
            border: none !important;
            margin-bottom: 30px;
        }



        /* الكارت العملاق */
        .fn-boosting-card {
            max-width: 700px;
            margin: 0 auto;
            background: rgba(10, 20, 40, 0.6);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 192, 255, 0.5);
            border-radius: 20px;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
            padding: 30px;
        }

        .fn-boosting-content h3 {
            text-align: center;
            font-size: 2rem;
            color: var(--white-text);
            border: none;
            padding: 0;
        }

        .fn-boosting-content p {
            text-align: center;
            color: var(--light-text);
            font-size: 1rem;
            line-height: 1.6;
        }

        /* تصميم الآلة الحاسبة */
        .fn-calculator {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .level-input-group {
            flex: 1;
            min-width: 200px;
        }

            .level-input-group label {
                display: block;
                text-align: center;
                font-weight: bold;
                margin-bottom: 10px;
                color: #00c0ff;
            }

            .level-input-group input {
                width: 100%;
                padding: 12px;
                font-size: 1.5rem;
                text-align: center;
                font-weight: bold;
                border-radius: 8px;
                border: 1px solid var(--main-purple);
            }

        /* تصميم عرض السعر */
        #fn-price-display {
            background-color: rgba(0, 0, 0, 0.2);
            border: 1px solid #00c0ff;
            border-radius: 12px;
            padding: 15px;
            margin: 20px auto;
            max-width: 350px;
            text-align: center;
        }

            #fn-price-display .price-label {
                color: #ccc;
                font-size: 1rem;
            }

            #fn-price-display .price-value {
                display: block;
                font-size: 2.2rem;
                font-weight: bold;
                color: lightgreen;
                margin-top: 5px;
            }

        /* تصميم فورم بيانات المستخدم */
        .fn-user-info-form {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid rgba(0, 192, 255, 0.2);
        }

            .fn-user-info-form .form-step-title {
                text-align: center;
                color: var(--accent-yellow);
                font-weight: bold;
            }

            .fn-user-info-form .input-wrapper {
                max-width: 400px;
            }

        /* رسالة الخطأ */
        #fn-error-message {
            color: #ff4757;
            text-align: center;
            font-weight: bold;
            min-height: 24px;
        }

        /* تصميم زر الطلب */
        #fn-order-btn {
            display: block;
            width: 80%;
            max-width: 400px;
            margin: 20px auto 0 auto;
            padding: 15px;
            font-size: 1.2rem;
            background-color: #00c0ff;
            color: white;
            text-shadow: 1px 1px 5px rgba(0,0,0,0.5);
        }

            #fn-order-btn:hover {
                background-color: #009bcc;
                box-shadow: 0 0 20px rgba(0, 192, 255, 0.7);
            }

        /* =================== END: Fortnite Boosting Section Styles =================== */

        /* === START: Loading Screen Styles === */
        #loading-screen {
            position: fixed; /* لتثبيتها على الشاشة */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #1e1132; /* نفس لون خلفية موقعك */
            z-index: 9999; /* للتأكد من أنها فوق كل شيء */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 0.7s ease-out, visibility 0.7s ease-out; /* لإخفاء ناعم */
            opacity: 1;
            visibility: visible;
        }

        .loading-animation {
            width: 128px; /* يمكنك تعديل حجم الأنيميشن */
            height: 128px;
        }

        .loading-text {
            color: var(--accent-yellow);
            margin-top: 20px;
            font-size: 1.2rem;
            font-weight: bold;
        }

        /* هذا الكلاس سنستخدمه لإخفاء الشاشة بالجافاسكريبت */
        #loading-screen.hidden {
            opacity: 0;
            visibility: hidden;
        }
        /* === END: Loading Screen Styles === */

        /* 1. لتوسيط العنوان الرئيسي (h2) بشكل سليم */
        #cod-services h2 {
            display: block; /* لجعله يأخذ عرض السطر كاملًا */
            text-align: center; /* لتوسيط النص بداخله */
            margin-right: 0; /* لإلغاء أي مسافة جانبية قديمة */
            border-right: none; /* لإلغاء أي خط جانبي قديم */
            padding-right: 0; /* لإلغاء أي حشو جانبي قديم */
        }

        /* 2. لتوسيط قائمة الألعاب (الـ Menu) */
        #cod-services .tab-buttons {
            display: flex;
            justify-content: center; /* هذه الخاصية تقوم بتوسيط الأزرار */
        }

        #cod-services .tabs-container {
            margin-top: 25px;
        }

        /* هذا الكود يجعل الحركة ناعمة */
        .tab-button {
            transition: all 0.3s ease;
        }

        #cod-services {
            /* سنجعل الجافاسكريبت يتحكم في الخلفية الآن */
            transition: background-image 0.5s ease-in-out; /* لجعل تغيير الخلفية ناعمًا */
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }

        /* هذا الكود يضيف تأثير التوهج عند مرور الماوس على الأزرار غير النشطة */
        .tab-button:not(.active):hover {
            color: #ffffff; /* يجعل لون الخط أبيض ناصع */
            opacity: 1; /* يزيل أي شفافية */
            text-shadow: 0 0 8px rgba(255, 255, 255, 0.7); /* هذا هو تأثير التوهج الأبيض */
        }

        /* START: About Us Logo Style */
        #about {
            position: relative; /* ضروري لجعل التموضع المطلق للصورة نسبةً لهذه الحاوية */
        }

        .about-us-logo {
            position: absolute;
            top: 25px; /* المسافة من أعلى الحاوية */
            left: 25px; /* المسافة من يسار الحاوية */
            width: 100px; /* يمكنك تعديل عرض اللوجو حسب رغبتك */
            height: auto; /* للحفاظ على أبعاد الصورة */
            opacity: 0.7; /* شفافية بسيطة لدمج اللوجو مع التصميم */
            border-radius: 8px;
        }
        /* END: About Us Logo Style */

        /* START: تنسيق زر المشاركة فوق الصورة */
        #product-share-btn {
            position: absolute;
            top: 15px;
            right: 15px; /* لوضعه في الزاوية اليمنى العلوية */
            z-index: 10;
            width: 40px;
            height: 40px;
            background-color: rgba(0, 0, 0, 0.5); /* خلفية شبه شفافة */
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%; /* لجعله دائريًا */
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }

            #product-share-btn:hover {
                background-color: rgba(0, 0, 0, 0.7);
                transform: scale(1.1);
                box-shadow: 0 0 10px #39FF14; /* تم التغيير إلى أخضر نيون */
            }

            #product-share-btn svg {
                color: white;
            }
        /* END: تنسيق زر المشاركة */

        /* تنسيق جديد للحاوية عندما يكون هناك خيار واحد فقط */
        #subscription-options-container.single-option {
            display: flex; /* نغير طريقة العرض إلى flex */
            justify-content: center; /* لتوسيط العنصر الوحيد في المنتصف */
        }

            /* تحديد عرض العنصر الوحيد لمنعه من التمدد بشكل كامل */
            #subscription-options-container.single-option .subscription-option-label {
                width: 150px; /* يمكنك تعديل هذا العرض حسب ما تراه مناسبًا */
            }

        .dropdown-divider {
            height: 1px;
            margin: 8px 10px; /* لإضافة مسافة رأسية وأفقية حول الخط */
            background-color: rgba(255, 255, 255, 0.2);
            border: none;
        }

        /* ================================================= */
        /* START: All Discord Decorations Styles (Final & Corrected) */
        /* ================================================= */

        /* 1. خلفية قسم الديكورات في الصفحة الرئيسية */
        #discord-decorations-section {
            background-image: linear-gradient(rgba(30, 17, 50, 0.85), rgba(30, 17, 50, 0.85)), url('./images/discord-background.png');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            border-color: #7289DA;
        }

        /* 2. خلفية صفحة الديكورات الداخلية */
        #discordDecorationsPage {
            background-image: linear-gradient(rgba(30, 17, 50, 0.85), rgba(30, 17, 50, 0.85)), url('./images/discord-background1.png');
            background-size: cover;
            background-position: center;
            border-color: #7289DA;
        }

        /* 3. التنسيق العام المشترك للبطاقتين في الصفحة الرئيسية */
        #discord-decorations-section .service-offer-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            min-height: 380px;
            padding: 20px;
            background: linear-gradient(135deg, #1e0b3c, #0d061c);
            transition: transform 0.3s ease;
        }

            #discord-decorations-section .service-offer-card:hover {
                transform: translateY(-8px) scale(1.02);
            }

        /* 4. إعادة إظهار وتنسيق الصور التي كانت مخفية */
        #discord-decorations-section .service-card-image {
            display: block; /* أهم تعديل: إظهار الصورة */
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid white;
            margin-bottom: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        /* 5. تنسيق النصوص والأزرار */
        #discord-decorations-section .service-offer-card h3,
        #discord-decorations-section .service-offer-card p {
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
            margin: 10px 0;
        }

        #discord-decorations-section .service-offer-card button {
            margin-top: auto; /* يدفع الزر للأسفل */
        }

        /* 6. تحديد الإطار الخاص بكل بطاقة بشكل منفصل */
        #decorations-offer-card {
            border: 1px solid #7289DA; /* لون إطار بطاقة الديكورات */
        }

        #developing-offer-card {
            border: 1px solid #8e6abf; /* لون إطار بطاقة تصميم السيرفرات */
        }

        /* 7. تنسيق كروت المنتجات الصغيرة داخل صفحة الديكورات */
        #discordDecorationsPageContainer .product-item {
            width: 130px !important;
            min-height: 230px !important;
            padding: 8px !important;
        }

        #discordDecorationsPageContainer .product-image-wrapper {
            height: 100px !important;
        }

        #discordDecorationsPageContainer .product-item h3 {
            font-size: 13px !important;
            min-height: 30px !important;
        }

        #discordDecorationsPageContainer .product-item p {
            font-size: 12px !important;
        }

        #discordDecorationsPageContainer .product-item .product-description-text {
            display: none !important;
        }

        /* 1. إعداد طبقة اللمعان (بشفافية أقل) */
        #discord-decorations-section .service-offer-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 70px;
            height: 100%;
            background: rgba(255, 255, 255, 0.2); /* تم تقليل الشفافية هنا */
            transform: skewX(-25deg) translateX(-200px);
            transition: transform 0.7s ease-in-out;
            z-index: 1;
            filter: blur(25px);
        }


        /* 2. عند مرور الماوس، يتم تحريك اللمعة عبر البطاقة */
        #discord-decorations-section .service-offer-card:hover::before {
            transform: skewX(-25deg) translateX(450px); /* تحريكها إلى اليمين لتمر عبر البطاقة */
        }

        /* 3. نتأكد أن محتوى البطاقة (الصورة والنص) يظهر فوق اللمعة */
        #discord-decorations-section .service-offer-card > * {
            position: relative;
            z-index: 2;
        }

        /* 4. إزالة أي تأثيرات توهج قديمة قد تكون متبقية من كود آخر */
        #home-decorations-offer-card:hover,
        #home-developing-offer-card:hover {
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.5); /* ظل بسيط فقط */
        }

        /* ================================================= */
        /* END: All Discord Decorations Styles (Final & Corrected) */
        /* ================================================= */

        /* === START: New Theme Toggle Button CSS === */
        #theme-toggle-btn {
            position: absolute;
            bottom: 25px; /* المسافة من الأسفل */
            right: 25px; /* المسافة من اليمين (أفضل من اليسار في التصميم العربي) */
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

            #theme-toggle-btn:hover {
                transform: translateY(-3px) scale(1.1);
                box-shadow: 0 6px 20px rgba(0,0,0,0.3);
            }

            #theme-toggle-btn svg {
                width: 22px;
                height: 22px;
                transition: all 0.3s ease;
            }

        /* أيقونة الشمس (الوضع المظلم) */
        .sun-icon {
            color: #ffcc00;
        }

        /* أيقونة القمر (الوضع الفاتح) */
        .moon-icon {
            color: #8e6abf;
        }

        /* منطق إظهار وإخفاء الأيقونة الصحيحة */
        body.light-mode #theme-toggle-btn .sun-icon {
            display: none;
        }

        body:not(.light-mode) #theme-toggle-btn .moon-icon {
            display: none;
        }
        /* === END: New Theme Toggle Button CSS === */

        /* ✅ تنسيق جديد لمكان الصورة المؤقت مع تفعيل الأنيميشن */
        .main-image-placeholder {
            width: 100%;
            min-height: 350px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative; /* ضروري للأنيميشن */
            overflow: hidden; /* ضروري للأنيميشن */
        }

        /* لتكبير خط رسالة التحويل في نافذة الدفع */
        .qr-text-content p:nth-child(1) {
            font-size: 16px; /* <-- تكبير حجم الخط */
            line-height: 1.6; /* <-- تحسين المسافة بين السطور */
        }

        /* لإعادة ترتيب مربعات رأس نافذة الدفع */
        /* الخطوة الحالية (المربع الثاني) سيصبح الأول */
        .payment-header-container .payment-header-box:nth-child(2) {
            order: 1;
        }

        /* ملخص المنتج (المربع الأول) سيصبح الثاني */
        .payment-header-container .payment-header-box:nth-child(1) {
            order: 2;
        }

        /* المبلغ المستحق (المربع الثالث) سيظل ترتيبه الثالث */
        .payment-header-container .payment-header-box:nth-child(3) {
            order: 3;
        }

        /* مهلة الدفع (المربع الرابع) سيظل ترتيبه الرابع */
        .payment-header-container .payment-header-box:nth-child(4) {
            order: 4;
        }

        /* التعديل النهائي لتقريب مربعات الإدخال من بعضها */
        #vodafoneForm .input-wrapper {
            box-sizing: border-box;
            width: 320px;
            align-items: center;
            padding-top: 0;
            padding-bottom: 0;
            /* ⬇️ هنا قللنا المسافة بين المربعات ⬇️ */
            margin: 0 auto 5px auto;
        }

            /* ====================================================== */
            /* ✅ START: إصلاح التوهج المزدوج لفورم فودافون */
            /* ====================================================== */

            /* 1. القاعدة دي بتدي الإطار الخارجي (الأوتلاين) التوهج الأبيض */
            #vodafoneForm .input-wrapper:focus-within {
                border-color: #FFFFFF !important; /* <-- الإطار الأبيض */
                box-shadow: 0 0 10px rgba(255, 255, 255, 0.5) !important; /* <-- التوهج الأبيض الخارجي */
            }

                /* 2. ✅✅ القاعدة الجديدة والمهمة ✅✅
                        القاعدة دي بتلغي أي توهج أو إطار عن حقل الإدخال *الداخلي*
                     */
                #vodafoneForm .input-wrapper:focus-within input,
                #vodafoneForm .input-wrapper:focus-within textarea {
                    border-color: transparent !important; /* <-- بيخفي إطار الحقل الداخلي */
                    box-shadow: none !important; /* <-- بيمسح أي جلو (أزرق أو غيره) من الحقل الداخلي */
                }

                /* ====================================================== */
                /* ✅ END: إصلاح التوهج المزدوج */
                /* ====================================================== */

                #vodafoneForm .input-wrapper:focus-within svg {
                    color: #FFFFFF; /* الأيقونة البيضاء */
                }

            /* هذا الكود يبقى كما هو لتقليل ارتفاع الحقول */
            #vodafoneForm .input-wrapper input,
            #vodafoneForm .input-wrapper textarea {
                padding-top: 6px;
                padding-bottom: 6px;
            }

            /* لإنزال مربع الإيميل فقط مسافة صغيرة جدًا */
            #vodafoneForm .input-wrapper:has(input[name="email"]) {
                position: relative;
                top: 5px; /* <-- القيمة بالموجب لإنزاله للأسفل */
            }

        /* تنسيق الأيقونات داخل مربعات الإدخال */
        .input-wrapper svg {
            color: #FFFFFF; /* لون الأيقونة أبيض */
            flex-shrink: 0; /* لمنع الأيقونة من الانكماش */
        }

        /* تنسيق خاص بالـ textarea ليتناسب مع التصميم الجديد */
        .input-wrapper textarea {
            background: transparent;
            border: none;
            outline: none;
            width: 100%;
            flex-grow: 1;
            color: white;
            font-size: 16px;
            text-align: right;
            font-family: 'Tajawal', sans-serif;
            resize: vertical;
            min-height: 40px;
        }



        /* ====================================================== */
        /* START: COMPACT PRODUCT SUMMARY STYLE                   */
        /* ====================================================== */

        .payment-summary-value {
            font-size: 12px !important; /* تصغير حجم الخط إلى 11 بكسل */
            font-weight: normal;
            color: #e0e0e0;
            white-space: normal;
            line-height: 1.4;
            overflow-wrap: break-word;
            max-height: 50px;
            overflow-y: auto;
        }

        /* 2. تعديل العنوان فوق الملخص ليتناسب مع الحجم الجديد */
        .payment-header-box h4 {
            font-size: 14px; /* تصغير حجم العنوان قليلاً */
            margin-bottom: 4px; /* تقليل المسافة أسفل العنوان */
        }

        /* ====================================================== */
        /* END: COMPACT PRODUCT SUMMARY STYLE                     */
        /* ====================================================== */

        /* ===== PayPal Hosted Button Style ===== */
        .pp-AB69NXSVUNP78 {
            text-align: center;
            border: none;
            border-radius: 1.5rem;
            min-width: 11.625rem;
            padding: 0 2rem;
            height: 2.625rem;
            font-weight: bold;
            background-color: #000000;
            color: #ffffff;
            font-family: "Helvetica Neue", Arial, sans-serif;
            font-size: 1rem;
            line-height: 1.25rem;
            cursor: pointer;
            transition: all 0.2s ease; /* لتحسين تجربة المستخدم */
        }

            .pp-AB69NXSVUNP78:hover {
                background-color: #333333;
                transform: translateY(-2px);
            }
        /* ===== End PayPal Style ===== */

        #productPage button {
            margin-top: 30px; /* دي القيمة اللي بتحدد المسافة من فوق */
        }

        /* إخفاء المنصة التي تظهر تحت وصف المنتج */
        .modal-product-header .product-platform-info {
            display: none;
        }

        .modal-product-header .product-platform-info {
            visibility: hidden !important;
            opacity: 0 !important;
            height: 0 !important;
            margin: 0 !important;
            padding: 0 !important;
        }

        /* 1. السماح للصورة بأن تكبر طولياً حتى تصل إلى مستوى زر "أضف إلى السلة" */
        .product-image-section img {
            height: auto; /* السماح للصورة بالتمدد عمودياً */
            max-height: 300px; /* تحديد الحد الأقصى لارتفاع الصورة */
            width: 100%; /* ملء العرض بالكامل */
            object-fit: contain; /* التأكد من أن الصورة لا تتشوه */
        }

        /* 2. التأكد من أن الصورة الكبرى لا تتجاوز حجم الزر */
        .product-image-section {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            max-width: 100%; /* التأكد من أن الصورة لا تتجاوز عرض العمود */
            flex: 1.2;
            min-width: 300px;
        }

        /* 3. تأكيد المحاذاة بشكل مناسب للأزرار */
        .product-actions-container {
            display: flex;
            flex-direction: column;
            gap: 15px; /* المسافة بين الأزرار */
            margin-top: auto; /* لضمان أن الأزرار تبقى في أسفل العمود */
        }

        /* 4. التأكد من أن الزر لا يتجاوز المساحة المخصصة له */
        #addToCartBtn {
            margin-top: 10px; /* مسافة من الأعلى للتباعد بين الزر والصورة */
            align-self: flex-start; /* محاذاة الزر لليسار */
        }

        /* 5. التحكم في ارتفاع الصور في الـ gallery */
        .product-image-gallery .thumbnail {
            max-width: 100px; /* عرض الصور داخل المعرض */
            max-height: 100px; /* تحديد الحد الأقصى للارتفاع */
            object-fit: cover; /* التأكد من أن الصورة تملأ الفراغ بشكل جيد */
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

            /* 6. إضافة تأثير التفاعل عند مرور الماوس على الصور في المعرض */
            .product-image-gallery .thumbnail:hover,
            .product-image-gallery .thumbnail.active {
                transform: scale(1.05);
                box-shadow: 0 0 10px rgba(255, 204, 0, 0.5); /* تأثير الظل */
            }


        /* ====================================================== */
        /* START: DESIGNS SECTION BACKGROUND                    */
        /* ====================================================== */
        #designs {
            /* 1. مسار صورة الخلفية مع فلتر تعتيم */
            /* ✅ غيّر 'designs-background.png' إلى اسم الصورة التي تريدها */
            background-image: linear-gradient(rgba(30, 17, 50, 0.8), rgba(30, 17, 50, 0.8)), url('./images/my-new-gaming-bg.png');
            /* 2. خصائص لتثبيت الخلفية وضمان وضوحها */
            background-size: cover;
            background-position: center;
            /* 3. إلغاء تأثير الزجاج الشفاف وتعديل الإطار */
            backdrop-filter: none; /* إلغاء تأثير البلور الخاص بـ .glass-card */
            -webkit-backdrop-filter: none;
            border: 1px solid #cda1ff; /* تغيير لون الإطار ليتناسب مع المظهر الجديد */
        }

        /* ====================================================== */
        /* END: DESIGNS SECTION BACKGROUND                      */
        /* ====================================================== */

        /* ✅✅ START: تعديل إطار قسم فالورانت بوستينج ✅✅ */

        #valorant-boosting {
            /* الخصائص الحالية تبقى كما هي */
            background-size: cover !important;
            background-position: center !important;
            border-radius: 15px;
            position: relative;
            overflow: hidden;
            padding: 15px;
            /* ✅✅ التعديل الرئيسي هنا ✅✅ */
            border: 2px solid; /* تحديد سمك الإطار */
            animation: static-rgb-calm 6s linear infinite; /* تطبيق الحركة الجديدة */
        }

            /* هذا هو الكود الجديد الذي يصنع الإطار المتحرك */
            #valorant-boosting::before {
                content: '';
                position: absolute;
                width: 250%; /* حجم أكبر من العنصر نفسه */
                height: 250%;
                top: -75%; /* توسيط العنصر الزائف */
                left: -75%;
                z-index: -1; /* لوضعه خلف المحتوى */
                /* تدرج لوني مخروطي (conic) بألوان هادئة */
                background: conic-gradient( #c31432, /* أحمر داكن */
                #8A2BE2, /* بنفسجي */
                #240b36, /* بنفسجي غامق */
                #0D1B2A, /* أزرق داكن */
                #c31432 /* العودة للأحمر لإكمال الدورة */
                );
                /* تطبيق حركة الدوران */
                animation: animated-rgb-border 6s linear infinite;
            }

            /* هذا الكود يضيف طبقة داخلية لإخفاء مركز التدرج وإظهار الخلفية الأصلية */
            #valorant-boosting::after {
                content: '';
                position: absolute;
                inset: 2px; /* مسافة الإطار (يمكنك جعلها 3px ليكون أرفع) */
                background-image: url('./images/valorantreynass.png') !important;
                background-size: cover !important;
                background-position: center !important;
                border-radius: 13px; /* أصغر من حواف العنصر الرئيسي */
                z-index: -1;
            }

        /* ✅✅ END: تعديل إطار قسم فالورانت بوستينج ✅✅ */

        #boosting-cover {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding: 20px 15px; /* ✅ تصغير: تقليل المساحة الداخلية */
            background: linear-gradient(145deg, rgba(10, 10, 10, 0.6), rgba(40, 40, 40, 0.5));
            border-radius: 12px;
            animation: fadeIn 0.8s ease-in-out;
            transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
            max-width: 550px; /* ✅ تصغير: من 600px إلى 550px */
            margin: 0 auto 20px;
            box-sizing: border-box;
        }


            #boosting-cover.fade-out {
                opacity: 0;
                transform: scale(0.95);
                pointer-events: none;
            }

            #boosting-cover img.cover-image {
                max-width: 200px; /* ✅ تصغير: من 240px إلى 200px */
                width: 100%;
                height: auto;
                margin-bottom: 15px;
                filter: drop-shadow(0 0 15px rgba(255, 70, 85, 0.5));
            }

            #boosting-cover h3 {
                font-size: 1.8rem; /* ✅ تصغير: من 2rem إلى 1.8rem */
                color: #ff4655;
                margin-bottom: 10px;
                border: none;
                padding: 0;
            }

            #boosting-cover p {
                font-size: 0.95rem; /* ✅ تصغير: من 1rem إلى 0.95rem */
                color: #e0d8f0;
                max-width: 500px;
                line-height: 1.6;
                margin-bottom: 15px; /* ✅ تقليل المسافة لجعل الزر أقرب */
            }

            #boosting-cover .start-boosting-btn {
                background-color: #ff4655;
                color: white;
                font-size: 15px; /* ✅ تصغير: من 16px إلى 15px */
                padding: 10px 30px; /* ✅ تصغير حجم الزر */
                border-radius: 50px;
                border: 2px solid #ff4655;
                transition: all 0.3s ease;
            }

                #boosting-cover .start-boosting-btn:hover {
                    background-color: transparent;
                    color: #ff4655;
                    box-shadow: 0 0 15px rgba(255, 70, 85, 0.5);
                    transform: translateY(-3px) scale(1.05);
                }


        /* ====================================================== */
        /* END: VALORANT BOOSTING COVER STYLES (MODIFIED)       */
        /* ====================================================== */


        /* ====================================================== */
        /* FIX: Class-based Visibility for Boosting section       */
        /* ====================================================== */

        /* بشكل افتراضي، قم بإظهار الغلاف */
        #valorant-boosting #boosting-cover {
            display: flex;
        }

        /* بشكل افتراضي، قم بإخفاء الحاسبة */
        #valorant-boosting #boosting-calculator-container {
            display: none;
        }

            /* عندما نضيف كلاس .visible للحاسبة، قم بإظهارها */
            #valorant-boosting #boosting-calculator-container.visible {
                display: flex;
            }

        /* أضف خاصية الانتقال السلس للغلاف */
        #boosting-cover {
            transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
        }

            /* هذا هو شكل الغلاف عند تطبيق تأثير الاختفاء */
            #boosting-cover.fade-out {
                opacity: 0;
                transform: scale(0.95); /* تأثير تصغير بسيط لجمالية أكبر */
                pointer-events: none; /* لمنع الضغط على الغلاف وهو يختفي */
            }



        #valorant-boosting .close-btn {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 32px;
            font-weight: bold;
            color: #fff;
            cursor: pointer;
            transition: color 0.3s, transform 0.3s;
            z-index: 10;
        }

            #valorant-boosting .close-btn:hover {
                color: var(--accent-yellow);
                transform: scale(1.2);
            }

        #valorant-boosting {
            position: relative;
        }

        /* ====================================================== */
        /* START: BOOSTING SERVICE CARD STYLES                    */
        /* ====================================================== */

        #boosting-offer-card {
            /* تدرج لوني مميز من البنفسجي إلى الأحمر الخاص بفالورانت */
            background: linear-gradient(135deg, #3c1870, #A32D3B);
            border: 1px solid #ff4655; /* لون إطار فالورانت */
        }

        /* ====================================================== */
        /* END: BOOSTING SERVICE CARD STYLES                      */
        /* ====================================================== */

        /* ====================================================== */
        /* START: ORDER SUMMARY STYLES IN PAYMENT MODAL           */
        /* ====================================================== */
        .order-summary-container {
            background-color: rgba(0, 0, 0, 0.25);
            border: 1px solid var(--main-purple);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: right;
        }

        /* ✅ إخفاء ملخص الطلب في نافذة الكريديت كارد فقط */
        #creditcardDetails .order-summary-container {
            display: none;
        }

        .order-summary-container h4 {
            margin-top: 0;
            margin-bottom: 15px;
            color: var(--accent-yellow);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 10px;
            font-size: 1.1rem;
            text-align: center;
            border-right: none;
            padding-right: 0;
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            font-size: 0.95rem;
            margin-bottom: 8px;
            padding: 5px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }


            .summary-item:last-child {
                border-bottom: none;
            }

            .summary-item strong {
                color: #ccc;
                font-weight: normal;
            }

            .summary-item span {
                font-weight: bold;
                color: #fff;
                text-align: left;
                direction: ltr;
            }
        /* ====================================================== */
        /* END: ORDER SUMMARY STYLES                              */
        /* ====================================================== */

        #boosting-calculator-container {
            display: flex;
            flex-direction: column;
            gap: 25px;
            max-width: 900px;
            margin: 0 auto;
        }

        .calculator-inputs {
            background: rgba(0, 0, 0, 0.2);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--main-purple);
        }

        .form-step-title {
            text-align: center;
            font-size: 1.1rem;
            font-weight: bold;
            color: var(--accent-yellow);
            margin-top: 0;
            margin-bottom: 15px;
        }

        .rank-selection-area {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            flex-wrap: wrap;
        }

        .rank-selector-column {
            flex: 1;
            min-width: 300px;
            background: rgba(0, 0, 0, 0.2);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--main-purple);
        }

        .rank-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
            gap: 10px;
            max-height: 250px;
            overflow-y: auto;
            padding: 5px;
        }

        .rank-option {
            position: relative;
        }

            .rank-option input[type="radio"] {
                appearance: none;
                -webkit-appearance: none;
                position: absolute;
                opacity: 0;
                width: 100%;
                height: 100%;
                cursor: pointer;
            }

            .rank-option .rank-icon-wrapper {
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                padding: 5px;
                border-radius: 8px;
                background-color: rgba(255, 255, 255, 0.05);
                border: 2px solid transparent;
                transition: all 0.2s ease-in-out;
                opacity: 1; /* ✅ تم التعديل هنا لتصبح الأيقونات واضحة بالكامل */
            }

                .rank-option .rank-icon-wrapper img {
                    width: 50px;
                    height: 50px;
                    object-fit: contain;
                }

            .rank-option .rank-name {
                font-size: 10px;
                font-weight: bold;
                color: #ccc;
                margin-top: 4px;
                white-space: nowrap;
            }

            .rank-option input[type="radio"]:checked + .rank-icon-wrapper {
                background-color: rgba(255, 204, 0, 0.2);
                border-color: var(--accent-yellow);
                transform: scale(1.05);
                opacity: 1;
            }

            .rank-option input[type="radio"]:hover + .rank-icon-wrapper {
                opacity: 1;
                border-color: rgba(255, 255, 255, 0.5);
            }

            .rank-option.disabled .rank-icon-wrapper {
                filter: grayscale(100%);
                opacity: 0.2;
                cursor: not-allowed;
            }

        .boosting-summary {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            margin-top: 10px;
        }

        #boosting-price-display {
            background-color: rgba(0, 0, 0, 0.2);
            border: 1px solid var(--main-purple);
            border-radius: 8px;
            padding: 15px;
            width: 100%;
            max-width: 350px;
            min-height: 4em;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

            #boosting-price-display .price-label {
                font-size: 1.1rem;
                color: #ccc;
                font-weight: bold;
            }

            #boosting-price-display .price-value {
                font-size: 1.8rem;
                font-weight: bold;
                color: lightgreen;
            }

        #boosting-error-message {
            color: #ff4655; /* Valorant Red */
            font-weight: bold;
            min-height: 20px;
        }

        /* Styling for the large Valorant coaching card */
        .valorant-coaching-card {
            display: flex;
            flex-direction: column;
            width: 100%;
            max-width: 800px; /* ✅ زيادة أقصى عرض للبطاقة */
            min-height: 500px;
            background: linear-gradient(135deg, #3c1870, #0d061c);
            border-radius: 12px;
            border: 1px solid #ff4655; /* لون فالورانت */
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.4);
            transition: transform 0.3s ease-out;
            padding: 20px;
            margin: 20px auto;
            text-align: right;
            overflow: hidden; /* لإخفاء أي جزء من الصورة يخرج عن الحدود */
            position: relative;
        }

            .valorant-coaching-card:hover {
                transform: translateY(-10px);
                box-shadow: 0 12px 40px rgba(0, 0, 0, 0.6);
            }

            .valorant-coaching-card .card-image-full {
                width: 100%;
                height: 250px; /* ✅ ارتفاع ثابت للصورة لتكون بارزة */
                object-fit: cover; /* لضمان أن الصورة تغطي المساحة المحددة دون تشوه */
                border-radius: 8px;
                margin-bottom: 20px;
            }

            .valorant-coaching-card .card-content {
                flex-grow: 1; /* لجعل المحتوى يملأ المساحة المتبقية */
            }

            .valorant-coaching-card .card-title {
                font-size: 2.2rem;
                color: #ff4655; /* لون فالورانت */
                border-right: 4px solid #ffcc00;
                padding-right: 10px;
                margin-bottom: 10px;
                display: inline-block;
            }

            .valorant-coaching-card .card-description {
                font-size: 1.1rem;
                color: #e0d8f0;
                line-height: 1.6;
                margin-bottom: 20px;
            }

            .valorant-coaching-card .card-features {
                list-style: none;
                padding: 0;
                margin-bottom: 20px;
            }

                .valorant-coaching-card .card-features li {
                    display: flex;
                    align-items: center;
                    gap: 10px;
                    margin-bottom: 8px;
                    font-size: 1rem;
                    color: #ffcc00; /* لون أصفر مميز */
                }

                    .valorant-coaching-card .card-features li svg {
                        color: #28a745; /* لون أيقونة الصح */
                    }

            .valorant-coaching-card .buy-btn {
                background-color: #ff4655;
                color: white;
                font-size: 18px;
                padding: 12px 35px;
                border-radius: 50px;
                border: 2px solid #ff4655;
                margin-top: auto; /* يدفع الزر لأسفل البطاقة */
                align-self: center; /* لتوسيط الزر */
            }

                .valorant-coaching-card .buy-btn:hover {
                    background-color: transparent;
                    color: #ff4655;
                    box-shadow: 0 0 15px rgba(255, 70, 85, 0.5);
                    transform: translateY(-3px) scale(1.05);
                }
        /* Styling for the new custom offer card */
        .custom-offer-card {
            display: flex;
            flex-direction: column;
            width: 100%;
            max-width: 350px;
            background: linear-gradient(145deg, #1f1133, #0d061c);
            border-radius: 12px;
            border: 1px solid #8e6abf;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
            transition: transform 0.3s ease-out;
            padding: 20px;
            margin: 20px auto;
            text-align: right;
        }

        .calculator-card:hover {
            transform: translateY(-10px) scale(1.03); /* هذا السطر هو سبب التكبير */
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .custom-offer-card:hover .offer-order-btn,
        .custom-offer-card:hover .offer-price-range {
            transform: translateY(0); /* يعود لمكانه الطبيعي */
            opacity: 1;
        }

        .custom-offer-card .offer-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .custom-offer-card .offer-image {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid #ff4655; /* لون فالورانت */
        }

        .custom-offer-card .offer-title {
            font-size: 1.5rem;
            color: white;
            margin: 0;
            flex-grow: 1;
        }

        .custom-offer-card .offer-description {
            font-size: 1rem;
            color: var(--light-text);
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .custom-offer-card .offer-features {
            list-style: none;
            padding: 0;
            margin: 0 0 20px 0;
        }

            .custom-offer-card .offer-features li {
                display: flex;
                align-items: center;
                gap: 10px;
                margin-bottom: 8px;
                font-size: 0.95rem;
                color: var(--accent-yellow);
            }

                .custom-offer-card .offer-features li svg {
                    color: #28a745; /* لون أيقونة الصح */
                }

        .custom-offer-card .offer-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: auto;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .custom-offer-card .offer-price {
            font-size: 1.8rem;
            font-weight: bold;
            color: #ff4655; /* لون فالورانت */
        }

        .custom-offer-card .buy-btn {
            background-color: #ff4655; /* لون فالورانت */
            color: white;
            font-size: 16px;
            padding: 10px 25px;
            border-radius: 50px;
            border: 2px solid #ff4655;
        }

            .custom-offer-card .buy-btn:hover {
                background-color: transparent;
                color: #ff4655;
                box-shadow: 0 0 15px rgba(255, 70, 85, 0.5);
                transform: translateY(-3px) scale(1.05);
            }

        /* START: Smaller Cards for Software Subscriptions (Updated Size) */

        #homeSoftwareSubscriptionsContainer .subscription-item {
            width: 220px; /* التعديل: تم تصغير العرض أكثر إلى 220px */
            min-height: auto;
        }

            #homeSoftwareSubscriptionsContainer .subscription-item .sub-image-wrapper img {
                height: 100px; /* التعديل: تم تصغير ارتفاع الصورة */
            }

            #homeSoftwareSubscriptionsContainer .subscription-item .sub-content {
                padding: 12px; /* التعديل: تم تقليل الحشوة الداخلية */
            }

                #homeSoftwareSubscriptionsContainer .subscription-item .sub-content h3 {
                    font-size: 1rem; /* التعديل: تم تصغير حجم العنوان */
                }

                #homeSoftwareSubscriptionsContainer .subscription-item .sub-content p {
                    font-size: 0.85rem; /* تصغير خط الوصف ليتناسب */
                    min-height: 30px;
                }

            #homeSoftwareSubscriptionsContainer .subscription-item .sub-price {
                font-size: 1.2rem; /* التعديل: تم تصغير حجم السعر */
            }

            #homeSoftwareSubscriptionsContainer .subscription-item .buy-btn {
                font-size: 13px; /* التعديل: تم تصغير حجم خط الزر */
                padding: 8px 12px; /* التعديل: تم تقليل حجم الزر */
            }

        /* END: Smaller Cards for Software Subscriptions (Updated Size) */
        /* Styling for Subscription Subcategory Labels */
        .subscription-subcategory-label {
            text-align: center;
            color: var(--accent-yellow);
            margin-top: 25px;
            margin-bottom: 15px;
            border-bottom: 2px solid var(--main-purple);
            padding-bottom: 8px;
            display: inline-block;
        }

        /* ====================================================== */
        /* ✅ START: إضافة خلفية لصورة قسم Keys & Codes ✅ */
        /* ====================================================== */

        #software-keys-section {
            /* 1. حذف التدرج اللوني القديم */
            /* background: linear-gradient(145deg, #3c1870, #A32D3B); */ /* <-- هذا السطر يتم إلغاؤه */
            /* 2. إضافة صورة الخلفية الجديدة مع طبقة تعتيم بنفسجية */
            /* ❗❗ غيّر 'my-keys-bg.png' إلى اسم الصورة التي ستضعها في مجلد 'images' ❗❗ */
            background-image: linear-gradient(rgba(30, 17, 50, 0.85), rgba(30, 17, 50, 0.85)), url('./images/my-keys-bg.png');
            /* 3. خصائص لجعل الخلفية تملأ الشاشة وتكون ثابتة (تأثير Parallax) */
            background-size: cover;
            background-position: center;
            background-attachment: fixed; /* هذا يجعل الخلفية ثابتة أثناء التمرير */
            /* 4. الحفاظ على الإطار البنفسجي الموجود */
            border-color: #8e6abf;
        }

        /* ====================================================== */
        /* ✅ END: إضافة خلفية لصورة قسم Keys & Codes ✅ */
        /* ====================================================== */

        /* END: Custom Gradient for Keys & Codes Section Background */

        /* 3. تنسيق عرض السعر النهائي */
        #giftingFinalPriceDisplay {
            background-color: rgba(0, 0, 0, 0.2);
            border: 1px solid var(--main-purple);
            border-radius: 8px;
            padding: 15px;
            margin: 20px auto 0 auto;
            width: 100%;
            max-width: 350px;
            min-height: 4em;
            display: flex;
            flex-direction: column; /* يجعل العنوان والسعر تحت بعض */
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            gap: 5px; /* مسافة بسيطة بين العنوان والسعر */
        }

            /* تنسيق جديد لكلمة "المبلغ المطلوب" */
            #giftingFinalPriceDisplay .price-label {
                font-size: 1.1rem; /* حجم خط أكبر قليلاً للعنوان */
                color: #ccc;
                font-weight: bold;
            }

            /* تنسيق جديد لقيمة السعر */
            #giftingFinalPriceDisplay .price-value {
                font-size: 1.8rem;
                font-weight: bold;
                color: lightgreen;
            }

        /* ======================================= */
        /* ✅ START: Gifting Modal Inputs (Side Icons) */
        /* ======================================= */

        /* 2. تنسيق حقول الإدخال مع الأيقونات (بجانب الحقل) */
        .input-wrapper {
            display: flex; /* <-- جعل العناصر متجاورة */
            align-items: center; /* <-- توسيط العناصر عموديًا */
            gap: 12px; /* <-- مسافة بين الأيقونة والحقل */
            background-color: rgba(0, 0, 0, 0.2);
            border: 1px solid var(--main-purple);
            border-radius: 8px;
            padding: 8px 15px;
            width: 100%;
            max-width: 350px;
            margin: 0 auto 15px auto;
            transition: all 0.3s ease;
        }

            /* تأثير التوهج عند التركيز على الحقل (باستخدام focus-within) */
            /* تأثير التوهج عند التركيز على الحقل (باللون الأزرق) */
            .input-wrapper:focus-within {
                border-color: #00c0ff; /* ✅ تغيير اللون إلى الأزرق الفاتح */
                box-shadow: 0 0 10px rgba(0, 192, 255, 0.5); /* ✅ تغيير لون التوهج إلى الأزرق */
            }

                /* تغيير لون الأيقونة عند التركيز على الحقل */
                .input-wrapper:focus-within svg {
                    color: #00c0ff; /* ✅ تغيير اللون إلى الأزرق الفاتح */
                }

                /* تغيير لون الأيقونة عند التركيز على الحقل */
                .input-wrapper:focus-within svg {
                    color: var(--accent-yellow);
                }

            .input-wrapper input {
                /* جعل الحقل يملأ المساحة المتاحة ويبدو شفافًا */
                background: transparent;
                border: none;
                outline: none;
                width: 100%;
                flex-grow: 1;
                color: white; /* لون النص */
                font-size: 16px;
                padding: 5px 0; /* إزالة الـ padding القديم */
                text-align: right;
            }

        /* ======================================= */
        /* END: Gifting Modal Inputs (Side Icons) */
        /* ======================================= */

        /* ======================================= */
        /* ✅ START: Gifting Card Glow Animation    */
        /* ======================================= */

        @keyframes gifting-card-glow {
            0% {
                /* ✅ تقليل الشفافية (الرقم الأخير) وحجم التوهج هنا */
                box-shadow: 0 0 8px rgba(101, 73, 140, 0.4), 0 0 16px rgba(60, 24, 112, 0.4);
            }

            50% {
                /* ✅ تقليل الشفافية (الرقم الأخير) وحجم التوهج هنا أيضًا */
                box-shadow: 0 0 16px rgba(138, 111, 185, 0.6), 0 0 32px rgba(101, 73, 140, 0.6);
            }

            100% {
                /* ✅ تقليل الشفافية (الرقم الأخير) وحجم التوهج هنا */
                box-shadow: 0 0 8px rgba(101, 73, 140, 0.4), 0 0 16px rgba(60, 24, 112, 0.4);
            }
        }

        /* ======================================= */
        /* END: Gifting Card Glow Animation      */
        /* ======================================= */

        /* ======================================= */
        /* ✅ START: Gifting Calculator Card Styles (FINAL FIX) */
        /* ======================================= */

        #personal-gifting-section {
            background-image: linear-gradient(rgba(0, 0, 0, 0.65), rgba(0, 0, 0, 0.65)), url('./images/your-gifting-image.png');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            padding: 40px 20px;
            margin: 20px;
            border-radius: 15px;
            border: 1px solid #8e6abf;
        }

        @keyframes smooth-white-glow {
            0% {
                box-shadow: 0 0 5px rgba(255, 255, 255, 0.05), 0 0 10px rgba(255, 255, 255, 0.02);
            }

            50% {
                box-shadow: 0 0 12px rgba(255, 255, 255, 0.2), 0 0 20px rgba(255, 255, 255, 0.1);
            }

            100% {
                box-shadow: 0 0 5px rgba(255, 255, 255, 0.05), 0 0 10px rgba(255, 255, 255, 0.02);
            }
        }

        .calculator-card {
            position: relative;
            width: 100%;
            max-width: 450px;
            margin: 20px auto;
            margin-bottom: 20px;
            padding: 3px;
            border-radius: 20px;
            /* الخلفية المتدرجة الشفافة */
            background: linear-gradient(45deg, rgba(60, 24, 112, 0.4), rgba(6, 12, 58, 0.4), rgba(163, 45, 59, 0.4));
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: all 0.4s ease;
            /* ✅ تطبيق انيميشن التوهج الأبيض هنا */
            animation: smooth-white-glow 2s infinite alternate ease-in-out;
        }

            .calculator-card:hover {
                transform: translateY(-8px); /* يرفع الكارد لأعلى بمقدار 8 بكسل */
                box-shadow: 0 10px 25px rgba(255, 255, 255, 0.2); /* يضيف ظلًا أكبر ليعطي إحساس العمق */
                border-color: rgba(255, 255, 255, 0.4); /* يجعل الحدود أكثر وضوحاً */
            }

        .calculator-card-content {
            background: rgba(30, 17, 50, 0.6);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: none;
            padding: 30px;
            border-radius: 18px;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .calculator-card-icon {
            width: 80px;
            height: 80px;
            margin-bottom: 20px;
            filter: drop-shadow(0 0 15px rgba(255, 255, 255, 0.6));
        }

        .calculator-card h3 {
            font-size: 1.8rem;
            color: #ffffff;
            margin-bottom: 15px;
            border: none;
            padding: 0;
        }

        .calculator-card p {
            font-size: 1rem;
            color: #e0d8f0;
            line-height: 1.6;
            max-width: 300px;
            margin-bottom: 25px;
        }

        .calculator-card .buy-btn {
            background-color: transparent;
            color: white;
            font-size: 18px;
            padding: 12px 35px;
            border-radius: 50px;
            border: 2px solid white;
            box-shadow: none;
            transition: all 0.3s ease;
        }

            .calculator-card .buy-btn:hover {
                background-color: white;
                color: #3c1870;
                transform: translateY(-3px) scale(1.05);
                box-shadow: 0 6px 20px rgba(255, 255, 255, 0.3);
            }

        /* ======================================= */
        /* END: Gifting Calculator Card Styles  */
        /* ======================================= */

        /* 1. تصميم الحاوية الرئيسية (لجعل الكروت بجانب بعضها) */
        #softwareKeysContainer {
            display: flex;
            flex-wrap: nowrap; /* يمنع الكروت من النزول لسطر جديد */
            justify-content: flex-start;
            gap: 30px;
            overflow-x: auto; /* يضيف شريط تمرير أفقي */
            padding-bottom: 20px;
            /* لإخفاء شريط التمرير الافتراضي */
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

            #softwareKeysContainer::-webkit-scrollbar {
                display: none;
            }

        /* 2. تصميم كروت المفاتيح الجديدة (Glassmorphism + RGB Glow) */
        .gaming-key-card {
            position: relative;
            flex: 0 0 auto;
            width: 280px; /* تم الإرجاع للحجم الأصلي */
            min-height: 250px; /* تم الإرجاع للحجم الأصلي */
            padding: 25px; /* تم الإرجاع للحجم الأصلي */
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.4s ease;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
        }

            /* 3. تأثيرات Hover الجديدة */
            .gaming-key-card:hover {
                transform: translateY(-10px) scale(1.03);
                border: 1px solid rgba(255, 255, 255, 0.3);
                animation: rgb-border 4s linear infinite;
                box-shadow: 0 15px 40px rgba(0, 0, 0, 0.6);
            }

            /* 4. تصميم صور المنتجات داخل الكروت */
            .gaming-key-card img {
                width: 120px; /* تم الإرجاع للحجم الأصلي */
                height: 120px; /* تم الإرجاع للحجم الأصلي */
                object-fit: contain;
                filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.5));
            }

        /* 5. انيميشن الإطار المتوهج الملون */
        @keyframes rgb-border {
            0% {
                border-color: #ff007f;
            }

            20% {
                border-color: #ff5e3a;
            }

            40% {
                border-color: #fff147;
            }

            60% {
                border-color: #00d7ff;
            }

            80% {
                border-color: #c900ff;
            }

            100% {
                border-color: #ff007f;
            }
        }

        /* ======================================= */
        /* END: New Keys Section Styles */
        /* ======================================= */

        /* ======================================= */
        /* START: Glowy Button Style               */
        /* ======================================= */

        /* 1. تعريف حركة التوهج (Animation) */
        @keyframes glow-animation {
            0% {
                box-shadow: 0 0 5px #fff, 0 0 10px #fff, 0 0 15px #007bff;
            }

            50% {
                box-shadow: 0 0 20px #fff, 0 0 30px #007bff, 0 0 40px #007bff;
            }

            100% {
                box-shadow: 0 0 5px #fff, 0 0 10px #fff, 0 0 15px #007bff;
            }
        }

        /* 2. تطبيق الستايل على أزرار التأكيد */
        .button-primary {
            background-color: #ffffff; /* ✅ خلفية بيضاء */
            color: #110e1a; /* ✅ لون الخط أسود ليكون واضحًا */
            border: 1px solid #ddd;
            transition: all 0.3s ease;
            animation: glow-animation 3s infinite linear; /* ✅ تطبيق حركة التوهج */
        }

            .button-primary:hover {
                background-color: #f0f0f0;
                color: #000;
                /* دمج تأثيري الحركة للأعلى والتكبير في سطر واحد */
                transform: translateY(-2px) scale(1.05);
            }

        /* تنسيقات أزرار نافذة التأكيد */
        #confirm-yes-btn {
            background-color: var(--green-buy-btn); /* أخضر */
            color: white;
        }

            #confirm-yes-btn:hover {
                background-color: var(--green-buy-btn-hover);
            }

        #confirm-no-btn {
            background-color: #6c757d; /* رمادي */
            color: white;
        }

            #confirm-no-btn:hover {
                background-color: #5a6268;
            }



        /* ✅ توسيط ليبل Marvel Rivals ID */
        #marvel-rivals-id-group {
            text-align: center !important; /* !important لضمان تطبيق التنسيق */
        }

        /* ✅ توسيط placeholder الخاص بـ Marvel Rivals ID */
        #marvel_rivals_id_input::placeholder {
            text-align: center;
        }
        /* Default styles for RTL (Arabic) */
        h1, h2, h3 {
            margin-right: 20px;
            border-right: 4px solid var(--accent-yellow);
            padding-right: 10px;
            display: inline-block;
        }

        .modal .close-btn {
            right: 15px;
            left: auto;
        }

        #navbar .logo-area img {
            margin-left: 10px;
            margin-right: 0;
        }


        /* Styles for LTR (English) when applied to the html tag */
        html[dir="ltr"] body {
            text-align: left;
        }

        html[dir="ltr"] h1,
        html[dir="ltr"] h2,
        html[dir="ltr"] h3 {
            margin-left: 20px;
            margin-right: 0;
            border-left: 4px solid var(--accent-yellow);
            border-right: none;
            padding-left: 10px;
            padding-right: 0;
        }

        html[dir="ltr"] .modal .close-btn {
            left: 15px;
            right: auto;
        }

        html[dir="ltr"] #navbar .logo-area img {
            margin-right: 10px;
            margin-left: 0;
        }

        html[dir="ltr"] .cart-item-extra-info {
            text-align: left;
        }

        html[dir="ltr"] .nav-link::after {
            transform-origin: right;
        }

        html[dir="ltr"] .nav-link:hover::after {
            transform-origin: left;
        }

        html[dir="ltr"] .footer-link img {
            margin-right: 8px;
            margin-left: 0;
        }

        html[dir="ltr"] .support-button img {
            margin-right: 5px;
            margin-left: 0;
        }


        /* Reset styles that should not have direction */
        h3,
        .modal-body h2,
        .content-page h2,
        #footer h3,
        #comments-section h3,
        .login-container h2, .signup-container h2,
        .product-item h3,
        .subscription-item .sub-content h3,
        .payment-method-card h3 {
            margin-right: 0;
            border-right: none;
            padding-right: 0;
            margin-left: 0;
            border-left: none;
            padding-left: 0;
        }



        #services-section {
            /* ❗ غيّر 'services-background.png' إلى اسم الصورة التي تريدها */
            background-image: linear-gradient(rgba(30, 17, 50, 0.85), rgba(30, 17, 50, 0.85)), url('./images/services-background.png') !important;
            background-size: cover !important;
            background-position: center !important;
            background-attachment: fixed !important;
            background-color: transparent !important; /* للتأكد من عدم ظهور أي لون قديم */
            /* الخصائص الأخرى للقسم تبقى كما هي */
            border: 1px solid #8e6abf;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin: 20px;
            position: relative;
            border-radius: 15px;
            backdrop-filter: none;
            -webkit-backdrop-filter: none;
        }


        /* تنسيق البطاقة الأساسي */
        .service-offer-card {
            position: relative;
            width: 100%;
            max-width: 300px;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            min-height: 380px; /* لتثبيت ارتفاع البطاقات */
            transition: all 0.3s ease-in-out;
            overflow: hidden;
            cursor: pointer;
        }

            .service-offer-card::before {
                content: '';
                position: absolute;
                top: -1px;
                left: -1px;
                right: -1px;
                bottom: -1px;
                z-index: -1;
                border-radius: 13px;
                background: linear-gradient(45deg, #FF6F61, #FFD166, #4A90E2, #7B42F2);
                opacity: 0;
                filter: blur(10px);
                transition: opacity 0.5s ease-in-out, filter 0.5s ease-in-out;
            }

            /* ✅✅ START: تعديل لزيادة قوة توهج بطاقات الخدمات ✅✅ */

            .service-offer-card:hover::before {
                opacity: 1;
                filter: blur(15px); /* ✅ زيادة قوة البلور لنشر التوهج بشكل أكبر */
            }

            .service-offer-card:hover {
                transform: translateY(-8px) scale(1.02);
                /* ✅ التوهج الجديد باللون البنفسجي */
                box-shadow: 0 12px 30px rgba(0, 0, 0, 0.5), 0 0 35px rgba(170, 100, 255, 0.7);
            }

        /* ✅✅ END: تعديل لزيادة قوة توهج بطاقات الخدمات ✅✅ */

        .service-card-image {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid white;
            margin-bottom: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .service-offer-card h3 {
            font-size: 1.5rem;
            color: white;
            margin: 10px 0;
            border-bottom: none;
            padding-right: 0;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
        }

        .service-card-description {
            font-size: 1rem;
            color: var(--light-text);
            text-align: center;
            flex-grow: 1;
            display: flex;
            align-items: center;
            padding: 0 10px;
        }

        .service-offer-card button {
            background-color: transparent;
            color: white;
            border: 2px solid white;
            padding: 10px 25px;
            border-radius: 50px;
            font-weight: bold;
            font-size: 16px;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

            .service-offer-card button:hover {
                background-color: white;
                color: #110e1a;
                box-shadow: 0 0 10px rgba(255, 255, 255, 0.7);
                transform: translateY(-2px);
            }


        /* التنسيق الخاص بكل بطاقة على حدة */
        #design-offer-card {
            background: linear-gradient(135deg, #1e0b3c, #0d061c);
            border: 1px solid #8e6abf;
        }

        #developing-offer-card {
            background: linear-gradient(135deg, #0b1a3c, #06111c);
            border: 1px solid #4a90e2;
        }


        /* ======================== END: Custom Service Cards ======================== */
        #modalProductInfo .description-display {
            text-align: right;
        }

        .custom-order-header-text,
        #designs .custom-order-header-text {
            position: relative;
            top: -40px;
            border: 1px solid rgba(255, 255, 255, 0.5);
            padding: 10px 15px;
            border-radius: 8px;
            display: block; /* تأكد من أن العنصر block */
            width: fit-content; /* اجعل العرض يتناسب مع المحتوى فقط */
            margin: 0 auto; /* هذه الخاصية تقوم بتوسيط العنصر */
            background-color: transparent;
            color: inherit;
        }

        #developing .custom-order-card {
            transition: transform 0.3s ease-out; /* انتقال سلس لحركة الصعود فقط */
        }

            #developing .custom-order-card:hover {
                transform: translateY(-10px); /* يصعد للأعلى بمقدار 10 بكسل */
            }

        #developing .offer-order-btn {
            /* تدرج لوني من الأرجواني الفاتح إلى الأرجواني الغامق */
            background: linear-gradient(to bottom, #cda1ff, #4b2075);
            color: white; /* لون النص الأبيض */
        }


            /* يمكنك إضافة تأثير عند المرور بالماوس لإكمال التنسيق */
            #developing .offer-order-btn:hover {
                /* تدرج لوني مختلف عند المرور بالماوس لإعطاء تأثير التفاعل */
                background: linear-gradient(to top, #cda1ff, #4b2075);
                box-shadow: 0 0 15px #cda1ff;
                transform: translateY(-2px); /* إضافة حركة بسيطة للأعلى */
            }


        /* === START: Custom Developing Cards Styling === */
        .custom-order-card {
            position: relative; /* ضروري لجعل بطاقة العرض تتموضع بشكل صحيح */
            overflow: hidden; /* لإخفاء أي محتوى يخرج عن الإطار */
            justify-content: center; /* لتوسيط الفورم بعد إخفاء العرض */
        }

        .offer-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(145deg, rgba(44, 26, 64, 0.95), rgba(30, 17, 50, 1));
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 25px;
            box-sizing: border-box;
            z-index: 2;
            transition: opacity 0.4s ease-out, transform 0.4s ease-out;
            text-align: center;
        }

            .offer-overlay.hidden {
                opacity: 0;
                transform: translateY(-20px); /* تأثير حركة للأعلى عند الاختفاء */
                pointer-events: none;
            }


        /* هذا هو الكود الأساسي الذي يجب أن تعدله */
        .offer-image {
            width: 100%;
            max-width: 150px;
            height: 200px;
            display: block;
            margin: 0 auto 15px auto;
            border-radius: 8px;
            object-fit: cover;
            /* ✅ تم إزالة البوردر والظل من هنا لجعلهما خاصين بكل قسم */
        }


        /* ✅ هذا الكود يطبق بوردر أحمر ووهج على صور قسم التصاميم فقط */
        #designs .offer-image {
            border: 3px solid #8B0000; /* ✅ اللون الأحمر الغامق */
            box-shadow: 0 0 15px rgba(220, 53, 69, 0.4);
        }


        /* ✅ هذا الكود يطبق بوردر بنفسجي ووهج على صور قسم التطوير فقط */
        #developing .offer-image {
            border: 3px solid #8e6abf; /* لون بنفسجي */
            box-shadow: 0 0 15px rgba(142, 106, 191, 0.4);
        }

        .offer-overlay h3 {
            color: var(--white-text);
            border-bottom: none;
            padding-bottom: 5px;
            margin-bottom: 10px;
        }

        .offer-price-range {
            font-size: 1.1rem;
            font-weight: bold;
            color: var(--accent-yellow);
            margin: 10px 0 20px 0;
        }

        .offer-order-btn {
            padding: 12px 30px;
            font-size: 18px;
            background-color: var(--accent-yellow);
            color: var(--black-text);
            border-radius: 50px;
        }

            .offer-order-btn:hover {
                background-color: #e6b800; /* لون أغمق عند التمرير */
                box-shadow: 0 0 15px var(--accent-yellow);
            }



        /* تعديل الفورم لتكون مخفية في البداية */
        .custom-order-form {
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease-in 0.3s; /* تأخير بسيط لتظهر بعد اختفاء العرض */
        }

            .custom-order-form.visible {
                opacity: 1;
                pointer-events: auto;
            }


        /* === END: Custom Developing Cards Styling === */

        /* === START: Custom Order Cards Styling === */
        .custom-order-card {
            position: relative;
            overflow: hidden;
            justify-content: center;
            width: 100%;
            max-width: 300px;
            min-height: 500px; /* ✅ تم إضافة هذا السطر لتحديد الارتفاع الأدنى للبطاقة */
            background: linear-gradient(145deg, rgba(44, 26, 64, 0.7), rgba(30, 17, 50, 0.9));
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
            text-align: center;
            border: 1px solid var(--main-purple);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease-out;
        }

        #designs .custom-order-card:hover {
            transform: translateY(-10px);
        }

        .custom-order-card h3 {
            margin-top: 0;
            margin-bottom: 15px;
            color: var(--accent-yellow);
            border-bottom: 2px solid var(--main-purple);
            padding-bottom: 10px;
        }

        .custom-order-description {
            color: var(--light-text);
            min-height: 80px; /* لضمان تساوي ارتفاع الوصف في البطاقتين */
            line-height: 1.6;
        }

        .custom-order-form {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: auto; /* يدفع الفورم لأسفل البطاقة */
        }

            .custom-order-form input,
            .custom-order-form textarea {
                width: 100%;
                box-sizing: border-box; /* لضمان أن الـ padding لا يزيد من العرض */
                margin: 0;
            }

            .custom-order-form textarea {
                min-height: 120px;
                resize: vertical;
            }


        /* === END: Custom Order Cards Styling === */
        @keyframes smooth-glow {
            0% {
                box-shadow: 0 0 10px rgba(0, 192, 255, 0.4);
                border-color: rgba(0, 192, 255, 0.6);
            }

            50% {
                box-shadow: 0 0 20px rgba(0, 192, 255, 0.8), 0 0 30px rgba(0, 192, 255, 0.3);
                border-color: rgba(0, 192, 255, 1);
            }

            100% {
                box-shadow: 0 0 10px rgba(0, 192, 255, 0.4);
                border-color: rgba(0, 192, 255, 0.6);
            }
        }


        /* تنسيق زر تأكيد الدفع بواسطة PayPal */
        .paypal-confirm-btn {
            display: inline-block;
            padding: 12px 25px;
            font-size: 18px;
            font-weight: bold;
            text-align: center;
            text-decoration: none;
            color: white;
            background-color: #0070ba; /* لون أزرق بايبال */
            border: 2px solid #0070ba;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 112, 186, 0.3);
        }


            /* تأثير التمرير (Hover effect) */
            .paypal-confirm-btn:hover {
                background-color: #00457c; /* لون أزرق أغمق عند التمرير */
                border-color: #00457c;
                transform: translateY(-2px);
                box-shadow: 0 6px 20px rgba(0, 112, 186, 0.5);
            }


            /* تأثير عند الضغط (Active effect) */
            .paypal-confirm-btn:active {
                transform: translateY(0);
                box-shadow: 0 2px 10px rgba(0, 112, 186, 0.2);
            }


        /* تأكد من إضافة هذا الكود لجعله يعمل بشكل صحيح مع نموذج الدفع */
        #paypalForm .paypal-confirm-btn {
            width: 100%;
            margin-top: 15px;
            margin-left: auto;
            margin-right: auto;
        }

        .paypal-link {
            color: #0070ba; /* لون أزرق بايبال */
            font-weight: bold;
            text-decoration: none; /* لإزالة الخط تحت الرابط */
            transition: color 0.3s ease;
        }

            .paypal-link:hover {
                color: #16468a; /* لون أزرق أغمق عند التمرير */
                text-decoration: underline; /* لإظهار الخط عند التمرير */
            }


        /* New specific styles for subscription buttons only */
        .subscription-item .buy-btn {
            background-color: #000000 !important; /* لون أسود معتم بالكامل */
            color: white !important;
            border: 1px solid white !important;
            transition: all 0.3s ease;
        }

            .subscription-item .buy-btn:hover {
                background-color: #000000 !important; /* 1. يضمن بقاء الخلفية سوداء تمامًا */
                transform: scale(1.05); /* 2. يقوم بتكبير الزر قليلاً */
                text-shadow: 0 0 8px rgba(255, 255, 255, 0.9); /* 3. يضيف توهجًا أبيض للنص */
                box-shadow: none; /* (اختياري) لإلغاء أي توهج قديم للإطار */
            }

        .subscription-item .add-to-cart-btn {
            background-color: var(--accent-yellow) !important;
            color: var(--black-text) !important;
            border: none !important;
            border-radius: 8px !important;
            padding: 10px !important;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

            .subscription-item .add-to-cart-btn:hover {
                background-color: #e6b800 !important;
                transform: translateY(-2px);
            }

            .subscription-item .add-to-cart-btn img {
                filter: none; /* Reset any potential filter on the icon */
                transform: none; /* Reset any potential transform on the icon */
            }

        .checkout-btn-centered {
            display: block;
            margin: 20px auto 0;
            padding: 15px 30px;
            font-size: 18px;
            font-weight: bold;
            border-radius: 8px;
            cursor: pointer;
            background-color: white;
            color: var(--main-purple);
            border: none !important; /* Use !important to override other rules */
            transition: all 0.3s ease-in-out;
        }

            .checkout-btn-centered:hover {
                /* تأثير التوهج عند تمرير الماوس */
                animation: rgb-glow-pulse 4s infinite linear;
                transform: translateY(-2px);
                background-color: #f0f0f0 !important; /* استخدام !important لفرض اللون */
                color: var(--main-purple) !important; /* استخدام !important لفرض اللون */
            }


        @keyframes rgb-glow-pulse {
            0% {
                box-shadow: 0 0 5px rgba(255, 0, 0, 0.9), 0 0 15px rgba(255, 0, 0, 0.7), 0 0 30px rgba(255, 0, 0, 0.5);
                border-color: rgba(255, 0, 0, 0.9);
            }

            16% {
                box-shadow: 0 0 5px rgba(255, 255, 0, 0.9), 0 0 15px rgba(255, 255, 0, 0.7), 0 0 30px rgba(255, 255, 0, 0.5);
                border-color: rgba(255, 255, 0, 0.9);
            }

            33% {
                box-shadow: 0 0 5px rgba(0, 255, 0, 0.9), 0 0 15px rgba(0, 255, 0, 0.7), 0 0 30px rgba(0, 255, 0, 0.5);
                border-color: rgba(0, 255, 0, 0.9);
            }

            50% {
                box-shadow: 0 0 5px rgba(0, 255, 255, 0.9), 0 0 15px rgba(0, 255, 255, 0.7), 0 0 30px rgba(0, 255, 255, 0.5);
                border-color: rgba(0, 255, 255, 0.9);
            }

            66% {
                box-shadow: 0 0 5px rgba(0, 0, 255, 0.9), 0 0 15px rgba(0, 0, 255, 0.7), 0 0 30px rgba(0, 0, 255, 0.5);
                border-color: rgba(0, 0, 255, 0.9);
            }

            83% {
                box-shadow: 0 0 5px rgba(255, 0, 255, 0.9), 0 0 15px rgba(255, 0, 255, 0.7), 0 0 30px rgba(255, 0, 255, 0.5);
                border-color: rgba(255, 0, 255, 0.9);
            }

            100% {
                box-shadow: 0 0 5px rgba(255, 0, 0, 0.9), 0 0 15px rgba(255, 0, 0, 0.7), 0 0 30px rgba(255, 0, 0, 0.5);
                border-color: rgba(255, 0, 0, 0.9);
            }
        }

        /* 2. تطبيق تأثير الوهج المتغير على الكارت عند المرور بالماوس */
        .subscription-option-label:hover .subscription-option-card {
            transform: translateY(-3px);
            animation: rgb-glow-pulse 4s infinite linear;
        }

        /* الكود السابق للإطار */
        .modal-product-header {
            /* تنسيقات الإطار اللي هتضيفها */
            border: 0.5px solid var(--main-purple);
            border-radius: 12px;
            padding: 10px;
            margin-bottom: 15px;
            background-color: rgba(0, 0, 0, 0.2);
            /* <<-- التعديلات الجديدة هنا -->> */
            display: flex;
            flex-direction: row-reverse; /* الصورة على اليمين والنصوص على اليسار */
            align-items: center; /* توسيط العناصر رأسيًا */
            justify-content: space-between; /* توزيع المساحة بين العناصر */
        }

            .modal-product-header .text-content {
                /* السماح للحاوية بأن تتمدد لتشغل المساحة المتاحة */
                flex-grow: 1;
                /* محاذاة النصوص إلى اليمين (لأن اللغة العربية RTL) */
                text-align: right;
                /* إزالة أي هوامش داخلية قديمة */
                padding: 0;
                margin: 0;
            }



            /* تعديل بسيط لضمان أن النصوص داخل الإطار تظهر بشكل مناسب */
            .modal-product-header h2,
            .modal-product-header .description-display,
            .modal-product-header .platform-display {
                margin: 0;
            }



        /* Defina a animação de pulsação para o item selecionado */
        @keyframes selected-glow-pulse {
            0% {
                box-shadow: 0 0 8px rgba(255, 204, 0, 0.5);
            }

            50% {
                box-shadow: 0 0 16px rgba(255, 204, 0, 0.8);
            }

            100% {
                box-shadow: 0 0 8px rgba(255, 204, 0, 0.5);
            }
        }



        @keyframes rgb-glow-pulse {
            0% {
                box-shadow: 0 0 10px rgba(255, 0, 0, 0.95), 0 0 20px rgba(255, 0, 0, 0.8), 0 0 40px rgba(255, 0, 0, 0.6);
                border-color: rgba(255, 0, 0, 0.95);
            }

            16% {
                box-shadow: 0 0 10px rgba(255, 255, 0, 0.95), 0 0 20px rgba(255, 255, 0, 0.8), 0 0 40px rgba(255, 255, 0, 0.6);
                border-color: rgba(255, 255, 0, 0.95);
            }

            33% {
                box-shadow: 0 0 10px rgba(0, 255, 0, 0.95), 0 0 20px rgba(0, 255, 0, 0.8), 0 0 40px rgba(0, 255, 0, 0.6);
                border-color: rgba(0, 255, 0, 0.95);
            }

            50% {
                box-shadow: 0 0 10px rgba(0, 255, 255, 0.95), 0 0 20px rgba(0, 255, 255, 0.8), 0 0 40px rgba(0, 255, 255, 0.6);
                border-color: rgba(0, 255, 255, 0.95);
            }

            66% {
                box-shadow: 0 0 10px rgba(0, 0, 255, 0.95), 0 0 20px rgba(0, 0, 255, 0.8), 0 0 40px rgba(0, 0, 255, 0.6);
                border-color: rgba(0, 0, 255, 0.95);
            }

            83% {
                box-shadow: 0 0 10px rgba(255, 0, 255, 0.95), 0 0 20px rgba(255, 0, 255, 0.8), 0 0 40px rgba(255, 0, 255, 0.6);
                border-color: rgba(255, 0, 255, 0.95);
            }

            100% {
                box-shadow: 0 0 10px rgba(255, 0, 0, 0.95), 0 0 20px rgba(255, 0, 0, 0.8), 0 0 40px rgba(255, 0, 0, 0.6);
                border-color: rgba(255, 0, 0, 0.95);
            }
        }



        .subscription-option-label:hover .subscription-option-card {
            transform: translateY(-3px);
            animation: rgb-glow-pulse 4s infinite linear;
        }



        /* تأكد أن هذا الكود موجود بالفعل ويجعل الخلفية داكنة */
        .subscription-option-label input[type="radio"] {
            appearance: none;
            -webkit-appearance: none;
            position: absolute;
            display: none; /* أضف هذا السطر  */
        }



        /* توهج أزرق سماوي (لفورتنايت) */
        @keyframes glow-blue {
            0%, 100% {
                box-shadow: 0 0 5px #00b8ff, 0 0 10px #00b8ff;
            }

            50% {
                box-shadow: 0 0 20px #00b8ff, 0 0 30px #00b8ff;
            }
        }


        /* توهج أحمر مائل على الوردي لفالورانت */
        @keyframes glow-red-pink {
            0%, 100% {
                box-shadow: 0 0 10px #ff4655, 0 0 20px #ff4655;
                border-color: #ff4655;
            }

            50% {
                box-shadow: 0 0 30px #e6324b, 0 0 50px #e6324b;
                border-color: #e6324b;
            }
        }


        /* توهج أبيض مائل للرمادي (لروبلوكس) */
        @keyframes glow-white {
            0%, 100% {
                box-shadow: 0 0 5px #ff7700, 0 0 10px #ff7700;
                border-color: #ff7700;
            }

            50% {
                box-shadow: 0 0 20px #ffaa60, 0 0 30px #ffaa60;
                border-color: #ffaa60;
            }
        }



        /* توهج ذهبي (لجينشن) */
        @keyframes glow-gold {
            0%, 100% {
                box-shadow: 0 0 5px #f5d685, 0 0 10px #f5d685;
            }

            50% {
                box-shadow: 0 0 20px #fff2d1, 0 0 30px #fff2d1;
            }
        }



        /* توهج أزرق قوي (لروكيت ليج) */
        @keyframes glow-blue {
            0%, 100% {
                box-shadow: 0 0 10px #00a8ff, 0 0 20px #00a8ff;
                border-color: #00a8ff;
            }

            50% {
                box-shadow: 0 0 40px #33ccff, 0 0 60px #33ccff;
                border-color: #33ccff;
            }
        }



        /* توهج بنفسجي (لمارفل) */
        @keyframes glow-purple {
            0%, 100% {
                box-shadow: 0 0 5px #a450ff, 0 0 10px #a450ff;
            }

            50% {
                box-shadow: 0 0 20px #cda1ff, 0 0 30px #cda1ff;
            }
        }




        /* 2. تطبيق كل حركة على الكارت المخصص لها */
        #valorant-card:hover {
            animation: glow-red-pink 1.5s infinite ease-in-out;
            border-color: #ff4655; /* أحمر فالورانت */
        }

        #fortnite-card:hover {
            animation: glow-blue 1.5s infinite ease-in-out;
            border-color: #00b8ff; /* أزرق فورتنايت */
        }

        #roblox-card:hover {
            animation: glow-white 1.5s infinite ease-in-out;
            border-color: #ffffff; /* أبيض روبلوكس */
        }

        #genshin-card:hover {
            animation: glow-gold 1.5s infinite ease-in-out;
            border-color: #f5d685; /* ذهبي جينشن */
        }

        #rocket-card:hover {
            animation: glow-blue 1.5s infinite ease-in-out;
            border-color: #00a8ff; /* أزرق */
        }

        #marvel-card:hover {
            animation: glow-purple 1.5s infinite ease-in-out;
            border-color: #a450ff; /* بنفسجي مارفل */
        }

        #roblox {
            /* كود الخلفية الحالي (إذا كان موجودًا، عدله ليتوافق أو أضفه لو مش موجود) */
            background-image: linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.8)), url('./images/robloxwallpaper.png');
            background-size: cover;
            background-position: center;
            border-radius: 15px;
            padding: 20px;
            position: relative; /* مهم جدًا: للسماح للعنصر الزائف بالوضع المطلق بالنسبة له */
            overflow: hidden; /* لإخفاء أي جزء من البلور يخرج عن حدود الزوايا المستديرة */
            z-index: 1; /* للتأكد من أن محتوى القسم يظهر فوق الخلفية المضببة */
        }

            #roblox::before {
                content: ''; /* ضروري للعنصر الزائف */
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background-image: linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.8)), url('./images/robloxwallpaper.png');
                background-size: cover;
                background-position: center;
                filter: blur(5px); /* <<-- هنا نضيف تأثير البلور (8px مثال، يمكنك تغيير القيمة) -->> */
                z-index: -1; /* لوضعه خلف محتوى القسم */
            }

        #rocketleague {
            /* كود الخلفية الحالي كما هو */
            background-image: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/rlwallpaper.png');
            background-size: cover;
            background-position: center;
            border-radius: 15px;
            padding: 20px;
            position: relative; /* مهم جدًا: للسماح للعنصر الزائف بالوضع المطلق بالنسبة له */
            overflow: hidden; /* لإخفاء أي جزء من البلور يخرج عن حدود الزوايا المستديرة */
            z-index: 1; /* للتأكد من أن محتوى القسم يظهر فوق الخلفية المضببة */
        }

            #rocketleague::before {
                content: ''; /* ضروري للعنصر الزائف */
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background-image: url('./images/rlwallpaper.png'); /* نفس صورة الخلفية */
                background-size: cover;
                background-position: center;
                background-color: rgba(0, 0, 0, 0.5); /* 0.5 تعني 50% تعتيم. غيّرها حسب الحاجة */
                background-blend-mode: multiply; /* هذه الخاصية تجعل اللون يتداخل بشكل جيد مع الصورة */
                filter: blur(2px); /* <<-- هنا نضيف تأثير البلور (8px مثال، يمكنك تغيير القيمة) -->> */
                z-index: -1; /* لوضعه خلف محتوى القسم */
                /* يمكنك إضافة طبقة داكنة خفيفة هنا أيضًا لتعتيم الصورة قبل البلور، لكن التدرج اللوني في العنصر الأب كافي */
                /* background-color: rgba(0, 0, 0, 0.3); */
            }

        #vodafoneForm .input-fields textarea {
            resize: none;
            height: 15px; /* <-- تم تعديل الارتفاع ليتطابق بدقة */
        }



        /* 1. تعريف حركة الصعود والظهور */
        @keyframes payment-details-slide-up {
            from {
                opacity: 0;
                transform: translateY(15px); /* تبدأ من أسفل قليلاً */
            }

            to {
                opacity: 1;
                transform: translateY(0); /* تنتهي في مكانها الطبيعي */
            }
        }



        /* 2. تطبيق الحركة على قسم الدفع عند ظهوره */
        #vodafoneDetails.is-visible,
        #paypalDetails.is-visible {
            animation: payment-details-slide-up 0.4s ease-out;
        }

        .add-to-cart-btn {
            background-color: #28a745; /* هذا هو اللون الأخضر الفاتح */
            color: white; /* لون النص أبيض ليكون واضحًا */
            border: none;
            border-radius: 8px; /* حواف دائرية للزر */
            padding: 10px; /* مساحة داخلية أكبر */
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

            .add-to-cart-btn img {
                width: 24px; /* حجم الأيقونة أكبر */
                height: 24px;
            }

            .add-to-cart-btn:hover {
                background-color: #218838; /* لون أغمق قليلاً عند التمرير */
                transform: translateY(-2px);
            }

        .footer-layout-container {
            display: flex;
            align-items: center;
            justify-content: space-between; /* هذا السطر هو الأهم: يضع العناصر على الطرفين */
            flex-wrap: wrap;
            margin-bottom: 25px;
            padding-bottom: 25px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .trust-badges-container {
            display: flex;
            justify-content: center; /* لتوسيط الأيقونات */
            align-items: center;
            gap: 30px;
            flex-wrap: wrap;
            margin: 20px auto; /* هامش من الأعلى والأسفل */
            padding: 0;
            border: none;
            max-width: 800px; /* لضمان عدم تمدد الحاوية بشكل مبالغ فيه */
            border-bottom: 1px solid rgba(255, 255, 255, 0.1); /* خط فاصل */
        }

        .suggestion-button {
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--accent-yellow);
            color: var(--black-text);
            border: none;
            border-radius: 50px;
            padding: 10px 20px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            gap: 8px;
            margin: 20px auto; /* لتوسيط الزر */
            width: auto;
        }

        #steam-points-section {
            position: relative; /* مهم جدًا لوضع العنصر الوهمي */
            overflow: hidden; /* لإخفاء أي جزء من الصورة قد يتجاوز حدود القسم */
            border-radius: 15px; /* لجعل الزوايا مستديرة للقسم بالكامل */
            /* باقي خصائص القسم هنا (مثل الـ padding للمحتوى) */
            padding: 20px; /* مثال لترك مسافة للمحتوى */
            color: white; /* لجعل النصوص بيضاء فوق الخلفية الداكنة */
        }

        #steamGiftCardsPageContainer .product-item:hover,
        #steamGiftCardsHomeContainer .product-item:hover {
            transform: translateY(-8px) scale(1.02);
            animation: smooth-glow 1.5s infinite ease-in-out;
            border-color: #00c0ff;
        }

        #steam-points-section::before {
            content: ''; /* ضروري للعنصر الوهمي */
            position: absolute; /* لوضعه بشكل مطلق داخل العنصر الأب */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('./images/steamgirl.png'); /* مسار صورتك */
            background-size: cover;
            background-position: center;
            background-attachment: fixed; /* إذا كنت تريد تأثير التثبيت */
            filter: blur(5px); /* قيمة الضبابية، يمكنك تعديلها (مثال: 5px) */
            z-index: -1; /* لوضعه خلف المحتوى */
            border-radius: 15px; /* ليتطابق مع زوايا القسم الأب */
        }



        /* يمكنك إضافة طبقة تدرج لوني فوق الخلفية الضبابية لجعل النصوص أوضح */
        #steam-points-section::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.55); /* لون أسود شبه شفاف */
            z-index: -1; /* ليكون بين الخلفية الضبابية والمحتوى */
            border-radius: 15px;
        }

        #steam-points-section {
            /* هنا يتم وضع الصورة كخلفية */
            background-image: linear-gradient(rgba(0, 0, 0, 0.65), rgba(0, 0, 0, 0.65)), url('./images/steamgirl.png');
            background-size: cover; /* لضمان تغطية الصورة للمساحة بالكامل */
            background-position: center; /* لتوسيط الصورة */
            background-attachment: fixed; /* لتثبيت الخلفية أثناء التمرير */
            border-radius: 15px; /* لجعل الزوايا مستديرة */
        }

        .remove-item-btn {
            background-color: #dc3545;
            color: white;
            font-size: 16px;
            font-weight: bold;
            width: 25px;
            height: 25px;
            border: 2px solid white;
            border-radius: 50%;
            cursor: pointer;
            flex-shrink: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 0;
            position: relative;
            top: 7px; /* قيمة top التي اخترتها سابقًا للحفاظ على موضع الزر */
            /* ✅ هذا هو السطر الجديد لرفع حرف الـ X فقط */
            transform: translateY(-1px); /* قم بتغيير القيمة لرفع أو خفض حرف X */
        }


        /* === START: خلفية قسم حسابات ستيم أوفلاين === */
        #offline-steam-section {
            /* 1. مسار صورة الخلفية */
            padding-top: 5px !important;
            background-image: linear-gradient(rgba(31, 17, 51, 0.8), rgba(31, 17, 51, 0.8)), url('./images/offlinewallpaper.png'); /* <--- غيّر هذا المسار */
            /* 2. خصائص لتثبيت الخلفية وضمان وضوحها */
            background-size: cover; /* لضمان تغطية الصورة للمساحة بالكامل */
            background-position: center; /* لتوسيط الصورة */
            background-attachment: fixed; /* لجعل الخلفية ثابتة أثناء التمرير (تأثير Parallax) */
            /* 3. خصائص لتحسين المظهر */
            border: 1px solid #8e6abf; /* إضافة إطار بنفسجي خفيف */
            padding: 30px 20px; /* زيادة المساحة الداخلية لظهور الخلفية بشكل أفضل */
        }


        /* === END: خلفية قسم حسابات ستيم أوفلاين === */
        #games-section {
            position: relative; /* يجب أن يكون العنصر له وضع نسبي أو مطلق */
            /* جعل الخلفية شفافة جزئياً لكي يظهر تأثير الضبابية */
            background: rgba(30, 17, 50, 0.6); /* لون بنفسجي شبه شفاف */
            /* هذا هو الكود الذي يطبق تأثير الضبابية على ما هو خلف العنصر */
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(8px); /* لدعم متصفحات Safari */

            background-size: cover;
            background-position: center 90%;
            background-attachment: fixed;
            border-radius: 15px;
        }

        #game-topup-section {
            /* الصورة كخلفية مع طبقة داكنة لضمان وضوح النص */
            background-image: linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)), url('./images/skyyy.png');
            background-size: cover; /* لكي تغطي الصورة المساحة بالكامل */
            background-position: center; /* لتوسيط الصورة */
            background-attachment: fixed; /* (اختياري) لجعل الخلفية ثابتة أثناء التمرير */
            border-radius: 15px; /* (اختياري) لجعل الزوايا مستديرة */
        }

        #genshin-id-group label {
            display: none;
        }

        #genshin-id-group label {
            text-align: center !important; /* إضافة !important لضمان تطبيق التنسيق */
        }

        #genshinImpact {
            background-image: url('./images/genshinimpactbackground.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            padding: 50px 20px;
            color: #fff;
        }



        /* 1. سنجعل القاعدة القديمة مسؤولة عن المسافة فقط */
        #modalPrice {
            margin-bottom: 15px;
            /* (text-align: center; موجودة بالفعل في الحاوية الأب) */
        }



        /* 2. سننشئ قاعدة جديدة للكلاس الذي أضفناه للتو */
        .price-badge {
            display: inline-block; /* ضروري لتطبيق الحشو والإطار */
            color: #90ee90;
            font-weight: bold;
            border: 1px solid #4a2f6c; /* يمكنك وضع اللون البنفسجي الذي تفضله هنا */
            padding: 5px 15px;
            border-radius: 20px;
        }

        #modalPaymentMethod {
            text-align: center;
        }

        #payment-method-group label {
            width: 100%;
            text-align: center;
        }



        /* 1. تعريف حركة الصعود والظهور */ s
        @keyframes payment-details-slide-up {
            from  {
                opacity: 0;
                transform: translateY(15px); /* تبدأ من أسفل قليلاً */
            }

            to {
                opacity: 1;
                transform: translateY(0); /* تنتهي في مكانها الطبيعي */
            }
        }



        /* 2. تطبيق الحركة على قسم الدفع عند ظهوره */
        #vodafoneDetails.is-visible,
        #paypalDetails.is-visible {
            animation: payment-details-slide-up 0.4s ease-out;
        }



        /* === END: أنيميشن نافذة تفاصيل الدفع === */

        /* تنسيق المجموعة الجديدة لحقول الإدخال */
        .form-inputs-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }



        /* تنسيق الحاوية الجديدة التي تجمع حقول الإدخال والزر */
        .payment-details-grid {
            display: flex;
            flex-wrap: wrap; /* يسمح للعناصر بالنزول لسطر جديد عند الحاجة */
            flex-direction: row-reverse; /* هذا السطر هو الأهم: يضع حقول الإدخال على اليمين */
            justify-content: space-between;
            align-items: flex-start;
            gap: 15px; /* مسافة بين المجموعات */
            width: 100%;
        }



        /* تنسيق حقول الإدخال لتمتلئ في مكانها */
        .input-fields {
            display: flex;
            flex-direction: column;
            gap: 10px; /* مسافة بين حقول الإدخال */
            width: 100%;
            max-width: 350px;
            order: 1; /* يضمن بقاء الحقول على اليمين حتى على الشاشات الصغيرة */
        }



        /* تنسيق زر "تم الدفع!" ليكون في مكانه الصحيح */
        .button-container {
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center; /* <<< تم التعديل هنا لضمان التوسيط */
            gap: 10px;
            width: 100%;
            max-width: 350px;
            order: 2;
        }

        .confirm-payment-btn {
            width: 100%;
            margin-top: 10px;
        }

        .payment-layout {
            display: flex;
            flex-wrap: wrap;
            justify-content: center; /* يمكن حذف هذا السطر أو تركه */
            align-items: flex-start; /* هذا هو السطر الجديد لرفع المحتوى للأعلى */
            gap: 30px;
            margin-top: 20px;
            flex-direction: row-reverse; /* هذا السطر هو الإضافة الجديدة */
        }



        .qr-code-container {
            display: flex; /* <-- لجعل العناصر بجانب بعضها */
            justify-content: space-between; /* <-- لتوزيع المسافة بين العنصرين */
            align-items: center; /* <-- لمحاذاة العناصر رأسيًا في المنتصف */
            padding: 15px;
            background-color: rgba(93, 0, 18, 0.05);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* قاعدة جديدة لعمود النصوص */
        .qr-text-content {
            text-align: right; /* لضمان محاذاة النص لليمين */
        }

        /* تعديل بسيط على صورة الكود لتناسب التصميم الجديد */
        .qr-code-image {
            flex-shrink: 0; /* لمنع الصورة من الانكماش */
            margin-right: 15px; /* لإضافة مسافة بينها وبين النص */
        }

        .qr-code-container p {
            font-size: 14px;
            color: var(--light-text);
            margin-bottom: 5px; /* <-- قمنا بتقليل القيمة هنا لرفع النص */
        }



        /* تنسيق صورة الـ QR code */
        .qr-code-image {
            width: 180px; /* <-- قمنا بزيادة العرض هنا لتكبير الصورة */
            height: auto;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }



        /* تحسينات للشاشات الصغيرة */
        @media (min-width: 768px) {
            .payment-details-grid {
                flex-wrap: nowrap; /* يمنع نزول العناصر لسطر جديد */
                flex-direction: row; /* يعيد الترتيب إلى الطبيعي (يمين لليسار في RTL) */
            }
        }



        /* === START: Roblox Section Background === */
        #roblox {
            /* -->> غير هذا المسار إلى مسار صورة روبلوكس الصحيح <<-- */
            background-image: linear-gradient(rgba(0, 0, 0, 0.65), rgba(0, 0, 0, 0.65)), url('./images/robloxwallpaper.png');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            border-radius: 15px;
            padding: 20px;
        }



        /* === END: Roblox Section Background === */
        #valorantPoints {
            background-image: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/Ascent_Map.png');
            background-size: cover;
            background-position: center;
            border-radius: 15px;
            padding: 20px;
        }

        #steamPoints {
            background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/steampointswallpaper.png') no-repeat center center fixed;
            background-size: cover;
            border-radius: 15px;
            padding: 20px;
        }



        /* هذا الكود يعيد تطبيق الخلفية مع أولوية أعلى */
        #steamPoints {
            background-image: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/steampointswallpaper.png');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }



        /* === START: Store Reviews Carousel === */
        .reviews-carousel-container {
            max-width: 90%; /* تقدر تغير العرض حسب ما يناسبك */
            margin: 20px auto;
            overflow: hidden; /* أهم جزء: لإخفاء باقي التقييمات اللي بره الإطار */
            position: relative;
            -webkit-mask-image: linear-gradient(to right, transparent, black 20%, black 80%, transparent 100%);
            mask-image: linear-gradient(to right, transparent, black 20%, black 80%, transparent 100%);
        }

        .reviews-carousel-track {
            display: flex; /* عشان يخلي الكروت جنب بعض */
            gap: 20px; /* مسافة بين كل تقييم والتاني */
            /* العرض ده بيتحسب بناءً على عدد الكروت وعرض كل كارت (هنضاعفهم بالجافاسكريبت) */
            /* مثال: لو عندك 10 كروت وعرض الكارت 270px، العرض هيكون (270 * 20) = 5400px */
            width: calc(270px * 20);
            animation: scroll 40s linear infinite; /* اسم الأنيميشن ومدته ونوعه */
        }



        /* الأنيميشن اللي بيحرك الشريط من اليمين للشمال */
        @keyframes scroll {
            0% {
                transform: translateX(0);
            }

            100% {
                /* بنحركه بنسبة 50% عشان لما يخلص يرجع للبداية من غير ما يبان فرق */
                transform: translateX(calc(-270px * 10));
            }
        }



        /* عشان نوقف الحركة لما الماوس يجي فوق التقييمات */
        .reviews-carousel-container:hover .reviews-carousel-track {
            animation-play-state: paused;
        }



        #store-reviews-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
            max-width: 600px;
            /* ✅ التعديل هنا: تقليل الهامش السفلي من 40px إلى 20px */
            margin: 20px auto 20px auto;
        }



        /* === END: Store Reviews Carousel === */

        /* === START: Store Average Rating Styles === */
        #store-average-rating-display {
            text-align: center;
            margin: 20px 0;
            padding: 20px;
            background-color: rgba(44, 26, 64, 0.5);
            border-radius: 12px;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
        }

            #store-average-rating-display .stars {
                font-size: 2.5rem; /* حجم كبير للنجوم */
                color: var(--accent-yellow);
                margin-bottom: 10px;
            }

                #store-average-rating-display .stars .star.empty {
                    color: #555; /* لون النجمة الفارغة */
                }

            #store-average-rating-display .summary-text {
                font-size: 1rem;
                color: var(--light-text);
                font-weight: bold;
            }



        .payment-info-label {
            color: #34c759;
            font-weight: bold;
            margin: 0; /* ✅✅ أهم إضافة: إلغاء الهامش الافتراضي */
            font-size: 14px; /* ✅ توحيد حجم الخط ليتناسب */
        }

        .green-text {
            color: #28a745; /* هذا لون أخضر شائع وجذاب */
        }

        .modal .product-modal-image {
            max-width: 150px;
            height: auto;
        }



        /* تنسيق صورة المنتج داخل النافذة المنبثقة */
        .modal-content img.product-modal-image {
            max-width: 150px; /* أقصى عرض للصورة */
            height: auto; /* يحافظ على نسبة أبعاد الصورة */
            margin-bottom: 15px; /* مسافة أسفل الصورة */
            border-radius: 8px; /* حواف دائرية للصورة */
        }



        /* === START: كود تغيير لون الوصف في نافذة الشراء === */
        #modalProductInfo .description-display {
            color: var(--accent-yellow);
            font-weight: bold;
            max-width: 96%;
            font-size: 11px; /* تم تصغير حجم الخط هنا */
        }



        /* === END: كود تغيير لون الوصف في نافذة الشراء === */
        #fortnite {
            position: relative;
            z-index: 1;
            overflow: hidden; /* لإخفاء أي أجزاء زائدة من الخلفية عند الحواف الدائرية */
        }

            #fortnite::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
            }



        /* === START: Subscription Options Style === */

        /* === START: Subscription Options Style === */
        #subscriptions-section {
            background-image: linear-gradient(rgba(0, 0, 0, 0.65), rgba(0, 0, 0, 0.65)), url('./images/purplewallpaper.png');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            border-radius: 15px;
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
            border: 1px solid #8e6abf;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin: 20px;
            position: relative;
        }

        #subscription-options-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .subscription-option-label {
            position: relative;
            cursor: pointer;
        }

            .subscription-option-label input[type="radio"] {
                appearance: none;
                -webkit-appearance: none;
                position: absolute;
            }

        .subscription-option-card {
            background-image: linear-gradient(135deg, #2c1a40, #1a2a40);
            border: 2px solid #8e6abf; /* الإطار البنفسجي الأساسي */
            border-radius: 8px;
            padding: 12px;
            text-align: center;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: none; /* التأكد من عدم وجود أي توهج في الحالة الطبيعية */
            animation: none;
        }

            .subscription-option-card .period {
                display: block;
                font-size: 16px;
                color: var(--white-text);
                transition: color 0.3s ease;
            }

            .subscription-option-card .price {
                display: block;
                font-size: 14px;
                color: var(--accent-yellow);
                margin-top: 5px;
                transition: color 0.3s ease;
            }

        .subscription-option-label:hover .subscription-option-card {
            transform: translateY(-3px);
            /* ✅ هنا يتم تفعيل التوهج الملون عند مرور الماوس */
            animation: rgb-glow-pulse-intense 4s linear infinite;
        }

        .subscription-option-label input[type="radio"]:checked + .subscription-option-card {
            /* ✅ هنا فقط: يتم تغيير لون الإطار إلى الأصفر الثابت */
            border-color: var(--accent-yellow);
            /* نتأكد من إزالة أي توهج أو حركة لتثبيت الشكل */
            box-shadow: none;
            animation: none;
        }

        .subscription-option-label:hover input[type="radio"]:checked + .subscription-option-card {
            /* نعيد تفعيل حركة التوهج الملون فوق الإطار الأصفر */
            animation: rgb-glow-pulse-intense 4s linear infinite;
        }

        .subscription-option-label input[type="radio"]:checked + .subscription-option-card .price {
            color: #ffffff;
        }

        @keyframes gold-pulse {
            0% {
                box-shadow: 0 0 4px 1px rgba(255, 215, 0, 0.4); /* توهج أخف وأصغر في البداية */
            }

            100% {
                box-shadow: 0 0 12px 3px rgba(255, 215, 0, 0.7); /* توهج أقوى لكن ليس ساطعًا جدًا */
            }
        }

        /* === END: Subscription Options Style === */
        .cart-item-extra-info {
            font-size: 12px;
            color: #ccc;
            margin-top: 4px;
            direction: ltr;
            text-align: right;
        }

        :root {
            --dark-bg: #1e1132;
            --main-purple: #2c1a40;
            --accent-yellow: #ffcc00;
            --light-text: #e0e0e0;
            --card-bg: rgba(74, 47, 100, 0.5);
            --dark-card-bg: rgba(74, 47, 100, 0.7);
            --white-text: white;
            --black-text: #110e1a;
            --green-buy-btn: #28a745;
            --green-buy-btn-hover: #218838;
            --fixed-cart-bg: #28a745;
        }



        /* Base Body Styles */

        /* Base Body Styles */
        body {
            font-family: 'Tajawal', 'Cairo', sans-serif;
            margin: 0;
            background-image: linear-gradient(145deg, #0b0714, #1e1132, #0b0714);
            background-attachment: fixed;
            color: var(--light-text);
            direction: rtl;
            text-align: right;
            padding-top: 70px;
            padding-bottom: 0;
        }

        #home {
            background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('./images/wallpssapers.png');
            background-size: 100% auto;
            background-repeat: no-repeat;
            background-position: top center;
            position: relative;
            margin-top: 0; /* <-- ✅ أضف هذا السطر هنا */
        }


        .glass-card {
            background: linear-gradient(135deg, #a4c6ff, #1a0e2a);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            border: 1px solid #8e6abf;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin: 20px;
        }

            .glass-card.darker {
                background: var(--main-purple);
                border: 1px solid #8e6abf;
                backdrop-filter: none;
            }

        #steam-gift-cards-section {
            background-image: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('./images/steamwallpaper.png');
            background-size: cover;
            background-position: center;
            position: relative;
            z-index: 1;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(6px);
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
        }




        /* الكود ده خاص بصفحة "Steam Gift Cards" الكاملة */
        #steamGiftCards {
            background-image: url('./images/steamwallpaper.png');
            background-size: cover;
            background-position: center;
            position: relative;
            z-index: 1;
        }

        /* ======================================================= */
        /* ✅ START: كود الشريط العلوي باللون الأصلي المتدرج للغامق ✅ */
        /* ======================================================= */

        #navbar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 4px 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 2000;
            transition: background 0.3s ease, backdrop-filter 0.3s ease;
            background: linear-gradient(90deg, rgba(23, 10, 48, 0.92) 0%, /* أزرق-بنفسجي داكن جداً (بداية) */
            rgba(35, 20, 60, 0.92) 50%, /* ✅ نقطة وسط جديدة وأغمق */
            rgba(23, 10, 48, 0.92) 100% /* ✅ نهاية التدرج: نعود للون الداكن جداً لتجنب اللمعان الزائد */
            ) !important;
            /* ✅ زيادة تأثير البلور قليلاً لتعزيز إحساس الزجاج */
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            /* ✅ تم حذف الإطار السفلي من هنا */
            border-bottom: none;
        }

            /* 2. حالة الشريط العلوي بعد التمرير (scroll) */
            #navbar.navbar-scrolled {
                /* -->> نفس التدرج لكن مع شفافية للحفاظ على التأثير الزجاجي <<-- */
                background: linear-gradient(145deg, rgba(44, 26, 64, 0.7), rgba(30, 17, 50, 0.7));
                backdrop-filter: blur(15px);
                -webkit-backdrop-filter: blur(15px);
            }

            /* ======================================================= */
            /* ✅ END: كود الشريط العلوي باللون الأصلي المتدرج للغامق  ✅ */
            /* ======================================================= */

            #navbar .logo-area {
                display: flex;
                align-items: center;
            }

                #navbar .logo-area img {
                    width: 80px;
                    height: auto;
                    margin-left: 10px;
                }

            #navbar .logo-text-container {
                display: flex;
                flex-direction: column;
                align-items: flex-start;
                line-height: 1.1;
            }

        .logo-text-container {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            line-height: 1.1;
            gap: 2px; /* مسافة بسيطة بين By Sohayl والزر */
        }



        /* تنسيقات زرار تغيير العملة */
        #currency-selector {
            padding: 4px 0.2px;
            font-size: 10px;
            border-radius: 4px;
            border: 1px solid var(--accent-yellow);
            background-color: transparent;
            color: var(--light-text);
            cursor: pointer;
            width: auto;
            margin-top: 5px;
        }

            #currency-selector:hover {
                background-color: rgba(255, 204, 0, 0.2);
            }



        /* إلغاء تنسيقات Egypt و EG اللي لم تعد موجودة */
        .country-name {
            display: none !important;
        }



        /* عشان الزر ما يتأثرش بالتنسيقات القديمة */
        #navbar .nav-utility-section select {
            margin-top: 0 !important;
        }

        .by-sohayl {
            font-size: 18px;
            font-weight: bold;
            color: var(--accent-yellow);
            text-shadow: 0 0 8px rgba(255, 204, 0, 0.8);
            margin-bottom: 1px;
        }

            .by-sohayl a {
                color: var(--accent-yellow);
                text-decoration: none;
                transition: color 0.3s ease;
            }

                .by-sohayl a:hover {
                    color: #e6b800;
                }

        .country-name {
            font-size: 13px;
            font-weight: bold;
            color: var(--white-text);
            text-shadow: none;
            display: flex;
            align-items: center;
        }

            .country-name .flag-emoji {
                margin-left: 5px;
                font-size: 18px;
            }



        /* Middle Section Styles */
        .nav-middle-section {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-grow: 1; /* يجعله يأخذ المساحة المتاحة في المنتصف */
            gap: 20px;
        }



        /* Utility Section Styles */
        .nav-utility-section {
            display: flex;
            align-items: center;
            gap: 15px; /* المسافة بين العناصر الداخلية */
        }



        /* Navbar Links and Dropdowns */
        .nav-link {
            cursor: pointer;
            font-weight: bold;
            transition: color 0.3s ease;
            font-size: 14px;
            position: relative;
            padding-bottom: 5px;
            color: var(--light-text);
            text-decoration: none;
            display: block;
        }

            .nav-link:hover {
                color: var(--white-text); /* يصبح أبيض ناصع عند المرور */
                text-shadow: 0 0 5px rgba(255, 255, 255, 0.5), 0 0 10px rgba(255, 255, 255, 0.2);
            }

            .nav-link::after {
                content: '';
                position: absolute;
                width: 100%;
                height: 2px;
                bottom: 0;
                right: 0;
                background-color: var(--accent-yellow);
                transform: scaleX(0);
                transform-origin: left;
                transition: transform 0.3s ease-out;
            }

            .nav-link:hover::after {
                transform: scaleX(1);
                transform-origin: right;
            }

        .dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown-content {
            position: absolute;
            min-width: 160px;
            z-index: 1;
            right: 0;
            top: 100%;
            border-radius: 8px;
            text-align: right;
            /* --- الألوان والتأثير الزجاجي (مع الاحتفاظ بالتدرج الذي أعجبك) --- */
            background-color: rgba(200, 180, 255, 0.95);
            background: linear-gradient(145deg, #3C2A6B, #171030);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid #7289DA;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.6), 0 0 15px rgba(114, 137, 218, 0.5);
            /* 4. إعدادات انيميشن "Slide Up & Fade" السريع */
            opacity: 0;
            visibility: hidden;
            /* ✅ التعديل الأهم: يبدأ من أسفل قليلاً */
            transform: translateY(10px);
            transform-origin: top;
            /* ✅ زمن انتقال أسرع بكثير (0.2 ثانية) */
            transition: opacity 0.2s ease-out, transform 0.2s ease-out, visibility 0.2s;
        }

        /* حالة الفتح عند مرور الماوس */
        .dropdown:hover .dropdown-content {
            /* ✅ إظهار كامل (Opacity: 1) والتحرك إلى مكانه الأصلي (translateY: 0) */
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        /* تنسيق روابط القائمة */
        .dropdown-content a {
            color: #e0e0e0;
            text-align: right;
            justify-content: flex-start;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
            font-weight: bold;
            transition: background-color 0.2s ease, color 0.3s ease;
        }

            .dropdown-content a:hover {
                background-color: rgba(255, 255, 255, 0.15);
                color: var(--accent-yellow);
                text-shadow: 0 0 5px var(--accent-yellow);
            }

        .support-button {
            font-size: 14px;
            cursor: pointer;
            font-weight: bold;
            color: var(--white-text);
            transition: color 0.3s ease;
            display: flex;
            align-items: center;
            margin-left: 20px; /* المسافة عن زر البحث */
        }

            .support-button img {
                width: 20px;
                height: auto;
                margin-left: 5px;
            }

            .support-button:hover {
                color: var(--accent-yellow);
            }

        .support-icon {
            width: 20px;
            height: auto;
        }


        .fixed-cart-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            background-color: var(--fixed-cart-bg);
            color: var(--white-text);
            border: 1px solid white; /* ✅ تم تنحيف الإطار هنا */
            border-radius: 50px;
            padding: 10px 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.4); /* ✅ تم إضافة وهج أبيض خفيف */
            font-weight: bold;
        }

            .fixed-cart-button:hover {
                background-color: var(--green-buy-btn-hover);
                color: var(--white-text);
                transform: scale(1.05);
                box-shadow: 0 0 25px rgba(255, 255, 255, 0.7); /* ✅ وهج أقوى عند التمرير */
            }
        /* ✅✅ الكود الجديد بوهج أخضر فاتح ✅✅ */
        @keyframes strong-glow-pulse {
            0% {
                transform: scale(1);
                /* تم تغيير اللون إلى الأخضر الفاتح */
                box-shadow: 0 0 15px rgba(144, 238, 144, 0.5);
            }

            50% {
                transform: scale(1.1); /* تكبير بسيط مع الوهج */
                /* تم تغيير اللون إلى الأخضر الفاتح القوي */
                box-shadow: 0 0 35px 8px rgba(144, 238, 144, 0.9);
            }

            100% {
                transform: scale(1);
                /* تم تغيير اللون إلى الأخضر الفاتح */
                box-shadow: 0 0 15px rgba(144, 238, 144, 0.5);
            }
        }

        @keyframes pop {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.15);
            }

            100% {
                transform: scale(1);
            }
        }

        /* ✅ استبدال الأنيميشن القديم بالجديد */
        .fixed-cart-button.added {
            animation: strong-glow-pulse 0.4s ease-in-out;
        }

        .fixed-cart-button img {
            width: 24px;
            height: auto;
        }

        .fixed-cart-button .cart-count {
            background-color: red;
            color: white;
            border-radius: 50%;
            padding: 2px 6px;
            font-size: 12px;
            position: absolute;
            top: -5px;
            right: -5px;
        }

        h1, h2, h3 {
            margin-right: 20px;
            border-right: 4px solid var(--accent-yellow);
            padding-right: 10px;
            display: inline-block;
        }

        h3 {
            margin-right: 0;
            border-right: none;
            padding-right: 0;
            display: inline-block;
        }

        input, select, textarea {
            padding: 12px;
            font-size: 16px;
            border-radius: 8px;
            border: 1px solid #8e6abf;
            margin-top: 10px;
            width: 300px;
            font-family: 'Tajawal', sans-serif;
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--white-text);
            transition: border-color 0.3s ease;
        }

            input::placeholder,
            textarea::placeholder {
                color: var(--light-text);
                opacity: 0.8;
            }

            /* التعديل: تطبيق التوهج فقط على الحقول التي (ليست) داخل .input-wrapper
                       واستخدام :not() لإلغاء التوهج المزدوج.
                     */
            input:not(.input-wrapper input):focus,
            textarea:not(.input-wrapper textarea):focus,
            select:focus,
            select:hover {
                outline: none;
                border-color: #00c0ff;
                box-shadow: 0 0 10px rgba(0, 192, 255, 0.5);
            }


            select option {
                background: var(--dark-bg); /* <-- استخدام الخلفية الأغمق للخيارات */
                color: var(--white-text);
                font-weight: bold; /* جعل الخط واضحاً */
                padding: 10px; /* (قد لا تعمل في كل المتصفحات ولكنها تحسن الشكل) */
            }

        button {
            padding: 12px 20px;
            font-size: 16px;
            margin-top: 15px;
            cursor: pointer;
            border-radius: 8px;
            border: none;
            font-weight: bold;
            background-color: var(--accent-yellow);
            color: var(--black-text);
            transition: all 0.3s ease;
            font-family: 'Cairo', sans-serif;
        }

            button:hover {
                background-color: #e6b800;
                transform: translateY(-2px);
            }

        .payment-confirm-btn {
            background-color: var(--green-buy-btn);
            color: white;
            padding: 15px 30px;
            font-size: 18px;
            font-weight: bold;
            border: none;
            border-radius: 10px;
            transition: background-color 0.3s ease, transform 0.3s ease;
            font-family: 'Cairo', sans-serif;
        }

        .payment-details-form {
            flex: 1;
            min-width: 250px;
            display: flex;
            flex-direction: row; /* تم تغيير هذا السطر من column إلى row */
            flex-wrap: wrap-reverse; /* هذا السطر الجديد سيضع الزر على اليسار */
            align-items: flex-start;
            gap: 10px;
        }

            .payment-details-form input,
            .payment-details-form textarea {
                flex-grow: 1; /* لجعل حقول الإدخال تملأ المساحة المتاحة */
                width: auto; /* لضمان أن الحقول تأخذ عرضها الطبيعي */
            }

        .confirm-payment-btn {
            width: 200px; /* يمكنك تغيير هذه القيمة لتغيير عرض الزر */
            margin: 20px 0 0 0; /* هامش من الأعلى فقط */
            margin-left: 0; /* هذا السطر يدفعه إلى اليسار */
        }

        .confirm-payment-btn {
            /* الآن يمكننا التحكم في موقعه داخل النموذج */
            width: 100%; /* لجعل الزر يملأ عرض النموذج */
            margin: 0;
            margin-top: auto; /* هذا السطر يدفعه إلى الأسفل */
        }

        button:disabled {
            background-color: #555;
            cursor: not-allowed;
            transform: none;
        }

        .payment-confirm-btn:hover:not(:disabled) {
            background-color: var(--green-buy-btn-hover);
            transform: translateY(-3px);
        }

        #shipping {
            text-align: center;
            display: none;
            padding: 20px;
            animation: fadeIn 0.8s ease-in-out;
        }

        #orderInputContainer {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 20px;
        }

            #orderInputContainer label {
                font-size: 24px;
                font-weight: bold;
                color: var(--light-text);
                margin-bottom: 10px;
            }

        #shippingDescription {
            font-size: 14px;
            color: #ccc;
            margin-top: -15px;
            margin-bottom: 20px;
        }

        #statusContainer {
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: var(--main-purple);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            max-width: 600px;
            margin: 0 auto;
        }

        #statusImage {
            width: 400px;
            height: auto;
            margin-top: 15px;
            display: none;
            opacity: 0;
            transition: opacity 0.5s ease, transform 0.5s ease;
        }

        #resultText {
            font-size: 24px;
            font-weight: bold;
            margin-top: 10px;
            text-align: center;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        #products {
            padding-top: 5px;
        }

        .search-bar-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 10px;
            margin-bottom: 20px;
            margin-right: 0;
            margin-left: 0;
        }

        #productSearch {
            width: 250px;
            margin-left: 10px;
            padding: 10px;
        }

        .products-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px; /* مسافة بين البطاقات */
        }

        .product-item {
            background: linear-gradient(145deg, rgba(74, 47, 100, 0.6), rgba(31, 17, 51, 0.8));
            padding: 10px;
            border-radius: 12px;
            width: 180px;
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
            border: 1px solid #8e6abf;
        }

        .steam-gift-card-item {
            background: linear-gradient(145deg, rgba(0, 112, 186, 0.6), rgba(0, 50, 100, 0.8));
            border: 1px solid #00c0ff;
        }



        .product-item.valorant-item {
            width: 145px;
        }

        .product-image-wrapper {
            width: 100%;
            height: 160px;
            border-radius: 8px;
            background-color: rgba(0,0,0,0.2);
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        @keyframes placeholder-shine {
            0% {
                background-position: -100% 0;
            }

            100% {
                background-position: 100% 0;
            }
        }
        /* ✅ تطبيق تأثير اللمعان على كل أماكن الصور المؤقتة */
        .product-image-wrapper::before,
        .main-image-placeholder::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to right, transparent 0%, rgba(255,255,255,0.1) 50%, transparent 100%);
            animation: placeholder-shine 1.5s infinite linear;
        }

        .product-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 8px;
            background-color: transparent;
            position: relative;
            z-index: 2;
        }

        .product-item h3 {
            min-height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 0;
            border-right: none;
            padding-right: 0;
            margin-top: 10px;
            margin-bottom: 5px;
            cursor: pointer;
        }

        .platform-icon {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 24px;
            height: 24px;
            background-color: rgba(0, 0, 0, 0.6);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 3;
            padding: 4px;
        }

            .platform-icon img {
                width: 100%;
                height: 100%;
            }

        .platform-icon-description {
            height: 16px;
            vertical-align: middle;
            margin-right: 4px;
        }

        .product-description-text {
            font-size: 14px;
            color: var(--accent-yellow);
            margin-top: -5px;
            margin-bottom: 5px;
            padding: 0 5px;
        }




        /* New style for urgency message */
        .product-urgency {
            color: #ff4757;
            font-weight: bold;
            margin-top: 5px;
            margin-bottom: 5px;
            font-size: 14px;
        }

        .product-item p {
            min-height: 24px;
            margin-top: 2px;
            margin-bottom: 5px;
        }

        .subscription-item {
            /* الخلفية: تدرج لوني من بنفسجي غامق إلى أغمق */
            background: linear-gradient(145deg, rgba(74, 47, 100, 0.6), rgba(31, 17, 51, 0.8));
            /* حواف دائرية للبطاقة */
            border-radius: 12px;
            /* عرض ثابت للبطاقة */
            width: 320px;
            /* تنسيق المحتوى ليكون عمودياً */
            display: flex;
            flex-direction: column;
            padding: 0;
            overflow: hidden;
            /* إطار خارجي بلون بنفسجي */
            border: 1px solid var(--main-purple);
            /* ظل خفيف للبطاقة */
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            /* حركة انتقالية سلسة عند التفاعل */
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
        }


            /* تنسيق البطاقة عند تمرير الماوس عليها */
            .subscription-item:hover {
                /* رفع البطاقة قليلاً لأعلى */
                transform: translateY(-8px);
                /* زيادة حدة الظل */
                box-shadow: 0 10px 25px rgba(74, 47, 100, 0.5);
            }



            .subscription-item .product-image-wrapper {
                width: 100%;
                height: 160px;
                border-radius: 8px;
                background-color: rgba(0,0,0,0.2);
                position: relative;
                overflow: hidden;
                cursor: pointer;
            }

        .sub-description-overlay {
            /* تنسيق الوصف الذي يظهر فوق الصورة */
            position: absolute;
            top: 8px;
            left: 8px;
            z-index: 3;
            background: rgba(0,0,0,0.6);
            color: white;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 12px;
            max-width: 80%;
            text-align: left;
            direction: ltr;
        }

        .subscription-item .sub-image-wrapper img {
            /* تجعل الصورة تغطي الحاوية بالكامل */
            width: 100%;
            height: 150px;
            object-fit: cover;
            transition: transform 0.4s ease;
        }

        .subscription-item:hover .sub-image-wrapper img {
            transform: scale(1.1);
        }

        .subscription-item .sub-content {
            padding: 20px;
            text-align: center;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

            .subscription-item .sub-content h3 {
                font-size: 1.25rem;
                margin: 0 0 10px 0;
                padding: 0;
                border: none;
                color: var(--white-text);
                text-align: center;
                display: block;
                cursor: pointer;
            }

            .subscription-item .sub-content p.sub-description {
                font-size: 0.9rem;
                color: var(--light-text);
                margin: 0 0 15px 0;
                flex-grow: 1;
                min-height: 50px;
                text-align: center;
            }

        .sub-footer .buy-btn {
            width: 100%;
            padding: 10px 20px;
            font-size: 16px;
            font-weight: bold;
            color: var(--black-text); /* تم التعديل إلى اللون الأسود */
            background-color: white; /* تم التعديل إلى اللون الأبيض */
            border: 1px solid var(--black-text); /* إضافة إطار أسود */
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.3s ease;
        }


        .sub-footer .product-buttons-container {
            display: flex;
            gap: 10px;
            align-items: center;
            width: 100%; /* تأكد إنها بتاخد عرض الحاوية الأب */
            justify-content: space-between; /* ده بيخلي العناصر على الأطراف */
        }

        .subscription-item .sub-price {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--accent-yellow);
        }

        .subscription-item .subscribe-btn {
            padding: 10px 20px;
            font-size: 16px;
            margin-top: 0;
            font-weight: bold;
            background-color: var(--green-buy-btn);
            color: white;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            white-space: nowrap;
        }

            .subscription-item .subscribe-btn img {
                width: 20px;
                height: 20px;
            }

            .subscription-item .subscribe-btn:hover {
                background-color: var(--green-buy-btn-hover);
            }

        /* ✅ Fix: Hide all sections by default to prevent flashing on load */
        .section {
            display: none; /* This is the key change */
            padding: 20px;
            animation: fadeIn 0.8s ease-in-out;
        }

        .content-page {
            max-width: 800px;
            margin: 20px auto;
            padding: 30px;
            line-height: 1.8;
        }

            .content-page h2 {
                text-align: center;
                border: none;
            }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes shake {
            0% {
                transform: rotate(0deg) translateY(-8px);
            }

            25% {
                transform: rotate(2deg) translateY(-8px);
            }

            50% {
                transform: rotate(0deg) translateY(-8px);
            }

            75% {
                transform: rotate(-2deg) translateY(-8px);
            }

            100% {
                transform: rotate(0deg) translateY(-8px);
            }
        }

        .product-image {
            display: block;
            width: 80%;
            max-width: 400px;
            height: auto;
            border-radius: 12px;
            margin: 0 auto 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .modal .product-image {
            max-width: 250px;
            margin: 0 auto 10px;
        }

        .modal.valorant-modal .product-image {
            max-width: 180px;
        }

        .modal.fortnite-modal .product-image {
            max-width: 180px;
        }

        .product-description-box {
            border: 1px solid #8e6abf;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            background-color: rgba(255, 255, 255, 0.05);
        }

        #productPageDescription {
            font-size: 16px;
            text-align: right;
            margin-top: 10px;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        #productDescription strong {
            color: var(--accent-yellow);
        }

        .product-description .steam-logo,
        .product-description .microsoft-logo,
        .product-description .netflix-logo,
        .product-description .disney-logo,
        .payment-logo {
            vertical-align: middle;
            height: 20px;
            margin-right: 5px;
        }

        .payment-option-logo {
            height: 18px;
            width: auto;
            vertical-align: middle;
            margin-left: 8px;
        }

        .payment-logo {
            vertical-align: middle;
            height: 25px;
        }

        #loading {
            display: none;
            margin-top: 15px;
            font-size: 18px;
            font-weight: bold;
            color: var(--accent-yellow);
        }

        #confirmationMessage {
            margin-top: 15px;
            font-size: 18px;
            font-weight: bold;
            color: #00ff00;
            text-align: center;
        }

        .loading-spinner {
            display: inline-block;
            width: 50px;
            height: 50px;
            border: 5px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--accent-yellow);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }



        /* تنسيقات عامة للنافذة المنبثقة */
        .modal {
            position: fixed;
            z-index: 2000;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            width: 90%;
            max-width: 650px;
            padding: 25px;
            max-height: 90vh;
            display: none;
            flex-direction: column;
            background: rgba(30, 17, 50, 0.8);
            border-radius: 15px;
            border: 1px solid #4a2f6c;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease, transform 0.3s ease;
        }

            .modal.is-visible {
                display: flex; /* لجعله يظهر عند الاستدعاء */
                opacity: 1;
                pointer-events: auto;
                transform: translate(-50%, -50%) scale(1);
            }

        /*
                                     /*
                                     /*
                                     /*
                                       ======================================================
                                       START: MARVEL RIVALS CATEGORY STYLES
                                       ======================================================
                                     */

        /* 1. تنسيقات القسم الرئيسي: يتم وضع لون شفاف فوق الصورة هنا */
        #marvelRivals {
            position: relative; /* مهم عشان العنصر الزائف يكون داخل حدوده */
            overflow: hidden; /* لإخفاء أي جزء من الضبابية خارج الحواف */
            border-radius: 15px;
            padding: 20px;
            /* ده لون شفاف بيعمل تأثير التعتيم الأسود */
            background-color: rgba(0, 0, 0, 0.6);
        }

            /* 2. العنصر الزائف (::before): ده اللي هيشيل صورة الخلفية والـ blur */
            #marvelRivals::before {
                content: '';
                position: absolute;
                top: -10px; /* زيادة بسيطة للحواف عشان البلور الزيادة ما يبانش */
                left: -10px;
                right: -10px;
                bottom: -10px;
                /* تحديد الصورة وتأثير الضبابية عليها مباشرة */
                background-image: url('./images/mvwallpaper.png');
                background-size: cover;
                background-position: center;
                z-index: -1; /* لوضع العنصر ده خلف كل محتوى القسم */
                filter: blur(5px);
                -webkit-filter: blur(5px); /* لدعم متصفحات Safari */
            }

        /* 3. تصغير حجم كروت المنتجات داخل قسم مارفل فقط */
        #marvelRivalsContainer .product-item {
            width: 145px;
            min-height: 250px;
            padding: 10px;
        }

        /*
                                       ======================================================
                                       END: MARVEL RIVALS CATEGORY STYLES
                                       ======================================================
                                     */

        /* === START: أنيميشن فتح النافذة المنبثقة === */

        /* 1. تعريف الحركة نفسها */
        @keyframes modal-fade-in {
            from {
                opacity: 0;
                transform: translate(-50%, -45%) scale(0.98); /* تبدأ من أعلى قليلاً وبحجم أصغر */
            }

            to {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1); /* تنتهي في مكانها الطبيعي */
            }
        }



        /* 2. تطبيق الحركة على النافذة عند ظهورها */
        .modal.is-visible {
            animation: modal-fade-in 0.1s ease-out;
        }



        /* === END: أنيميشن فتح النافذة المنبثقة === */

        /* تنسيق الحاوية الرئيسية لنافذة الدفع */
        #vodafoneDetails .payment-layout {
            display: flex;
            flex-wrap: wrap;
            align-items: flex-start;
            justify-content: flex-end; /* ليدفع المحتوى إلى اليمين */
            gap: 30px;
            margin-top: 20px;
        }



        /* تنسيق حاوية الـ QR code (لتكون على اليسار) */
        #vodafoneDetails .payment-info-container {
            text-align: right;
            flex: 1;
            min-width: 250px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            /* هذا هو التعديل الأهم: لدفعه إلى اليسار في حالة وجود مساحة */
            order: 1;
        }



        /* تنسيق نموذج الإدخال (ليكون على اليمين) */
        #vodafoneDetails .payment-details-form {
            flex: 1;
            min-width: 250px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            /* هذا هو التعديل الأهم: لدفعه إلى اليمين في حالة وجود مساحة */
            order: 2;
        }



        /* تنسيق زر "تم الدفع!" ليكون في أعلى اليسار */

        /* تنسيق زر "تم الدفع!" ليكون في أعلى اليسار */

        /* تنسيق زر "تم الدفع!" ليكون في أعلى اليمين */
        #vodafoneForm .confirm-payment-btn {
            width: 100%;
            margin-top: -5px; /* <<< تم التعديل هنا لرفعه لأعلى */
            margin-left: 0;
            margin-right: 0;
            padding: 15px 53px;
            font-size: 18px;
            transition: all 0.3s ease-in-out;
            border: 2px solid #28a745;
        }

            #vodafoneForm .confirm-payment-btn:hover {
                background-color: #34c759; /* <-- هذا هو اللون الأخضر الأفتح الجديد */
                border-color: #34c759; /* <-- لنجعل لون الإطار متناسقًا */
                box-shadow: 0 0 15px #34c759; /* <-- تحديث لون الوهج ليتطابق */
                transform: translateY(-2px);
            }




        /* التحكم في حجم صورة المنتج داخل النافذة المنبثقة */
        .modal .product-image {
            max-width: 160px; /* يمكنك تعديل هذا الرقم لتصغير أو تكبير الصورة كما تريد */
            height: auto; /* للحفاظ على أبعاد الصورة الصحيحة */
            margin: 0 auto 15px; /* لتوسيط الصورة وإضافة مسافة أسفلها */
        }

        .modal.is-visible {
            opacity: 1;
            pointer-events: auto;
            transform: translate(-50%, -50%) scale(1);
        }



        /* === END: Final Modal Styles === */
        .modal.is-visible {
            opacity: 1;
            pointer-events: auto;
            transform: translate(-50%, -50%) scale(1);
        }

            .modal.is-visible.payment-modal .modal-body > div {
                display: none;
            }

            .modal.is-visible.payment-modal .modal-body .payment-options-container.is-visible {
                display: block;
            }

            .modal.is-visible.payment-modal .modal-body .payment-details.is-visible {
                display: block;
            }

        .overlay {
            /* يتم التحكم في إظهاره وإخفائه بالـ JavaScript */
            display: none;
            /* يغطي الشاشة بالكامل ويظهر فوق كل المحتوى */
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1999;
            /* لون التعتيم (أسود شفاف) مع تأثير الضبابية */
            background-color: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            /* لضمان سلاسة الظهور */
            animation: fadeInOverlay 0.3s ease-in-out;
        }



        /* هذا الكود يضمن أن النافذة المنبثقة ستظهر فوق الـ overlay */
        .modal {
            position: fixed;
            z-index: 2000;
            -webkit-font-smoothing: antialiased;
            /* ... باقي التنسيقات ... */
        }

        @keyframes fadeInOverlay {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        .modal .payment-details {
            margin-top: 20px;
            text-align: center;
        }

            .modal .payment-details p {
                margin-bottom: 10px;
                text-align: center;
            }

        .modal input, .modal textarea {
            width: 80%;
            max-width: 250px;
            display: block;
            margin-right: auto;
            margin-left: auto;
            text-align: right;
        }




        /* === START: Valorant Purchase Fix === */
        .form-parallel-group {
            display: flex;
            flex-wrap: wrap; /* Allows items to wrap on smaller screens */
            gap: 15px;
            margin: 20px auto;
            width: 95%;
            max-width: 400px;
        }

            .form-parallel-group > div {
                flex: 1; /* This makes the containers grow equally */
                min-width: 150px; /* A minimum width before wrapping */
            }

            .form-parallel-group label {
                display: block;
                margin-bottom: 8px;
                font-size: 14px;
                font-weight: bold;
                text-align: right;
                padding-right: 5px;
            }

            .form-parallel-group input,
            .form-parallel-group select {
                width: 100%; /* Makes the input/select fill its container */
                margin-top: 0;
                box-sizing: border-box;
            }




        /* === END: Valorant Purchase Fix === */
        .account-details-container {
            display: none;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 15px;
        }

            .account-details-container input {
                width: 90%;
                max-width: 280px;
            }

        .modal button {
            margin-top: 20px;
        }

        .button-container {
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            gap: 4px; /* تم تقليل المسافة بين العناصر بشكل كبير جدًا */
            width: 100%;
            max-width: 350px;
            order: 2;
        }

        .modal .confirm-payment-btn, .buy-btn-product-page, .add-to-cart-text-btn, .checkout-btn-centered {
            padding: 12px 20px;
            font-size: 16px;
            border-radius: 8px;
            font-weight: bold;
            transition: transform 0.3s ease, background-color 0.3s ease;
            font-family: 'Cairo', sans-serif;
            background-color: var(--green-buy-btn);
            color: white;
            border: 1px solid #8e6abf;
        }

            .modal .confirm-payment-btn:hover, .buy-btn-product-page:hover, .add-to-cart-text-btn:hover, .checkout-btn-centered:hover {
                background-color: var(--green-buy-btn-hover);
                transform: translateY(-2px);
            }

        .modal .close-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 28px;
            font-weight: bold;
            color: var(--white-text);
            cursor: pointer;
            transition: color 0.3s;
        }

            .modal .close-btn:hover {
                color: var(--accent-yellow);
            }

        .modal-body h2 {
            text-align: center;
            border-right: 0;
            margin-right: 0;
            display: block;
            width: 100%;
        }

        .modal-body h2, .modal-body p, .modal-body img, #modalProductInfo {
            text-align: center;
            margin-right: auto;
            margin-left: auto;
        }




            /* === START: كود توسيط معلومات المنصة في النافذة المنبثقة === */
            #modalProductInfo .platform-display {
                display: flex;
                align-items: center;
                justify-content: flex-start; /* محاذاة لليمين */
                width: 100%;
                gap: 5px;
                margin-bottom: 10px;
            }



            /* === END: كود توسيط معلومات المنصة في النافذة المنبثقة === */

            /* === START: كود توسيط معلومات المنصة في النافذة المنبثقة === */
            #modalProductInfo .platform-display {
                display: flex;
                align-items: center;
                justify-content: center; /* لتوسيط كل شيء في النص */
                width: 100%;
                gap: 8px;
                margin-bottom: 10px; /* مسافة بسيطة للأسفل */
            }



        /* === END: كود توسيط معلومات المنصة في النافذة المنبثقة === */
        .modal-product-info .platform-display img {
            height: 18px;
            width: auto;
        }

        .modal-product-info .description-display {
            text-align: right; /* المحاذاة لليمين */
            /* الخصائص التالية للتحكم في عدد الأسطر */
            -webkit-box-orient: vertical;
            display: -webkit-box;
            -webkit-line-clamp: 3; /* يمكنك تغيير القيمة لعدد الأسطر الذي تريده */
            overflow: hidden;
            /* خصائص للتنسيق الإضافي */
            line-height: 1.4;
            word-break: break-word; /* لمنع الكلمات الطويلة من التسبب في مشاكل التنسيق */
        }

        #productPageContent {
            display: flex;
            flex-direction: column;
        }

        .product-main-view {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            margin-bottom: 40px;
        }

        .product-image-section {
            flex: 1.2;
            min-width: 300px;
        }

            .product-image-section .main-image {
                width: 100%;
                height: auto;
                border-radius: 12px;
                box-shadow: 0 6px 20px rgba(0,0,0,0.25);
                margin-bottom: 15px;
                transition: opacity 0.6s ease-in-out;
            }

        .main-image-placeholder {
            width: 100%;
            min-height: 350px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .product-image-gallery {
            display: flex;
            gap: 10px;
        }

            .product-image-gallery .thumbnail {
                width: 70px;
                height: 70px;
                object-fit: cover;
                border-radius: 8px;
                cursor: pointer;
                border: 2px solid transparent;
                transition: border-color 0.3s;
            }

                .product-image-gallery .thumbnail:hover,
                .product-image-gallery .thumbnail.active {
                    border-color: var(--accent-yellow);
                }

        .product-details-section {
            flex: 1.3;
            min-width: 300px;
        }

            .product-details-section h1 {
                border: none;
                padding: 0;
                margin: 0 0 10px 0;
                font-size: 2.2rem;
                text-align: right;
            }

        .price-badge-container {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        #productPagePrice {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--accent-yellow);
        }

        /* تعديل حاوية السعر لتدعم عرض العناصر بجانب بعضها البعض */
        .price-badge-container {
            display: flex;
            flex-wrap: wrap; /* للسماح للعناصر بالنزول لسطر جديد عند الحاجة */
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        /* تعديل تنسيق المنصة داخل الحاوية الجديدة */
        .product-platform-info {
            display: flex;
            align-items: center;
            gap: 8px;
            /* إزالة الهوامش الزائدة لتجنب تكرارها */
            margin: 0;
            font-size: 1rem; /* تعديل حجم الخط ليكون أصغر قليلاً */
            color: var(--light-text);
        }



        /* هذا الكود يستهدف المنصة داخل الـ div الذي يحمل كلاس modal-product-header */
        .modal-product-header .product-platform-info {
            font-size: 0.85rem; /* حجم الخط الذي تريده */
            display: flex;
            align-items: center;
            gap: 8px; /* مسافة بين النص والأيقونة */
        }

        .product-platform-info img {
            height: 24px;
            width: 24px;
        }

        .product-platform-info span, .product-platform-info strong {
            line-height: 1;
        }

        .product-detail-badge {
            font-size: 14px;
            font-weight: bold;
            padding: 5px 12px;
            border-radius: 20px;
            color: white;
        }

            .product-detail-badge.bestseller {
                background-color: #ff4757;
            }

            .product-detail-badge.special {
                background-color: #3742fa;
            }

        /* 1. رفع مستطيل الوصف لأعلى أكثر */
        #productPageShortDescription {
            margin-top: -150px !important;
            display: none;
            font-size: 1rem;
            line-height: 1.6;
            flex-grow: 1;
            margin-bottom: 20px;
        }


        .quantity-selector {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 25px;
        }

            .quantity-selector label {
                font-weight: bold;
            }

            .quantity-selector button {
                width: 40px;
                height: 40px;
                padding: 0;
                margin: 0;
                font-size: 1.5rem;
                line-height: 40px;
                text-align: center;
                /* === السطرين الجداد اللي هنضيفهم === */
                position: relative; /* للسماح بتحريك العنصر */
                top: -15px; /* القيمة بالسالب لرفعه للأعلى */
            }

            .quantity-selector input::-webkit-outer-spin-button,
            .quantity-selector input::-webkit-inner-spin-button {
                -webkit-appearance: none;
                margin: 0;
            }

        .add-to-cart-product-page {
            padding: 15px 30px;
            font-size: 18px;
            font-weight: bold;
            background-color: var(--green-buy-btn);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease;
        }

            .add-to-cart-product-page:hover {
                background-color: var(--green-buy-btn-hover);
                transform: translateY(-3px) scale(1.02);
                box-shadow: 0 4px 15px rgba(40, 167, 69, 0.4);
            }

        .tabs-container {
            width: 100%;
            margin-bottom: 40px;
        }

        .tab-buttons {
            border-bottom: 2px solid var(--main-purple);
        }

        .tab-button {
            padding: 15px 25px;
            cursor: pointer;
            background: none;
            border: none;
            color: var(--light-text);
            font-size: 16px;
            font-weight: bold;
            position: relative;
            opacity: 0.7;
            transition: opacity 0.3s ease;
        }

            .tab-button::after {
                content: '';
                position: absolute;
                bottom: -2px;
                left: 0;
                width: 100%;
                height: 2px;
                background-color: var(--accent-yellow);
                transform: scaleX(0);
                transition: transform 0.3s ease;
            }

            .tab-button.active {
                opacity: 1;
            }

                .tab-button.active::after {
                    transform: scaleX(1);
                }

        .tab-content {
            display: none;
            padding: 25px 10px;
            animation: fadeIn 0.5s;
            background-color: rgba(0,0,0,0.2);
            border-radius: 0 0 8px 8px;
        }

            .tab-content.active {
                display: block;
            }

        #reviews-section {
            width: 100%;
        }

        .comment-rating .star {
            font-size: 16px;
            color: #ccc;
        }

            .comment-rating .star.filled {
                color: var(--accent-yellow);
            }

        .comment-card {
            background-color: var(--main-purple);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-right: 3px solid var(--accent-yellow);
        }

        .comment-card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .comment-author {
            font-weight: bold;
            color: var(--accent-yellow);
        }

        .comment-text {
            margin: 0;
            line-height: 1.7;
        }

        .comment-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
            max-width: 600px;
            margin: 20px auto;
        }

            .comment-form input, .comment-form textarea {
                width: 100%;
                box-sizing: border-box;
                margin-top: 0;
            }

        .rating-input {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 10px;
        }

            .rating-input .stars {
                direction: ltr;
            }

            .rating-input .star {
                font-size: 2rem;
                color: #ccc;
                cursor: pointer;
                transition: color 0.2s;
            }

            .rating-input .stars:hover .star {
                color: var(--accent-yellow);
            }

            .rating-input .star:hover ~ .star {
                color: #ccc;
            }

            .rating-input .stars[data-rating="1"] .star:nth-child(n+5),
            .rating-input .stars[data-rating="2"] .star:nth-child(n+4),
            .rating-input .stars[data-rating="3"] .star:nth-child(n+3),
            .rating-input .stars[data-rating="4"] .star:nth-child(n+2),
            .rating-input .stars[data-rating="5"] .star:nth-child(n+1) {
                color: var(--accent-yellow);
            }

        #loadMoreComments {
            display: block;
            margin: 20px auto;
        }

        .comment-footer {
            margin-top: 15px;
            font-size: 12px;
            color: #aaa;
            display: flex;
            align-items: center;
            gap: 10px;
        }

            .comment-footer .helpful-btn {
                background: none;
                border: 1px solid var(--accent-yellow);
                color: var(--accent-yellow);
                padding: 2px 8px;
                font-size: 12px;
                border-radius: 5px;
                margin: 0;
            }

                .comment-footer .helpful-btn:disabled {
                    background-color: #333;
                    color: #888;
                    border-color: #555;
                    cursor: not-allowed;
                }

        .product-page-rating {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

            .product-page-rating .stars {
                font-size: 1.5rem;
            }

                .product-page-rating .stars .star {
                    color: var(--accent-yellow);
                }

                    .product-page-rating .stars .star.empty {
                        color: #555;
                    }

            .product-page-rating .rating-summary {
                font-size: 1rem;
                color: var(--light-text);
            }


        .product-page-buttons {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }


        /* تنسيقات زر "أضف إلى السلة" في بطاقات منتجات الهدايا فقط */
        .add-to-cart-text-btn {
            width: 100%;
            padding: 12px 20px;
            font-size: 16px;
            margin-top: 15px;
            cursor: pointer;
            border-radius: 8px;
            border: 2px solid var(--green-buy-btn); /* إضافة إطار بنفس اللون */
            font-weight: bold;
            background-color: var(--green-buy-btn);
            color: white;
            transition: all 0.3s ease; /* حركة سلسة على كل الخصائص */
            font-family: 'Cairo', sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

            .add-to-cart-text-btn:hover {
                background-color: #34c759; /* لون أخضر أفتح عند التمرير */
                border-color: #34c759; /* تغيير لون الإطار ليتناسق */
                box-shadow: 0 0 15px #34c759; /* إضافة وهج بنفس اللون */
                transform: translateY(-2px); /* رفع الزر قليلاً */
            }

            .add-to-cart-text-btn img {
                width: 20px;
                height: 20px;
                margin: 0;
                padding: 0;
            }

            .add-to-cart-text-btn:hover {
                background-color: var(--green-buy-btn-hover);
            }

        .buy-btn-product-page {
            background-color: var(--green-buy-btn);
            color: white;
        }

            .buy-btn-product-page:hover {
                background-color: var(--green-buy-btn-hover);
            }

        .discord-button {
            display: inline-flex;
            align-items: center;
            background-color: #5865f2;
            color: var(--white-text);
            font-weight: bold;
            text-decoration: none;
            padding: 15px 25px;
            border-radius: 50px;
            font-size: 18px;
            margin-top: 20px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease, background-color 0.3s ease, box-shadow 0.3s ease;
        }

            .discord-button:hover {
                background-color: #4b58b4;
                transform: translateY(-5px);
                box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            }

            .discord-button img {
                height: 24px;
                width: 24px;
                margin-left: 10px;
                vertical-align: middle;
            }

        #home .home-section-buttons {
            justify-content: center;
        }

        .home-section-buttons {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .vodafone-number-highlight {
            color: var(--accent-yellow);
            font-weight: bold;
        }

        #footer {
            background: linear-gradient(145deg, #0b0714, #1d1033, #0b0714);
            color: var(--light-text);
            text-align: center;
            position: relative;
            /* ✅ التعديل الأول: تقليل البادينج (كان 30px 20px) */
            padding: 10px 10px;
            /* ✅ التعديل الثاني: تقليل المسافة فوق الفوتر (كانت 40px) */
            margin-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

            #footer h3 {
                margin-right: 0;
                border-right: none;
                padding-right: 0;
                font-size: 20px;
                margin-bottom: 20px;
            }

        .footer-links {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
        }

        .footer-link {
            color: var(--light-text);
            text-decoration: none;
            font-size: 14px;
            transition: color 0.3s ease;
        }

            .footer-link:hover {
                color: var(--accent-yellow);
            }

            .footer-link img {
                height: 18px;
                width: 18px;
                vertical-align: middle;
                margin-left: 8px;
            }

        #copyright {
            font-size: 14px;
            color: rgba(224, 224, 224, 0.7);
        }

        .store-logo-on-homepage {
            display: block;
            width: 150px;
            margin: 20px auto;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .auth-container {
            display: flex;
            justify-content: center;
            gap: 40px;
            flex-wrap: wrap;
        }

        .login-container, .signup-container {
            background-color: var(--main-purple);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            text-align: center;
            width: 350px;
            border: 1px solid #8e6abf;
        }

            .login-container h2, .signup-container h2 {
                border: none;
                margin-right: 0;
            }

            .login-container input, .signup-container input {
                display: block;
                width: 100%;
                box-sizing: border-box;
                margin-bottom: 15px;
            }

        .support-form-container {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        #supportFormStatus {
            margin-top: 15px;
            font-weight: bold;
        }

        .product-buttons-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }

        .product-item .buy-btn {
            background-color: var(--green-buy-btn);
            color: white;
            font-size: 14px;
            padding: 8px 15px;
            margin-top: 0;
            border: 2px solid var(--green-buy-btn); /* <-- إضافة إطار بنفس لون الخلفية */
            transition: all 0.3s ease; /* <-- إضافة حركة انتقالية ناعمة */
        }

        .buy-btn:hover {
            box-shadow: 0 0 9px var(--green-buy-btn); /* الوهج الأخضر */
        }

        .product-item .add-to-cart-btn {
            padding: 0;
            border: none;
            background-color: transparent;
            cursor: pointer;
            width: auto;
            margin-top: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

            .product-item .add-to-cart-btn img {
                width: 31px;
                height: 31px;
                transition: transform 0.3s ease, filter 0.3s ease;
            }

            .product-item .add-to-cart-btn:hover img {
                transform: scale(1.15);
                filter: brightness(1.2);
            }

        .product-item .buy-btn:hover {
            background-color: #34c759; /* <-- اللون الأخضر الأفتح الجديد */
            border-color: #34c759; /* <-- تغيير لون الإطار ليتطابق */
            box-shadow: 0 0 15px #34c759; /* <-- إضافة وهج بنفس اللون الفاتح */
        }

        .add-to-cart-btn:hover {
            background-color: transparent;
            transform: translateY(-2px);
        }

        #comments-section {
            width: 100%;
            text-align: center;
        }

            #comments-section h3 {
                margin-right: 0;
                padding-right: 0;
            }

        #comments-modal .comment-form {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .comment-form input, .comment-form textarea {
            width: 80%;
            max-width: 350px;
            display: block;
            margin-right: auto;
            margin-left: auto;
            text-align: right;
        }

        .comment-form button {
            margin-right: auto;
            margin-left: auto;
        }

        #commentList {
            margin-top: 20px;
            text-align: right;
        }

        .comment-item {
            background-color: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            text-align: right;
        }

            .comment-item strong {
                color: var(--accent-yellow);
            }

            .comment-item p {
                margin: 5px 0 0 0;
                font-size: 14px;
            }



        /* === START: New Cart Organization CSS === */
        .cart-modal-item {
            display: flex;
            align-items: center;
            gap: 15px; /* مسافة ثابتة بين العناصر */
            background: rgba(255, 255, 255, 0.05);
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

            .cart-modal-item img {
                width: 50px;
                height: 50px; /* حجم موحد */
                object-fit: cover;
                border-radius: 6px;
                flex-shrink: 0; /* لمنع الصورة من الانكماش */
            }

            .cart-modal-item .item-details {
                flex-grow: 1; /* لجعل هذا الجزء يأخذ المساحة المتاحة */
                text-align: right;
                margin: 0;
                padding: 0;
            }

                .cart-modal-item .item-details h4 {
                    margin: 0 0 4px 0;
                    font-size: 15px;
                    line-height: 1.3;
                }

                .cart-modal-item .item-details p {
                    margin: 0;
                    font-size: 14px;
                    color: var(--accent-yellow);
                    font-weight: bold;
                }

            .cart-modal-item .quantity-controls {
                display: flex;
                align-items: center;
                gap: 8px;
                flex-shrink: 0; /* لمنع أزرار الكمية من الانكماش */
            }



            /* === END: New Cart Organization CSS === */
            .cart-modal-item img {
                width: 50px;
                height: auto;
                border-radius: 5px;
                margin-left: 10px;
            }

            .cart-modal-item .item-details {
                flex-grow: 1;
            }

                .cart-modal-item .item-details h4 {
                    margin: 0;
                    font-size: 16px;
                }

                .cart-modal-item .item-details p {
                    margin: 5px 0 0;
                    font-size: 14px;
                }

            .cart-modal-item .quantity-controls {
                display: flex;
                align-items: center;
                gap: 5px;
            }

                .cart-modal-item .quantity-controls button {
                    padding: 5px 10px;
                    min-width: 30px;
                    margin: 0;
                    font-size: 16px;
                    background-color: var(--accent-yellow);
                    color: var(--black-text);
                }

                .cart-modal-item .quantity-controls span {
                    font-size: 16px;
                    min-width: 20px;
                    text-align: center;
                }


        .cart-modal-total {
            margin-top: 20px;
            font-size: 20px;
            font-weight: bold;
            text-align: center;
            color: white;
        }


        #cartTotalPrice {
            color: lightgreen !important; /* هذا السطر يحافظ على لون الأرقام أخضر فاتح */
        }

        .modal .modal-content-section {
            display: none;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

            .modal .modal-content-section.is-visible {
                display: block;
                opacity: 1;
            }

        .modal-form-grid {
            display: grid;
            grid-template-columns: auto 1fr;
            gap: 15px;
            align-items: center;
            margin: 20px 0;
        }

            .modal-form-grid label {
                text-align: right;
                white-space: nowrap;
            }

            .modal-form-grid select,
            .modal-form-grid input {
                width: 100%;
                margin-top: 0;
            }

        .modal-options-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-top: 15px;
        }

            .modal-options-container select {
                width: auto;
                min-width: 200px;
            }

        #feedback-section {
            padding: 30px;
            text-align: center;
        }

            #feedback-section h2 {
                margin-bottom: 8px !important;
                padding-bottom: 0 !important;
            }

        .feedback-form-container {
            max-width: 500px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        #feedback-message {
            margin-top: 15px;
            font-weight: bold;
        }

        .rating-section {
            width: 100%;
            text-align: center;
            margin-top: 20px;
        }

        .rating-stars {
            font-size: 30px;
            color: #ddd;
            cursor: pointer;
            direction: ltr;
            display: inline-block;
        }

            .rating-stars .star {
                display: inline-block;
                transition: color 0.2s ease, transform 0.2s ease;
                color: #ddd;
            }

                .rating-stars .star:hover {
                    transform: scale(1.2);
                    color: var(--accent-yellow);
                }

                    .rating-stars .star:hover ~ .star {
                        color: #ddd;
                    }

                .rating-stars .star.selected {
                    color: var(--accent-yellow);
                }

        .product-card-rating {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 5px;
            font-size: 14px;
            margin-bottom: 8px;
        }

            .product-card-rating .star {
                color: #ccc;
                font-size: 16px;
            }

                .product-card-rating .star.filled {
                    color: var(--accent-yellow);
                }

        .rating-average {
            font-size: 20px;
            font-weight: bold;
            color: var(--accent-yellow);
            margin-top: 10px;
        }

        #rateMessage {
            font-size: 14px;
            margin-top: 10px;
        }

        #home .main-products-section {
            margin-top: 40px;
            text-align: center;
            position: relative;
            z-index: 1;
        }

            #home .main-products-section::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background-image: url('wallpaper.png');
                background-size: cover;
                background-position: center;
                filter: blur(5px);
                -webkit-filter: blur(5px);
                z-index: -1;
                border-radius: 12px;
            }

        .checkout-btn-centered {
            display: block;
            margin: 20px auto 0;
            padding: 15px 30px;
            font-size: 18px;
            font-weight: bold;
            border-radius: 8px;
            cursor: pointer;
            background-color: white;
            color: var(--main-purple);
            border: none !important;
            transition: all 0.3s ease-in-out;
            /* ✅ الإضافة: تطبيق حركة التوهج الجديدة على الزر بشكل دائم */
            animation: rgb-glow-pulse-intense 4s infinite linear;
        }

            .checkout-btn-centered:hover {
                /* تأثير التوهج عند تمرير الماوس */
                animation: rgb-glow-pulse 4s infinite linear;
                transform: translateY(-2px);
            }

            .checkout-btn-centered:hover {
                /* تأثير التوهج عند تمرير الماوس */
                animation: rgb-glow-pulse 4s infinite linear;
                transform: translateY(-2px);
            }

        .payment-method-card {
            background-color: var(--main-purple);
            border: 1px solid #8e6abf;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }

            .payment-method-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            }

            .payment-method-card h3 {
                margin-top: 0;
                margin-bottom: 10px;
                text-align: center; /* This line should be added or kept */
            }



                /* You can keep the rest of the code as is. */
                .payment-method-card h3 img {
                    height: 25px;
                    margin-left: 10px;
                }

            .payment-method-card p {
                margin: 0;
            }

        .modal .modal-header {
            text-align: center;
        }

        .payment-header-container {
            display: flex;
            justify-content: space-around; /* توزيع متساوي للمسافات */
            align-items: stretch;
            gap: 8px; /* تقليل المسافة بين المربعات */
            text-align: center;
            margin-bottom: 25px;
            width: 100%;
        }

        .payment-header-box {
            background-color: rgba(0, 0, 0, 0.2);
            padding: 8px;
            border-radius: 8px;
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: flex-start; /* <--- ✅✅ هو ده الحل ✅✅ */
            min-width: 0;
        }

            .payment-header-box h4 {
                margin: 0 0 5px 0;
                font-size: 13px; /* تصغير حجم الخط */
                color: var(--light-text);
                opacity: 0.8;
                font-weight: normal;
                border: none;
                padding: 0;
                white-space: nowrap; /* لمنع نزول النص لسطر جديد */
                overflow: hidden;
                text-overflow: ellipsis;
            }

            .payment-header-box .payment-total-amount-value,
            .payment-header-box .payment-timer-value,
            .payment-header-box .payment-summary-value { /* ✅ إضافة الكلاس الجديد هنا */
                margin: 0;
                font-size: 16px; /* تصغير حجم الخط */
                font-weight: bold;
                color: var(--accent-yellow);
                white-space: nowrap; /* لمنع نزول النص لسطر جديد */
                overflow: hidden;
                text-overflow: ellipsis;
            }

        .payment-timer-value.expired {
            color: red;
            animation: shake 0.5s ease-in-out;
        }

        .quantity-selector-card {
            background-color: #1b2838;
            border-radius: 1rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            padding: 20px;
            margin: 15px auto;
            max-width: 300px;
            text-align: center;
        }

            .quantity-selector-card h4 {
                color: white;
                font-size: 1.25rem;
                font-weight: bold;
                margin: 0 0 15px 0;
                border: none;
                padding: 0;
            }

            .quantity-selector-card .quantity-controls {
                display: flex;
                justify-content: center;
                align-items: center;
                gap: 10px;
            }

            .quantity-selector-card .quantity-btn {
                background-color: #00a8ff;
                color: white;
                border: none;
                border-radius: 8px;
                width: 40px;
                height: 40px;
                font-size: 1.5rem;
                font-weight: bold;
                cursor: pointer;
                transition: background-color 0.3s ease;
                padding: 0;
                margin: 0;
                line-height: 40px;
            }

                .quantity-selector-card .quantity-btn:hover {
                    background-color: #007bb5;
                }

            .quantity-selector-card .quantity-input {
                width: 60px;
                padding: 8px;
                text-align: center;
                font-size: 1.2rem;
                font-weight: bold;
                border: 1px solid #00a8ff;
                background-color: #110e1a;
                color: white;
                border-radius: 8px;
                -moz-appearance: textfield;
            }

                .quantity-selector-card .quantity-input::-webkit-outer-spin-button,
                .quantity-selector-card .quantity-input::-webkit-inner-spin-button {
                    -webkit-appearance: none;
                    margin: 0;
                }

            .quantity-selector-card .quantity-total {
                color: white;
                font-size: 1.1rem;
                font-weight: bold;
                margin-top: 20px;
                margin-bottom: 0;
            }

        .product-image-fly {
            position: fixed;
            z-index: 9999;
            border-radius: 10%;
            transition: all 0.8s cubic-bezier(0.55, 0.055, 0.675, 0.19);
            pointer-events: none;
        }

        #productPage.section {
            background: linear-gradient(145deg, #1f1133, #110e1a);
            border-radius: 16px;
            padding: 30px;
            border: 1px solid var(--main-purple);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            margin: 20px auto;
            max-width: 1200px;
        }

        .product-main-view {
            display: flex;
            flex-wrap: wrap;
            gap: 40px;
            align-items: flex-start;
        }

            .product-main-view .product-image-section {
                order: 1;
            }

            .product-main-view .product-details-section:nth-of-type(3) {
                order: 2;
                flex: 1.3;
            }

        #productPageFullDescription {
            order: 3;
            flex-basis: 100%;
            margin-top: 30px;
            padding: 25px;
            border-top: 1px solid var(--main-purple);
            background-color: rgba(0,0,0,0.2);
            border-radius: 8px;
        }

            #productPageFullDescription h2 {
                border-right: 3px solid var(--accent-yellow);
                padding-right: 10px;
                margin-bottom: 20px;
                display: inline-block;
            }

        #productPageTitle {
            font-size: 2.5rem;
            color: var(--white-text);
            text-shadow: 0 0 10px rgba(255, 204, 0, 0.3);
            margin-bottom: 15px;
        }

        #productPagePrice {
            font-size: 2rem;
            margin-bottom: 20px;
        }

        .product-page-rating {
            margin-bottom: 20px;
        }

        #productPageShortDescription {
            font-size: 1.1rem;
            color: #d1cde0;
            margin-bottom: 30px;
        }

        .quantity-selector {
            background-color: rgba(0,0,0,0.2);
            padding: 10px;
            border-radius: 50px;
            display: inline-flex;
            margin-bottom: 30px;
            align-items: center;
        }

            .quantity-selector label {
                font-size: 1rem;
                padding-left: 10px;
            }

            .quantity-selector button {
                background-color: var(--main-purple);
                color: var(--white-text);
                border-radius: 50%;
                width: 35px;
                height: 35px;
                font-size: 1.2rem;
                border: none;
                line-height: 1;
            }

                .quantity-selector button:hover {
                    background-color: #6a4f8a;
                    transform: scale(1.1);
                }


            .quantity-selector input {
                width: 60px;
                text-align: center;
                margin: 0;
                font-size: 1.2rem;
                font-weight: bold;
                -moz-appearance: textfield;
                /* === السطر الجديد === */
                border: none;
            }

        .tabs-container {
            margin-top: 40px;
        }

        .tab-buttons {
            border-bottom: 1px solid var(--main-purple);
            margin-bottom: 20px;
        }

        .tab-button {
            color: var(--light-text);
            opacity: 0.7;
            padding: 12px 20px;
            font-size: 1rem;
        }

            .tab-button.active {
                opacity: 1;
                color: var(--accent-yellow);
            }

        .tab-content {
            background-color: transparent;
            padding: 10px 5px;
        }




        /* === التحسينات الجديدة === */

        /* 1. إشعار مؤقت (Toast) */
        #toast-container {
            position: fixed;
            top: 80px;
            left: 20px; /* في RTL، جهة اليسار هي المكان المناسب لتجنب تغطية زر السلة */
            z-index: 9999;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 10px;
        }

        .toast-notification {
            background-color: var(--green-buy-btn);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            opacity: 0;
            transform: translateX(-120%);
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            font-weight: bold;
        }

            .toast-notification.info {
                background-color: var(--accent-yellow); /* لون أصفر للملاحظات */
                color: var(--black-text);
                font-size: 15px; /* حجم خط أكبر قليلاً */
            }

            .toast-notification.show {
                opacity: 1;
                transform: translateX(0);
            }




        /* 2. زر العودة في صفحة المنتج */
        .back-button {
            margin-bottom: 20px;
            background-color: transparent;
            border: 2px solid var(--accent-yellow);
            color: var(--accent-yellow);
            font-size: 16px;
        }

            .back-button:hover {
                background-color: var(--accent-yellow);
                color: var(--black-text);
                transform: translateY(-2px);
            }




        /* === START: New Discount Code Style === */
        .button-container {
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            gap: 8px; /* تم زيادة المسافة قليلاً لتنزيل العناصر */
            width: 100%;
            max-width: 350px;
            order: 2;
        }

        .discount-code-container {
            display: flex;
            justify-content: center;
            align-items: stretch;
            margin-top: 10px; /* تم إضافة مسافة علوية بسيطة لتنزيله */
            margin-bottom: 5px;
        }

            .discount-code-container input {
                width: 180px;
                margin: 0;
                padding: 12px;
                text-align: center;
                border: 1px solid var(--main-purple);
                border-left: none; /* لإزالة الحد الفاصل من جهة الإدخال */
                border-radius: 0 8px 8px 0; /* لتدوير الحواف اليمنى فقط */
            }

            .discount-code-container button {
                margin: 0;
                padding: 12px 15px;
                font-size: 14px;
                white-space: nowrap;
                border: 1px solid var(--main-purple);
                border-right: none; /* لإزالة الحد الفاصل من جهة الزر */
                border-radius: 8px 0 0 8px; /* لتدوير الحواف اليسرى فقط */
            }



            /* === END: New Discount Code Style === */
            .discount-code-container button {
                margin-top: 0;
                padding: 10px 15px;
                font-size: 14px;
            }

        .discount-message {
            text-align: center;
            font-size: 14px;
            min-height: 20px;
            font-weight: bold;
        }

            .discount-message.success {
                color: var(--green-buy-btn);
            }

            .discount-message.error {
                color: #ff4757;
            }

        #cartTotalContainer .original-price {
            text-decoration: line-through;
            opacity: 0.7;
            font-size: 16px;
            margin-left: 10px;
        }



        .navbar-search-container {
            position: relative; /* ✅ هذا السطر ضروري لتحديد موضع القائمة المنسدلة */
            display: flex;
            align-items: center;
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: 20px;
            padding: 4px 8px;
            transition: background-color 0.3s ease;
        }

            .navbar-search-container:hover {
                background-color: rgba(0, 0, 0, 0.3);
            }

        .navbar-search-input {
            background: transparent;
            border: none;
            outline: none;
            color: var(--light-text);
            font-family: 'Tajawal', sans-serif;
            width: 120px;
            transition: width 0.4s ease-in-out;
            padding: 2px 5px;
            margin: 0;
        }

            .navbar-search-input::placeholder {
                color: rgba(224, 224, 224, 0.6);
            }

        .navbar-search-container .navbar-search-input:focus {
            width: 180px;
            border-color: transparent;
            outline: none;
            box-shadow: none;
        }

        .navbar-search-btn {
            background: transparent;
            border: none;
            cursor: pointer;
            padding: 5px;
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--light-text);
        }

            .navbar-search-btn svg {
                fill: currentColor;
                transition: color 0.3s ease;
            }

            .navbar-search-btn:hover {
                color: var(--accent-yellow);
                background-color: transparent;
                transform: none;
            }



        /* === END: CSS for Navbar Search Bar === */

        /* === Trust Badges CSS === */
        .trust-badges-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px;
            flex-wrap: wrap;
            margin-bottom: 25px;
            padding-bottom: 25px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .trust-badge {
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--light-text);
            font-size: 14px;
            font-weight: bold;
        }

            .trust-badge svg {
                width: 28px;
                height: 28px;
                color: var(--accent-yellow);
            }



        /* === Modal Trust Badges CSS === */

        /* الكود بعد التعديل */
        .modal-trust-badges {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-top: 30px; /* تم زيادة الهامش لإنزال العبارات */
            padding-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

            .modal-trust-badges .trust-badge {
                font-size: 12px;
            }

                .modal-trust-badges .trust-badge svg {
                    width: 20px;
                    height: 20px;
                }



        /* === START: إضافة وهج لزر اذهب للدفع === */
        #modal-action-button:hover {
            box-shadow: 0 0 15px var(--accent-yellow);
        }

        #modal-action-button {
            /* يمكنك إزالة هذه الخصائص لأنها ستطبق على الحاوية */
            /* display: block; */
            /* width: 100%; */
            /* margin-top: 20px; */
        }



        /* تنسيق الحاوية الجديدة التي تحتوي على الزر */
        .modal-content-section > div[style="text-align: center;"] {
            display: flex;
            justify-content: center;
            width: 100%;
            margin-top: 20px;
        }



        /* تنسيق الزر نفسه لكي يظهر بشكل مناسب */
        #modal-action-button {
            width: 80%; /* يمكنك تعديل هذا العرض حسب ما تراه مناسباً */
            max-width: 300px; /* لمنعه من أن يصبح كبيرًا جدًا على الشاشات الكبيرة */
        }



        /* === END: إضافة وهج لزر اذهب للدفع === */

        /* 4. تحسينات التجاوب مع الشاشات */
        @media (max-width: 1024px) {
            #navbar .nav-link, .dropdown .nav-link {
                margin-left: 10px;
                font-size: 13px;
            }
        }

        @media (max-width: 860px) {
            #navbar {
                flex-wrap: wrap;
                justify-content: center;
                padding-bottom: 8px;
            }

                #navbar .logo-area {
                    width: 100%;
                    justify-content: center;
                    margin-bottom: 5px;
                    margin-left: 0;
                }

                #navbar .nav-link, .dropdown > .nav-link {
                    padding-bottom: 2px;
                }
        }

        @media (max-width: 768px) {
            body {
                padding-top: 120px; /* تعديل ليتناسب مع الشريط العلوي الملتف */
                padding-bottom: 80px;
            }

            .product-item {
                width: calc(50% - 20px);
                min-width: 150px;
            }

                .product-item.valorant-item {
                    width: calc(50% - 20px);
                }

            .subscription-item {
                width: 90%;
                max-width: 340px;
            }

            .product-main-view {
                flex-direction: column;
            }

            .product-image-section, .product-details-section {
                min-width: 100%;
            }

            #productPage {
                padding: 15px;
            }
        }

        @media (max-width: 480px) {
            .products-container {
                gap: 15px;
            }

            .product-item {
                width: 85%;
            }

            .modal {
                width: 95%;
                padding: 15px;
            }

                .modal input, .modal textarea {
                    width: 90%;
                }

            .payment-header-container {
                flex-direction: column;
            }

            #shipping {
                padding: 10px;
            }

            #orderInputContainer input {
                width: 180px;
            }
        }

        /* ✅✅ كود حل مشكلة انتقال الخلفية الثابتة ✅✅ */
        #productPage {
            position: relative; /* لجعل العنصر مرجعًا للطبقة الوهمية */
            z-index: 1; /* لضمان أن المحتوى فوق الخلفية */
            background-color: transparent !important; /* نجعل الخلفية الأساسية شفافة */
        }

            #productPage::before {
                content: '';
                position: fixed; /* هنا نجعل الخلفية ثابتة ومنفصلة */
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                z-index: -1; /* لوضع هذه الطبقة خلف المحتوى */
                /* هنا نستخدم متغير CSS سيتم التحكم به من خلال JavaScript */
                background-image: var(--product-bg-image), linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6));
                background-blend-mode: overlay; /* لدمج الفلتر الأسود مع الصورة */
                background-size: cover;
                background-position: center;
                /* لن نضع background-attachment هنا لأنه position: fixed يغني عنه */
            }

        /* ====================================================== */
        /* ✅ START: تنسيق شريط التمرير (Scrollbar) بشكل عصري ✅ */
        /* ====================================================== */

        /* يعمل على متصفحات Chrome, Edge, Safari */
        ::-webkit-scrollbar {
            width: 8px; /* عرض الشريط */
            height: 8px; /* ارتفاع الشريط (للتمرير الأفقي) */
        }

        /* خلفية الشريط (المسار الذي يتحرك عليه) */
        ::-webkit-scrollbar-track {
            background: var(--dark-bg); /* لون بنفسجي غامق جدًا من ألوان الموقع */
        }

        /* الجزء المتحرك من الشريط */
        ::-webkit-scrollbar-thumb {
            background: #8e6abf; /* لون بنفسجي فاتح ليظهر بوضوح */
            border-radius: 10px; /* لجعله بحواف دائرية */
            border: 2px solid var(--dark-bg); /* إضافة إطار بلون الخلفية لمظهر أنحف */
        }

            /* تأثير عند مرور الماوس على الجزء المتحرك */
            ::-webkit-scrollbar-thumb:hover {
                background: #a482d1; /* جعله أفتح قليلاً عند التفاعل */
            }

        /* يعمل على متصفح Firefox */
        * {
            scrollbar-width: thin; /* جعل الشريط رفيعًا */
            scrollbar-color: #8e6abf var(--dark-bg); /* (لون الجزء المتحرك) (لون الخلفية) */
        }

        /* ====================================================== */
        /* ✅ END: تنسيق شريط التمرير (Scrollbar) بشكل عصري   ✅ */
        /* ====================================================== */

        /* ====================================================== */
        /* ✅ START: تأثير اللمعان التفاعلي على الكروت ✅ */
        /* ====================================================== */
        .product-item, .subscription-item, .service-offer-card, .rental-card {
            position: relative; /* ضروري لعمل التأثير */
            overflow: hidden; /* لإخفاء اللمعان الزائد */
        }

            .product-item::before, .subscription-item::before, .service-offer-card::before, .rental-card::before {
                content: '';
                position: absolute;
                left: var(--mouse-x, -100%); /* المتغيرات دي هيتم التحكم فيها بالجافاسكريبت */
                top: var(--mouse-y, -100%);
                width: 150px;
                height: 150px;
                background: radial-gradient(circle, rgba(255, 255, 255, 0.2), transparent 60%);
                transform: translate(-50%, -50%);
                transition: left 0.1s ease, top 0.1s ease; /* لحركة أكثر نعومة */
                pointer-events: none; /* لمنع التأثير من إعاقة النقر */
                z-index: 1; /* ليكون فوق الصورة وتحت النص */
            }
    </style>

</head>
<body>

    <img id="aptx-pill" src="./images/aptx4869.png" class="interactive-pill" onclick="consumeAptx()">

    <img id="antidote-pill" src="./images/antidote.png" class="interactive-pill" onclick="consumeAntidote()">

    <input type="hidden" name="image_url" id="vodafone_image_url">
    <input type="hidden" name="image_url" id="paypal_image_url">
    <input type="hidden" name="image_url" id="creditcard_image_url">

    <div id="xboxGiftingModal" class="modal">
        <span class="close-btn" onclick="closeModal('xboxGiftingModal')">&times;</span>
        <div class="modal-body">
            <h2>شراء لعبة (Xbox/PC)</h2>
            <p class="modal-description">أدخل بيانات اللعبة وحسابك لحساب التكلفة.</p>

            <div class="input-wrapper">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5z" /><path d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm15 0a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2z" /></svg>
                <input type="text" id="xboxGameName" placeholder="اسم اللعبة (باللغة الإنجليزية)" required>
            </div>

            <div class="input-wrapper" id="xbox-price-wrapper">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M4 10.781c.524 1.637 1.82 2.77 3.432 2.77..."></path></svg>
                <input type="number" id="xboxGamePriceEGP" placeholder="أدخل سعر اللعبة" required oninput="calculateXboxGiftingPrice()">

                <select id="xboxGameCurrency" onchange="calculateXboxGiftingPrice()">
                    <option value="EGP" selected>EGP</option>
                    <option value="USD">USD</option>
                </select>
            </div>

            <div class="input-wrapper">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-envelope-fill" viewBox="0 0 16 16">
                    <path d="M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414.05 3.555ZM0 4.697v7.104l5.803-3.558L0 4.697ZM6.761 8.83l-6.57 4.027A2 2 0 0 0 2 14h12a2 2 0 0 0 1.808-1.144l-6.57-4.027L8 9.586l-1.239-.757Zm3.436-.586L16 11.803V4.697l-5.803 3.546Z" />
                </svg>
                <input type="email" id="xboxAccountEmail" placeholder="إيميل حساب مايكروسوفت" required>
            </div>

            <div class="input-wrapper">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-key-fill" viewBox="0 0 16 16">
                    <path d="M3.5 11.5a3.5 3.5 0 1 1 3.163-5H14L15.5 8 14 9.5l-1-1-1 1-1-1-1 1-1-1-1 1H6.663a3.5 3.5 0 0 1-3.163 2zM2.5 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" />
                </svg>
                <input type="password" id="xboxAccountPassword" placeholder="باسورد حساب مايكروسوفت" required>
            </div>

            <div id="xboxFinalPriceDisplay" style="margin-top: 15px;">
            </div>

            <div style="text-align: center; margin-top: 20px;">
                <button id="proceedToXboxPaymentBtn" class="button-primary" onclick="proceedToXboxPayment()">اذهب للدفع</button>
            </div>
        </div>
    </div>

    <div id="loading-screen">
        <img src="./images/minecraft_loading.gif" alt="Loading..." class="loading-animation">
        <p class="loading-text">جاري التحميل...</p>
    </div>


    <div id="kaito-card" style="display: none; position: fixed; z-index: 10000; width: 60px;">
        <img src="./images/kid-card.png" style="width: 100%; filter: drop-shadow(5px 5px 10px rgba(0,0,0,0.5));">
    </div>
    <div id="kid-smoke"></div>

    <script>

        // ✅ دالة لنسخ النص وتغيير شكل الأيقونة مؤقتاً
        function copyToClipboard(text, element) {
            navigator.clipboard.writeText(text).then(() => {
                const icon = element.querySelector('.copy-icon');

                // حفظ الكلاس الأصلي للأيقونة
                const originalIconClass = 'fas fa-copy copy-icon';

                // تغيير الشكل لعلامة صح وتغيير الستايل
                icon.className = 'fas fa-check copy-icon';
                element.classList.add('copied');

                // إظهار رسالة صغيرة (Toast)
                if (typeof showInfoToast === 'function') {
                    showInfoToast("تم نسخ الرقم بنجاح! ✅", 2000);
                }

                // إرجاع الشكل الأصلي بعد ثانيتين
                setTimeout(() => {
                    icon.className = originalIconClass;
                    element.classList.remove('copied');
                }, 2000);
            }).catch(err => {
                console.error('فشل النسخ', err);
            });
        }
        function copySupportEmail(cardElement) {
            const emailText = document.getElementById('supportEmailText').innerText;

            navigator.clipboard.writeText(emailText).then(() => {
                // تغيير الأيقونة والنص لتوضيح النسخ
                const icon = cardElement.querySelector('.action-icon i');
                const tooltip = cardElement.querySelector('.tooltip');

                // حفظ الحالة الأصلية
                const originalIconClass = icon.className;
                const originalTooltipText = tooltip.innerText;

                // التغيير لحالة "تم النسخ"
                icon.className = 'fas fa-check';
                icon.style.color = '#2ecc71';
                tooltip.innerText = 'تم النسخ!';
                cardElement.classList.add('copied');

                // إعادة الحالة الأصلية بعد ثانيتين
                setTimeout(() => {
                    icon.className = originalIconClass;
                    icon.style.color = '';
                    tooltip.innerText = originalTooltipText;
                    cardElement.classList.remove('copied');
                }, 2000);
            });
        }
        // ✅ دالة فحص ما إذا كانت هناك تغييرات جديدة
        function checkFormChanges() {
            const saveBtn = document.querySelector('.profile-actions-container .confirm-payment-btn');
            const currentName = document.getElementById('profileDisplayName').value.trim();

            // التحقق من تغيير الاسم أو تغيير الصورة (يفترض أن selectedAvatarUrl يتغير عند اختيار صورة جديدة)
            const isNameChanged = currentName !== initialDisplayName;
            const isPhotoChanged = selectedAvatarUrl !== null;

            if (isNameChanged || isPhotoChanged) {
                // يوجد تغيير، قم بتمكين الزر
                saveBtn.disabled = false;
            } else {
                // لا يوجد تغيير، قم بتعطيل الزر
                saveBtn.disabled = true;
            }
        }
        // ✅ دالة التروفي (صورة وصوت من ملفاتك الشخصية)
        function showPlaystationTrophy(title, subtitle = "You earned a trophy") {

            // 1. تشغيل الصوت (من مجلد sounds اللي في الصورة)
            // ⚠️ تأكد إن اسم الملف جوه الفولدر هو trophy.mp3
            const audio = new Audio('./sounds/trophy.mp3');

            audio.volume = 1.0; // أعلى صوت

            // محاولة التشغيل واكتشاف الأخطاء
            audio.play().then(() => {
                console.log("✅ الصوت اشتغل تمام!");
            }).catch(error => {
                console.error("❌ مشكلة في الصوت:", error);
                console.log("تأكد إن الملف trophy.mp3 موجود جوه فولدر sounds");
            });

            // 2. إنشاء التروفي
            const trophy = document.createElement('div');
            trophy.className = 'ps-trophy-alert';

            // 3. المحتوى (استخدام أيقونة من مجلد images اللي في الصورة)
            // ⚠️ تأكد إنك حطيت الصورة جوه فولدر images وسميتها trophy.png
            trophy.innerHTML = `
            <div class="trophy-icon-container">
                <img src="./images/trophy.png" alt="Trophy" style="width: 40px; height: 40px; object-fit: contain;">
            </div>
            <div class="trophy-details">
                <span class="trophy-subtitle">${subtitle}</span>
                <div class="trophy-title">${title}</div>
            </div>
        `;

            // 4. الإضافة للصفحة
            document.body.appendChild(trophy);

            // 5. الإخفاء بعد 4 ثواني
            setTimeout(() => {
                trophy.classList.add('hide');
                setTimeout(() => {
                    trophy.remove();
                }, 600);
            }, 4000);
        }
        // ==========================================
        // 🎮 نظام الرتب (Gamification Logic)
        // ==========================================

        // 1. دالة تحديد الرتبة بناءً على عدد الطلبات
        function calculateUserRank(orderCount) {
            if (orderCount >= 5) {
                return {
                    name: '💎 DIAMOND',
                    class: 'rank-diamond',
                    bg: 'linear-gradient(45deg, #00e5ff, #2979ff)'
                };
            } else if (orderCount >= 1) {
                return {
                    name: '🥇 GOLD',
                    class: 'rank-gold',
                    bg: 'linear-gradient(45deg, #ffd700, #ffaa00)'
                };
            } else {
                return {
                    name: '🥉 BRONZE',
                    class: 'rank-bronze',
                    bg: '#cd7f32'
                };
            }
        }

        // ==========================================
        // 🎮 دالة تطبيق الرتبة على الواجهة (Navbar + Settings)
        // ==========================================
        function applyUserRankUI(orderCount) {
            const count = orderCount || 0;
            let rankData;

            // --- تحديد الرتبة (Rank Logic) ---
            if (count >= 5) {
                rankData = { name: '💎 DIAMOND', bg: 'linear-gradient(90deg, #00e5ff, #2979ff)', color: '#000', border: '#00e5ff', class: 'rank-diamond' };
            } else if (count >= 1) {
                rankData = { name: '🥇 GOLD', bg: 'linear-gradient(90deg, #ffd700, #ffaa00)', color: '#000', border: '#ffd700', class: 'rank-gold' };
            } else {
                rankData = { name: '🥉 BRONZE', bg: '#cd7f32', color: '#fff', border: '#cd7f32', class: 'rank-bronze' };
            }

            // 1. تحديد العناصر المستهدفة
            const dropdownBadge = document.getElementById('dropdown-rank-badge');
            const navbarBadge = document.getElementById('navbar-rank-badge');
            const settingsBadge = document.getElementById('user-rank-display');

            // 2. تحديث شارة الناف بار (ضمانة كاملة)
            if (navbarBadge) {
                // تحديث النص بالرتبة المحسوبة (BRONZE, GOLD, DIAMOND)
                navbarBadge.textContent = rankData.name;

                // 🛑 تطبيق الستايل المباشر (خلفية ولون) لضمان التغيير الفوري
                navbarBadge.style.background = rankData.bg;
                navbarBadge.style.color = rankData.color;

                // تحديث الكلاسات لـ CSS (لأجل الإطار/التوهج)
                navbarBadge.classList.remove('rank-bronze', 'rank-gold', 'rank-diamond');
                navbarBadge.classList.add(rankData.class);

                // 🛑 التأكد من ظهورها (لأنها مخفية افتراضياً)
                navbarBadge.style.display = 'inline-block';
                navbarBadge.style.boxShadow = "0 0 8px rgba(0,0,0,0.4)"; // لإضافة التوهج الخارجي

                // 🛑 إلغاء أي تنسيقات خطأ أخرى قد تكون موجودة
                navbarBadge.style.fontWeight = '900';
                navbarBadge.style.textShadow = 'none';

                // 🛑🛑 ضمانة إضافية للحل: إزالة أي هامش أو عرض موروث من كود آخر
                navbarBadge.style.minWidth = 'auto';
                navbarBadge.style.margin = '0';
            }

            // 3. تحديث الدروب داون (للتأكيد، لكي لا تعود المشكلة)
            if (dropdownBadge) {
                dropdownBadge.textContent = rankData.name;
                dropdownBadge.style.background = rankData.bg;
                dropdownBadge.style.color = rankData.color;
                dropdownBadge.classList.remove('rank-bronze', 'rank-gold', 'rank-diamond');
                dropdownBadge.classList.add(rankData.class);
            }

            // 4. تحديث صفحة الإعدادات (يبقى كما هو)
            if (settingsBadge) {
                settingsBadge.textContent = rankData.name;
                settingsBadge.style.background = rankData.bg;
                settingsBadge.style.color = rankData.color;
            }

            // 5. تحديث إطار الصورة (يبقى كما هو)
            const navImg = document.getElementById('nav-user-img');
            if (navImg) {
                navImg.classList.remove('rank-bronze', 'rank-gold', 'rank-diamond');
                navImg.classList.add(rankData.class);
            }
        }


        // ==========================================
        // 🌐 دالة تسجيل الدخول بجوجل
        // ==========================================
        function signInWithGoogle() {
            const provider = new firebase.auth.GoogleAuthProvider();
            const msgBox = document.getElementById('authMessage');

            msgBox.style.color = "yellow";
            msgBox.textContent = "جاري الاتصال بجوجل...";

            firebase.auth().signInWithPopup(provider)
                .then((result) => {
                    // تم الدخول بنجاح
                    const user = result.user;
                    console.log("Google User:", user);

                    msgBox.style.color = "#00ff00";
                    msgBox.textContent = `أهلاً بك، ${user.displayName}!`;

                    // إغلاق النافذة
                    setTimeout(() => {
                        closeModal('all');

                        // تحديث البيانات فوراً
                        if (typeof loadProfileData === 'function') loadProfileData(user);

                        // توجيه المستخدم للصفحة المطلوبة
                        if (window.location.hash === '#my-orders-auth-page') {
                            window.location.hash = '#my-orders-page';
                        }

                        showInfoToast("تم تسجيل الدخول بنجاح ✅", 3000);
                    }, 1500);

                }).catch((error) => {
                    console.error("Google Sign-In Error:", error);
                    msgBox.style.color = "red";
                    msgBox.textContent = "فشل تسجيل الدخول: " + error.message;
                });
        }

        // 1. دالة فتح صفحة الإعدادات وتعبئة البيانات
        function openProfileSettings() {
            const user = firebase.auth().currentUser;
            if (!user) {
                showInfoToast("يجب تسجيل الدخول أولاً", 3000, 'error');
                window.location.hash = '#my-orders-auth-page';
                return;
            }

            // تعبئة البيانات الحالية
            document.getElementById('currentProfileEmail').textContent = user.email;
            document.getElementById('profileDisplayName').value = user.displayName || "";
            document.getElementById('currentProfilePic').src = user.photoURL || "./images/BerlinStore.png";

            // إظهار الصفحة
            window.location.hash = '#profile-settings';
        }

        function toggleAvatarSelection(forceClose = false) {
            const area = document.getElementById('avatar-selection-area');
            const editIcon = document.querySelector('.edit-avatar-icon');

            if (!area) return;

            const isOpen = area.classList.contains('open-dropdown');

            // 🛑 المنطق الجديد: إذا كانت (forceClose = true) أو (isOpen = true)، قم بالإغلاق
            const shouldClose = forceClose || isOpen;

            area.classList.toggle('open-dropdown', !shouldClose);

            // تحديث الأيقونة
            if (editIcon) {
                editIcon.innerHTML = shouldClose ? '<i class="fas fa-pen"></i>' : '<i class="fas fa-times"></i>';
            }
        }
        let selectedAvatarUrl = null;

        function selectNewAvatar(url) {
            selectedAvatarUrl = url;
            const profilePicElement = document.getElementById('currentProfilePic');
            if (profilePicElement) {
                profilePicElement.src = url.split('?')[0] + '?' + new Date().getTime();
                const navImg = document.getElementById('nav-user-img');
                if (navImg) navImg.src = url.split('?')[0] + '?' + new Date().getTime();
            }

            const selectionArea = document.getElementById('avatar-selection-area');
            if (!selectionArea) return;

            selectionArea.querySelectorAll('img').forEach(img => {
                img.classList.remove('selected-avatar');
            });


            const clickedImages = document.querySelectorAll(`img[src="${url}"]`);

            clickedImages.forEach(clickedImage => {
                if (clickedImage) {
                    clickedImage.classList.add('selected-avatar');
                }
            });
            if (typeof checkFormChanges === 'function') {
                checkFormChanges();
            }
        }

        // ✅ متغير لتخزين الاسم الأصلي عند تحميل البيانات (يجب أن يكون خارج الدالة)
        // let initialDisplayName = "";
        // let selectedAvatarUrl = null;

        function saveProfileChanges() {
            const user = firebase.auth().currentUser;
            const saveBtn = document.querySelector('.profile-actions-container .confirm-payment-btn');
            const newNameInput = document.getElementById('profileDisplayName');

            // رابط الصورة الجديدة (يتم تعيينه في دالة selectNewAvatar)
            const photoURLToSave = selectedAvatarUrl || (user ? user.photoURL : null);

            if (!user) {
                showInfoToast("يجب تسجيل الدخول أولاً لحفظ التغييرات.", 4000, 'error');
                return;
            }

            const newName = newNameInput.value.trim();
            const isNameChanged = newName !== initialDisplayName;
            const isPhotoChanged = selectedAvatarUrl !== null;

            // 🛑 المنطق الجديد: إذا لم يكن هناك تغيير، قم بالتعطيل وإظهار رسالة.
            if (!isNameChanged && !isPhotoChanged) {
                if (!saveBtn.disabled) {
                    saveBtn.disabled = true;
                }

                // 🎨 تغيير اللون إلى الأخضر عند إظهار حالة "لا توجد تعديلات"
                saveBtn.style.background = 'var(--green-buy-btn)';
                saveBtn.innerHTML = '<i class="fas fa-check"></i> لا توجد تعديلات جديدة';

                setTimeout(() => {
                    saveBtn.innerHTML = '<i class="fas fa-save"></i> حفظ التغييرات';

                    // 🛑 إعادة الزر إلى شكله المعطل (لضمان عمل checkFormChanges)
                    if (typeof checkFormChanges === 'function') {
                        checkFormChanges();
                    }
                    // إعادة تعيين الخلفية لإتاحة التنسيق الأصلي للزر المعطل
                    saveBtn.style.background = '';
                    saveBtn.style.boxShadow = '';
                    showInfoToast("لا يوجد تعديل جديد للحفظ.", 3000, 'error');
                }, 1500);
                return;
            }

            if (!newName) {
                showInfoToast("الرجاء إدخال اسم عرض صحيح.", 3000, 'error');
                return;
            }

            // 1. تفعيل وضع التحميل
            saveBtn.disabled = true;

            // 🎨 فرض الخلفية الخضراء عند "جاري الحفظ..."
            saveBtn.style.background = 'linear-gradient(135deg, var(--green-buy-btn) 0%, #208e40 100%)';
            saveBtn.innerHTML = '<div class="loading-spinner" style="width: 16px; height: 16px; border-width: 2px;"></div> جاري الحفظ...';
            saveBtn.style.boxShadow = '0 5px 15px rgba(33, 150, 83, 0.4)';

            // 2. تحديث Firebase
            user.updateProfile({
                displayName: newName,
                photoURL: photoURLToSave
            }).then(() => {
                // 3. تحديث الاسم الأصلي بعد الحفظ الناجح
                initialDisplayName = newName;
                selectedAvatarUrl = null; // إعادة تعيين رابط الصورة المختارة

                // 🚀🚀 الحل يبدأ من هنا 🚀🚀
                // 💡 استخدام نفس المنطق لتحديث جميع عناصر الصورة والاسم المرئية:

                const cacheBuster = '?' + new Date().getTime();

                // 1. تحديث صورة البروفايل في صفحة الإعدادات
                const profilePicElement = document.getElementById('currentProfilePic');
                if (profilePicElement && photoURLToSave) {
                    profilePicElement.src = photoURLToSave.split('?')[0] + cacheBuster;
                }

                // 2. تحديث الاسم في الناف بار (#nav-user-email)
                const navUserEmail = document.getElementById('nav-user-email');
                if (navUserEmail) {
                    navUserEmail.textContent = newName.split(' ')[0];
                }

                // 3. تحديث صورة الناف بار (#nav-user-img)
                const navImg = document.getElementById('nav-user-img');
                if (navImg && photoURLToSave) {
                    navImg.src = photoURLToSave.split('?')[0] + cacheBuster;
                }

                // 🚀🚀 الحل ينتهي هنا 🚀🚀

                // 4. تحديث الواجهة وإظهار رسالة النجاح
                showInfoToast("تم تحديث بياناتك بنجاح!", 3000);

                // 🛑 تعطيل الزر مباشرة بعد الحفظ الناجح
                if (typeof checkFormChanges === 'function') {
                    checkFormChanges();
                }

            }).catch((error) => {
                console.error("Firebase Update Error:", error);
                showInfoToast("حدث خطأ أثناء الحفظ: " + error.message, 5000, 'error');
            }).finally(() => {
                // 5. إعادة النص الأصلي (لكنه سيبقى معطلًا بفضل checkFormChanges)
                saveBtn.innerHTML = '<i class="fas fa-save"></i> حفظ التغييرات';

                // 🛑 إعادة تعيين الخلفية إلى حالتها الأصلية لـ CSS
                saveBtn.style.background = '';
                saveBtn.style.boxShadow = '';
            });
        }

        function loadProfileData(user) {
            if (user) {
                document.getElementById('currentProfileEmail').textContent = user.email;
                document.getElementById('profileDisplayName').value = user.displayName || "";
                document.getElementById('currentProfilePic').src = user.photoURL || "./images/BerlinStore.png";

                // 🛑 حفظ الاسم الأصلي هنا
                initialDisplayName = user.displayName || "";
                selectedAvatarUrl = null;

                // 🛑 تعيين الحالة الأولية للزر (سيكون معطلًا في البداية)
                checkFormChanges();

                // تطبيق الرتبة (إن وجدت)
                // fetchUserOrders(true);
            }
        }

        // ✅ إضافة المراقب (Listener) لحقل الاسم
        document.addEventListener('DOMContentLoaded', () => {
            const nameInput = document.getElementById('profileDisplayName');
            // عندما يقوم المستخدم بالكتابة، قم بفحص حالة التغييرات
            if (nameInput) {
                nameInput.addEventListener('input', checkFormChanges);
            }
        });

        function saveAvatarOnly() {
            const user = firebase.auth().currentUser;
            const photoURLToSave = selectedAvatarUrl || (user ? user.photoURL : null);

            if (!user) {
                showInfoToast("يجب تسجيل الدخول أولاً لحفظ التغييرات.", 4000, 'error');
                return;
            }

            if (!photoURLToSave) {
                showInfoToast("الرجاء اختيار صورة أولاً.", 3000, 'error');
                return;
            }

            // 1. إغلاق قائمة الاختيار أولاً
            toggleAvatarSelection(true);

            // 2. استخدام دالة Firebase الأساسية لتحديث البروفايل (الصورة فقط)
            user.updateProfile({
                photoURL: photoURLToSave
            }).then(() => {
                // 3. تحديث صورة الناف بار لتجاوز الـ Cache
                const navImg = document.getElementById('nav-user-img');
                if (navImg && photoURLToSave) {
                    const cacheBuster = `?t=${new Date().getTime()}`;
                    navImg.src = photoURLToSave + cacheBuster;
                }

                // 4. إظهار رسالة تأكيد
                showInfoToast("تم تغيير الصورة وحفظها بنجاح!", 3000);

            }).catch((error) => {
                console.error("Firebase Update Error:", error);
                showInfoToast("حدث خطأ أثناء حفظ الصورة: " + error.message, 5000, 'error');
            });
        }

        // 5. إرسال إيميل تغيير الباسورد
        function sendPasswordReset() {
            const user = firebase.auth().currentUser;
            if (!user) return;

            firebase.auth().sendPasswordResetEmail(user.email).then(() => {
                showInfoToast(`📧 تم إرسال رابط تغيير كلمة المرور إلى ${user.email}`, 5000);
            }).catch((error) => {
                showInfoToast("خطأ: " + error.message, 3000, 'error');
            });
        }


        // ==========================================
        // 🎮 دوال نظام الرتب (Gamification Logic)
        // ==========================================

        // 1. دالة حساب الرتبة بناءً على العدد
        function calculateUserRank(orderCount) {
            if (orderCount >= 5) {
                return {
                    name: '💎 DIAMOND',
                    class: 'rank-diamond',
                    bg: 'linear-gradient(45deg, #00e5ff, #2979ff)',
                    color: '#fff'
                };
            } else if (orderCount >= 1) {
                return {
                    name: '🥇 GOLD',
                    class: 'rank-gold',
                    bg: 'linear-gradient(45deg, #ffd700, #ffaa00)',
                    color: '#000'
                };
            } else {
                return {
                    name: '🥉 BRONZE',
                    class: 'rank-bronze',
                    bg: '#cd7f32',
                    color: '#fff'
                };
            }
        }

        // 2. دالة تطبيق الرتبة على الواجهة (الصور والنصوص)
        function applyUserRankUI(orderCount) {
            const rankData = calculateUserRank(orderCount);

            // أ. تحديث إطار الصور (في الهيدر وصفحة الإعدادات)
            const navImg = document.getElementById('nav-user-img');
            const profileImg = document.getElementById('currentProfilePic');

            [navImg, profileImg].forEach(img => {
                if (img) {
                    // حذف الكلاسات القديمة عشان ميتراكموش
                    img.classList.remove('rank-bronze', 'rank-gold', 'rank-diamond');
                    // إضافة كلاس الرتبة الجديدة
                    img.classList.add(rankData.class);
                }
            });

            // ب. تحديث بادج الرتبة في صفحة الإعدادات (تحت الإيميل)
            const profileHeader = document.querySelector('.profile-header-section');
            let rankBadge = document.getElementById('user-rank-display');

            // لو البادج مش موجود، ننشئه
            if (!rankBadge && profileHeader) {
                rankBadge = document.createElement('div');
                rankBadge.id = 'user-rank-display';
                rankBadge.className = 'user-rank-badge';
                // نضعه بعد عنصر الإيميل
                const emailElem = document.getElementById('currentProfileEmail');
                if (emailElem) emailElem.after(rankBadge);
            }

            // تحديث محتوى البادج
            if (rankBadge) {
                rankBadge.textContent = rankData.name;
                rankBadge.style.background = rankData.bg;
                rankBadge.style.color = rankData.color;
                rankBadge.style.display = 'inline-block';
                rankBadge.style.boxShadow = "0 0 10px rgba(0,0,0,0.5)";
            }
        }
        // ==========================================
        // 📦 دالة جلب الطلبات (النسخة المصلحة 100%)
        // ==========================================
        function fetchUserOrders(isBackground = false) {
            const user = firebase.auth().currentUser;

            if (!user) return;

            // 🛑 التعديل الأهم: لو التحديث في الخلفية (زي أول ما تفتح الموقع)، متفتحش الصفحة ولا تظهر اللودر
            if (isBackground === false) {
                showSection('my-orders-page'); // افتح الصفحة بس لو المستخدم داس بنفسه

                const loader = document.getElementById('orders-loader');
                const listContainer = document.getElementById('orders-list-container');
                const noOrdersMsg = document.getElementById('no-orders-msg');

                if (loader) loader.style.display = 'block';
                if (listContainer) listContainer.innerHTML = '';
                if (noOrdersMsg) noOrdersMsg.style.display = 'none';
            }

            // رابط السكربت (يرجى التأكد من صلاحيته)
            const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzTnc9hTa4-Ho4r1p7rMdfJhRhVaP7ZQ1hE5Pg_4PaQEUVSB2CFs5cmJQFDSzVEopZI/exec";

            // إرسال طلب لجلب البيانات
            fetch(SCRIPT_URL, {
                method: 'POST',
                body: JSON.stringify({
                    action: "get_user_orders",
                    email: user.email
                })
            })
                .then(response => response.json())
                .then(data => {
                    // إخفاء اللودر فقط لو كنا فاتحين الصفحة
                    if (isBackground === false) {
                        const loader = document.getElementById('orders-loader');
                        if (loader) loader.style.display = 'none';
                    }

                    let completedCount = 0;
                    let ordersToRender = [];

                    if (data.orders && data.orders.length > 0) {

                        // ✅✅ 1. المنطق الجديد: كل الطلبات هي مكتملة (كما طلبت سابقاً)
                        completedCount = data.orders.length;

                        // 2. تعديل حالة جميع الطلبات لتظهر "مكتمل"
                        ordersToRender = data.orders.map(order => {
                            return { ...order, status: 'مكتمل' };
                        });

                        // 3. رسم الطلبات المعدلة
                        if (isBackground === false) renderOrdersList(ordersToRender);

                    } else {
                        if (isBackground === false) {
                            const noOrdersMsg = document.getElementById('no-orders-msg');
                            if (noOrdersMsg) {
                                noOrdersMsg.style.display = 'block';
                                noOrdersMsg.textContent = "لا توجد طلبات مسجلة لهذا الحساب.";
                            }
                        }
                    }

                    // ✅ تحديث العداد الجديد في واجهة المستخدم
                    const completedOrdersEl = document.getElementById('total-completed-orders');
                    if (completedOrdersEl) {
                        completedOrdersEl.textContent = completedCount;
                    }

                    // ✅✅ الخطوة الحاسمة: تحديث الرانك على جميع العناصر
                    if (typeof applyUserRankUI === 'function' && typeof calculateUserRank === 'function') {

                        // 🛑 نستخدم الدالة لحساب rankData محلياً
                        const rankData = calculateUserRank(completedCount);

                        // نحدث جميع عناصر الرتبة الأخرى (الناف بار/الدروب داون)
                        applyUserRankUI(completedCount);

                        // 🛑🛑 التعديل لضمان تحديث العنصر الجديد بشكل صحيح 🛑🛑
                        const userRankEl = document.getElementById('total-orders-rank');
                        if (userRankEl) {
                            userRankEl.textContent = rankData.name; // الاسم الصحيح (Diamond)
                            userRankEl.style.color = rankData.color; // اللون الصحيح (الأخضر/الأزرق)
                        }

                        // الكود الخاص بتحديث الدروب داون (لضمان التناسق)
                        const dropdownBadge = document.getElementById('dropdown-rank-badge');
                        if (dropdownBadge) {
                            dropdownBadge.textContent = rankData.name;
                            dropdownBadge.style.background = rankData.bg;
                            dropdownBadge.style.color = rankData.color;

                            ['rank-bronze', 'rank-gold', 'rank-diamond'].forEach(cls => {
                                dropdownBadge.classList.remove(cls);
                            });
                            dropdownBadge.classList.add(rankData.class);

                            const navbarBadge = document.getElementById('navbar-rank-badge');
                            if (navbarBadge) navbarBadge.style.display = 'inline-block';
                        }
                    }

                })
                .catch(error => {
                    console.error("Error fetching orders:", error);
                    if (isBackground === false) {
                        const loader = document.getElementById('orders-loader');
                        const noOrdersMsg = document.getElementById('no-orders-msg');
                        if (loader) loader.style.display = 'none';
                        if (noOrdersMsg) {
                            noOrdersMsg.innerHTML = "حدث خطأ في الاتصال.";
                            noOrdersMsg.style.display = 'block';
                        }
                        // في حالة الخطأ، نثبت العداد والرانك على صفر
                        const completedOrdersEl = document.getElementById('total-completed-orders');
                        if (completedOrdersEl) completedOrdersEl.textContent = 0;
                    }
                    // في حالة الخطأ، نثبت الرانك على برونز
                    if (typeof applyUserRankUI === 'function') applyUserRankUI(0);
                });
        }

        function renderOrdersList(orders) {
            const container = document.getElementById('orders-list-container');
            // تفريغ الحاوية قبل البناء
            if (container) container.innerHTML = '';

            orders.forEach(order => {
                // ----------------------------------------------------
                // ✅ [Fix: 1] معالجة التاريخ لتجنب "Invalid Date"
                // ----------------------------------------------------
                const rawDate = order.date;
                let dateObj;

                if (rawDate && typeof rawDate === 'string' && rawDate.includes('/')) {
                    // معالجة التنسيق الشائع DD/MM/YYYY
                    const dateParts = rawDate.split(' ')[0].split('/');

                    if (dateParts.length === 3) {
                        // إعادة الترتيب إلى MM/DD/YYYY ليتعرف عليه JavaScript بشكل موثوق
                        const robustDateString = `${dateParts[1]}/${dateParts[0]}/${dateParts[2]}`;
                        dateObj = new Date(robustDateString);
                    } else {
                        // محاولة عادية إذا فشل التقسيم
                        dateObj = new Date(rawDate);
                    }
                } else {
                    // محاولة عادية لأي تنسيق آخر أو timestamp
                    dateObj = new Date(rawDate);
                }

                // تحويل التاريخ إلى نص عربي (مع التأكد من أنه تاريخ صالح)
                const dateStr = dateObj instanceof Date && !isNaN(dateObj) ?
                    dateObj.toLocaleDateString('ar-EG') :
                    "تاريخ غير متوفر";
                // ----------------------------------------------------


                // ----------------------------------------------------
                // ✅ [Fix: 2] معالجة نص وصورة الطلب (لو مفيش بيانات)
                // ----------------------------------------------------
                // تحديد لون الحالة
                let statusClass = 'status-pending';
                // ✅ (تعديل الطلب السابق): تغيير نص "قيد المراجعة" إلى "تم الاستلام"
                let displayedStatus = order.status;
                if (displayedStatus === 'قيد المراجعة' || displayedStatus.toLowerCase() === 'pending') {
                    displayedStatus = 'تم الاستلام';
                }

                // تحديد فئة اللون بناءً على الحالة الحقيقية من السيرفر
                if (order.status.includes('تم') || order.status.includes('Sent')) statusClass = 'status-completed';
                if (order.status.includes('رفض') || order.status.includes('Cancelled')) statusClass = 'status-rejected';

                // استخدام لوجو الستور كخيار احتياطي إذا كانت الصورة مفقودة
                const itemImage = order.image || './images/BerlinStore.png';
                // ----------------------------------------------------


                const cardHTML = `
                        <div class="order-history-card">
                            <img src="${itemImage}" alt="Product" class="order-card-img">
                            <div class="order-card-info">
                                <div class="order-card-header">
                                    <span class="order-product-name">${order.product}</span>
                                    <span class="order-id">#${order.orderId}</span>
                                </div>
                                <div class="order-date">${dateStr}</div>
                                <div class="order-card-footer">
                                    <span class="order-price">${order.price} EGP</span>
                                    <span class="order-status ${statusClass}">${displayedStatus}</span>
                                </div>
                            </div>
                        </div>
                    `;
                // التأكد من أن الحاوية موجودة قبل الإضافة
                if (container) container.innerHTML += cardHTML;
            });
        }

        // دالة مساعدة لتحديث نصوص النافذة
        function updateAuthModalUI() {
            const authTitle = document.getElementById('authTitle');
            const submitBtn = document.getElementById('submitAuthBtn');
            const toggleText = document.getElementById('toggleAuthText');
            const toggleBtn = document.getElementById('toggleAuthBtn');

            if (window.isLoginMode) {
                if (authTitle) authTitle.textContent = "تسجيل الدخول";
                if (submitBtn) submitBtn.textContent = "تسجيل الدخول";
                if (toggleText) toggleText.textContent = "ليس لديك حساب؟";
                if (toggleBtn) toggleBtn.textContent = "إنشاء حساب جديد";
            } else {
                if (authTitle) authTitle.textContent = "إنشاء حساب جديد";
                if (submitBtn) submitBtn.textContent = "إنشاء حساب";
                if (toggleText) toggleText.textContent = "لديك حساب بالفعل؟";
                if (toggleBtn) toggleBtn.textContent = "تسجيل الدخول";
            }
        }

        // ================================================================
        // 3. دالة زر "طلباتي" الذكي
        // ================================================================
        window.openMyOrders = function () {
            try {
                if (typeof firebase === 'undefined' || !firebase.auth) {
                    window.location.hash = '#my-orders-auth-page';
                    return;
                }
                const user = firebase.auth().currentUser;
                if (user) {
                    // 👇 هنا كان الخطأ: غيرنا #shipping لـ #my-orders-page
                    window.location.hash = '#my-orders-page';

                    // استدعاء دالة جلب البيانات
                    if (typeof fetchUserOrders === 'function') {
                        fetchUserOrders();
                    }
                } else {
                    window.location.hash = '#my-orders-auth-page';
                }
            } catch (error) {
                console.error("Error:", error);
                window.location.hash = '#my-orders-auth-page';
            }
        };

        // ================================================================
        // 4. تهيئة النظام عند تحميل الصفحة (DOM Content Loaded)
        // ================================================================
        document.addEventListener('DOMContentLoaded', function () {
            console.log("🚀 System Initialized...");

            // --- إعدادات فايربيس ---
            const firebaseConfig = {
                apiKey: "AIzaSyAsrl6fyQ65lGU22WlTsm8HDtjhKYKw4bs",
                authDomain: "berlin-storegoe-login.firebaseapp.com",
                projectId: "berlin-storegoe-login",
                storageBucket: "berlin-storegoe-login.firebasestorage.app",
                messagingSenderId: "429636991312",
                appId: "1:429636991312:web:38bb70e5186173ae809455",
                measurementId: "G-WGF1G0B6FD"
            };

            if (!firebase.apps.length) {
                firebase.initializeApp(firebaseConfig);
            }
            const auth = firebase.auth();

            // --- تعريف العناصر ---
            const btnSignupMain = document.getElementById('btn-signup'); // زر الهيدر
            const btnLoginMain = document.getElementById('btn-login');   // زر الهيدر
            const emailInput = document.getElementById('userEmail');
            const passInput = document.getElementById('userPassword');
            const submitBtn = document.getElementById('submitAuthBtn'); // زر التنفيذ داخل النافذة
            const toggleBtn = document.getElementById('toggleAuthBtn'); // زر التبديل داخل النافذة
            const msgBox = document.getElementById('authMessage');

            const authInputs = [emailInput, passInput];
            authInputs.forEach(input => {
                if (input) {
                    input.addEventListener('keydown', function (event) {
                        if (event.key === 'Enter') {
                            event.preventDefault();
                            if (submitBtn) submitBtn.click();
                        }
                    });
                }
            });
            // --- تفعيل أزرار الهيدر الرئيسية (إن وجدت) ---
            if (btnSignupMain) btnSignupMain.onclick = () => window.openAuthModal('signup');
            if (btnLoginMain) btnLoginMain.onclick = () => window.openAuthModal('login');

            // --- تفعيل زر التبديل (Toggle) داخل النافذة ---
            if (toggleBtn) {
                toggleBtn.onclick = () => {
                    window.isLoginMode = !window.isLoginMode;
                    updateAuthModalUI();
                };
            }

            // --- تفعيل زر التنفيذ (Submit) ---
            if (submitBtn) {
                submitBtn.addEventListener('click', function () {
                    const email = emailInput.value;
                    const pass = passInput.value;

                    msgBox.style.color = "yellow";
                    msgBox.textContent = "جاري المعالجة...";

                    if (pass.length < 6) {
                        msgBox.style.color = "red";
                        msgBox.textContent = "كلمة المرور ضعيفة (6 أرقام على الأقل)";
                        return;
                    }

                    // اختيار الدالة المناسبة بناءً على الوضع الحالي
                    const authAction = window.isLoginMode
                        ? auth.signInWithEmailAndPassword(email, pass)
                        : auth.createUserWithEmailAndPassword(email, pass);

                    authAction
                        .then((userCredential) => {
                            msgBox.style.color = "#00ff00";
                            msgBox.textContent = window.isLoginMode ? "🔓 تم تسجيل الدخول!" : "✅ تم إنشاء الحساب!";

                            setTimeout(() => {
                                document.getElementById('authModal').classList.remove('is-visible');
                                document.getElementById('authModal').style.display = 'none';
                                document.getElementById('overlay').style.display = 'none';
                                window.location.hash = '#my-orders-page';
                                // إذا كان المستخدم يحاول فتح طلباتي، حوله للصفحة الصحيحة
                                if (window.location.hash === '#my-orders-auth-page') {
                                    window.location.hash = '#shipping';
                                }
                            }, 1500);
                        })
                        .catch((error) => {
                            console.error(error);
                            let errorText = "حدث خطأ: " + error.message;
                            if (error.code === 'auth/email-already-in-use') errorText = "هذا الإيميل مسجل بالفعل!";
                            if (error.code === 'auth/user-not-found' || error.code === 'auth/wrong-password') errorText = "بيانات الدخول غير صحيحة!";
                            if (error.code === 'auth/invalid-email') errorText = "شكل الإيميل غير صحيح!";

                            msgBox.style.color = "red";
                            msgBox.textContent = errorText;
                        });
                });
            }

            auth.onAuthStateChanged((user) => {
                const loginContent = document.getElementById('login-state-content');
                const userContent = document.getElementById('logged-user-content');
                const navUserImg = document.getElementById('nav-user-img');
                const navUserEmail = document.getElementById('nav-user-email');
                const btnLoginMain = document.getElementById('btn-login');
                const btnSignupMain = document.getElementById('btn-signup');

                if (user) {
                    // --- 🟢 المستخدم مسجل دخول ---

                    // 1. استدعاء فوري للرتبة (BRONZE) وبدء جلب الطلبات
                    if (typeof applyUserRankUI === 'function') applyUserRankUI(0);
                    if (typeof fetchUserOrders === 'function') fetchUserOrders(true);

                    // 2. تحديث واجهة المستخدم
                    if (loginContent) loginContent.style.display = 'none';
                    if (userContent) userContent.style.display = 'flex';

                    if (navUserImg) navUserImg.src = user.photoURL || "./images/BerlinStore.png";

                    // ✅✅ التعديل الحاسم: استخدام الاسم المحفوظ أولاً ✅✅
                    if (navUserEmail) {
                        // إذا كان user.displayName موجوداً، استخدمه، وإلا استخدم جزء من البريد الإلكتروني
                        const nameToDisplay = user.displayName
                            ? user.displayName.split(' ')[0] // نأخذ الكلمة الأولى فقط من الاسم المحفوظ
                            : user.email.split('@')[0];

                        navUserEmail.textContent = nameToDisplay;
                    }

                    // تحميل بيانات البروفايل (لصفحة الإعدادات)
                    if (typeof loadProfileData === 'function') loadProfileData(user);

                    // إخفاء أزرار الهيدر
                    if (btnLoginMain) btnLoginMain.style.display = 'none';
                    if (btnSignupMain) {
                        btnSignupMain.textContent = "👤 حسابي";
                        btnSignupMain.onclick = () => window.location.hash = '#shipping';
                    }

                } else {
                    // --- 🔴 المستخدم غير مسجل ---
                    if (loginContent) loginContent.style.display = 'flex';
                    if (userContent) userContent.style.display = 'none';

                    if (btnLoginMain) btnLoginMain.style.display = 'inline-block';
                    if (btnSignupMain) {
                        btnSignupMain.textContent = "إنشاء حساب جديد";
                        btnSignupMain.onclick = () => window.openAuthModal('signup');
                    }
                }
            });

            // --- مراقبة حالة المستخدم ---
            auth.onAuthStateChanged((user) => {
                if (user) {
                    // إخفاء أزرار الدخول في الهيدر وإظهار الاسم
                    if (btnLoginMain) btnLoginMain.style.display = 'none';
                    if (btnSignupMain) {
                        btnSignupMain.textContent = "👤 حسابي";
                        btnSignupMain.onclick = () => window.location.hash = '#shipping'; // يفتح صفحة الطلبات
                    }
                } else {
                    // إعادة الأزرار لطبيعتها عند تسجيل الخروج
                    if (btnLoginMain) btnLoginMain.style.display = 'inline-block';
                    if (btnSignupMain) {
                        btnSignupMain.textContent = "إنشاء حساب جديد";
                        btnSignupMain.onclick = () => window.openAuthModal('signup');
                    }
                }
            });
        });

        // متغير لتخزين الموسيقى الحالية لمنع التداخل
        let currentKaitoMusic = null;

        function triggerKaitouKidFullEffect() {
            console.log("🎩 Showtime! Starting Kaito Kid Effect with SFX...");

            const logo = document.querySelector('#navbar .logo-area img');
            const card = document.getElementById('kaito-card');
            const smoke = document.getElementById('kid-smoke');

            if (!logo || !card || !smoke) {
                console.error("❌ خطأ: تأكد من وجود عناصر HTML (الكارت والدخان) والصورة");
                return;
            }

            // --- 1. تعريف الأصوات ---
            const music = new Audio('./sounds/kid_theme.mp3');  // الموسيقى
            const flySfx = new Audio('./sounds/card_fly.mp3');  // صوت الطيران
            const poofSfx = new Audio('./sounds/smoke_poof.mp3'); // صوت الدخان

            // ضبط مستويات الصوت (اختياري)
            music.volume = 0.8;
            flySfx.volume = 1.0; // صوت الرمية عالي
            poofSfx.volume = 1.0; // صوت الاختفاء عالي

            // --- 2. إدارة الموسيقى (عشان ميتداخلوش لو ضغطت مرتين) ---
            if (currentKaitoMusic) {
                currentKaitoMusic.pause();
                currentKaitoMusic.currentTime = 0;
            }
            currentKaitoMusic = music; // حفظ الموسيقى الجديدة

            // تشغيل الموسيقى + صوت رمي الكارت فوراً
            music.play().catch(e => console.warn("Music error:", e));
            flySfx.play().catch(e => console.warn("Fly SFX error:", e));


            // --- 3. حركة الكارت (Visuals) ---
            const rect = logo.getBoundingClientRect();

            // تجهيز الكارت
            card.style.display = 'block';
            card.style.top = '-150px';
            card.style.left = '110%';
            card.style.transform = 'rotate(0deg)';

            // الأنيميشن (دخول الكارت)
            setTimeout(() => {
                card.style.top = `${rect.top}px`;
                card.style.left = `${rect.left}px`;
                card.style.width = `${rect.width}px`;
                card.style.transform = 'rotate(-15deg)';
            }, 100);

            // إخفاء اللوجو
            setTimeout(() => {
                logo.style.opacity = '0';
                logo.style.transition = 'opacity 0.2s';
            }, 800);

            // --- 4. مرحلة النهاية (بعد 8 ثواني) ---
            setTimeout(() => {
                // تشغيل صوت الدخان
                poofSfx.play().catch(e => console.warn("Poof SFX error:", e));

                // تحريك الدخان
                smoke.style.top = `${rect.top - 20}px`;
                smoke.style.left = `${rect.left - 20}px`;
                smoke.classList.add('poof-effect');

                // اختفاء الكارت وظهور اللوجو
                card.style.display = 'none';
                logo.style.opacity = '1';

                // تنظيف كلاس الأنيميشن
                setTimeout(() => {
                    smoke.classList.remove('poof-effect');
                }, 1000);

            }, 8000); // الموسيقى ستستمر في العمل لأننا لم نوقفها هنا
        }

        function openItakuraDiary() {
            const overlay = document.getElementById('itakura-diary-overlay');
            const sohaylDiary = document.getElementById('sohayl-diary-overlay');

            if (sohaylDiary) sohaylDiary.style.display = 'none'; // إغلاق مذكرة سهيل أولا

            if (overlay) {
                overlay.classList.add('active'); // الكلاس Active هو اللي بيظهرها في CSS
                overlay.style.display = 'block';
                document.body.style.overflow = 'hidden';
            }
        }
        function closeOverlay(type) {
            if (type === 'diary') {
                const diary = document.getElementById('itakura-diary-overlay');
                if (diary) {
                    diary.classList.remove('active');
                    diary.style.display = 'none'; // ✅ التأكد من الإخفاء التام
                }
            } else if (type === 'hacking') {
                const hacking = document.getElementById('vermouth-console-overlay');
                if (hacking) hacking.style.display = 'none';
            }
            // التأكد من إعادة التمرير للموقع
            document.body.style.overflow = 'auto';
        }
        function openSohaylDiary() {
            console.log("🚀 محاولة فتح مذكرات سهيل...");

            // 1. إغلاق أي نوافذ أخرى
            const itakuraOverlay = document.getElementById('itakura-diary-overlay');
            if (itakuraOverlay) itakuraOverlay.style.display = 'none';

            // 🛑 لو موسيقى إيتاكورا شغالة، نوقفها
            if (typeof itakuraAudio !== 'undefined' && itakuraAudio) {
                itakuraAudio.pause();
                itakuraAudio.currentTime = 0;
            }

            // 2. إظهار المذكرة
            const sohaylDiary = document.getElementById('sohayl-diary-overlay');
            if (sohaylDiary) {
                sohaylDiary.style.display = 'block';
                document.body.style.overflow = 'hidden';
                console.log("✅ تم فتح نافذة المذكرة.");

                // --- 🎵 تشغيل موسيقى سهيل ---
                // التأكد من إيقاف أي صوت سابق لسهيل
                if (sohaylAudio) {
                    sohaylAudio.pause();
                    sohaylAudio.currentTime = 0;
                }

                // تعريف الصوت الجديد
                console.log("🎵 جاري تحميل ملف الصوت: ./sounds/sohayl.mp3");
                sohaylAudio = new Audio('./sounds/sohayl.mp3');
                sohaylAudio.volume = 0.6;
                sohaylAudio.loop = true; // تكرار

                // محاولة التشغيل
                const playPromise = sohaylAudio.play();

                if (playPromise !== undefined) {
                    playPromise.then(_ => {
                        console.log("✅ الصوت اشتغل بنجاح!");
                    })
                        .catch(error => {
                            console.error("❌ فشل تشغيل الصوت:", error);
                            console.log("💡 تأكد أن الملف 'sohayl.mp3' موجود داخل مجلد 'sounds'");
                        });
                }
            } else {
                console.error("❌ لم يتم العثور على عنصر 'sohayl-diary-overlay' في HTML");
            }

            // إخفاء الناف بار للموبايل
            const mobileNav = document.getElementById('mobile-nav');
            if (mobileNav) mobileNav.style.display = 'none';

            // إظهار التروفي
            if (typeof showPlaystationTrophy === 'function') {
                showPlaystationTrophy("مذكرات سهيل السرية");
            }
        }
        function closeSohaylDiary() {
            const sohaylDiary = document.getElementById('sohayl-diary-overlay');
            if (sohaylDiary) {
                sohaylDiary.style.display = 'none';

                // --- 🔇 إيقاف الموسيقى عند الإغلاق ---
                if (sohaylAudio) {
                    console.log("🔇 تم إيقاف الموسيقى.");
                    sohaylAudio.pause();
                    sohaylAudio.currentTime = 0;
                }
            }

            if (window.innerWidth <= 768) {
                const mobileNav = document.getElementById('mobile-nav');
                if (mobileNav) mobileNav.style.display = 'flex';
            }

            document.body.style.overflow = 'auto';
        }

        const siteTypes = [
            {
                name: "موقع تعريفي", details: "عرض خدمات، معلومات، فريق عمل، تواصل.",
                svg: '<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2L2 7l10 5 10-5-10-5z"></path><path d="M2 17l10 5 10-5M2 12l10 5 10-5"></path></svg>'
            },

            {
                name: "متجر إلكتروني", details: "عرض منتجات، سلة، دفع، لوحة تحكم بسيطة.",
                svg: '<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg>'
            },

            {
                name: "مدونة/مجلة", details: "نشر محتوى مقالات، تصنيفات، وأداء سريع.",
                svg: '<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><line x1="10" y1="9" x2="8" y2="9"></line></svg>'
            },

            {
                name: "صفحة هبوط ", details: "صفحة واحدة لمنتج أو خدمة معينة (Landing Page) .",
                svg: '<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="3" y1="9" x2="21" y2="9"></line><line x1="9" y1="21" x2="9" y2="9"></line></svg>'
            },

            {
                name: "طلب مخصص / أخرى", details: "لطلب أي نوع موقع أو خدمة غير مدرجة أعلاه.",
                svg: '<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line></svg>'
            }
        ];

        // 💡 دالة 1: لإظهار اختيارات نوع الموقع (تم التعديل لدمج SVG)
        function showSiteTypeOptions() {
            const cardElement = document.getElementById('website-design-card');
            const overlay = cardElement.querySelector('.offer-overlay');
            const selectionDiv = cardElement.querySelector('.site-type-selection');
            const optionsContainer = document.getElementById('site-type-options-container');

            overlay.classList.add('hidden');
            overlay.style.pointerEvents = 'none';

            selectionDiv.style.opacity = '1';
            selectionDiv.style.pointerEvents = 'auto';

            optionsContainer.innerHTML = '';
            siteTypes.forEach(type => {
                const option = document.createElement('div');
                option.className = 'site-type-option';

                if (type.name === "أمر مخصص / أخرى") {
                    option.classList.add('custom-order-type');
                }

                // 💡 التعديل هنا: إضافة الـ SVG
                option.innerHTML = `
                                                                                                        <div style="margin-bottom: 8px;">${type.svg}</div>
                                                                                                        <div>${type.name}</div>
                                                                                                        <small style="font-weight: normal; margin-top: 5px;">${type.details}</small>
                                                                                                    `;
                option.onclick = () => selectSiteType(type.name);
                optionsContainer.appendChild(option);
            });
        }

        // 💡 دالة 2: لمعالجة اختيار نوع الموقع والانتقال لنموذج الطلب
        function selectSiteType(siteType) {
            const cardElement = document.getElementById('website-design-card');
            const selectionDiv = cardElement.querySelector('.site-type-selection');
            const form = cardElement.querySelector('.custom-order-form');

            // 1. إخفاء شاشة الاختيار
            selectionDiv.style.opacity = '0';
            selectionDiv.style.pointerEvents = 'none';

            // 2. تحديث عنوان النموذج والحقل المخفي
            document.getElementById('selected-site-type-title').textContent = `[ ${siteType} ]`;
            document.getElementById('site-type-hidden-input').value = siteType;

            // 3. إظهار نموذج الطلب
            form.classList.add('visible');
        }

        // 💡 دالة 3: للرجوع من شاشة الاختيار إلى الغلاف الأولي
        function goBackToOffer(cardId) {
            const cardElement = document.getElementById(cardId);
            const overlay = cardElement.querySelector('.offer-overlay');
            const selectionDiv = cardElement.querySelector('.site-type-selection');

            // إخفاء شاشة الاختيار
            selectionDiv.style.opacity = '0';
            selectionDiv.style.pointerEvents = 'none';

            // إظهار الغلاف الأولي
            overlay.classList.remove('hidden');
            overlay.style.pointerEvents = 'auto';
        }

        /* ====================================================== */
        /* ✅ START: دالة إظهار رسالة السلة الفارغة (النسخة المعدلة) */
        /* ====================================================== */
        function showEmptyCartModal() {
            const modal = document.getElementById('confirmationModal');
            const title = modal.querySelector('#confirmationTitle');
            const message = modal.querySelector('#confirmationMessage');
            const yesBtn = modal.querySelector('#confirm-yes-btn');
            const noBtn = modal.querySelector('#confirm-no-btn');
            const closeBtn = modal.querySelector('.close-btn');
            const overlay = document.getElementById('overlay');

            // 1. إخفاء العناصر التي لا نريدها
            message.style.display = 'none'; // إخفاء سطر الرسالة "الرجاء إضافة..."
            noBtn.style.display = 'none';   // إخفاء زر "إغلاق"

            // 2. تغيير نص العنوان والزر المتبقي
            title.textContent = 'سلة التسوق فارغة!';
            yesBtn.textContent = 'متابعة التسوق';

            // 3. (مهم) دالة لإعادة النافذة لحالتها الأصلية عند الإغلاق
            function restoreModalDefaults() {
                message.style.display = 'block'; // إعادة إظهار الرسالة
                noBtn.style.display = 'inline-block'; // إعادة إظهار الزر

                // إعادة النصوص الأصلية الخاصة بتأكيد الدفع
                title.textContent = 'تأكيد العملية';
                message.textContent = 'هل قمت بإتمام عملية الدفع بالفعل؟';
                yesBtn.textContent = 'نعم، قمت بالدفع';
                noBtn.textContent = 'لا';

                // إعادة وظائف الأزرار الأصلية (سيتم تحديدها عند استدعاء الدفع)
                yesBtn.onclick = null;
                noBtn.onclick = null;
                closeBtn.onclick = () => closeModal('confirmationModal');
                overlay.onclick = () => closeModal('all');
            }

            // 4. تغيير وظيفة زر "متابعة التسوق"
            yesBtn.onclick = () => {
                closeModal('confirmationModal');
                window.location.hash = '#home'; // الانتقال للصفحة الرئيسية
                restoreModalDefaults(); // إعادة النافذة لوضعها الطبيعي
            };

            // 5. تعديل زر الإغلاق (X) في الزاوية ليعيد النافذة لوضعها الطبيعي
            closeBtn.onclick = () => {
                closeModal('confirmationModal');
                restoreModalDefaults();
            };

            // 6. تعديل الـ overlay ليعيد النافذة لوضعها الطبيعي
            overlay.onclick = () => {
                closeModal('all');
                restoreModalDefaults();
            };

            // 7. إظهار النافذة
            showModal('confirmationModal');
        }
        /* ====================================================== */
        /* ✅ END: دالة إظهار رسالة السلة الفارغة */
        /* ====================================================== */

        // ======================================================
        // ✅ START: دالة الترجمة وتغيير اتجاه الموقع
        // ======================================================

        function setLanguage(lang) {
            currentLanguage = lang; // تحديث المتغير العام
            const translationData = translations[lang];

            // 1. تحديث اتجاه ولغة الصفحة بالكامل
            document.documentElement.setAttribute('lang', lang);
            document.documentElement.setAttribute('dir', lang === 'ar' ? 'rtl' : 'ltr');

            // 2. البحث عن كل العناصر التي تحتاج ترجمة
            document.querySelectorAll('[data-translate]').forEach(element => {
                const key = element.dataset.translate;
                if (translationData[key]) {

                    // 3. التحقق إذا كان العنصر هو input (لتغيير الـ placeholder)
                    if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                        element.placeholder = translationData[key];
                    }
                    // 4. التحقق إذا كان العنصر هو زر (لتغيير القيمة)
                    else if (element.tagName === 'INPUT' && (element.type === 'submit' || element.type === 'button')) {
                        element.value = translationData[key];
                    }
                    // 5. باقي العناصر (لتغيير المحتوى النصي)
                    else {
                        // استخدام querySelector لإيجاد النص فقط وتجنب استبدال الأيقونات
                        const textNode = element.firstChild;
                        if (textNode && textNode.nodeType === Node.TEXT_NODE) {
                            textNode.textContent = translationData[key] + (element.querySelector('svg') ? ' ' : ''); // إضافة مسافة إذا كان هناك أيقونة
                        } else {
                            element.textContent = translationData[key];
                        }
                    }
                }
            });

            // 6. (اختياري) تحديث النصوص التي ليس لها data-translate (مثل زر الديسكورد)
            // يمكنك إضافة أي عناصر أخرى هنا بنفس الطريقة
            const discordBtn = document.querySelector('.discord-button span');
            if (discordBtn) discordBtn.textContent = translationData['join_discord'];

            const trackBtn = document.querySelector('button[onclick*="#shipping"]');
            if (trackBtn) trackBtn.textContent = translationData['track_order'];

            const searchInput = document.getElementById('navbarProductSearch');
            if (searchInput) searchInput.placeholder = translationData['search_placeholder'];

            // إعادة تحميل الأقسام لتحديث أسعار المنتجات
            // (هذه الخطوة ضرورية لأن دالة تغيير العملة أصبحت جزءًا من هذه الدالة)
            loadAllSections();
            renderCart();

            // تحديث حاسبات الأسعار
            if (document.getElementById('valorant-boosting').style.display === 'block') {
                calculateBoostingPrice();
            }
            if (document.getElementById('fortnite-boosting').style.display === 'block') {
                calculateFortniteBoostingPrice();
            }
            if (document.getElementById('xboxGiftingModal').classList.contains('is-visible')) {
                calculateXboxGiftingPrice();
            }
        }

        // ======================================================
        // ✅ END: دالة الترجمة وتغيير اتجاه الموقع
        // ======================================================

        function loadXboxSection() {
            const cardsContainer = document.getElementById('xboxGiftCardsContainer');
            const gamesContainer = document.getElementById('xboxPopularGamesContainer');

            if (!cardsContainer || !gamesContainer) return;

            cardsContainer.innerHTML = '';
            gamesContainer.innerHTML = '';

            for (const productId in productsData) {
                const product = productsData[productId];

                if (product.category === 'xbox-cards') {
                    // هنا هيتحط (الكروت الرفيعة) فقط
                    renderProductItem(product, cardsContainer, 'xbox-cards', true);
                } else if (product.category === 'xbox-popular') {
                    // هنا هيتحط (ماينكرافت والجيم باس) فقط
                    renderProductItem(product, gamesContainer, 'xbox-popular', true);
                }
            }

            /* --- ✅✅ START: تم إيقاف كود المضاعفة لأنه غير مطلوب مع 'alternate' ✅✅ ---
            const productsInContainer = gamesContainer.querySelectorAll('.product-item');
            if (productsInContainer.length > 0) {
                // مضاعفة المنتجات لضمان حركة مستمرة
                productsInContainer.forEach(productCard => {
                    const clone = productCard.cloneNode(true); // استنساخ الكارت
                    gamesContainer.appendChild(clone); // إضافة النسخة في الآخر
                });
            }
            --- ✅✅ END: كود مضاعفة المنتجات --- */
        }


        // ✅ استبدل الدالة القديمة بهذه النسخة النهائية والمطورة
        function performInstantSearch(isExpanded = false) {
            const query = document.getElementById('navbarProductSearch').value.toLowerCase().trim();
            const resultsContainer = document.getElementById('navbar-search-results');
            if (!resultsContainer) return;

            // ✅ التحكم في كلاس التوسيع بناءً على ضغطة Enter
            if (isExpanded) {
                resultsContainer.classList.add('expanded');
            } else {
                resultsContainer.classList.remove('expanded');
            }

            if (query.length < 2) {
                resultsContainer.classList.remove('visible');
                return;
            }

            const searchTerm = query;
            resultsContainer.innerHTML = '';

            let matches = [];
            const knownPlatforms = ['steam', 'riot', 'epic', 'roblox', 'microsoft', 'hoyoverse', 'activision', 'discord'];

            for (const id in productsData) {
                const product = productsData[id];
                let score = 0;
                const title = product.title.toLowerCase();
                const shortDesc = (product.shortDescription || '').toLowerCase();
                const platform = (product.platform || '').toLowerCase();
                const category = (product.category || '').toLowerCase();

                if (knownPlatforms.includes(searchTerm) && (category === 'games' || category === 'offline-steam')) {
                    continue;
                }

                if (searchTerm === 'steam' && product.id.startsWith('steamGift')) {
                    score += 100;
                }

                if (title.includes(searchTerm)) {
                    score += 10;
                }

                if (platform.includes(searchTerm)) {
                    score += 8;
                }

                if (shortDesc.includes(searchTerm)) {
                    score += 2;
                }

                if (score > 0) {
                    matches.push({ product, score });
                }
            }

            matches.sort((a, b) => b.score - a.score);

            // ✅ تحديد عدد النتائج للعرض (5 نتائج أو كل النتائج)
            const resultsToShow = isExpanded ? matches : matches.slice(0, 5);

            if (resultsToShow.length > 0) {
                resultsToShow.forEach(match => {
                    const product = match.product;
                    let price = product.price || 0;
                    let currencySymbol = 'EGP';

                    if (product.options) {
                        const firstOptionKey = Object.keys(product.options)[0];
                        price = product.options[firstOptionKey].price;
                    }

                    if (currentCurrency === 'USD') {
                        const usdPrice = product.usd_price || (product.options ? product.options[Object.keys(product.options)[0]].usd_price : null) || price / exchangeRate;
                        price = usdPrice.toFixed(2);
                        currencySymbol = 'USD';
                    }

                    const resultItem = document.createElement('a');
                    resultItem.className = 'search-result-item';
                    resultItem.href = `#product/${product.id}`;
                    resultItem.onclick = closeInstantSearch;
                    resultItem.innerHTML = `
                                                                                                                                                                    <img src="${product.image}" alt="${product.title}" loading="lazy">
                                                                                                                                                                    <div class="result-details">
                                                                                                                                                                        <span class="result-title">${product.title}</span>
                                                                                                                                                                        <span class="result-price">${price} ${currencySymbol}</span>
                                                                                                                                                                    </div>
                                                                                                                                                                `;
                    resultsContainer.appendChild(resultItem);
                });
            } else {
                resultsContainer.innerHTML = `<div class="no-results-item">لا توجد نتائج مطابقة</div>`;
            }

            resultsContainer.classList.add('visible');
        }

        document.addEventListener('DOMContentLoaded', function () {
            // --- (1) كود شاشة التحميل (هذا الكود صحيح وموجود عندك) ---
            const loadingScreen = document.getElementById('loading-screen');
            if (loadingScreen) {
                setTimeout(() => {
                    loadingScreen.classList.add('hidden');
                }, 3000);
            }

            // --- (2) ✅✅ الكود الكامل والصحيح للمؤشر الجديد ✅✅ ---
            const cursorRing = document.querySelector('.custom-cursor-ring');
            const cursorDot = document.querySelector('.custom-cursor-dot');
            // هنا نحدد كل العناصر التي نريد أن يتفاعل معها المؤشر
            const interactiveElements = document.querySelectorAll('a, button, input, select, .product-item, .service-offer-card, .rank-option, .close-btn, .tab-button');

            window.addEventListener('mousemove', e => {
                // تحريك الحلقة والنقطة مع الماوس
                cursorRing.style.left = `${e.clientX}px`;
                cursorRing.style.top = `${e.clientY}px`;
                cursorDot.style.left = `${e.clientX}px`;
                cursorDot.style.top = `${e.clientY}px`;
            });

            // هذا الجزء هو المسؤول عن التأثير التفاعلي
            interactiveElements.forEach(el => {
                el.addEventListener('mouseenter', () => {
                    document.body.classList.add('cursor-interactive');
                });
                el.addEventListener('mouseleave', () => {
                    document.body.classList.remove('cursor-interactive');
                });
            });

            // --- (3) باقي كود الـ JavaScript الخاص بك يبدأ من هنا ---
            // ( ... باقي الدوال مثل handleRouting, loadGamesToHome, etc ... )

        });

        document.querySelectorAll('.product-item, .subscription-item, .service-offer-card, .rental-card').forEach(card => {
            card.addEventListener('mousemove', e => {
                const rect = card.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                card.style.setProperty('--mouse-x', `${x}px`);
                card.style.setProperty('--mouse-y', `${y}px`);
            });
            card.addEventListener('mouseleave', () => {
                card.style.setProperty('--mouse-x', `-100%`);
                card.style.setProperty('--mouse-y', `-100%`);
            });
        });

    </script>
    <div id="minecraft-product-page" class="category-main-content" style="display: none;">
    </div>


    <div id="discordDecorationsPage" class="section glass-card">
        <div id="discordDecorationsPageContainer">

            <div id="discord-calculator-card">
                <div class="card-info-section">
                    <img src="./images/discord-decorations.png" alt="Discord Decorations" class="card-icon">
                    <h3>زين بروفايلك في ديسكورد</h3>

                    <div class="volume-discount-badge">🎉 خصم 5% على كل قطعة إضافية!</div>

                    <p>اختر قيمة الديكور الذي تريده، حدد الكمية، ثم اذكر أسماء الديكورات المطلوبة ليتم شحنها مباشرة لحسابك.</p>
                </div>

                <div class="card-form-section">
                    <div class="input-wrapper" style="width: 100%;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil-square" viewBox="0 0 16 16">
                            <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z" />
                            <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z" />
                        </svg>
                        <textarea id="discord-deco-names" placeholder="اكتب أسماء الديكورات هنا (افصل بينها بفاصلة)" rows="2"></textarea>
                    </div>

                    <div class="calculator-controls">
                        <div class="input-group">
                            <select id="discord-usd-amount" onchange="calculateDiscordDecoPrice()">
                                <option value="" disabled selected>اختر السعر</option>
                                <option value="4.99">$4.99</option>
                                <option value="5.99">$5.99</option>
                                <option value="6.99">$6.99</option>
                                <option value="7.99">$7.99</option>
                                <option value="8.49">$8.49</option>
                                <option value="8.99">$8.99</option>
                                <option value="9.99">$9.99</option>
                                <option value="10.99">$10.99</option>
                                <option value="11.99">$11.99</option>
                                <option value="13.99">$13.99</option>
                                <option value="17.99">$17.99</option>
                                <option value="21.99">$21.99</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label>الكمية</label>
                            <div class="quantity-selector-inline">
                                <button id="discord-deco-decrease">-</button>
                                <input type="number" id="discord-deco-quantity" value="1" min="1" oninput="calculateDiscordDecoPrice()">
                                <button id="discord-deco-increase">+</button>
                            </div>
                        </div>
                    </div>

                    <div id="discord-price-display">
                        <span class="price-label">التكلفة الإجمالية:</span>
                        <span class="price-value">...</span>
                    </div>
                    <p id="discord-calc-error" class="error-message"></p>
                    <button class="buy-btn" onclick="handleDiscordDecoOrder()">اطلب الآن</button>
                </div>
            </div>

        </div>
    </div>

    <div id="valorant-boosting" class="section">
        <span class="close-btn" onclick="closeBoostingSection()">&times;</span>
        <h2 style="text-align: center;">Rank Boosting in Valorant 🚀</h2>

        <div id="boosting-cover">
            <img src="./images/5979-valorant-radiant.png" alt="Valorant Boosting" class="cover-image">
            <h3>الرانك بوستينج في فالورانت</h3>
            <p>استخدم حاسبتنا الدقيقة لمعرفة تكلفة الوصول للرانك الذي تحلم به واطلب الخدمة مباشرة. أمان وسرعة في التنفيذ مع أفضل اللاعبين.</p>
            <button class="start-boosting-btn" onclick="showBoostingCalculator()">ابدأ الآن</button>
        </div>

        <div id="boosting-calculator-container">
            <div class="calculator-inputs">
                <p class="form-step-title">الخطوة 1: أدخل بيانات حسابك</p>

                <div class="input-wrapper">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-envelope-fill" viewBox="0 0 16 16">
                        <path d="M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414.05 3.555ZM0 4.697v7.104l5.803-3.558L0 4.697ZM6.761 8.83l-6.57 4.027A2 2 0 0 0 2 14h12a2 2 0 0 0 1.808-1.144l-6.57-4.027L8 9.586l-1.239-.757Zm3.436-.586L16 11.803V4.697l-5.803 3.546Z" />
                    </svg>
                    <input type="email" id="boosting-email" placeholder="ايميل الحساب" required>
                </div>

                <div class="input-wrapper">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-key-fill" viewBox="0 0 16 16">
                        <path d="M3.5 11.5a3.5 3.5 0 1 1 3.163-5H14L15.5 8 14 9.5l-1-1-1 1-1-1-1 1-1-1-1 1H6.663a3.5 3.5 0 0 1-3.163 2zM2.5 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" />
                    </svg>
                    <input type="password" id="boosting-password" placeholder="كلمة المرور" required>
                </div>

                <div class="input-wrapper">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chat-dots-fill" viewBox="0 0 16 16">
                        <path d="M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" />
                    </svg>
                    <input type="text" id="boosting-contact" placeholder="وسيلة تواصل (واتس او ديس..)" required>
                </div>
            </div>

            <div class="rank-selection-area">
                <div class="rank-selector-column">
                    <p class="form-step-title">الخطوة 2: اختر رانكك الحالي</p>
                    <div id="current-rank-selector" class="rank-grid">
                    </div>
                </div>
                <div class="rank-selector-column">
                    <p class="form-step-title">الخطوة 3: اختر الرانك المطلوب</p>
                    <div id="desired-rank-selector" class="rank-grid">
                    </div>
                </div>
            </div>

            <div class="boosting-summary">
                <div id="boosting-price-display">
                    <span class="price-label">المبلغ المطلوب</span>
                    <span class="price-value">0.00 EGP</span>
                </div>
                <button id="boosting-order-btn" class="buy-btn" onclick="handleBoostingOrder()">اطلب الآن</button>
                <p id="boosting-error-message"></p>
            </div>
        </div>
    </div>

    <div id="valorant-coaching" class="section glass-card" style="text-align: center;">
        <h2>اتقن فالورانت مع أفضل المدربين! 🧠</h2>
    </div>

    <div id="fortnite-boosting" class="section">

        <div class="fn-boosting-card">

            <h2 class="fn-boosting-title">Fortnite Level Boosting 🚀</h2>

            <div class="fn-boosting-content">
                <h3>ارفع مستواك الآن في الباتل باس!</h3>

                <div class="fn-calculator">
                    <div class="level-input-group">
                        <label for="fn-current-level">مستواك الحالي:</label>
                        <input type="number" id="fn-current-level" placeholder="لفلك الحالي" min="1" oninput="calculateFortniteBoostingPrice()">
                    </div>
                    <div class="level-input-group">
                        <label for="fn-desired-level">المستوى المطلوب:</label>
                        <input type="number" id="fn-desired-level" placeholder="اللفل المطلوب" min="2" oninput="calculateFortniteBoostingPrice()">
                    </div>
                </div>

                <div id="fn-price-display">
                    <span class="price-label">Total:</span>
                    <span class="price-value">...</span>
                </div>

                <p id="fn-error-message" class="error-message"></p>

                <div class="fn-user-info-form">
                    <p class="form-step-title">بيانات الحساب (مطلوبة للتنفيذ)</p>
                    <div class="input-wrapper">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414.05 3.555zM0 4.697v7.104l5.803-3.558L0 4.697zm6.761 8.83l-6.57 4.027A2 2 0 0 0 2 14h12a2 2 0 0 0 1.808-1.144l-6.57-4.027L8 9.586l-1.239-.757zm3.436-.586L16 11.803V4.697l-5.803 3.546z" /></svg>
                        <input type="email" id="fn-email" placeholder="إيميل حساب Epic Games" required>
                    </div>
                    <div class="input-wrapper">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M3.5 11.5a3.5 3.5 0 1 1 3.163-5H14l1.5 1.5-1.5 1.5-1-1-1 1-1-1-1 1-1-1-1 1H6.663a3.5 3.5 0 0 1-3.163 2zM2.5 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" /></svg>
                        <input type="password" id="fn-password" placeholder="باسورد الحساب" required>
                    </div>
                    <div class="input-wrapper">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" /></svg>
                        <input type="text" id="fn-contact" placeholder="وسيلة تواصل (واتساب أو ديسكورد)" required>
                    </div>
                </div>

                <button id="fn-order-btn" class="buy-btn" onclick="handleFortniteBoostingOrder()">اطلب الآن</button>
            </div>
        </div>
    </div>


    <div id="designs" class="section glass-card">
        <div class="products-container" id="designsContainer">

            <div class="custom-order-card">
                <div class="offer-overlay">
                    <img src="./images/design-offer.png" alt="تصميم جرافيك" class="offer-image">
                    <h3>تصاميم سوشيال ميديا وجرافيك ديزاين</h3>
                    <p class="custom-order-description">احصل على تصاميم احترافية لصفحاتك على السوشيال ميديا، شعارات، أو أي عمل فني تحتاجه..</p>
                    <p class="offer-price-range" style="color: #cda1ff;">السعر يبدأ من 25 ج.م إلى 3000 ج.م</p>

                    <div class="offer-buttons-container">
                        <button type="button" class="offer-order-btn" onclick="revealOrderForm(this)">اطلب</button>
                        <a href="https://discord.gg/D3shcEb5xe" target="_blank" class="offer-discord-btn">
                            <img src="./images/discord.png" alt="Discord">
                            <span>اطلب من</span>
                        </a>
                    </div>
                </div>
                <form id="graphic-design-form" class="custom-order-form">
                    <input type="text" name="name" placeholder="اسمك " required>
                    <input type="email" name="email" placeholder="بريدك الإلكتروني" required>
                    <input type="text" name="contact" placeholder="وسيلة تواصل (واتساب/انستجرام/ديسكورد)" required>
                    <textarea name="order_details" placeholder="اكتب تفاصيل طلبك هنا (نوع التصميم، الألوان المفضلة، أي أفكار لديك)" required></textarea>
                    <p style="font-size: 14px; color: var(--accent-yellow); margin: 10px 0 5px 0; text-align: center;">

                        بعد إرسال الطلب سيتم التواصل معك للاتفاق على التسعير النهائي.

                    </p><button type="submit">إرسال الطلب</button>
                </form>
            </div>

            <div class="custom-order-card">
                <div class="offer-overlay">
                    <img src="./images/design-offer-two.png" alt="تصميم فيديو" class="offer-image">
                    <h3>تصميم مقاطع فيديو وموشن جرافيك</h3>
                    <p class="custom-order-description">حوّل أفكارك إلى فيديو متحرك.خدمة تصميم فيديوهات إعلانية، مقدمات قنوات، ومقاطع موشن جرافيك.</p>
                    <p class="offer-price-range" style="color: #cda1ff;">السعر يبدأ من 50 ج.م إلى 5000 ج.م</p>

                    <div class="offer-buttons-container">
                        <button type="button" class="offer-order-btn" onclick="revealOrderForm(this)">اطلب</button>
                        <a href="https://discord.gg/D3shcEb5xe" target="_blank" class="offer-discord-btn">
                            <img src="./images/discord.png" alt="Discord">
                            <span>اطلب من</span>
                        </a>
                    </div>
                </div>
                <form id="video-editing-form" class="custom-order-form">
                    <input type="text" name="name" placeholder="اسمك " required>
                    <input type="email" name="email" placeholder="بريدك الإلكتروني" required>
                    <input type="text" name="contact" placeholder="وسيلة تواصل (واتساب/انستجرام/ديسكورد)" required>
                    <textarea name="order_details" placeholder="اكتب تفاصيل طلبك هنا (فكرة الفيديو، مدته، المراجع التي تريدها)" required></textarea>
                    <p style="font-size: 14px; color: var(--accent-yellow); margin: 10px 0 5px 0; text-align: center;">

                        بعد إرسال الطلب سيتم التواصل معك للاتفاق على التسعير النهائي.

                    </p>
                    <button type="submit">إرسال الطلب</button>
                </form>
            </div>

            <div class="custom-order-card">
                <div class="offer-overlay">
                    <img src="./images/gaming-content-design.png" alt="تصميمات جيمنج وصناعة محتوى" class="offer-image">
                    <h3>تصميمات للجيمنج وصناعة المحتوى</h3>
                    <p class="custom-order-description">تصميمات مخصصة للاعبين وصناع المحتوى: انترو قنوات، شعارات وبنرات للفرق،أي تصميم آخر لتجعل محتواك مميزًا.</p>
                    <p class="offer-price-range" style="color: #cda1ff;">السعر يبدأ من 40 ج.م إلى 4500 ج.م</p>

                    <div class="offer-buttons-container">
                        <button type="button" class="offer-order-btn" onclick="revealOrderForm(this)">اطلب </button>
                        <a href="https://discord.gg/D3shcEb5xe" target="_blank" class="offer-discord-btn">
                            <img src="./images/discord.png" alt="Discord">
                            <span>اطلب من</span>
                        </a>
                    </div>
                </div>
                <form id="gaming-content-form" class="custom-order-form">
                    <input type="text" name="name" placeholder="اسمك " required>
                    <input type="email" name="email" placeholder="بريدك الإلكتروني" required>
                    <input type="text" name="contact" placeholder="وسيلة تواصل (واتساب/انستجرام/ديسكورد)" required>
                    <textarea name="order_details" placeholder="اكتب تفاصيل طلبك هنا (نوع التصميم، المنصة، المراجع التي تريدها)" required></textarea>
                    <p style="font-size: 14px; color: var(--accent-yellow); margin: 10px 0 5px 0; text-align: center;">

                        بعد إرسال الطلب سيتم التواصل معك للاتفاق على التسعير النهائي.

                    </p>
                    <button type="submit">إرسال الطلب</button>
                </form>
            </div>

        </div>
    </div>




    <div id="developing" class="section glass-card">
        <h2 style="margin: 0 auto; text-align: center;">خدمات التطوير والبرمجة</h2>
        <div class="products-container" id="developingContainer">

            <div class="custom-order-card" id="website-design-card">
                <div class="offer-overlay">
                    <img src="./images/das.png" alt="تصميم موقع" class="offer-image">
                    <h3>باقة تطوير وتصميم موقع إلكتروني</h3>
                    <p class="custom-order-description">امتلك موقعك الخاص. نقوم بتصميم وبرمجة مواقع تعريفية، متاجر إلكترونية، أو أي فكرة لديك.</p>
                    <p class="offer-price-range" style="color: #cda1ff;">السعر يبدأ من 100 ج.م إلى 8000 ج.م</p>
                    <button type="button" class="offer-order-btn" onclick="showSiteTypeOptions()">اطلب الآن</button>
                </div>

                <div class="site-type-selection" style="opacity: 0; pointer-events: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; padding: 25px; box-sizing: border-box; z-index: 3; display: flex; flex-direction: column; align-items: center; justify-content: center; background: linear-gradient(145deg, rgba(44, 26, 64, 0.95), rgba(30, 17, 50, 1));">
                    <h3 style="margin-bottom: 20px; color: var(--accent-yellow);">ما هو نوع الموقع المطلوب؟</h3>
                    <div class="site-type-grid" id="site-type-options-container">
                    </div>
                    <button type="button" onclick="goBackToOffer('website-design-card')" style="margin-top: 25px; background-color: transparent; border: 1px solid #cda1ff; color: #cda1ff; padding: 8px 20px;">&larr; رجوع</button>
                </div>

                <form id="website-design-form" class="custom-order-form">
                    <h3 style="color: var(--green-buy-btn);">الخطوة الأخيرة: بيانات طلب <span id="selected-site-type-title"></span></h3>
                    <input type="text" name="name" placeholder="اسمك " required>
                    <input type="email" name="email" placeholder="بريدك الإلكتروني" required>
                    <input type="text" name="contact" placeholder="وسيلة تواصل (واتساب/انستجرام/ديسكورد)" required>
                    <input type="hidden" name="site_type" id="site-type-hidden-input">
                    <textarea name="order_details" placeholder="اكتب تفاصيل طلبك هنا (الأقسام المطلوبة المطلوب، الميزات، الثيم و الألوان، وأي أفكار عندك)" required></textarea>
                    <p style="font-size: 14px; color: var(--accent-yellow); margin: 10px 0 5px 0; text-align: center;">

                        بعد إرسال الطلب سيتم التواصل معك للاتفاق على التسعير النهائي.

                    </p>
                    <button type="submit">إرسال الطلب</button>
                </form>
            </div>

            <div class="custom-order-card">
                <div class="offer-overlay">
                    <img src="./images/dass.png" alt="تصميم ديسكورد" class="offer-image">
                    <h3>باقة تطوير وتصميم سيرفر ديسكورد</h3>
                    <p class="custom-order-description">حوّل سيرفرك إلى مجتمع احترافي متكامل. نقوم بإعداد الرومات، البوتات، الصلاحيات، وكل ما يلزم لنجاح سيرفرك الخاص.</p>
                    <p class="offer-price-range" style="color: #cda1ff;">السعر يبدأ من 50 ج.م إلى 900 ج.م</p>
                    <button type="button" class="offer-order-btn" onclick="revealOrderForm(this)">اطلب الآن</button>
                </div>

                <form id="discord-server-form" class="custom-order-form">
                    <input type="text" name="name" placeholder="اسمك " required>
                    <input type="email" name="email" placeholder="بريدك الإلكتروني" required>
                    <input type="text" name="contact" placeholder="وسيلة تواصل (واتساب/انستجرام/ديسكورد)" required>
                    <textarea name="order_details" placeholder="اكتب تفاصيل طلبك هنا (فكرة السيرفر، عدد الرومات، البوتات المطلوبة)" required></textarea>
                    <p style="font-size: 14px; color: var(--accent-yellow); margin: 10px 0 5px 0; text-align: center;">
                        بعد إرسال الطلب سيتم التواصل معك للاتفاق على التسعير النهائي.
                    </p>
                    <button type="submit">إرسال الطلب</button>
                </form>
            </div>

        </div>
    </div>

    <div id="toast-container"></div>

    <div id="navbar">

        <div class="logo-area">
            <a href="#home" style="text-decoration: none; line-height: 0;">
                <img src="./images/BerlinStore.png" alt="Store Logo">
            </a>
            <div class="logo-text-container">
                <span class="by-sohayl">By <a href="https://konect.gg/sohayl" target="_blank">Sohayl</a></span>
                <select id="currency-selector" onchange="changeCurrency()">
                    <option value="EGP">🌐𝗘𝗚𝗬𝗣𝗧</option>
                    <option value="USD">🌐𝗚𝗟𝗢𝗕𝗔𝗟</option>
                </select>
            </div>
        </div>

        <div class="user-menu-wrapper" style="position: relative; display: flex; align-items: center;">

            <div id="user-account-btn" class="nav-link" onclick="handleUserClick()" style="cursor: pointer;">

                <div id="login-state-content" style="display: flex; align-items: center; gap: 5px;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--accent-yellow);">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                        <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                    <span style="font-size: 14px; font-weight: bold;">تسجيل الدخول</span>
                </div>

                <div id="logged-user-content" style="
    display: none !important;
    flex-direction: column !important; /* ✅ القوة: يجبر الترتيب على أن يكون عمودياً */
    align-items: center !important;  /* توسيط كل شيء أفقياً */
    gap: 4px !important;
">

                    <img id="nav-user-img" src="" alt="Profile" style="
        width: 35px;
        height: 35px;
        border-radius: 50%;
        object-fit: cover;
        border: 2px solid var(--accent-yellow);
        flex-shrink: 0;
    ">

                    <span id="nav-user-email" style="
        font-size: 11px !important;
        color: #fff;
        font-weight: bold;
        line-height: 1.1;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        display: block;
        max-width: 90px;
        text-align: center; /* لضمان توسيط النص إن كان أقصر */
    "></span>

                </div>

                <div id="user-dropdown-menu" class="dropdown-content" style="min-width: 200px; left: 0; right: auto; top: 100%; margin-top: 10px;">

                    <div style="
        text-align: center;
        padding: 15px 10px;
        border-bottom: 1px solid rgba(255,255,255,0.1);
        margin-bottom: 5px;
        background: rgba(0,0,0,0.2);
    ">

                        <p class="rank-label">رانكك الحالي</p>

                        <span id="dropdown-rank-badge" style="font-size: 13px; font-weight: 900; padding: 3px 10px; border-radius: 15px; display: inline-block; color: #fff; background: #5D4037;">
                            🥉 BRONZE
                        </span>
                    </div>

                    <a href="javascript:void(0)" onclick="openProfileSettings()" class="nav-link" style="text-align: right; color: white; padding: 12px 15px; display: flex; align-items: center; justify-content: flex-start;">

                        <i class="fas fa-user" style="font-size: 16px; margin-left: 10px; color: white;"></i>

                        <span>حسابي</span>
                    </a>

                    <a href="#my-orders-page" onclick="showSection('my-orders-page')" class="nav-link" style="text-align: right; color: white; padding: 12px 15px; display: flex; align-items: center; justify-content: flex-start;">


                        <i class="fas fa-box-open" style="font-size: 16px; margin-left: 10px; color: var(--light-text);"></i>
                        <span>طلباتي</span>
                    </a>

                    <div class="dropdown-divider"></div>

                    <a href="#" onclick="logoutUser()" class="nav-link logout-btn" style="
    /* ✅✅ التعديل الحاسم: جعله أحمر دائمًا في حالته الطبيعية */
    text-align: right;
    color: #ff4757 !important; /* لون أحمر فاتح للتحذير */
    padding: 12px 15px;
    display: flex;
    align-items: center;
    justify-content: flex-start;
">
                        <i class="fas fa-sign-out-alt" style="font-size: 16px; margin-left: 10px; color: #ff4757;"></i>
                        <span>تسجيل الخروج</span>
                    </a>
                </div>
            </div>
        </div>
        <div class="nav-middle-section">
            <a href="#home" class="nav-link">الرئيسية</a>
            <a href="#subscriptions-section" class="nav-link">الاشتراكات</a>
            <div class="dropdown">
                <div class="nav-link">شـحـن</div>
                <div class="dropdown-content">
                    <a href="#valorantPoints" class="nav-link">Valorant Points</a>
                    <a href="#fortnite" class="nav-link">Fortnite</a>
                    <a href="#roblox" class="nav-link">Roblox</a>
                    <a href="#genshinImpact" class="nav-link">Genshin Impact</a>
                    <a href="#rocketleague" class="nav-link">Rocket League</a>
                    <a href="#marvelRivals" class="nav-link">Marvel Rivals</a>

                    <div class="dropdown-divider"></div>
                    <a href="#playstation-section" class="nav-link">PlayStation</a>
                    <a href="#xbox-gifting-section" class="nav-link">Xbox</a>

                    <div class="dropdown-divider"></div>
                    <a href="#discordDecorationsPage" class="nav-link">Discord Decorations</a>
                </div>
            </div>

            <div class="dropdown">
                <div class="nav-link">ستـيـم</div>
                <div class="dropdown-content">
                    <a href="#personal-gifting-section" class="nav-link">جيفت لحسابي الشخصي</a>
                    <a href="#steamGiftCards" class="nav-link">Steam Gift Cards</a>
                    <a href="#steam-points-section" class="nav-link">Steam Points</a>
                    <a href="#offline-steam-section" class="nav-link">حسابات ستيم أوفلاين</a>
                </div>
            </div>

            <div class="dropdown">
                <div class="nav-link">Services</div> <div class="dropdown-content">
                    <a href="#designs" class="nav-link">
                        Designing
                        <svg class="dropdown-logo" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polygon points="12 2 2 7 12 12 22 7 12 2"></polygon>
                            <polyline points="2 17 12 22 22 17"></polyline>
                            <polyline points="2 12 12 17 22 12"></polyline>
                        </svg>
                    </a>
                    <a href="#developing" class="nav-link">
                        Developing
                        <svg class="dropdown-logo" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="16 18 22 12 16 6"></polyline>
                            <polyline points="8 6 2 12 8 18"></polyline>
                        </svg>
                    </a>
                    <div class="dropdown-divider"></div> <a href="#valorant-boosting" class="nav-link">Valorant Boosting</a>
                    <a href="#valorant-coaching" class="nav-link">Valorant Coaching</a>
                    <div class="dropdown-divider"></div>
                    <a href="#fortnite-boosting" class="nav-link">Fortnite Level Boosting</a>
                    <div class="dropdown-divider"></div>
                    <a href="#cod-services" class="nav-link">Call of Duty Services</a>
                </div>
            </div>
            <div class="navbar-search-container">
                <input type="text" id="navbarProductSearch" class="navbar-search-input" placeholder="ابحث..." oninput="performInstantSearch()" onkeyup="handleSearchEnter(event)">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"></path>
                </svg>
                <div id="navbar-search-results"></div>
            </div>
        </div>

        <div class="support-button" onclick="showModal('supportModal')">
            <img class="support-icon" src="./images/supp.png" alt="Support Icon">
            Support
        </div>
    </div>

    <div class="fixed-cart-button" onclick="showModal('cartModal'); renderCart();">
        <img src="./images/cartt.png" alt="Cart Icon">
        <span id="cart-count">0</span>
    </div>

    <div id="home" class="section glass-card" style="text-align: center;">

        <h2 class="glow-text-rtl">أهلاً بك في Berlin Store!</h2>

        <img src="./images/BerlinStore.png" alt="Berlin Store Logo" class="store-logo-on-homepage">

        <p class="glow-text-rtl" style="font-size: 1.2rem;">اكتشف منتجاتنا الجديدة وانطلق في عالم الجيمنج.</p>
        <div class="home-section-buttons">
            <a href="https://discord.gg/D3shcEb5xe" target="_blank" class="discord-button">
                <span>سيرفر الديسكورد</span>
                <img src="./images/discord.png" alt="Discord Logo">
            </a>
            <button onclick="openMyOrders()" style="background-color: var(--accent-yellow); color: var(--black-text); border: none; padding: 10px 25px; border-radius: 50px; font-weight: bold; cursor: pointer; transition: transform 0.3s;">
                <i class="fas fa-box-open" style="margin-left: 8px;"></i> طلباتي
            </button>
        </div>
        <div style="margin-top: 25px; display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">

        </div>
        <div id="games-section" class="main-products-section glass-card darker">
            <h2>الأكثر مبيعا 🔥</h2>
            <div class="products-container" id="gamesContainer">
                <br class="Apple-interchange-newline">
            </div>
        </div>

        <div id="subscriptions-section" class="main-products-section glass-card darker">
            <h2>الاشتراكات</h2>

            <h3 class="subscription-subcategory-label">TV & Shows</h3>
            <div class="products-container" id="homeTvSubscriptionsContainer">
            </div>

            <h3 class="subscription-subcategory-label">البرامج</h3>
            <div class="products-container" id="homeSoftwareSubscriptionsContainer">
            </div>
        </div>

        <div id="game-topup-section" class="main-products-section glass-card darker">
            <h2> شحن الألعاب - Top Up</h2>
            <div class="products-container" id="gameTopupContainer">

                <div id="valorant-card" class="product-item category-card" onclick="window.location.hash='#valorantPoints'">
                    <div class="product-image-wrapper">
                        <img src="./images/reynaa.png" alt="شحن فالورانت">
                    </div>
                    <h3>شحن فالورانت<br><small>(Valorant Points)</small></h3>
                </div>

                <div id="fortnite-card" class="product-item category-card" onclick="window.location.hash='#fortnite'">
                    <div class="product-image-wrapper">
                        <img src="./images/fortnite33.png" alt="شحن فورتنايت">
                    </div>
                    <h3>شحن فورتنايت<br><small>(V-Bucks & Packs)</small></h3>
                </div>

                <div id="roblox-card" class="product-item category-card" onclick="window.location.hash='#roblox'">
                    <div class="product-image-wrapper">
                        <img src="./images/Roblox-10.png" alt="شحن روبلوكس">
                    </div>
                    <h3>شحن<br>روبلوكس<br><small>(Robux)</small></h3>
                </div>

                <div id="marvel-card" class="product-item category-card" onclick="window.location.hash='#marvelRivals'">
                    <div class="product-image-wrapper">
                        <img src="./images/marvelrivals.png" alt="شحن Marvel Rivals">
                    </div>
                    <h3>شحن<br>مارفل رايفلز<br><small>(Marvel Rivals)</small></h3>
                </div>

                <div id="genshin-card" class="product-item category-card" onclick="window.location.hash='#genshinImpact'">
                    <div class="product-image-wrapper">
                        <img src="./images/genshin.png" alt="شحن Genshin Impact">
                    </div>
                    <h3>شحن<br>جينيشين امباكت<br><small>(Genesis Crystals)</small></h3>
                </div>

                <div id="rocket-card" class="product-item category-card" onclick="window.location.hash='#rocketleague'">
                    <div class="product-image-wrapper">
                        <img src="./images/rocketleagueoffercard.png" alt="شحن Rocket League" loading="lazy">
                    </div>
                    <h3>شحن<br>روكيت ليج<br><small>(Rocket League Credits)</small></h3>
                </div>

            </div>
        </div>
        <div id="offline-steam-section" class="main-products-section glass-card darker">
            <div class="category-header">
                <h2> حسابات ستيم اوفلاين ( للتختيم ) 🎮  </h2>
                <div class="category-search-container">
                    <input type="text" id="offlineSearchInput" placeholder="ابحث عن لعبة..." onkeyup="filterOfflineGames()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                        <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z" />
                    </svg>
                </div>
            </div>

            <div class="products-container" id="offlineSteamContainer">
            </div>

            <div class="load-more-container">
                <button id="loadMoreOfflineGamesBtn" class="load-more-btn">
                    <span>عرض المزيد</span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
                </button>
            </div>
        </div>

        <div id="personal-gifting-section" class="main-products-section glass-card darker">
            <h2>جيفت ألعاب لحسابك الشخصي 🎁</h2>
            <div class="products-container" id="personalGiftingContainer">
                <div class="calculator-card">
                    <div class="calculator-card-content">
                        <img src="./images/steam.png" alt="Gift Icon" class="calculator-card-icon">
                        <h3>شراء لعبة على حسابك</h3>
                        <p class="hide-on-mobile">أدخل سعر اللعبة بالدولار وسنقوم بشرائها كهدية لك مباشرة على حسابك في ستيم.</p>
                        <button class="buy-btn" onclick="openGiftingCalculatorModal()">اشتري الآن</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="game-rentals-section" class="main-products-section glass-card darker">
            <h2>العاب CO-OP للتختيم 🎮</h2>
            <div class="products-container" id="gameRentalsContainer">
            </div>
        </div>

        <div id="xbox-gifting-section" class="main-products-section glass-card darker">
            <div class="ps-grid-container">

                <div class="ps-grid-column" style="justify-content: center; align-items: center;">
                    <h3 class="playstation-subcategory-label" style="text-align: center;">خدمة شراء الألعاب علي حسابك الخاص</h3>
                    <div class="calculator-card" style="width: 100%; max-width: 550px; margin: 0 auto;">
                        <div class="calculator-card-content">
                            <img src="./images/microsoft-store.png" alt="Xbox/Microsoft Store" class="calculator-card-icon" style="border-radius: 8px;">
                            <h3>اشتري اي لعبة</h3>
                            <p>أدخل اسم اللعبة وسعرها الحالي، وسنقوم بشرائها مباشرة على حسابك.</p>
                            <button class="buy-btn" onclick="openXboxGiftingModal()">احسب التكلفة</button>
                        </div>
                    </div>
                </div>

                <div class="ps-grid-column">

                    <h3 class="playstation-subcategory-label" style="text-align: center;">Xbox/PC Products</h3>
                    <div class="products-container" id="xboxGiftCardsContainer">
                    </div>
                    <div class="products-container" id="xboxPopularGamesContainer">
                    </div>

                </div>
            </div>
        </div>

        <div id="steam-gift-cards-section" class="main-products-section glass-card darker">
            <h2>Steam Gift Cards</h2>
            <div class="products-container" id="steamGiftCardsHomeContainer">
            </div>
        </div>

        <div id="steam-points-section" class="main-products-section glass-card darker">
            <h2>Steam Points</h2>
            <div class="products-container" id="steamPointsContainer">
            </div>
        </div>


        <div id="discord-decorations-section" class="main-products-section glass-card darker">
            <h2>Discord Services</h2>
            <div class="products-container" id="servicesContainer">

                <div class="service-offer-card" onclick="window.location.hash='#discordDecorationsPage'">
                    <img src="./images/discord-decorations.png" alt="Discord Decorations" class="service-card-image">
                    <h3>Discord Decorations</h3>
                    <p class="service-card-description">مؤثرات للبروفايل والأفاتار. اختر ما يناسبك من بين جميع الأسعار المتاحة.</p>
                    <button>اطلع الآن</button>
                </div>

                <div class="service-offer-card" onclick="window.location.hash='#developing'">
                    <img src="./images/dass.png" alt="تصميم سيرفرات ديسكورد" class="service-card-image">
                    <h3>تصميم سيرفرات ديسكورد</h3>
                    <p class="service-card-description">تصميم احترافي لسيرفرك، يشمل الرومات، البوتات، والصلاحيات.</p>
                    <button>اطلع الآن</button>
                </div>

            </div>
        </div>

        <div id="software-keys-section" class="main-products-section glass-card darker">
            <h2>Keys & Codes 🔑</h2>
            <div id="softwareKeysContainer">
                <div class="software-card-unique">
                    <img src="./images/win11.png" alt="Windows 11 Pro Key">
                    <h3>Windows 11 Pro</h3>
                    <p>مفتاح تفعيل أصلي لـ Windows 11 Pro</p>
                    <p class="software-price">300 EGP</p>
                    <button class="buy-btn" onclick="addToCartHandler(event, 'windows11_pro', 1)">أضف إلى السلة</button>
                </div>

                <div class="software-card-unique">
                    <img src="./images/Xbox.png" alt="اشتراك Game Pass">
                    <h3>Game Pass Ultimate</h3>
                    <p>مئات الألعاب عالية الجودة</p>
                    <p class="software-price">220 EGP</p>
                    <button class="buy-btn" onclick="addToCartHandler(event, 'gamepass', 1)">أضف إلى السلة</button>
                </div>

                <div class="software-card-unique">
                    <img src="./images/office.png" alt="Microsoft Office 2021 Key">
                    <h3>Microsoft Office 2021</h3>
                    <p>مفتاح تفعيل أصلي لـ Microsoft Office 2021</p>
                    <p class="software-price">450 EGP</p>
                    <button class="buy-btn" onclick="addToCartHandler(event, 'office2021', 1)">أضف إلى السلة</button>
                </div>
            </div>
        </div>

        <div id="playstation-section" class="main-products-section glass-card darker">
            <h2>قسم PlayStation 🎮</h2>

            <h3 class="playstation-subcategory-label">بطاقات شحن PlayStation Store</h3>
            <div class="products-container" id="psn-gift-cards-container">
            </div>

            <div class="ps-grid-container">

                <div class="ps-grid-column">
                    <h3 class="playstation-subcategory-label" style="text-align: center;">اشتراكات PlayStation Plus</h3>
                    <div class="products-container" id="ps-plus-container">
                    </div>
                </div>

                <div class="ps-grid-column">
                    <h3 class="playstation-subcategory-label" style="text-align: center;">ألعاب PlayStation (للتختيم)</h3>
                    <div class="products-container" style="justify-content: center; align-items: center; height: 100%;">
                        <div class="product-item category-card ps-plus-card" onclick="window.location.hash='#playstation-games-page'" style="min-height: 330px; width: 100%; max-width: 400px;">
                            <div class="product-image-wrapper">
                                <img src="./images/hq720.jpg" alt="PlayStation Games">
                            </div>
                            <h3>استكشف مكتبة الألعاب</h3>
                            <p style="color: #ccc; font-size: 14px; margin-top: 5px;">Primary - Secondry</p>
                            <p style="color: #ccc; font-size: 14px; margin-top: 5px;">Full Account - تسليم فوري</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="services-section" class="main-products-section glass-card darker">
            <h2 style="text-align: center; margin-right: 0;">الخدمات</h2>
            <div class="products-container" id="servicesContainer">

                <div id="design-offer-card" class="service-offer-card" onclick="window.location.hash='#designs'">
                    <img src="./images/design-card.png" alt="تصميم جرافيك" class="service-card-image">
                    <h3>خدمات التصميم</h3>
                    <p class="service-card-description">احصل على تصاميم احترافية للسوشيال ميديا والموشن جرافيك.</p>
                    <button>اطلع الآن</button>
                </div>

                <div id="developing-offer-card" class="service-offer-card" onclick="window.location.hash='#developing'">
                    <img src="./images/developing-card.png" alt="تطوير وبرمجة" class="service-card-image">
                    <h3>خدمات البرمجة</h3>
                    <p class="service-card-description">تطوير المواقع، تصميم سيرفرات الديسكورد، والمزيد.</p>
                    <button>اطلع الآن</button>
                </div>

            </div>
        </div>

        <div id="gaming-services-section" class="main-products-section glass-card darker">
            <h2 style="text-align: center; margin-right: 0;">Gaming Services 🎮</h2>
            <div class="products-container" id="gamingServicesContainer">

                <div id="cod-offer-card" class="service-offer-card glitch-effect" onclick="window.location.hash='#cod-services'">
                    <img src="./images/cod_custom_order.png" alt="Call of Duty Services" class="service-card-image">
                    <h3 data-text="خدمات Call of Duty">خدمات Call of Duty</h3>
                    <p class="service-card-description">كل ما تحتاجه لجميع أجزاء Call of Duty من شحن، فتح كاموهات، وخدمات حصرية أخرى.</p>
                    <button>اكتشف الآن</button>
                </div>

                <div id="boosting-offer-card" class="service-offer-card" onclick="window.location.hash='#valorant-boosting'">
                    <img src="./images/valorantreynass.png" alt="Valorant Boosting" class="service-card-image">
                    <h3>فالورانت بوستينج</h3>
                    <p class="service-card-description">احسب تكلفة رفع رتبتك في فالورانت واطلب الخدمة مباشرة من خلال الآلة الحاسبة التفاعلية.</p>
                    <button>اطلب الآن</button>
                </div>

                <div id="fortnite-boosting-offer-card" class="service-offer-card" onclick="window.location.hash='#fortnite-boosting'">
                    <img src="./images/fortnite33.png" alt="Fortnite Level Boosting" class="service-card-image">
                    <h3>فورتنايت ليفل بوستينج</h3>
                    <p class="service-card-description">ارفع مستواك في الباتل باس بسرعة وأمان. استخدم الحاسبة لمعرفة التكلفة واطلب الخدمة فورًا.</p>
                    <button>اطلب الآن</button>
                </div>

            </div>
        </div>




        <div id="feedback-section" class="glass-card">
            <h2>تقييمات المتجر</h2>
            <p>شاهد آراء عملائنا وشاركنا تجربتك مع Berlin Store!</p>

            <div id="store-average-rating-display">
                <div class="loading-spinner" style="margin: 20px auto;"></div>
            </div>

            <div id="store-reviews-list" style="max-width: 600px; margin: 0 auto;">
            </div>

            <div class="reviews-carousel-container">
                <div id="store-reviews-list" class="reviews-carousel-track">
                </div>
            </div>
            <input type="text" id="rating-name" placeholder="اسمك" required>

            <div class="rating-input">
                <div class="stars" id="storeRatingStars" data-rating="0">
                    <span class="star" data-value="5">☆</span>
                    <span class="star" data-value="4">☆</span>
                    <span class="star" data-value="3">☆</span>
                    <span class="star" data-value="2">☆</span>
                    <span class="star" data-value="1">☆</span>
                </div>
                <input type="hidden" id="storeRatingInput" value="0">
            </div>

            <p id="itakura-trick-text" style="text-align: center; margin-top: 50px;">Search for sohayl</p>

            <textarea id="rating-text" rows="3" placeholder="اكتب تعليقك (اختياري)"></textarea>
            <button onclick="submitStoreRating()">أضف تقييمك</button>
            <div id="feedback-message"></div>
        </div>
    </div>

    </div> <div id="all-cod-games" class="section glass-card">
        <button class="back-button" onclick="window.location.hash='#home'">&larr; العودة للرئيسية</button>
        <h2 style="text-align: center; border: none;">جميع ألعاب Call of Duty - بتاخد حساب تختم عليه اللعبة (مدى الحياة) | استعمل كود الخصم CoD</h2>
        <div class="products-container" id="all-cod-games-container">
        </div>
    </div>

    <div id="products" class="section">
        <h2 style="margin-right: 0;">منتجاتنا المتوفرة</h2>
        <div class="search-bar-container">
            <input type="text" id="productSearch" placeholder="ابحث عن منتج...">
            <button onclick="searchProducts()">بحث</button>
        </div>
        <div class="products-container" id="productsContainer">
        </div>
    </div>

    <div id="searchResults" class="section">
        <h2 id="searchResultsTitle">نتائج البحث</h2>
        <div class="products-container" id="searchResultsContainer">
        </div>
        <p id="noResultsMessage" style="text-align: center; display: none; color: #ccc;">
            عذرًا، لم يتم العثور على أي منتجات تطابق بحثك.
        </p>
    </div>

    <div id="valorantPoints" class="section">
        <h2 style="margin-right: 0;">شحن Valorant Points عن طريق الـRiot ID</h2>
        <div class="products-container" id="valorantPointsPageContainer">
        </div>
    </div>

    <div id="roblox" class="section">
        <h2 style="margin-right: 0;">Robux</h2>
        <div class="products-container" id="robloxContainer">
        </div>
    </div>

    <div id="genshinImpact" class="section glass-card darker">
        <h2>شحن كريستالات Genshin Impact</h2>
        <div class="products-container" id="genshinImpactContainer">
        </div>
    </div>

    <div id="fortnite" class="section" style="background-image: url('./images/fortnitewallpaper.png'); background-size: cover; background-position: center; border-radius: 15px;">
        <h2 style="margin-right: 0;">V-Bucks & Packs</h2>
        <div class="products-container" id="fortniteContainer">
        </div>
    </div>

    <div id="rocketleague" class="section">
        <h2 style="margin-right: 0;">Rocket League Credits</h2>
        <div class="products-container" id="rocketleagueContainer">
        </div>
    </div>

    <div id="marvelRivals" class="section">
        <h2 style="margin-right: 0;">شحن Marvel Rivals لجميع المنصات بالـ UID</h2>
        <div class="products-container" id="marvelRivalsContainer"></div>
    </div>

    <div id="steamPoints" class="section">
        <h2 style="margin-right: 0;">Steam Points</h2>
        <div class="products-container" id="steamPointsPageContainer">
        </div>
    </div>

    <div id="steamGiftCards" class="section">
        <h2 style="margin-right: 0; display: inline-block;">Steam Gift Cards</h2>



        <div class="products-container" id="steamGiftCardsPageContainer">
        </div>
    </div>

    <!-- <div id="shipping" class="section glass-card">
         <h1> تتبع شحن طلبك 🚚 </h1>
         <div id="orderInputContainer">
             <label for="orderCode">أدخل كود الطلب الخاص بك</label>
             <p id="shippingDescription">الصفحة دي لتتبع شحن وتوصيل المنتجات الخاصة بمتجر الCrafts الخاص بينا فقط وليس لها علاقة بالvideo gaming</p>
             <div>
                 <input type="text" id="orderCode" placeholder="مثال: 74562341">
                 <button onclick="checkOrder()">بحث</button>
             </div>
         </div>
         <div id="statusContainer" class="glass-card">
             <div id="resultText"></div>
             <img id="statusImage" src="" alt="">
         </div>
     </div>-->



    <div id="about" class="section glass-card content-page">
        <div class="about-us-logos-container">
            <img src="./images/logo-about-us.png" alt="Berlin Store Logo" class="about-us-logo">
            <a href="https://discord.gg/vf4Aubz6nk" target="_blank">
                <img src="./images/discord.png" alt="Discord Logo" class="about-us-discord-logo">
            </a>
        </div>

        <h2>من نحن؟</h2>
        <p>أهلاً بك في متجر Berlin Store، وجهتك الأولى لكل ما يتعلق بعالم الألعاب والترفيه الرقمي.</p>
        <p>نحن فخورون بأن نكون جزءًا من مجموعة <strong>Gamers Online Entertainment (GOE)</strong>، وهذا المتجر هو بوابتنا الإلكترونية الرسمية لتقديم أفضل المنتجات والخدمات لمجتمع اللاعبين في مصر والوطن العربي والعالم.</p>
        <p>هدفنا هو توفير تجربة شراء سهلة، آمنة، وسريعة، مع دعم فني متكامل لمساعدتك في كل خطوة. نسعى دائمًا لتقديم أحدث المنتجات بأفضل الأسعار، لأننا لاعبون مثلكم.</p>
    </div>

    <div id="faq" class="section glass-card content-page">
        <h2>الأسئلة الشائعة (FAQ)</h2>

        <h4><strong>كيف يتم تسليم المنتجات الرقمية؟</strong></h4>
        <p>يتم تسليم جميع المنتجات الرقمية (مثل الأكواد، حسابات الألعاب، أو شحن النقاط) عبر البريد الإلكتروني الذي تقوم بإدخاله عند إتمام عملية الشراء. تأكد من كتابة بريدك الإلكتروني بشكل صحيح.</p>

        <h4><strong>ما هي مدة تسليم الطلب؟</strong></h4>
        <p>نسعى لتسليم جميع الطلبات في أسرع وقت ممكن. عادةً ما يتم التسليم في غضون 1 إلى 30 دقيقة. نضمن إتمام جميع الطلبات في أسرع وقت.</p>

        <h4><strong>هل الحسابات المباعة آمنة؟</strong></h4>
        <p>نعم، جميع الحسابات التي نبيعها آمنة 100%. نحن نضمن لك صلاحية الحساب للمدة المذكورة في وصف المنتج. في حالة وجود أي مشكلة، يمكنك التواصل مع الدعم الفني مباشرة.</p>

        <h4><strong>لقد قمت بالدفع، ماذا أفعل الآن؟</strong></h4>
        <p>بمجرد إتمام عملية الدفع وتأكيدها، سيقوم فريقنا بمراجعة طلبك وإرسال المنتج إلى بريدك الإلكتروني. لا حاجة للقيام بأي إجراء إضافي من طرفك.</p>

        <h4><strong>ماذا أفعل إذا واجهتني مشكلة في طلبي؟</strong></h4>
        <p>إذا واجهتك أي مشكلة أو كان لديك أي استفسار، لا تتردد في التواصل معنا مباشرة عبر سيرفر الديسكورد الخاص بنا أو عبر البريد الإلكتروني للدعم الفني. فريقنا جاهز لمساعدتك.</p>
    </div>

    <div id="terms" class="section glass-card content-page">
        <h2>شروط الخدمة</h2>
        <p>باستخدامك لمتجر Berlin Store، فإنك توافق على الشروط والأحكام التالية:</p>
        <ul>
            <li>جميع المنتجات المباعة هي منتجات رقمية، ويتم تسليمها عبر البريد الإلكتروني أو مباشرة إلى حسابك.</li>
            <li>يجب على المشتري تقديم معلومات صحيحة ودقيقة (مثل البريد الإلكتروني أو Riot ID) لضمان التسليم الصحيح.</li>
            <li>المتجر غير مسؤول عن أي أخطاء ناتجة عن إدخال معلومات غير صحيحة من قبل العميل.</li>
            <li>نضمن أمان جميع الحسابات والمنتجات المباعة من خلالنا. في حالة وجود أي مشكلة، يرجى التواصل مع الدعم الفني فورًا.</li>
            <li>جميع الأسعار المعروضة نهائية وقد تتغير بناءً على تحديثات السوق.</li>
        </ul>
    </div>

    <div id="privacy" class="section glass-card content-page">
        <h2>سياسة الخصوصية</h2>
        <p>في Berlin Store، خصوصيتك هي أولويتنا القصوى. نحن نلتزم بحماية بياناتك الشخصية وعدم مشاركتها مع أي طرف ثالث.</p>
        <ul>
            <li>جمع المعلومات: نقوم بجمع المعلومات الضرورية فقط لإتمام عملية الشراء، مثل البريد الإلكتروني ورقم الهاتف (في حالة الدفع بفودافون كاش).</li>
            <li>استخدام المعلومات: تُستخدم معلوماتك فقط لغرض توصيل المنتج إليك والتواصل معك بخصوص طلبك.</li>
            <li>أمان البيانات: نحن نستخدم بوابات دفع آمنة (Formspree) لمعالجة الطلبات، ولا نقوم بتخزين أي معلومات دفع حساسة على خوادمنا.</li>
            <li>ملفات تعريف الارتباط (Cookies): قد نستخدم ملفات تعريف الارتباط لتحسين تجربة التصفح وحفظ محتويات سلة التسوق الخاصة بك.</li>
        </ul>
    </div>

    <div id="playstation-games-page" class="section glass-card">
        <button class="back-button" onclick="window.location.hash='#home'">&larr; العودة للرئيسية</button>
        <h2 style="text-align: center; border: none;">ألعاب PlayStation (للتختيم)</h2>
        <div class="products-container" id="playstation-games-container">
        </div>
    </div>

    <div id="psn-gift-cards-page" class="section glass-card">
        <button class="back-button" onclick="window.location.hash='#home'">&larr; العودة للرئيسية</button>
        <h2 style="text-align: center; border: none;">بطاقات شحن PlayStation Store (الحساب الأمريكي)</h2>
        <div class="products-container" id="psn-gift-cards-page-container">
        </div>
    </div>

    <div id="productPage" class="section glass-card">
        <div id="productPageContent">
            <div class="product-main-view">
                <div id="productPageFullDescription" class="product-details-section">
                </div>
                <div class="product-image-section">
                    <div id="mainImageContainer">
                        <div class="main-image-placeholder"></div> <img id="productPageImage" src="" alt="Product Image" class="main-image" style="display: none;">
                    </div>
                    <div id="product-share-btn" onclick="shareProduct()">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-share-fill" viewBox="0 0 16 16">
                            <path d="M11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5z" />
                        </svg>
                    </div>
                    <div class="product-image-gallery" id="productImageGallery">
                    </div>
                </div>

                <div class="product-details-section">
                    <h1 id="productPageTitle"></h1>
                    <div class="price-badge-container">
                        <span id="productPagePrice"></span>
                        <span id="productPageBadge"></span>
                    </div>
                    <p id="productPageShortDescription"></p>
                    <div id="productPageAverageRating" class="product-page-rating"></div>
                    <div id="productPagePlatform" class="product-platform-info"></div>

                    <button id="addToCartBtn" class="add-to-cart-product-page">أضف إلى السلة</button>
                    <div class="quantity-selector">
                        <label for="productPageQuantity">الكمية:</label>
                        <button id="decreaseProductPageQuantity">-</button>
                        <input type="number" id="productPageQuantity" value="1" min="1">
                        <button id="increaseProductPageQuantity">+</button>
                    </div>
                </div>
            </div>

            <div class="tabs-container">
                <div class="tab-buttons">
                    <button class="tab-button active" data-tab="specs">  مواصفات التشغيل للـPC</button>
                    <button class="tab-button" data-tab="customer-reviews">تقييمات العملاء</button>
                    <button class="tab-button" data-tab="extra-info">معلومات إضافية</button>
                    <button class="tab-button" data-tab="faq">أسئلة وأجوبة</button>
                </div>
                <div id="specs" class="tab-content active">
                </div>
                <div id="customer-reviews" class="tab-content">
                    <h3>اترك تعليقك</h3>
                    <form class="comment-form" onsubmit="submitComment(event)">
                        <input type="text" id="commentName" placeholder="اسمك" required>
                        <div class="rating-input">
                            <label>تقييمك:</label>
                            <div class="stars" id="ratingStars" data-rating="0">
                                <span class="star" data-value="5">☆</span>
                                <span class="star" data-value="4">☆</span>
                                <span class="star" data-value="3">☆</span>
                                <span class="star" data-value="2">☆</span>
                                <span class="star" data-value="1">☆</span>
                            </div>
                            <input type="hidden" id="commentRating" value="0">
                        </div>
                        <textarea id="commentText" rows="3" placeholder="اكتب تعليقك هنا... (اختياري)"></textarea>
                        <button type="submit">إرسال التعليق</button>
                    </form>
                    <hr style="border-color: rgba(255,255,255,0.2); margin: 30px 0;">
                    <h3>التعليقات</h3>
                    <div id="commentList"></div>
                    <button id="loadMoreComments" style="display:none;">تحميل المزيد</button>
                </div>
                <div id="extra-info" class="tab-content">
                    <p>جميع المنتجات رقمية ويتم تسليمها مباشرة عبر البريد الإلكتروني الذي ترفقه مع الشراء.</p>
                    <p>الدعم الفني متاح 24/7.</p>
                </div>
                <div id="faq" class="tab-content">
                    <p>لأي استفسار أو مشكلة تواجهك، يرجى عدم التردد في التواصل معنا عبر البريد الإلكتروني للدعم الفني:</p>
                    <p><strong>Berlinstoregoe@gmail.com</strong></p>
                    <p><strong>او بالديسكورد</strong></p>
                </div>
            </div>

        </div>
    </div>


    <div id="paymentModal" class="modal">
        <span class="close-btn" onclick="closeModal('paymentModal')">&times;</span>
        <div class="modal-body">
            <div id="modalCommonContent" class="modal-content-section is-visible">


                <div class="modal-product-header">
                    <img id="modalImage" src="" alt="Product Image" class="product-image">

                    <div class="text-content">
                        <h2 id="modalTitle"></h2>
                        <div id="modalProductInfo" class="modal-product-info"></div>
                    </div>
                </div>

                <p id="modalPrice"></p>

                <div id="steamProductQuantitySelector" style="display: none;">
                    <div class="quantity-selector-card">
                        <h4>الكمية</h4>
                        <div class="quantity-controls">
                            <button class="quantity-btn" id="decreaseQuantity">-</button>
                            <input type="number" class="quantity-input" id="quantityInput" value="1" min="1">
                            <button class="quantity-btn" id="increaseQuantity">+</button>
                        </div>
                        <p class="quantity-total">إجمالي المبلغ: <span id="totalPriceDisplay">0</span> EGP</p>
                    </div>
                </div>

                <div id="discord-username-group" class="input-wrapper" style="display: none; margin: 20px auto;">
                    <i class="fa-brands fa-discord" style="color: white; font-size: 18px;"></i>

                    <input type="text" id="discord_username_input" name="Discord Username" placeholder="أدخل اسمك في الديسكورد" required>
                </div>

                <input type="hidden" name="Discord Username" id="vodafone_discord_username">
                <input type="hidden" name="Discord Username" id="paypal_discord_username">
                <input type="hidden" name="Discord Username" id="creditcard_discord_username">

                <div id="form-parallel-group">
                    <div id="genshin-id-group" style="display: none;">
                        <label for="genshin_id_input">Genshin UID</label>
                        <input type="text" id="genshin_id_input" name="Genshin UID" placeholder="أدخل Genshin UID" required>
                    </div>

                    <div id="marvel-rivals-id-group" style="display: none;">
                        <label for="marvel_rivals_id_input">Marvel Rivals UID</label>
                        <input type="text" id="marvel_rivals_id_input" name="Marvel Rivals UID" placeholder="أدخل الـ Marvel Rivals UID" required>
                    </div>

                </div>

                <div id="gmail-input-group" class="input-wrapper" style="display: none; margin: 20px auto;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-envelope-fill" viewBox="0 0 16 16">
                        <path d="M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414.05 3.555ZM0 4.697v7.104l5.803-3.558L0 4.697ZM6.761 8.83l-6.57 4.027A2 2 0 0 0 2 14h12a2 2 0 0 0 1.808-1.144l-6.57-4.027L8 9.586l-1.239-.757Zm3.436-.586L16 11.803V4.697l-5.803 3.546Z" />
                    </svg>
                    <input type="email" id="gmail_input" name="Gmail (Email)" placeholder="أدخل إيميل جوجل (الجيميل)" required>
                </div>

                <div id="account-details-container">
                    <div class="input-wrapper">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-envelope-fill" viewBox="0 0 16 16">
                            <path d="M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414.05 3.555ZM0 4.697v7.104l5.803-3.558L0 4.697ZM6.761 8.83l-6.57 4.027A2 2 0 0 0 2 14h12a2 2 0 0 0 1.808-1.144l-6.57-4.027L8 9.586l-1.239-.757Zm3.436-.586L16 11.803V4.697l-5.803 3.546Z" />
                        </svg>
                        <input type="email" id="account_email" name="account_email" placeholder="ايميل الحساب">
                    </div>

                    <div class="input-wrapper">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-key-fill" viewBox="0 0 16 16">
                            <path d="M3.5 11.5a3.5 3.5 0 1 1 3.163-5H14L15.5 8 14 9.5l-1-1-1 1-1-1-1 1-1-1-1 1H6.663a3.5 3.5 0 0 1-3.163 2zM2.5 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" />
                        </svg>
                        <input type="password" id="account_password" name="account_password" placeholder="باسورد الحساب">
                    </div>

                    <div class="input-wrapper">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chat-dots-fill" viewBox="0 0 16 16">
                            <path d="M16 8c0 3.866-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7zM5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0zm3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" />
                        </svg>
                        <input type="text" id="account_contact" name="account_contact" placeholder="وسيلة تواصل (واتس او ديس..)">
                    </div>
                </div>

                <div id="subscription-group" style="margin: 20px 0; display: none;">
                    <label style="display: block; margin-bottom: 12px; font-weight: bold; text-align: center;">اختر المدة:</label>
                    <div id="subscription-options-container"></div>
                </div>



                <div class="form-parallel-group">
                    <div id="riot-id-group" style="display: none;">
                        <label for="riot_id_input">Riot ID</label>
                        <input type="text" id="riot_id_input" placeholder="Name#TAG" required>
                    </div>
                    <div id="steam-profile-link-group" style="display: none;">
                        <label for="steam_profile_link_input">Steam Profile Link :</label>
                        <input type="url" id="steam_profile_link_input" name="Steam Profile Link" placeholder="أدخل رابط بروفايلك على ستيم" required>
                    </div>
                    <div id="steam-friend-code-group" style="display: none;">
                        <label for="steam_friend_code_input">Steam Friend Code</label>
                        <input type="text" id="steam_friend_code_input" placeholder="أدخل كود الصداقة الخاص بك" required>
                    </div>
                    <div id="payment-method-group" style="text-align: center;">
                        <label for="modalPaymentMethod" style="display: block; margin-bottom: 10px; font-weight: bold;">طريقة الدفع :</label>

                        <select id="modalPaymentMethod" style="display: none;">
                            <option value="vodafone">فودافون كاش - انستاباي - محفظة</option>
                            <option value="creditcard">Mastercard/Visa</option>
                            <option value="paypal">Paypal</option>
                        </select>

                        <div class="custom-select-container">
                            <div class="custom-select-selected" id="custom-payment-selector">
                                <span data-default-text="اختر طريقة الدفع...">اضغط لإختيار طريقة الدفع...</span>
                                <svg class="custom-select-arrow" fill="white" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d='M7 10l5 5 5-5z' /><path d='M0 0h24v24H0z' fill='none' /></svg>
                            </div>
                            <div class="custom-select-options" id="custom-payment-options">
                                <div class="custom-option" data-value="vodafone">
                                    <img src="./images/vf-cash.png" class="payment-option-logo" alt="Vodafone">
                                    <span>فودافون كاش - انستاباي - محفظة</span>
                                </div>
                                <div class="custom-option" data-value="creditcard">
                                    <img src="./images/credit-card.png" class="payment-option-logo" alt="Credit Card">
                                    <span>Mastercard/Visa</span>
                                </div>
                                <div class="custom-option" data-value="paypal">
                                    <img src="./images/paypal.png" class="payment-option-logo" alt="PayPal">
                                    <span>Paypal</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div style="text-align: center;">
                    <button id="modal-action-button">اذهب للدفع</button>
                </div>
            </div>

            <div id="vodafoneDetails" class="modal-content-section">
                <div class="payment-header-container">

                    <div class="payment-header-box">
                        <i class="fas fa-receipt payment-header-icon"></i>
                        <h4>ملخص الطلب</h4> <p id="creditcardProductSummary" class="payment-summary-value"></p>
                    </div>

                    <div class="payment-header-box">
                        <i class="fas fa-check-to-slot payment-header-icon"></i>
                        <h4>الخطوة الحالية</h4>
                        <p class="payment-info-label">معلومات الدفع</p>
                    </div>

                    <div class="payment-header-box">
                        <i class="fas fa-wallet payment-header-icon"></i>
                        <h4>المبلغ المستحق</h4>
                        <p id="creditcardTotalAmount" class="payment-total-amount-value"></p>
                    </div>

                    <div class="payment-header-box">
                        <i class="fas fa-clock payment-header-icon"></i>
                        <h4>مهلة الدفع</h4>
                        <div id="creditcardTimer" class="payment-timer-value"></div>
                    </div>
                </div>
                <div class="payment-info-box">
                    <div class="qr-code-container">
                        <div class="qr-text-content">
                            <div class="transfer-instruction-line">
                                <span>قم بتحويل مبلغ <strong class="green-text" id="vodafoneAmountDisplay"></strong> على الرقم :</span>

                                <div class="number-copy-capsule" onclick="copyToClipboard('01060292953', this)">
                                    <span class="vodafone-number">01060292953</span>
                                    <i class="fas fa-copy copy-icon"></i>
                                </div>
                            </div>
                            <p>(فودافون كاش أو اي محفظة الكترونية)</p>
                            <p>لو بتحول من انستا باي اختار تحويل لمحفظة</p>
                            <p style="margin-top: 5px; font-size: 12px; color: #aaa;">أو Scan رمز الـ QR فودافون كاش للدفع مباشرةً:</p>
                        </div>
                        <img src="./images/vfqr.png" alt="Vodafone Cash QR Code" class="qr-code-image">
                    </div>
                </div>

                <form id="vodafoneForm" action="https://formspree.io/f/xgvldadg" method="POST" class="payment-details-form">
                    <input type="hidden" name="access_key" value="54b86a6e-bc6a-4f0a-98b6-dfe2c134c4bd">
                    <input type="hidden" name="product" id="vodafone_product_name">
                    <input type="hidden" name="price" id="vodafone_product_price">
                    <input type="hidden" name="Steam Friend Code" id="vodafone_steam_friend_code">
                    <input type="hidden" name="Steam Profile Link" id="vodafone_steam_profile_link">
                    <input type="hidden" name="Riot ID" id="vodafone_riot_id">
                    <input type="hidden" name="Account Email" id="vodafone_account_email">
                    <input type="hidden" name="Account Password" id="vodafone_account_password">
                    <input type="hidden" name="Contact Method" id="vodafone_contact_method">
                    <input type="hidden" name="payment_method" value="Vodafone Cash">
                    <input type="hidden" name="Genshin UID" id="vodafone_genshin_uid">
                    <input type="hidden" name="Marvel Rivals ID" id="vodafone_marvel_rivals_id"> <input type="checkbox" name="botcheck" class="hidden" style="display: none;">
                    <input type="hidden" name="Extra Data" id="creditcard_extra_data">

                    <div id="vodafone-form-fields" class="payment-details-grid">
                        <div class="input-fields">
                            <div class="input-wrapper">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                    <path d="M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414.05 3.555ZM0 4.697v7.104l5.803-3.558L0 4.697ZM6.761 8.83l-6.57 4.027A2 2 0 0 0 2 14h12a2 2 0 0 0 1.808-1.144l-6.57-4.027L8 9.586l-1.239-.757Zm3.436-.586L16 11.803V4.697l-5.803 3.546Z" />
                                </svg>
                                <input type="email" name="email" placeholder=" أدخل الإيميل ادريس" required>
                            </div>

                            <div class="input-wrapper">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-phone-fill" viewBox="0 0 16 16">
                                    <path d="M3 2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V2zm6 11a1 1 0 1 0-2 0 1 1 0 0 0 2 0z" />
                                </svg>
                                <input type="tel" name="phone_number" placeholder="الرقم اللي حولت منه" required>
                            </div>

                            <div class="input-wrapper">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                    <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z" />
                                    <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z" />
                                </svg>
                                <textarea name="notes" maxlength="400" placeholder="أضف ملاحظة (اختياري)"></textarea>
                            </div>
                            <p style="font-size: 12px; color: #ccc; margin-top: 2px; font-weight: bold; text-align: center; margin-bottom: 0;">بعد اتمام الدفع هيوصلك المنتج فورا</p>
                        </div>
                        <div class="button-container">
                            <div class="discount-code-container">
                                <input type="text" id="vodafoneDiscountCodeInput" placeholder="هل لديك كود خصم؟">
                                <button type="button" onclick="applyDiscount('vodafone')">تطبيق</button>
                            </div>
                            <div id="vodafoneDiscountMessage" class="discount-message"></div>
                            <button type="submit" class="confirm-payment-btn">
                                تـــــــم الــــدفــــــع ↓<br>(اضغط هنا لما تحول)
                            </button>
                        </div>
                    </div>

                    <div id="vodafone-confirmation-view" style="display: none; text-align: center; margin-top: 20px;">
                        <p style="font-size: 1.2rem; margin: 20px 0;">هل قمت بإتمام عملية الدفع بالفعل؟</p>
                        <div style="display: flex; justify-content: center; gap: 15px; margin-top: 25px;">
                            <button type="button" id="vodafone-confirm-no" class="button-secondary">لا، تراجع</button>
                            <button type="button" id="vodafone-confirm-yes" class="button-primary">نعم، أؤكد الدفع</button>
                        </div>
                    </div>

                    <div id="vodafoneFormResult" class="form-result"></div>
                </form>
            </div>

            <div id="creditcardDetails" class="modal-content-section">

                <div class="payment-header-container">
                    <div class="payment-header-box">
                        <h4>ملخص المنتج</h4>
                        <p id="creditcardProductSummary" class="payment-summary-value"></p>
                    </div>
                    <div class="payment-header-box">
                        <h4>الخطوة الحالية</h4>
                        <p class="payment-info-label">معلومات الدفع</p>
                    </div>
                    <div class="payment-header-box">
                        <h4>المبلغ المستحق</h4>
                        <p id="creditcardTotalAmount" class="payment-total-amount-value"></p>
                    </div>
                    <div class="payment-header-box">
                        <h4>مهلة الدفع</h4>
                        <div id="creditcardTimer" class="payment-timer-value"></div>
                    </div>
                </div>

                <div class="order-summary-container" id="creditcardOrderSummary">
                </div>

                <div class="input-wrapper" style="margin: 20px auto;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-envelope-fill" viewBox="0 0 16 16">
                        <path d="M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414.05 3.555ZM0 4.697v7.104l5.803-3.558L0 4.697ZM6.761 8.83l-6.57 4.027A2 2 0 0 0 2 14h12a2 2 0 0 0 1.808-1.144l-6.57-4.027L8 9.586l-1.239-.757Zm3.436-.586L16 11.803V4.697l-5.803 3.546Z"></path>
                    </svg>
                    <input type="email" id="creditcard_email_input" placeholder="أدخل إيميلك و المحلاظات" required="">
                </div>

                <form action="https://www.paypal.com/ncp/payment/AB69NXSVUNP78" method="post" target="_blank" style="display:inline-grid;justify-items:center;align-content:start;gap:0.5rem; margin-top: 20px;">
                    <input class="pp-AB69NXSVUNP78" type="submit" value="Pay now" />
                    <img src="https://www.paypalobjects.com/images/Debit_Credit.svg" alt="cards" />
                    <section style="font-size: 0.75rem;"> Powered by <img src="https://www.paypalobjects.com/paypal-ui/logos/svg/paypal-wordmark-color.svg" alt="paypal" style="height:0.875rem;vertical-align:middle;" /></section>
                </form>

                <form id="creditcardForm" action="https://formspree.io/f/xgvldadg" method="POST" style="display: none;">
                    <input type="hidden" name="email" id="creditcard_email">
                    <input type="hidden" name="access_key" value="54b86a6e-bc6a-4f0a-98b6-dfe2c134c4bd">
                    <input type="hidden" name="payment_method" value="Credit Card (PayPal)">
                    <input type="hidden" name="product" id="creditcard_product_name">
                    <input type="hidden" name="price" id="creditcard_product_price">
                    <input type="hidden" name="Steam Friend Code" id="creditcard_steam_friend_code">
                    <input type="hidden" name="Riot ID" id="creditcard_riot_id">
                    <input type="hidden" name="Account Email" id="creditcard_account_email">
                    <input type="hidden" name="Account Password" id="creditcard_account_password">
                    <input type="hidden" name="Contact Method" id="creditcard_contact_method">
                    <input type="hidden" name="Genshin UID" id="creditcard_genshin_uid">
                    <input type="hidden" name="Marvel Rivals ID" id="creditcard_marvel_rivals_id">
                    <input type="checkbox" name="botcheck" class="hidden" style="display: none;">
                </form>

                <button type="button" class="paypal-confirm-btn" onclick="submitCreditCardOrder()">
                    لقد قمت بالدفع (اضغط هنا للتأكيد)
                </button>

            </div>

            <div id="paypalDetails" class="modal-content-section">
                <div class="payment-header-container">
                    <div class="payment-header-box">
                        <h4>Product Summary</h4>
                        <p id="paypalProductSummary" class="payment-summary-value"></p>
                    </div>
                    <div class="payment-header-box">
                        <h4>Payment Page</h4>
                        <p>Paying process</p>
                    </div>
                    <div class="payment-header-box">
                        <h4>Total Amount</h4>
                        <p id="paypalTotalAmount" class="payment-total-amount-value"></p>
                    </div>
                    <div class="payment-header-box">
                        <h4>Payment Deadline</h4>
                        <div id="paypalTimer" class="payment-timer-value"></div>
                    </div>
                </div>
                <p>
                    <img class="payment-logo" src="./images/paypal.png" alt="PayPal Logo">
                    Please pay <strong class="green-text" id="paypalAmountDisplay"></strong> here: <a href="https://paypal.me/SohayLLLLL" target="_blank" class="paypal-link">
                        <span>https://paypal.me/SohayLLLLL</span>
                    </a>
                </p>

                <form id="paypalForm" action="https://formspree.io/f/xgvldadg" method="POST">
                    <input type="hidden" name="payment_method" value="PayPal">
                    <input type="checkbox" name="botcheck" class="hidden" style="display: none;">

                    <input type="hidden" name="product" id="paypal_product_name">
                    <input type="hidden" name="price" id="paypal_product_price">
                    <input type="hidden" name="Steam Friend Code" id="paypal_steam_friend_code">
                    <input type="hidden" name="Riot ID" id="paypal_riot_id">
                    <input type="hidden" name="Account Email" id="paypal_account_email">
                    <input type="hidden" name="Account Password" id="paypal_account_password">
                    <input type="hidden" name="Contact Method" id="paypal_contact_method">
                    <input type="hidden" name="Genshin UID" id="paypal_genshin_uid">
                    <input type="hidden" name="Marvel Rivals ID" id="paypal_marvel_rivals_id">
                    <input type="hidden" name="Extra Data" id="paypal_extra_data">

                    <div id="paypal-form-fields" style="text-align: center;">
                        <input type="email" name="email" placeholder="أدخل إيميلك" required>
                        <input type="text" name="notes" maxlength="400" placeholder="أضف ملاحظة (اختياري)">
                        <button type="submit" class="paypal-confirm-btn">I Have Paid</button>
                    </div>

                    <div id="paypal-confirmation-view" style="display: none; text-align: center; margin-top: 20px;">
                        <p style="font-size: 1.2rem; margin: 20px 0;">Have you completed the payment?</p>
                        <div style="display: flex; justify-content: center; gap: 15px; margin-top: 25px;">
                            <button type="button" id="paypal-confirm-no" class="button-secondary">No, go back</button>
                            <button type="button" id="paypal-confirm-yes" class="button-primary">Yes, I Confirm</button>
                        </div>
                    </div>
                </form>
            </div>
            <div id="loading" class="modal-content-section" style="text-align: center;">
                <div class="loading-spinner"></div>
                <p id="loading-text">جاري إرسال طلبك... من فضلك انتظر.</p>
            </div>
            <div id="confirmationMessage" class="modal-content-section"></div>
        </div>
    </div>

    <div id="cartModal" class="modal">
        <span class="close-btn" onclick="closeModal('cartModal')">&times;</span>
        <div class="modal-body">
            <h2 style="text-align: center;"> سلة التسوق 🛒</h2>
            <div id="cartItemsContainer">
                <p style="text-align: center; color: #ccc;">سلتك فارغة.</p>
            </div>
            <div id="cartTotalContainer" class="cart-modal-total">
                الإجمالي: <span id="cartTotalPrice">0</span> EGP
            </div>

            <div class="toggle-discount-container">
                <span id="toggle-discount-link" class="toggle-discount">لديك كود خصم؟</span>
            </div>

            <div id="discount-wrapper" class="discount-wrapper">
                <div class="discount-code-container">
                    <input type="text" id="discountCodeInput" placeholder="أدخل الكود هنا">
                    <button id="applyDiscountBtn" onclick="applyDiscount('cart')" title="تطبيق الكود">✓</button>
                </div>
                <div id="discountMessage" class="discount-message"></div>
            </div>

            <button onclick="goToCheckout()" class="checkout-btn-centered">إتمام الشراء</button>

            <div class="modal-trust-badges">
                <div class="trust-badge">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>
                    <span>دفع آمن</span>

                </div>
                <div class="trust-badge">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
                    <span>تسليم فوري</span>
                </div>
            </div>
        </div>
    </div>

    <div id="confirmationModal" class="modal">
        <span class="close-btn" onclick="closeModal('confirmationModal')">&times;</span>
        <div class="modal-body" style="text-align: center;">
            <h2 id="confirmationTitle">تأكيد العملية</h2>
            <p id="confirmationMessage" style="font-size: 1.2rem; margin: 20px 0;">هل قمت بإتمام عملية الدفع بالفعل؟</p>

            <div style="display: flex; justify-content: center; gap: 15px; margin-top: 25px;">
                <button id="confirm-no-btn" class="button-secondary">لا</button>
                <button id="confirm-yes-btn" class="button-primary">نعم، قمت بالدفع</button>
            </div>
        </div>
    </div>

    <div id="checkoutModal" class="modal">
        <span class="close-btn" onclick="closeModal('checkoutModal')">&times;</span>
        <div class="modal-body">
            <h2 style="text-align: center;">طرق الدفع</h2>
            <p style="text-align: center; color: #ccc;">اختر طريقة الدفع المناسبة لك:</p>
            <div id="checkoutPaymentOptionsContainer">
            </div>
        </div>
    </div>

    <div id="cod-services" class="section glass-card">
        <h2 style="text-align: center; border: none;">Call of Duty Services | All platforms 🔵</h2>

        <div class="tabs-container">
            <div class="tab-buttons">
                <button class="tab-button" data-tab="cod-bo6-page">Black Ops 6</button>
                <button class="tab-button" data-tab="cod-mw3-page">Modern Warfare III</button>
                <button class="tab-button" data-tab="cod-bo7-page">Black Ops 7</button>
            </div>
        </div>

        <div id="cod-bo6-page" class="tab-content">
            <div class="products-container" id="cod-bo6-container">
            </div>
        </div>

        <div id="cod-mw3-page" class="tab-content">
            <div class="products-container" id="cod-mw3-container">
            </div>
        </div>

        <div id="cod-bo7-page" class="tab-content">
            <h2 style="text-align: center; color: var(--accent-yellow); border: none; font-size: 2rem; margin-top: 40px;">قريبًا...</h2>
            <p style="text-align: center; color: #ccc; font-size: 1.1rem;">ترقبوا خدماتنا الجديدة للعبة Call of Duty: Black Ops 7!</p>
        </div>
    </div>

    <div id="giftingCalculatorModal" class="modal">
        <span class="close-btn" onclick="closeModal('giftingCalculatorModal')">&times;</span>
        <div class="modal-body">
            ‌
            <h2>شراء لعبة كـ Steam Gift🎁 علي حسابك الشخصي</h2>
            <p class="modal-description">أدخل المعلومات ليتم حساب التكلفة وإرسالها لك.</p>

            <div class="input-wrapper">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4Zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10Z" /></svg>
                <input type="text" id="giftingFriendCode" placeholder="Steam Friend Code" required>
            </div>

            <div class="input-wrapper">
                <svg xmlns="http://www.w.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5z" /><path d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm15 0a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2z" /></svg>
                <input type="text" id="giftingGameName" placeholder="اسم اللعبة (باللغة الإنجليزية)" required>
            </div>

            <div class="input-wrapper">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M4 10.781c.524 1.637 1.82 2.77 3.432 2.77.529 0 1.013-.142 1.442-.394.101.242.233.493.385.737a.5.5 0 0 0 .82.164l.006-.007a.5.5 0 0 0 .163-.82c-.153-.245-.286-.496-.386-.74a1.45 1.45 0 0 0 .228-1.073c-.287-1.123-1.348-1.954-2.66-1.954-1.288 0-2.35.794-2.64 1.865a1.51 1.51 0 0 0 .142 1.257c.108.22.25.42.415.597.201.206.442.366.703.46.23.084.475.12.722.12.553 0 1.072-.19 1.488-.545a.5.5 0 0 0-.42-.869c-.31.255-.65.4-1.01.4-1.127 0-2.028-.73-2.24-1.782a.5.5 0 0 0-.962.182Z" /><path d="M12.5 1a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1Zm-1 2a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2Zm-1 2a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1h-3Zm1 4a.5.5 0 1 0-1 0 .5.5 0 0 0 1 0Z" /><path d="M8 1a.5.5 0 0 0-1 0v2a.5.5 0 0 0 1 0V1Z" /><path d="M4.646 2.646a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708l-2-2a.5.5 0 0 1 0-.708ZM2.5 5a.5.5 0 0 0-1 0v3a.5.5 0 0 0 1 0V5Z" /></svg>
                <input type="number" id="giftingGamePriceUSD" placeholder="سعر اللعبة بالدولار ($) على ستيم" required oninput="calculateGiftingPrice()">
            </div>

            <div id="giftingFinalPriceDisplay">
            </div>

            <div style="text-align: center; margin-top: 20px;">
                <button id="proceedToGiftingPaymentBtn" class="button-primary" onclick="proceedToGiftingPayment()">اذهب للدفع</button>
            </div>
        </div>
    </div>

    <div id="supportModal" class="modal">
        <span class="close-btn" onclick="closeModal('supportModal')">&times;</span>
        <div class="modal-body support-modal-body">

            <h2 class="support-title">
                <i class="fas fa-headset support-header-icon"></i>
                مركز الدعم الفني
            </h2>

            <p class="support-subtitle">واجهتك مشكلة؟ فريقنا جاهز لمساعدتك 24/7</p>

            <div class="support-cards-container">

                <div class="support-card email-card" onclick="copySupportEmail(this)">
                    <div class="icon-wrapper">
                        <i class="fas fa-envelope"></i>
                    </div>
                    <div class="text-wrapper">
                        <span class="label">تواصل عبر البريد</span>
                        <span class="value" id="supportEmailText">Berlinstoregoe@gmail.com</span>
                    </div>
                    <div class="action-icon">
                        <i class="fas fa-copy"></i>
                        <span class="tooltip">نسخ</span>
                    </div>
                </div>

                <a href="https://discord.gg/D3shcEb5xe" target="_blank" class="support-card discord-card">
                    <div class="icon-wrapper">
                        <i class="fa-brands fa-discord"></i>
                    </div>
                    <div class="text-wrapper">
                        <span class="label">تذاكر الدعم المباشر</span>
                        <span class="value">Join Discord Server</span>
                    </div>
                    <div class="action-icon">
                        <i class="fas fa-external-link-alt"></i>
                    </div>
                </a>

            </div>

            <div class="support-footer">
                <p>نرد عادةً في غضون دقائق!</p>
            </div>
        </div>
    </div>

    <div id="overlay" class="overlay" onclick="closeModal('all')"></div>

    <div id="my-orders-auth-page" class="section glass-card" style="
        display: none;
        max-width: 500px;
        margin: 80px auto;
        padding: 40px 25px;
        /* لضمان توسيط المحتوى داخلياً */
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
    ">

        <img src="./images/BerlinStore.png" alt="Berlin Store" style="width: 100px; margin-bottom: 25px; filter: drop-shadow(0 0 10px rgba(255,255,255,0.4));">

        <h2 style="margin: 0 0 10px 0; border: none; color: var(--accent-yellow);">متابعة الطلبات</h2>

        <p style="font-size: 1rem; color: #e0e0e0; max-width: 400px; margin: 0 auto 30px auto; line-height: 1.6;">
            يمنحك تسجيل الدخول وصولًا سريعًا لطلباتك وإدارة حسابك بسهولة وتجربة استخدام أفضل.
        </p>

        <div class="auth-buttons-group">

            <button onclick="openAuthModal('login')" class="auth-action-btn btn-login">
                <i class="fas fa-sign-in-alt" style="margin-left: 8px;"></i> تسجيل الدخول
            </button>

            <button onclick="openAuthModal('signup')" class="auth-action-btn btn-signup">
                <i class="fas fa-user-plus" style="margin-left: 8px;"></i> إنشاء حساب جديد
            </button>

        </div>

        <p style="margin-top: 30px; font-size: 0.9rem; color: #aaa;">
            هل تحتاج للمساعدة؟ <a href="#" onclick="showModal('supportModal')" style="color: var(--accent-yellow);">تواصل مع الدعم</a>
        </p>
    </div>

    <div id="my-orders-page" class="section glass-card" style="display: none; max-width: 800px; margin: 0 auto;">

        <div class="page-header-info">

            <img id="orders-page-icon" src="./images/orders-title-icon.png" alt="My Orders Title">

            <div id="orders-summary-box">
                <p class="summary-label">إجمالي الطلبات المكتملة:</p>

                <p class="summary-value" id="total-completed-orders">0</p>

                <p class="user-rank-display-small" id="total-orders-rank">🥉 BRONZE</p>
            </div>
        </div>

        <hr class="thin-divider">

        <div id="orders-loader" style="text-align: center; display: none;">
            <div class="loading-spinner"></div>
            <p>جاري تحميل طلباتك...</p>
        </div>

        <p id="no-orders-msg" style="display: none; text-align: center; color: #ccc; margin-top: 20px;">
            لا توجد طلبات مسجلة لهذا الحساب حتى الآن.
        </p>

        <div id="orders-list-container" style="display: flex; flex-direction: column; gap: 15px;">
        </div>

    </div>

    <div id="profile-settings-page" class="section glass-card" style="
    display: none;
    max-width: 900px !important;
    width: 90%;
    margin: 40px auto;
">

        <div class="profile-header-section" style="text-align: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 1px solid rgba(255, 255, 255, 0.1);">

            <div class="current-avatar-wrapper">
                <img id="currentProfilePic" src="./images/BerlinStore.png" alt="Avatar" class="profile-avatar-large">
                <div class="edit-avatar-icon" onclick="toggleAvatarSelection()">
                    <i class="fas fa-pen"></i>
                </div>
            </div>

            <p id="currentProfileEmail" style="color: #ccc; font-size: 14px; direction: ltr; margin-top: 5px; margin-bottom: 0;"></p>
            <div id="user-rank-display" class="user-rank-badge" style="display: inline-block;">DIAMOND</div>
        </div>

        <div id="avatar-selection-area">
            <h3 style="color: var(--accent-yellow); margin-top: 0px; font-size: 14px; text-align: right; border: none; padding-right: 0;">اختر صورتك الرمزية (Avatar) :</h3>

            <h3 style="color: var(--light-text); margin-top: 15px; font-size: 13px; text-align: right; border: none; padding-right: 0;">رموز عامة:</h3>
            <div class="avatars-grid avatar-category-divider">
                <img src="https://cdn-icons-png.flaticon.com/512/4333/4333609.png" onclick="selectNewAvatar(this.src)">
                <img src="https://cdn-icons-png.flaticon.com/512/147/147142.png" onclick="selectNewAvatar(this.src)">
                <img src="https://cdn-icons-png.flaticon.com/512/4140/4140048.png" onclick="selectNewAvatar(this.src)">
                <img src="https://cdn-icons-png.flaticon.com/512/6997/6997662.png" onclick="selectNewAvatar(this.src)">
                <img src="https://cdn-icons-png.flaticon.com/512/4140/4140037.png" onclick="selectNewAvatar(this.src)">
                <img src="https://cdn-icons-png.flaticon.com/512/4140/4140047.png" onclick="selectNewAvatar(this.src)">
            </div>

            <h3 style="color: var(--accent-yellow); margin-top: 20px; font-size: 13px; text-align: right; border: none; padding-right: 0;">عالم الألعاب:</h3>
            <div class="avatars-grid avatar-category-divider">
                <img src="./images/my_avatar_3.png" onclick="selectNewAvatar(this.src)" title="الصورة الجديدة 3">
                <img src="./images/my_avatar_2.png" onclick="selectNewAvatar(this.src)" title="الصورة الجديدة 2">
                <img src="./images/my_avatar_1.png" onclick="selectNewAvatar(this.src)" title="الصورة الجديدة 1">
                <img src="./images/my_avatar_4.png" onclick="selectNewAvatar(this.src)" title="الصورة الجديدة 4">
                <img src="./images/my_avatar_5.png" onclick="selectNewAvatar(this.src)" title="الصورة الجديدة 5">
                <img src="./images/my_avatar_6.png" onclick="selectNewAvatar(this.src)" title="الصورة الجديدة 6">
                <img src="./images/my_avatar_7.png" onclick="selectNewAvatar(this.src)" title="الصورة الجديدة 7">
                <img src="./images/my_avatar_8.png" onclick="selectNewAvatar(this.src)" title="الصورة الجديدة 8">
                <img src="./images/my_avatar_9.png" onclick="selectNewAvatar(this.src)" title="الصورة الجديدة 9">
                <img src="./images/my_avatar_10.png" onclick="selectNewAvatar(this.src)" title="الصورة الجديدة 10">
            </div>

            <div class="avatar-action-buttons">
                <button class="save-avatar-btn" onclick="saveAvatarOnly()">
                    <i class="fas fa-save"></i> حفظ الصورة
                </button>
                <button class="cancel-avatar-btn" onclick="toggleAvatarSelection(true)">
                    إلغاء
                </button>
            </div>
        </div>

        <div style="padding: 0 15px; margin-top: 15px;">

            <div class="name-input-group-centered" style="margin-bottom: 25px;">


                <div class="input-wrapper" id="name-input-wrapper-center">
                    <i class="fas fa-user" style="color: var(--main-purple); font-size: 18px;"></i>
                    <input type="text" id="profileDisplayName" placeholder="ادخل اسم العرض" style="width: 100%; text-align: right; margin: 0; padding: 0;">
                </div>
            </div>

            <div class="profile-actions-container">

                <button onclick="saveProfileChanges()" class="confirm-payment-btn" style="width: auto; padding: 12px 30px; background-color: var(--green-buy-btn);">
                    <i class="fas fa-save"></i> حفظ التغييرات
                </button>

                <button onclick="showModal('supportModal')" class="buy-btn" style="width: auto; padding: 12px 20px; background-color: #ff4757; border-color: #ff4757;">
                    تغيير الباسورد <i class="fas fa-lock" style="margin-left: 8px;"></i>
                </button>
            </div>
        </div>
    </div>

    <footer id="footer">

        <div class="trust-badges-container">
            <div class="trust-badge">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>
                <span>دفع آمن 100%</span>
            </div>
            <div class="trust-badge">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
                <span>تسليم فوري</span>
            </div>
            <div class="trust-badge">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                <span>دعم فني 24/7</span>
            </div>
        </div>

        <div id="suggestionModal" class="modal">
            <span class="close-btn" onclick="closeModal('suggestionModal')">×</span>
            <div class="modal-body">
                <h2>شاركنا اقتراحك</h2>
                <p style="font-size: 14px; color: #ccc; margin-top: -10px; margin-bottom: 20px;">سواء كانت فكرة لمنتج جديد أو تحسين لخدمة حالية، رأيك يهمنا.</p>
                <form id="suggestionForm">
                    <input type="text" name="name" placeholder="اسمك (اختياري)">
                    <textarea name="suggestion" rows="5" placeholder="اكتب اقتراحك هنا..." required></textarea>
                    <button type="submit">إرسال الاقتراح</button>
                </form>
                <div id="suggestionMessage" style="margin-top: 15px; font-weight: bold;"></div>
            </div>
        </div>


        <div class="footer-links">
            <a href="https://discord.gg/D3shcEb5xe" target="_blank" class="footer-link">
                <span>سيرفر الديسكورد</span>
                <img src="./images/discord.png" alt="Discord">
            </a>
            <a href="https://linktr.ee/Berlinstore22" target="_blank" class="footer-link">
                <span>جميع روابطنا</span>
                <img src="./images/BerlinStore.png" alt="Berlin Store Logo">
            </a>
            <a href="#about" class="footer-link">من نحن؟</a>
            <a href="#terms" class="footer-link">شروط الخدمة</a>
            <a href="#privacy" class="footer-link">سياسة الخصوصية</a>
            <a href="#faq" class="footer-link">الأسئلة الشائعة</a>
        </div>


        <div id="minecraft-product-page" class="category-main-content" style="display: none;">
        </div>


        <p id="copyright">© 2020-2025 Berlin Store. جميع الحقوق محفوظة.</p>

        <button id="theme-toggle-btn">
            <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
            <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
        </button>
        <div id="mobile-nav">
            <a href="#home" class="mobile-nav-btn">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                <span>الرئيسية</span>
            </a>
            <a onclick="showModal('supportModal')" class="mobile-nav-btn">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                <span>الدعم</span>
            </a>
            <a onclick="showModal('cartModal'); renderCart();" class="mobile-nav-btn" id="mobile-cart-btn">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg>
                <span>السلة</span>
                <span class="cart-count" id="mobile-cart-count">0</span>
            </a>
        </div>

        <div id="itakura-diary-overlay">
            <span class="close-diary-btn" onclick="closeOverlay('diary')">✕</span>

            <div class="diary-paper">

                <div class="diary-date">２月９日</div>
                <div class="visible-line">
                    最近、暖かくなってきた。ようやく散歩に出ようかという気になってきた。<br>
                    仕事は遅々として進まないが、マイペースでやるしかない。
                </div>
                <div class="hidden-line">
                    またあの女から電話だ…　気のせいか、あの高飛車な口調が焦りを帯びているように聞こえた。<br>
                    「まだできないの？」「早くして！」と、まるで誰かに追われているかのような…
                </div>

                <br>

                <div class="diary-date">２月１０日</div>
                <div class="visible-line">
                    視力が落ちてきた。そろそろ医者に行くべきかもしれない。<br>
                    今日は気晴らしに新しい将棋ソフトを買った。
                </div>
                <div class="hidden-line">
                    彼らの正体が少しずつわかってきた気がする。とんでもない奴らにとんでもない物を発注されてしまったようだ。<br>
                    私の目が黒いうちは、奴らに完成品を渡すわけにはいかない。絶対に…
                </div>

                <br>

                <div class="hidden-line">
                    <div class="diary-date" style="color: #fdfdf5;">２月１１日</div>
                    また机の上のペンが５cm移動している…<br>
                    やはり誰かが事務所に忍びこんでいるようだ。<br>
                    誰なんだ！？姿を現せ！！
                </div>

                <br>

                <div class="diary-date">２月１３日</div>
                <div class="visible-line">
                    静かな一日だ。特に何も起きなかった。
                </div>
                <div class="hidden-line">
                    やはり私は間違っていたようだ…<br>
                    彼らが求めているソフトは…　私が考えているものとは違うらしい…<br>
                    我々の目の届かぬところで、彼らは何をしようとしているんだ？<br>
                    人類のために、このソフトは完成させてはならないと断念した。<br>
                    彼らとの連絡方法は電子メールに変わった。
                </div>

                <br>

                <div class="diary-date">２月１４日</div>
                <div class="visible-line">
                    バレンタインデー。今年もチョコレートはなしか。
                </div>
                <div class="hidden-line">
                    私の別荘から電話をかけて来た。<br>
                    どうやら女と一泊するらしい。いい気なもんだ…<br>
                    疲れた… このままではいつか私は殺されてしまうかも…<br><br>
                    あまりにも高圧的な女の口調に堪えかねて「何様のつもりだ」となじったら、<br>
                    女は笑いながら英語でこう言った…

                    <span class="english-quote">
                        We can be both of God and the Devil.<br>
                        Since we're trying to raise the dead against the stream of time.
                    </span>
                </div>

            </div>
        </div>

        <div id="vermouth-console-overlay">
            <div class="console-text" id="console-content"></div>
        </div>

        <div id="aptx-overlay"></div>
        <div id="aptx-warning">
            ⚠️ CRITICAL FAILURE ⚠️<br>
            <span style="font-size: 1.5rem; color: white;">UNKNOWN TOXIN DETECTED</span><br>
            <span style="font-size: 1rem; color: #ccc;">(Click anywhere to resist)</span>

        </div>
        <div id="sohayl-diary-overlay" class="diary-overlay">

            <div class="close-diary-btn" onclick="closeSohaylDiary()">X</div>

            <div class="diary-paper">

                <h2 style="text-align: center; color: #303030; margin-bottom: 30px;">
                    Sohayl Notes
                </h2>

                <div style="padding: 20px; border: 1px solid #e0e0e0; border-radius: 8px; margin-bottom: 30px;">
                    <p style="text-align: right; color: #000000; font-weight: bold;">
                        [Top Secret File]
                    </p>
                    <div class="hidden-sohayl-line" style="text-align: right; margin-top: 10px;">
                        <p>(: if you found this tell me in discord </p>
                        <p>Cheatcodes (Hidden file)</p>
                        <p>MATRIX</p>
                        <p>itakura</p>
                        <p>kaitokid</p>
                        <p>APTX4869</p>
                        <p>KONAMICODE</p>
                    </div>

                    <p style="text-align: left; color: #000000; font-size: 12px; margin-top: 15px;">
                        <span class="hidden-sohayl-line">There is always only one truth.</span>
                    </p>
                </div>

            </div>
        </div>

        <div id="authModal" class="modal">
            <span class="close-btn" onclick="closeModal('all')">&times;</span>

            <div class="modal-body auth-modal-body">
                <h2 id="authTitle">تسجيل الدخول</h2>

                <div class="auth-fields-container">
                    <div class="auth-input-group">
                        <input type="email" id="userEmail" placeholder="البريد الإلكتروني" class="auth-field">
                    </div>

                    <div class="auth-input-group">
                        <input type="password" id="userPassword" placeholder="كلمة المرور" class="auth-field">
                    </div>
                </div>

                <p id="authMessage" class="auth-message"></p>

                <button id="submitAuthBtn" class="confirm-payment-btn modal-submit-btn">
                    تسجيل الدخول
                </button>

                <div class="auth-separator">
                    <span>أو</span>
                </div>

                <button onclick="signInWithGoogle()" class="google-auth-btn">
                    <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google Logo">
                    <span>المتابعة باستخدام Google</span>
                </button>

                <div class="auth-footer-text">
                    <span id="toggleAuthText">ليس لديك حساب؟</span>
                    <span id="toggleAuthBtn" class="auth-toggle-btn">
                        إنشاء حساب جديد
                    </span>
                </div>
            </div>
        </div>


    </footer>

    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

    <script>

        let sohaylAudio = null;
        let itakuraAudio = null; // متغير لتخزين صوت المذكرة

        // ✅ دالة إظهار إشعار التروفي (PlayStation Style)
        function showPlaystationTrophy(title, subtitle = "You earned a trophy") {
            // 1. تشغيل صوت التروفي (نغمة PS4 المميزة)
            const audio = new Audio('https://www.myinstants.com/media/sounds/ps4-trophy-ding.mp3');
            audio.volume = 0.6;
            audio.play().catch(e => console.log("Audio play error:", e));

            // 2. إنشاء عنصر التروفي
            const trophy = document.createElement('div');
            trophy.className = 'ps-trophy-alert';

            // HTML الداخلي للتروفي
            trophy.innerHTML = `
            <div class="trophy-icon-container">
                <img src="https://cdn-icons-png.flaticon.com/512/5906/5906002.png" alt="Trophy" style="width: 35px; height: 35px;">
            </div>
            <div class="trophy-details">
                <span class="trophy-subtitle">${subtitle}</span>
                <div class="trophy-title">${title}</div>
            </div>
        `;

            // 3. إضافة التروفي للصفحة
            document.body.appendChild(trophy);

            // 4. إزالة التروفي بعد 4 ثواني (مدة الأنيميشن)
            setTimeout(() => {
                trophy.classList.add('hide'); // تفعيل أنيميشن الاختفاء
                setTimeout(() => {
                    trophy.remove(); // حذفه من الصفحة تماماً
                }, 600); // انتظار انتهاء حركة الاختفاء
            }, 4000);
        }
        // دالة تقرأ الرتبة الحالية (المُحدثة) من الـ DOM
        function getCachedRankData() {
            const settingsBadge = document.getElementById('user-rank-display');
            const rankName = settingsBadge ? settingsBadge.textContent.trim() : '🥉 BRONZE';
            const rankBg = settingsBadge ? settingsBadge.style.background : '#cd7f32';
            const rankColor = settingsBadge ? settingsBadge.style.color : '#fff';

            // نعتمد على دالة حساب الرتبة لإعادة توليد البيانات الكاملة (مثل الكلاس)
            let orderCount = 0;
            if (rankName.includes('DIAMOND')) orderCount = 5;
            if (rankName.includes('GOLD')) orderCount = 1;

            // نستخدم نفس المنطق الموجود في calculateUserRank لضمان التناسق
            const data = calculateUserRank(orderCount);

            // نضمن إرجاع القيم الفعلية التي تم قراءتها من الستايل (لتجنب مشاكل الـ CSS)
            data.name = rankName;
            data.bg = rankBg;
            data.color = rankColor;

            return data;
        }
        // ✅ 2. ضيف الكود ده في آخر ملف الجافاسكريبت

        function handleUserClick() {
            const user = firebase.auth().currentUser;

            if (user) {
                const menu = document.getElementById('user-dropdown-menu');

                if (menu.style.visibility === 'visible') {
                    // كود الإخفاء
                    menu.style.opacity = '0';
                    menu.style.visibility = 'hidden';
                    menu.style.transform = 'translateY(10px)';
                } else {

                    // 🛑 الخطوة الحاسمة: قراءة وتطبيق الرتبة الصحيحة فوراً (Synchronous)
                    const dropdownBadge = document.getElementById('dropdown-rank-badge');

                    if (dropdownBadge) {
                        // قراءة البيانات الصحيحة من العنصر المُحدث (#user-rank-display)
                        const cachedData = getCachedRankData();

                        // تطبيق التنسيق والاسم فوراً قبل ظهور القائمة
                        dropdownBadge.textContent = cachedData.name;
                        dropdownBadge.style.background = cachedData.bg;
                        dropdownBadge.style.color = cachedData.color;

                        // نسخ الكلاسات لضمان التوهج
                        ['rank-bronze', 'rank-gold', 'rank-diamond'].forEach(cls => {
                            dropdownBadge.classList.remove(cls);
                        });
                        dropdownBadge.classList.add(cachedData.class);
                    }

                    // (1) استدعاء التحديث في الخلفية (للحالات التي لم يتم فيها تحديث الرانك بعد)
                    if (typeof fetchUserOrders === 'function') {
                        fetchUserOrders(true);
                    }

                    // (2) إظهار القائمة الآن بعد تحديث المحتوى
                    menu.style.opacity = '1';
                    menu.style.visibility = 'visible';
                    menu.style.transform = 'translateY(0)';
                }
            } else {
                window.location.hash = '#my-orders-auth-page';
            }
        }

        // دالة تسجيل الخروج
        function logoutUser() {
            firebase.auth().signOut().then(() => {
                // اخفاء القائمة
                const menu = document.getElementById('user-dropdown-menu');
                if (menu) {
                    menu.style.opacity = '0';
                    menu.style.visibility = 'hidden';
                }

                showInfoToast("تم تسجيل الخروج بنجاح 👋", 3000);

                // ارجع للصفحة الرئيسية
                window.location.hash = '#home';

                // تحديث الزرار فوراً لـ "دخول"
                document.getElementById('user-account-text').textContent = "تسجيل الدخول";

            }).catch((error) => {
                console.error('Sign Out Error', error);
            });
        }

        // عشان القائمة تقفل لو دوست في أي حتة تانية
        window.addEventListener('click', function (e) {
            const menu = document.getElementById('user-dropdown-menu');
            const btn = document.getElementById('user-account-btn');

            if (menu && btn && !btn.contains(e.target) && !menu.contains(e.target)) {
                menu.style.opacity = '0';
                menu.style.visibility = 'hidden';
                menu.style.transform = 'translateY(10px)';
            }
        });

        // ==========================================
        // 📦 1. دالة زر "طلباتي" الذكي (النسخة الآمنة)
        // ==========================================
        window.openMyOrders = function () {
            // التأكد من أن الفايربيس شغال
            if (typeof firebase === 'undefined' || !firebase.auth) {
                window.location.hash = '#my-orders-auth-page';
                return;
            }

            const user = firebase.auth().currentUser;

            if (user) {
                // ✅ لو مسجل دخول: روح علطول على صفحة الطلبات وهات البيانات
                window.location.hash = '#my-orders-page';
                fetchUserOrders();
            } else {
                // ❌ لو مش مسجل: روح على صفحة تسجيل الدخول
                window.location.hash = '#my-orders-auth-page';
            }
        };

        // ==========================================
        // 🚀 2. تهيئة النظام عند تحميل الصفحة
        // ==========================================
        document.addEventListener('DOMContentLoaded', function () {
            console.log("🚀 جاري تشغيل نظام التسجيل...");

            // --- إعدادات فايربيس ---
            const firebaseConfig = {
                apiKey: "AIzaSyAsrl6fyQ65lGU22WlTsm8HDtjhKYKw4bs",
                authDomain: "berlin-storegoe-login.firebaseapp.com",
                projectId: "berlin-storegoe-login",
                storageBucket: "berlin-storegoe-login.firebasestorage.app",
                messagingSenderId: "429636991312",
                appId: "1:429636991312:web:38bb70e5186173ae809455",
                measurementId: "G-WGF1G0B6FD"
            };

            // تهيئة التطبيق فقط إذا لم يكن مهيأ مسبقاً
            if (!firebase.apps.length) {
                firebase.initializeApp(firebaseConfig);
            }
            const auth = firebase.auth();

            // --- تعريف عناصر الواجهة ---
            const btnSignup = document.getElementById('btn-signup');
            const btnLogin = document.getElementById('btn-login');
            const emailInput = document.getElementById('userEmail');
            const passInput = document.getElementById('userPassword');
            const msgBox = document.getElementById('authMessage');
            const authModal = document.getElementById('authModal'); // للتأكد من إغلاق النافذة لاحقاً

            // --- منطق زر "إنشاء حساب" ---
            if (btnSignup) {
                btnSignup.addEventListener('click', function () {
                    const email = emailInput.value;
                    const pass = passInput.value;

                    msgBox.style.color = "yellow";
                    msgBox.textContent = "جاري الإنشاء...";

                    if (pass.length < 6) {
                        msgBox.style.color = "red";
                        msgBox.textContent = "كلمة المرور ضعيفة (6 أرقام على الأقل)";
                        return;
                    }

                    auth.createUserWithEmailAndPassword(email, pass)
                        .then((userCredential) => {
                            msgBox.style.color = "#00ff00";
                            msgBox.textContent = "✅ تم إنشاء الحساب بنجاح!";
                            console.log("User Created:", userCredential.user);
                            // إغلاق النافذة بعد ثانية ونصف
                            setTimeout(() => {
                                if (authModal) {
                                    authModal.classList.remove('is-visible');
                                    authModal.style.display = 'none';
                                    document.getElementById('overlay').style.display = 'none';
                                }
                            }, 1500);
                        })
                        .catch((error) => {
                            console.error(error);
                            let errorText = "حدث خطأ: " + error.message;
                            if (error.code === 'auth/email-already-in-use') errorText = "هذا الإيميل مسجل بالفعل!";
                            if (error.code === 'auth/invalid-email') errorText = "شكل الإيميل غير صحيح!";
                            msgBox.style.color = "red";
                            msgBox.textContent = errorText;
                        });
                });
            }

            // --- منطق زر "تسجيل الدخول" ---
            if (btnLogin) {
                btnLogin.addEventListener('click', function () {
                    const email = emailInput.value;
                    const pass = passInput.value;

                    msgBox.style.color = "yellow";
                    msgBox.textContent = "جاري الدخول...";

                    auth.signInWithEmailAndPassword(email, pass)
                        .then((userCredential) => {
                            msgBox.style.color = "#00ff00";
                            msgBox.textContent = "🔓 تم تسجيل الدخول بنجاح!";

                            // إغلاق النافذة بعد ثانية ونصف
                            setTimeout(() => {
                                if (authModal) {
                                    authModal.classList.remove('is-visible');
                                    authModal.style.display = 'none';
                                    document.getElementById('overlay').style.display = 'none';
                                }
                                // إذا كان المستخدم في صفحة "طلباتي"، قم بتحديث الصفحة أو التوجيه
                                if (window.location.hash === '#my-orders-auth-page') {
                                    window.location.hash = '#shipping';
                                }
                            }, 1500);
                        })
                        .catch((error) => {
                            console.error(error);
                            msgBox.style.color = "red";
                            msgBox.textContent = "❌ الإيميل أو الباسورد خطأ!";
                        });
                });
            }

            // --- مراقبة حالة المستخدم وتحديث زر الهيدر ---
            auth.onAuthStateChanged((user) => {
                const userBtnText = document.getElementById('user-account-text');

                if (user) {
                    console.log("User is signed in:", user.email);

                    // إخفاء أزرار الدخول في الصفحة الرئيسية (إن وجدت)
                    const btnLoginMain = document.getElementById('btn-login');
                    if (btnLoginMain) btnLoginMain.style.display = 'none';

                    // تحديث زر الهيدر العلوي
                    if (userBtnText) {
                        // نأخذ الجزء الأول من الإيميل كاسم مستخدم
                        const username = user.email.split('@')[0];
                        userBtnText.textContent = "👤 " + username;

                        loadProfileData(user);
                    }
                } else {
                    console.log("User is signed out");
                    // إعادة الزر لحالته الأصلية
                    if (userBtnText) {
                        userBtnText.textContent = "تسجيل الدخول";
                    }

                    // إظهار أزرار الصفحة الرئيسية مرة أخرى
                    const btnLoginMain = document.getElementById('btn-login');
                    if (btnLoginMain) btnLoginMain.style.display = 'inline-block';
                }
            });
        });


        function openSohaylDiary() {
            document.getElementById('itakura-diary-overlay').style.display = 'none';
            const sohaylDiary = document.getElementById('sohayl-diary-overlay');
            if (sohaylDiary) {
                sohaylDiary.style.display = 'block';
                document.body.style.overflow = 'hidden';
            }
            const mobileNav = document.getElementById('mobile-nav');
            if (mobileNav) mobileNav.style.display = 'none';
        }
        function closeSohaylDiary() {
            const sohaylDiary = document.getElementById('sohayl-diary-overlay');
            if (sohaylDiary) {
                sohaylDiary.style.display = 'none';
            }

            // الكود الموجود لديك لإظهار شريط التنقل للموبايل
            if (window.innerWidth <= 768) {
                const mobileNav = document.getElementById('mobile-nav');
                if (mobileNav) mobileNav.style.display = 'flex';
            }

            // ✅✅✅ السطر الحاسم الذي يعيد التمرير (Scroll) ✅✅✅
            document.body.style.overflow = 'auto';
        }

        // =================================================================
        // 🕵️‍♂️ DETECTIVE CONAN & GAMING EASTER EGGS (MERGED & FIXED)
        // =================================================================

        // 1. الدالة الموحدة للبحث والشفرات (القلب النابض)
        function handleSearchEnter(event) {
            if (event.key === 'Enter') {
                event.preventDefault();
                const query = event.target.value.toLowerCase().trim();

                // --- السيناريو 1: مذكرات إيتاكورا (Itakura Diary) ---
                if (query === 'itakura' || query === 'conanisready') {
                    closeInstantSearch();
                    openItakuraDiary();
                    return;
                }

                // --- السيناريو 2: بلموت (الاختراق - Hacking) ---
                if (query === 'vermouth') {
                    closeInstantSearch();
                    startVermouthHackingEffect();
                    return;
                }
                if (query === 'sohayl') {
                    closeInstantSearch();

                    // 1. تشغيل التروفي فوراً (هيظهر فوق كل حاجة بسبب الـ z-index الجديد)
                    showPlaystationTrophy("Sohayl's notes found", "Hidden Trophy Unlocked!");

                    // 2. فتح المذكرة بعد جزء من الثانية (عشان يحس ان التروفي هو اللي فتحها)
                    setTimeout(() => {
                        openSohaylDiary();
                    }, 500); // نص ثانية تأخير

                    return;
                }
                if (query === '1412' || query === 'kaitokid') {
                    closeInstantSearch();
                    triggerKaitouKidFullEffect(); // ✅ تشغيل الدالة الجديدة
                    return;
                }
                if (query === 'conan') {
                    openSohaylDiary(); // ✅✅ تم ربط الدالة هنا
                    return;
                }
                // --- السيناريو 3: عقار APTX 4869 (تأثير التقلص) ---
                if (query === 'aptx4869') {
                    closeInstantSearch();

                    // إظهار كبسولة العقار في نص الشاشة
                    const pill = document.getElementById('aptx-pill');
                    pill.style.display = 'block';

                    // تأخير بسيط عشان الأنيميشن يشتغل
                    setTimeout(() => {
                        pill.classList.add('show');
                    }, 50);

                    // تشغيل صوت "ظهور" بسيط (اختياري)
                    // new Audio('./sounds/pop.mp3').play();

                    return;
                }

                // --- السيناريو 4: شفرات الألعاب الأخرى (Cheats) ---
                const cheats = ['matrix', 'hesoyam', 'aimbot'];
                if (cheats.includes(query)) {
                    performGlobalSearch(query); // دالة الشفرات الخاصة بك
                    closeInstantSearch();
                    return;
                }

                // --- السيناريو 5: البحث الطبيعي في الموقع (Default Search) ---
                // إذا لم تكن الكلمة شفرة، قم بالبحث عن المنتجات
                performInstantSearch(true);
            }
        }

        function consumeAptx() {
            const pill = document.getElementById('aptx-pill');

            if (pill) {
                pill.classList.remove('show');
                setTimeout(() => { pill.style.display = 'none'; }, 500);
            }

            if (typeof triggerAptxEffect === 'function') {
                triggerAptxEffect();
            } else {
                document.body.classList.add('aptx-child-mode');
            }

            console.log("⏳ الترياق سيظهر بعد 60 ثانية..."); // رسالة للتأكيد

            // ⏱️ التعديل هنا: غير الرقم لـ 60000 (يعني دقيقة كاملة)
            setTimeout(() => {
                showAntidote();
            }, 60000);
        }

        // 3. دالة ظهور الترياق
        function showAntidote() {
            const antidote = document.getElementById('antidote-pill');
            if (antidote) {
                antidote.style.display = 'block';
                setTimeout(() => {
                    antidote.classList.add('show');
                    // تغيير لون التوهج للأخضر عشان يبان إنه علاج
                    antidote.style.filter = "drop-shadow(0 0 20px rgba(0, 255, 0, 0.6))";
                }, 50);

                // تشغيل صوت تنبيه بظهور الحل (اختياري)
                showGameAlert("🧪 The Antidote has appeared!", "success");
            }
        }

        // 4. دالة تناول الترياق واستعادة الموقع
        function consumeAntidote() {
            const antidote = document.getElementById('antidote-pill');

            // إخفاء الترياق
            antidote.classList.remove('show');
            setTimeout(() => { antidote.style.display = 'none'; }, 500);

            // 🌟 استعادة الموقع للطبيعي
            const overlay = document.getElementById('aptx-overlay');

            // إزالة كلاسات التصغير والاهتزاز
            document.body.classList.remove('aptx-child-mode');
            document.body.classList.remove('aptx-poisoned');
            document.body.style.transform = "scale(1)"; // إرجاع الحجم 100%
            document.body.style.overflow = "auto";      // إعادة السكرول

            // إخفاء الخلفية السوداء
            if (overlay) {
                overlay.style.opacity = '0';
                setTimeout(() => { overlay.style.display = 'none'; }, 1000);
            }

            // رسالة نجاح
            showGameAlert("🥃 Kudo Shinichi", "success");
        }

        // 2. دالة مذكرات إيتاكورا (Diary Logic)
        function openItakuraDiary() {
            const overlay = document.getElementById('itakura-diary-overlay');
            const sohaylDiary = document.getElementById('sohayl-diary-overlay');

            if (sohaylDiary) sohaylDiary.style.display = 'none'; // إغلاق أي نوافذ أخرى

            if (overlay) {
                overlay.classList.add('active');
                overlay.style.display = 'block';
                document.body.style.overflow = 'hidden'; // منع السكرول في الموقع

                // --- 🎵 تشغيل موسيقى إيتاكورا ---
                // لو كان شغال قبل كده، نوقفه الأول عشان ميتكررش
                if (itakuraAudio) {
                    itakuraAudio.pause();
                    itakuraAudio.currentTime = 0;
                }

                // تشغيل الملف الجديد
                itakuraAudio = new Audio('./sounds/itakura.mp3');
                itakuraAudio.volume = 0.5; // مستوى الصوت (نص)
                itakuraAudio.loop = true;  // تكرار الموسيقى طول ما المذكرة مفتوحة

                itakuraAudio.play().catch(error => {
                    console.log("Audio play failed (interaction needed):", error);
                });
            }
        }

        // 3. دالة اختراق فيرموث (Vermouth Hacking Logic)
        function startVermouthHackingEffect() {
            const consoleOverlay = document.getElementById('vermouth-console-overlay');
            const consoleContent = document.getElementById('console-content');

            if (!consoleOverlay) return;

            consoleOverlay.style.display = 'flex';
            consoleContent.innerHTML = '';
            document.body.style.overflow = 'hidden';

            const logText =
                "SYSTEM ALERT: UNAUTHORIZED ACCESS DETECTED...\n" +
                "TARGET: BERLIN STORE DATABASE\n" +
                "USER: VERMOUTH\n" +
                "DECRYPTING HIDDEN FILES...\n\n";

            const scaryQuote =
                "\"We can be both of God and the Devil...\n" +
                "Since we're trying to raise the dead against the stream of time.\"";

            let i = 0;

            function typeWriter() {
                const fullText = logText + scaryQuote;

                if (i < logText.length) {
                    consoleContent.innerHTML += logText.charAt(i);
                    i++;
                    setTimeout(typeWriter, 20);
                }
                else if (i < fullText.length) {
                    if (i === logText.length) {
                        const span = document.createElement('span');
                        span.className = 'console-highlight';
                        span.id = 'scary-span';
                        consoleContent.appendChild(span);
                    }
                    document.getElementById('scary-span').innerHTML += fullText.charAt(i);
                    i++;
                    setTimeout(typeWriter, 80);
                }
                else {
                    consoleContent.innerHTML += '<span class="blinking-cursor"></span>';

                    // إغلاق تلقائي بعد 10 ثواني (اختياري) أو بالضغط
                    consoleOverlay.onclick = function () {
                        closeOverlay('hacking');
                    };
                }
            }

            typeWriter();
        }

        // 💊 دالة تأثير APTX 4869 (النسخة السينمائية الكاملة)
        function triggerAptxEffect() {
            // 1. تشغيل الصوت
            const audioPath = 'sounds/aptx_sound.mp3';
            const audio = new Audio(audioPath);
            audio.volume = 1.0;
            audio.play().catch((e) => console.log("Audio error:", e));

            const overlay = document.getElementById('aptx-overlay');
            const warning = document.getElementById('aptx-warning');

            // 2. مرحلة الألم (أول 8 ثواني)
            if (overlay) {
                overlay.style.display = 'block';
                // تعتيم تدريجي سريع في البداية (بداية الدوار)
                setTimeout(() => { overlay.style.opacity = '0.8'; }, 100);
            }
            if (warning) warning.style.display = 'block';

            // تفعيل اهتزاز الشاشة
            document.body.classList.add('aptx-poisoned');

            // 3. مرحلة الإغماء (Blackout) - في الثانية 8
            setTimeout(() => {
                if (overlay) {
                    // تسريع السواد ليصبح دامساً فجأة قبل التحول
                    overlay.style.transition = 'opacity 2s ease';
                    overlay.style.opacity = '1';
                }
                if (warning) warning.style.display = 'none'; // اختفاء التحذير
            }, 8000);

            // 4. لحظة التحول (في الظلام الدامس) - الثانية 10
            setTimeout(() => {
                // إيقاف الاهتزاز وتفعيل وضع الطفل (والمستخدم لا يرى شيئاً)
                document.body.classList.remove('aptx-poisoned');
                document.body.classList.add('aptx-child-mode');

                // 5. مرحلة الاستيقاظ (Slow Fade In) - الثانية 12
                // نبدأ نفتح الشاشة ببطء شديد جداً
                setTimeout(() => {
                    if (overlay) {
                        // نغير الترانزيشن ليكون بطيء جداً (4 ثواني)
                        overlay.style.transition = 'opacity 4s ease-in-out';
                        overlay.style.opacity = '0'; // إخفاء السواد تدريجياً
                    }
                }, 2000); // تأخير ثانيتين بعد التحول (لحظة صمت)

                // بعد ما الرؤية تتضح، نظهر رسالة كونان ونخفي الطبقة تماماً
                setTimeout(() => {
                    if (typeof showGameAlert === "function") {
                        showGameAlert("Edogawa Conan", "success");
                    }
                    if (overlay) overlay.style.display = 'none';
                }, 6500); // بعد انتهاء الـ Fade In

            }, 10000);
        }

        // 5. دوال مساعدة (Helpers)
        function closeInstantSearch() {
            const resultsContainer = document.getElementById('navbar-search-results');
            if (resultsContainer) {
                resultsContainer.classList.remove('visible');
                resultsContainer.classList.remove('expanded'); // إزالة كلاس التوسيع إن وجد
            }
        }

        function closeOverlay(type) {
            if (type === 'diary') {
                const diary = document.getElementById('itakura-diary-overlay');
                if (diary) {
                    diary.classList.remove('active');
                    diary.style.display = 'none';

                    // --- 🔇 إيقاف الموسيقى عند الإغلاق ---
                    if (itakuraAudio) {
                        itakuraAudio.pause();
                        itakuraAudio.currentTime = 0; // إرجاع الصوت للبداية
                    }
                }
            } else if (type === 'hacking') {
                const hacking = document.getElementById('vermouth-console-overlay');
                if (hacking) hacking.style.display = 'none';
            }

            // إعادة التمرير للموقع
            document.body.style.overflow = 'auto';
        }

        // 🔔 دالة الإشعارات (بصوت جديد)
        function showGameAlert(message, type = 'default') {
            const alertBox = document.createElement('div');
            alertBox.className = `game-alert-box ${type}`;

            let icon = 'fa-bell';
            if (type === 'success') icon = 'fa-check-circle';
            if (type === 'error') icon = 'fa-exclamation-circle';
            if (type === 'cheat') icon = 'fa-gamepad';

            alertBox.innerHTML = `<i class="fas ${icon}"></i> <span>${message}</span>`;
            document.body.appendChild(alertBox);

            setTimeout(() => { alertBox.classList.add('show'); }, 10);

            // 🔊 الصوت الجديد (نغمة نجاح هادئة)
            // بديل: https://www.myinstants.com/media/sounds/xbox-achievement-sound.mp3 (نغمة اكسبوكس)
            const audio = new Audio('https://www.myinstants.com/media/sounds/success-1-6297.mp3');
            audio.volume = 0.4;
            audio.play().catch(e => { });

            setTimeout(() => {
                alertBox.classList.remove('show');
                setTimeout(() => { alertBox.remove(); }, 500);
            }, 4000);
        }

        // 7. كود كونامي (Konami Code)
        const konamiCode = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'b', 'a'];
        let konamiIndex = 0;

        document.addEventListener('keydown', (e) => {
            if (e.key.toLowerCase() === konamiCode[konamiIndex].toLowerCase() || e.key === konamiCode[konamiIndex]) {
                konamiIndex++;
                if (konamiIndex === konamiCode.length) {
                    showGameAlert("🎉 You are a Legend! Code: GAMER_LEGEND", "success");
                    let audio = new Audio('https://www.myinstants.com/media/sounds/level-up-sound-effect.mp3');
                    audio.play().catch(e => { });
                    konamiIndex = 0;
                }
            } else {
                konamiIndex = 0;
            }
        });

        // 8. إيستر إيج اللوجو (Rage Quit Easter Egg)
        document.addEventListener('DOMContentLoaded', function () {
            let logoClicks = 0;
            let logoTimer;
            const logoLink = document.querySelector('#navbar .logo-area img'); // أو الرابط المحيط بالصورة

            if (logoLink) {
                logoLink.addEventListener('click', (e) => {
                    // إذا أردت منع الانتقال للرئيسية عند النقر المتكرر
                    // e.preventDefault();

                    clearTimeout(logoTimer);
                    logoClicks++;

                    if (logoClicks === 5) {
                        showGameAlert("😤 Chill bro! It's just a store.", "error");
                        logoClicks = 0;
                    } else {
                        logoTimer = setTimeout(() => {
                            logoClicks = 0;
                        }, 500);
                    }
                });
            }
        });

        // =================== START: Xbox Gifting Logic ===================

        // دالة لفتح نافذة حاسبة إكس بوكس
        function openXboxGiftingModal() {
            // إعادة تعيين الحقول عند كل فتح
            document.getElementById('xboxGameName').value = '';
            document.getElementById('xboxGamePriceEGP').value = '';
            document.getElementById('xboxAccountEmail').value = '';
            document.getElementById('xboxAccountPassword').value = '';
            document.getElementById('xboxFinalPriceDisplay').innerHTML = '';

            // إظهار النافذة
            showModal('xboxGiftingModal');
        }

        // ✅✅ [تصحيح نهائي] دالة لحساب سعر خدمة إكس بوكس
        function calculateXboxGiftingPrice() {
            const priceInput = document.getElementById('xboxGamePriceEGP');
            const currencySelect = document.getElementById('xboxGameCurrency');
            const displayElement = document.getElementById('xboxFinalPriceDisplay');

            const inputPrice = parseFloat(priceInput.value);
            const inputCurrency = currencySelect.value; // العملة التي أدخلها المستخدم (EGP أو USD)

            if (isNaN(inputPrice) || inputPrice <= 0) {
                displayElement.innerHTML = '';
                return;
            }

            // --- الخطوة 1: توحيد السعر المدخل وتحويله إلى جنيه مصري (كسعر أساسي) ---
            let basePriceEGP;
            if (inputCurrency === 'USD') {
                // إذا أدخل المستخدم الدولار، قم بتحويله إلى جنيه أولاً
                basePriceEGP = inputPrice * exchangeRate;
            } else {
                // السعر المدخل بالفعل بالجنيه
                basePriceEGP = inputPrice;
            }

            // --- الخطوة 2: تطبيق المعادلة الثابتة (بالجنيه المصري) ---
            const finalPriceEGP = basePriceEGP + (40 + (basePriceEGP * 0.15));

            let finalDisplayPrice = finalPriceEGP;
            let displayCurrencySymbol = 'EGP';

            // --- الخطوة 3: التحقق من العملة (الرئيسية) للموقع لعرض السعر النهائي ---
            if (currentCurrency === 'USD') {
                // 1. حساب السعر الأساسي بالدولار
                const baseUsdPrice = finalPriceEGP / exchangeRate;
                // 2. ✅ تطبيق معامل الـ 0.80 الذي طلبته
                finalDisplayPrice = baseUsdPrice * 0.70;
                displayCurrencySymbol = 'USD';
            }

            // --- الخطوة 4: عرض السعر النهائي ---
            displayElement.innerHTML = `
                                                                                                                                                    <span class="price-label">المبلغ المطلوب</span>
                                                                                                                                                    <span class="price-value">${finalDisplayPrice.toFixed(2)} ${displayCurrencySymbol}</span>
                                                                                                                                                `;
        }

        // ✅✅ [تصحيح نهائي] دالة للانتقال للدفع لخدمة إكس بوكس
        function proceedToXboxPayment() {
            const gameName = document.getElementById('xboxGameName').value;
            const priceInput = document.getElementById('xboxGamePriceEGP');
            const currencySelect = document.getElementById('xboxGameCurrency');
            const accountEmail = document.getElementById('xboxAccountEmail').value;
            const accountPassword = document.getElementById('xboxAccountPassword').value;

            const inputPrice = parseFloat(priceInput.value);
            const inputCurrency = currencySelect.value; // العملة التي أدخلها المستخدم

            // 1. التحقق من صحة البيانات
            if (!gameName.trim()) {
                showInfoToast('الرجاء إدخال اسم اللعبة.', 3000, 'error');
                return;
            }
            if (isNaN(inputPrice) || inputPrice <= 0) {
                showInfoToast(`الرجاء إدخال سعر صحيح للعبة بـ ${inputCurrency}.`, 3000, 'error');
                return;
            }
            if (!accountEmail.trim() || !accountEmail.includes('@')) {
                showInfoToast('الرجاء إدخال إيميل مايكروسوفت صحيح.', 3000, 'error');
                return;
            }
            if (!accountPassword.trim()) {
                showInfoToast('الرجاء إدخال باسورد مايكروسوفت.', 3000, 'error');
                return;
            }

            // 2. تحويل السعر المدخل إلى جنيه مصري (كسعر أساسي)
            let basePriceEGP;
            if (inputCurrency === 'USD') {
                basePriceEGP = inputPrice * exchangeRate;
            } else {
                basePriceEGP = inputPrice;
            }

            // 3. حساب السعر النهائي بالجنيه المصري (للمعالج)
            const finalPriceEGP = basePriceEGP + (40 + (basePriceEGP * 0.15));

            // 4. تجميع البيانات الإضافية لإرسالها
            const extraDataString = `لعبة: ${gameName} | السعر المدخل: ${inputPrice.toFixed(2)} ${inputCurrency} | رسوم الخدمة مطبقة.`;

            const extraData = {
                'Account Email': accountEmail,
                'Account Password': accountPassword,
                'Extra Data': extraDataString
            };

            const finalTitle = `لعبة Xbox (PC): ${gameName}`;

            // 5. إغلاق النافذة الحالية وفتح نافذة اختيار الدفع
            closeModal('xboxGiftingModal');

            // نستخدم نفس آلية البوستينج المؤقتة لتمرير البيانات
            tempBoostingOrder = {
                title: finalTitle,
                price: finalPriceEGP, // تمرير السعر النهائي بالجنيه المصري
                extraData: extraData
            };

            showModal('checkoutModal');
            renderBoostingCheckoutOptions(); // عرض خيارات الدفع
        }

        // =================== END: Xbox Gifting Logic ===================

        function loadPlaystationGamesPage() {
            const container = document.getElementById('playstation-games-container');
            if (!container) return;
            container.innerHTML = '';
            for (const productId in productsData) {
                const product = productsData[productId];
                if (product.category === 'ps-offline-games') {
                    renderProductItem(product, container, 'ps-offline-games', true);
                }
            }
        }

        // دالة لعرض كل ألعاب كود في صفحة واحدة
        function loadAllCodGames() {
            const container = document.getElementById('all-cod-games-container');
            if (!container) return;
            container.innerHTML = ''; // تفريغ الحاوية أولاً

            // البحث عن كل المنتجات التي تنتمي لفئة 'cod-games'
            for (const productId in productsData) {
                const product = productsData[productId];
                // ✅ التأكد من أن الشرط يبحث عن الفئة الصحيحة
                if (product.category === 'cod-games') {
                    renderProductItem(product, container, 'cod-games', true);
                }
            }
        }

        function filterOfflineGames() {
            const container = document.getElementById('offlineSteamContainer');
            const searchInput = document.getElementById('offlineSearchInput');
            const loadMoreBtn = document.getElementById('loadMoreOfflineGamesBtn');

            if (!container || !searchInput) return;

            // إخفاء زر "عرض المزيد" عند البحث
            if (loadMoreBtn) {
                loadMoreBtn.style.display = 'none';
            }

            const searchTerm = searchInput.value.toLowerCase().trim();

            // جلب كل منتجات ستيم الأوفلاين من قاعدة البيانات
            const allOfflineSteamIds = Object.keys(productsData).filter(id => productsData[id].category === 'offline-steam');

            // إذا كان البحث فارغًا، أعد عرض المنتجات الأساسية مع زر "عرض المزيد"
            if (searchTerm === '') {
                loadOfflineSteamGamesToHome();
                return;
            }

            // فلترة المنتجات بناءً على اسم اللعبة
            const filteredIds = allOfflineSteamIds.filter(id => {
                const product = productsData[id];
                return product.title.toLowerCase().includes(searchTerm);
            });

            // عرض النتائج
            container.innerHTML = '';
            if (filteredIds.length > 0) {
                filteredIds.forEach(id => {
                    renderProductItem(productsData[id], container, 'games', true);
                });
            } else {
                container.innerHTML = '<p style="color: #ccc; text-align: center; width: 100%;">لا توجد ألعاب تطابق بحثك.</p>';
            }
        }

        function filterOfflineGames() {
            const container = document.getElementById('offlineSteamContainer');
            const searchInput = document.getElementById('offlineSearchInput');
            const loadMoreBtn = document.getElementById('loadMoreOfflineGamesBtn');

            if (!container || !searchInput) return;

            // إخفاء زر "عرض المزيد" عند البحث
            if (loadMoreBtn) {
                loadMoreBtn.style.display = 'none';
            }

            const searchTerm = searchInput.value.toLowerCase().trim();

            // ✅ التصحيح: تم استخدام قائمة ID المنتجات الصحيحة للبحث بداخلها
            const allOfflineSteamIds = [
                'mafia', 'residentevil_offline', 'black_myth_wukong_offline', 'thelastofus_offline',
                'ac_shadows_offline', 'splitfiction', 'silent_hill_f_offline',
                'silent_hill_2_remake_offline', 'stalker_2_offline',
                'cyberpunk_2077_offline', 'ghostoftsushima_offline', 'witcher3_offline', 'eldenring_offline',
                'silksong_offline', 'ragnarok_offline', 're4_remake_offline', 'tlou1_offline'
            ];

            // إذا كان البحث فارغًا، أعد عرض المنتجات الأساسية
            if (searchTerm === '') {
                loadOfflineSteamGamesToHome();
                return;
            }

            // فلترة المنتجات بناءً على اسم اللعبة
            const filteredIds = allOfflineSteamIds.filter(id => {
                const product = productsData[id];
                // التأكد من أن المنتج موجود قبل البحث في عنوانه
                return product && product.title.toLowerCase().includes(searchTerm);
            });

            // عرض النتائج
            container.innerHTML = '';
            if (filteredIds.length > 0) {
                filteredIds.forEach(id => {
                    renderProductItem(productsData[id], container, 'games', true);
                });
            } else {
                container.innerHTML = '<p style="color: #ccc; text-align: center; width: 100%;">لا توجد ألعاب تطابق بحثك.</p>';
            }
        }

        // ✅✅ الكود الجديد والمعدل لدالة حساب السعر ✅✅
        function calculateDiscordDecoPrice() {
            const usdAmountInput = document.getElementById('discord-usd-amount');
            const quantityInput = document.getElementById('discord-deco-quantity');
            const priceDisplay = document.querySelector('#discord-price-display .price-value');
            const errorMsg = document.getElementById('discord-calc-error');

            errorMsg.textContent = '';
            const pricePerItemUSD = parseFloat(usdAmountInput.value); // سعر القطعة الواحدة بالدولار
            const quantity = parseInt(quantityInput.value);

            if (isNaN(pricePerItemUSD) || pricePerItemUSD <= 0 || isNaN(quantity) || quantity <= 0) {
                priceDisplay.textContent = '...';
                return;
            }

            // --- منطق التسعير الجديد ---
            // 1. حساب السعر الإجمالي بالدولار قبل الخصم
            let totalUSD_before_discount = pricePerItemUSD * quantity;

            // 2. تطبيق خصم الكمية (5% على كل قطعة بعد الأولى)
            let discountPercentage = (quantity - 1) * 5;
            let discountAmount = totalUSD_before_discount * (discountPercentage / 100);
            let totalUSD_after_discount = totalUSD_before_discount - discountAmount;

            // 3. تطبيق سعر الصرف الخاص بالديسكورد (1 دولار = 0.5 دولار للدفع)
            const finalPaymentUSD = totalUSD_after_discount * 0.5;

            // --- منطق عرض السعر بناءً على العملة المختارة ---
            const exchangeRate = 42; // سعر صرف الدولار للجنيه
            let finalDisplayPrice = finalPaymentUSD * exchangeRate;
            let currencySymbol = 'EGP';

            if (currentCurrency === 'USD') {
                finalDisplayPrice = finalPaymentUSD;
                currencySymbol = 'USD';
            }

            priceDisplay.textContent = `${finalDisplayPrice.toFixed(2)} ${currencySymbol}`;
        }


        // ✅✅ الكود المُصحح لدالة حساب السعر ✅✅
        function calculateDiscordDecoPrice() {
            const usdAmountInput = document.getElementById('discord-usd-amount');
            const quantityInput = document.getElementById('discord-deco-quantity');
            const priceDisplay = document.querySelector('#discord-price-display .price-value');
            const errorMsg = document.getElementById('discord-calc-error');

            errorMsg.textContent = '';
            const pricePerItemUSD = parseFloat(usdAmountInput.value);
            const quantity = parseInt(quantityInput.value);

            if (isNaN(pricePerItemUSD) || pricePerItemUSD <= 0 || isNaN(quantity) || quantity <= 0) {
                priceDisplay.textContent = '...';
                return;
            }

            // --- منطق التسعير الجديد ---
            const totalUSD_before_discount = pricePerItemUSD * quantity;
            const discountPercentage = (quantity - 1) * 5;
            const discountAmount = totalUSD_before_discount * (discountPercentage / 100);
            const totalUSD_after_discount = totalUSD_before_discount - discountAmount;

            let finalDisplayPrice;
            let currencySymbol;

            // ✅ تطبيق سعر الصرف الخاص بناءً على العملة المختارة
            if (currentCurrency === 'EGP') {
                finalDisplayPrice = totalUSD_after_discount * 14; // (سعر الصرف الخاص 1$=14ج)
                currencySymbol = 'EGP';
            } else { // currentCurrency is 'USD'
                finalDisplayPrice = totalUSD_after_discount * 0.5; // (سعر الصرف الخاص 1$=0.5$)
                currencySymbol = 'USD';
            }

            priceDisplay.textContent = `${finalDisplayPrice.toFixed(2)} ${currencySymbol}`;
        }

        // ✅✅ الكود المُصحح لدالة إتمام الطلب ✅✅
        function handleDiscordDecoOrder() {
            const usdAmountInput = document.getElementById('discord-usd-amount');
            const quantityInput = document.getElementById('discord-deco-quantity');
            const decoNamesInput = document.getElementById('discord-deco-names');
            const errorMsg = document.getElementById('discord-calc-error');

            const pricePerItemUSD = parseFloat(usdAmountInput.value);
            const quantity = parseInt(quantityInput.value);
            const decoNames = decoNamesInput.value.trim();

            if (isNaN(pricePerItemUSD) || pricePerItemUSD < 4.99) {
                errorMsg.textContent = 'الرجاء اختيار سعر للقطعة 4.99 دولار أو أكثر.';
                return;
            }
            if (isNaN(quantity) || quantity < 1) {
                errorMsg.textContent = 'الرجاء إدخال كمية صحيحة.';
                return;
            }
            if (!decoNames) {
                errorMsg.textContent = 'الرجاء كتابة أسماء الديكورات المطلوبة.';
                return;
            }
            errorMsg.textContent = '';

            // --- إعادة حساب السعر مرة أخرى للتأكيد ---
            const totalUSD_before_discount = pricePerItemUSD * quantity;
            const discountPercentage = (quantity - 1) * 5;
            const discountAmount = totalUSD_before_discount * (discountPercentage / 100);
            const totalUSD_after_discount = totalUSD_before_discount - discountAmount;

            // ✅ حساب السعر النهائي بالجنيه المصري (السعر الأساسي للدفع)
            const finalPriceEGP = totalUSD_after_discount * 14;

            const finalTitle = `Discord Decoration ($${pricePerItemUSD.toFixed(2)}) x${quantity}`;
            const extraData = {
                'Amount per Item (USD)': `$${pricePerItemUSD.toFixed(2)}`,
                'Quantity': quantity,
                'Volume Discount': `${discountPercentage}%`,
                'Decoration Names': decoNames
            };

            openPaymentModal('discord_decoration_custom', 'buyNow', finalPriceEGP, finalTitle, extraData);
        }

        // ======================================================
        // START: Skeleton Loader Function
        // ======================================================
        function renderSkeletonLoader(container, count = 4, itemClass = 'product-item') {
            container.innerHTML = ''; // Clear previous content
            for (let i = 0; i < count; i++) {
                const skeleton = document.createElement('div');
                // We use the itemClass to approximate the size of the skeleton
                skeleton.className = `skeleton-card ${itemClass}`;
                skeleton.innerHTML = `
                                                                                                                                                                                <div class="skeleton-image"></div>
                                                                                                                                                                                <div class="skeleton-text"></div>
                                                                                                                                                                                <div class="skeleton-text short"></div>
                                                                                                                                                                                <div class="skeleton-button"></div>
                                                                                                                                                                            `;
                container.appendChild(skeleton);
            }
        }

        // ======================================================
        // END: Skeleton Loader Function
        // ======================================================

        // ✅ دالة جديدة لتشغيل الأنيميشن الخاص بكروت الإيجار
        function flyToCart_Rental(event) {
            const cartBtn = document.querySelector('.fixed-cart-button');
            if (!cartBtn || !event) return;

            const productCard = event.target.closest('.rental-card');
            const sourceImageElement = productCard ? productCard.querySelector('.rental-card-image') : null;

            if (!sourceImageElement) return;

            const sourceRect = sourceImageElement.getBoundingClientRect();
            const flyingImg = document.createElement('div'); // نستخدم div لنضع الصورة كخلفية

            flyingImg.style.cssText = `
                                                                                                                                                                            position: fixed;
                                                                                                                                                                            z-index: 9999;
                                                                                                                                                                            left: ${sourceRect.left}px;
                                                                                                                                                                            top: ${sourceRect.top}px;
                                                                                                                                                                            width: ${sourceRect.width}px;
                                                                                                                                                                            height: ${sourceRect.height}px;
                                                                                                                                                                            background-image: ${getComputedStyle(sourceImageElement).backgroundImage};
                                                                                                                                                                            background-size: cover;
                                                                                                                                                                            background-position: center;
                                                                                                                                                                            border-radius: 10px;
                                                                                                                                                                            pointer-events: none;
                                                                                                                                                                            animation: shatter-fly-effect 0.9s ease-in-out forwards;
                                                                                                                                                                        `;

            document.body.appendChild(flyingImg);

            setTimeout(() => {
                flyingImg.remove();
            }, 900); // 900ms هي مدة الأنيميشن
        }

        function updateRentalPrice(productId) {
            const product = productsData[productId];
            // نبحث عن الكارت الخاص بالمنتج
            const cardElement = document.querySelector(`.rental-card[data-product-id="${productId}"]`);
            // نبحث داخل الكارت عن الزر المختار حاليًا
            const selector = cardElement ? cardElement.querySelector('.duration-btn.active') : null;
            const priceDisplay = document.getElementById(`price-${productId}`);

            if (!product || !selector || !priceDisplay) return;

            // نحصل على المدة من الزر المختار
            const selectedPeriod = selector.dataset.periodKey;
            const selectedOption = product.options[selectedPeriod];

            let price = selectedOption.price;
            let currencySymbol = 'EGP';

            if (currentCurrency === 'USD') {
                price = (selectedOption.usd_price || price / exchangeRate).toFixed(2);
                currencySymbol = 'USD';
            }

            priceDisplay.textContent = `${price} ${currencySymbol}`;
        }

        function addToCartFromRentalCard(event, productId) {
            const product = productsData[productId];
            const cardElement = document.querySelector(`.rental-card[data-product-id="${productId}"]`);
            const activeButton = cardElement ? cardElement.querySelector('.duration-btn.active') : null;

            if (!product || !activeButton) {
                showInfoToast("الرجاء اختيار مدة الاستئجار أولاً.", 3000, 'error');
                return;
            }

            // تشغيل الأنيميشن الجديد أولاً
            flyToCart_Rental(event);

            const selectedPeriod = activeButton.dataset.periodKey;
            const selectedOption = product.options[selectedPeriod];
            const extraData = {
                selectedOption: { title: selectedOption.title, price: selectedOption.price },
                title: `${product.title} (${selectedOption.title})`
            };

            // ثم إضافة المنتج للسلة (بدون تمرير الحدث مرة أخرى)
            performAddToCart(productId, 1, null, extraData);
        }

        // ✅ الكود الجديد للدالة بالكامل
        function renderRentalProductItem(product, container) {
            let item = document.createElement('div');
            item.className = 'rental-card';
            item.dataset.productId = product.id; // نضيف ID المنتج هنا لسهولة الوصول إليه

            // إنشاء أزرار المدة
            let optionsHTML = '';
            let isFirstOption = true;
            for (const key in product.options) {
                // نجعل أول زر هو المختار افتراضيًا
                optionsHTML += `<button class="duration-btn ${isFirstOption ? 'active' : ''}" data-period-key="${key}" onclick="selectDuration(this, '${product.id}')">
                                                                                                                                                                                                ${product.options[key].title}
                                                                                                                                                                                            </button>`;
                isFirstOption = false;
            }

            // تحديد السعر الأولي والعملة
            const firstOptionKey = Object.keys(product.options)[0];
            let initialPrice = product.options[firstOptionKey].price;
            let currencySymbol = 'EGP';
            if (currentCurrency === 'USD') {
                initialPrice = (product.options[firstOptionKey].usd_price || initialPrice / exchangeRate).toFixed(2);
                currencySymbol = 'USD';
            }

            // بناء الهيكل النهائي للكارت
            item.innerHTML = `
                                                                                                                                                                            <div class="rental-card-image" style="background-image: url('${product.image}');">
                                                                                                                                                                                <span class="rental-badge">ختمها الآن</span>
                                                                                                                                                                            </div>
                                                                                                                                                                            <div class="rental-card-details">
                                                                                                                                                                                <h3>${product.title}</h3>
                                                                                                                                                                                <p>${product.shortDescription}</p>
                                                                                                                                                                                <div class="rental-controls">
                                                                                                                                                                                    <label>أختر المدة التي تحتاجها:</label>
                                                                                                                                                                                    <div class="duration-selector-buttons">
                                                                                                                                                                                        ${optionsHTML}
                                                                                                                                                                                    </div>
                                                                                                                                                                                    <div class="rental-price-display" id="price-${product.id}">${initialPrice} ${currencySymbol}</div>
                                                                                                                                                                                    <button class="buy-btn" onclick="addToCartFromRentalCard(event, '${product.id}')">أضف إلى السلة</button>
                                                                                                                                                                                </div>
                                                                                                                                                                            </div>
                                                                                                                                                                        `;
            container.appendChild(item);
        }

        function loadGameRentalsToHome() {
            const container = document.getElementById('gameRentalsContainer');
            if (!container) return;
            container.innerHTML = '';

            // قائمة بأسماء ID الخاصة بمنتجات الإيجار التي نريد عرضها
            const rentalProductIds = [
                'it_takes_two_rent',
                'splitfiction_rent',
                'a_way_out_rent',
                'little_nightmares_3_rent'
            ];

            // المرور على القائمة وعرض كل منتج باستخدام التصميم الجديد
            rentalProductIds.forEach(id => {
                if (productsData[id]) {
                    // استدعاء دالة العرض الجديدة التي أنشأناها
                    renderRentalProductItem(productsData[id], container);
                }
            });
        }

        // ✅ دالة جديدة للتحكم في أزرار المدة
        function selectDuration(buttonElement, productId) {
            const card = buttonElement.closest('.rental-card');
            if (!card) return;

            // إزالة كلاس 'active' من كل الأزرار داخل نفس الكارت
            const allButtons = card.querySelectorAll('.duration-btn');
            allButtons.forEach(btn => btn.classList.remove('active'));

            // إضافة كلاس 'active' للزر الذي تم الضغط عليه
            buttonElement.classList.add('active');

            // تحديث السعر بناءً على الزر المختار
            updateRentalPrice(productId);
        }

        // =================== START: Fortnite Boosting Logic ===================

        function calculateFortniteBoostingPrice() {
            const currentLevelInput = document.getElementById('fn-current-level');
            const desiredLevelInput = document.getElementById('fn-desired-level');
            const priceDisplay = document.querySelector('#fn-price-display .price-value');
            const errorMsg = document.getElementById('fn-error-message');

            errorMsg.textContent = ''; // مسح الأخطاء السابقة

            const currentLevel = parseInt(currentLevelInput.value);
            const desiredLevel = parseInt(desiredLevelInput.value);

            // التحقق من أن المدخلات أرقام صحيحة
            if (isNaN(currentLevel) || isNaN(desiredLevel) || currentLevel < 1 || desiredLevel < 1) {
                priceDisplay.textContent = '...';
                return;
            }

            if (desiredLevel <= currentLevel) {
                priceDisplay.textContent = '...';
                errorMsg.textContent = 'المستوى المطلوب يجب أن يكون أعلى من الحالي.';
                return;
            }

            const levelDifference = desiredLevel - currentLevel;
            const pricePer5LevelsUSD = 1.5;

            // حساب السعر بالدولار
            const totalPriceUSD = (levelDifference / 5) * pricePer5LevelsUSD;

            // تحويل العملة وعرض السعر
            let finalPrice = totalPriceUSD;
            let currencySymbol = 'USD';

            if (currentCurrency === 'EGP') {
                finalPrice = totalPriceUSD * exchangeRate;
                currencySymbol = 'EGP';
            }

            priceDisplay.textContent = `${finalPrice.toFixed(2)} ${currencySymbol}`;
        }

        // =================== START: Fortnite Boosting Logic (UPDATED) ===================

        // متغير مؤقت لتخزين بيانات الطلب
        let tempBoostingOrder = null;

        function calculateFortniteBoostingPrice() {
            const currentLevelInput = document.getElementById('fn-current-level');
            const desiredLevelInput = document.getElementById('fn-desired-level');
            const priceDisplay = document.querySelector('#fn-price-display .price-value');
            const errorMsg = document.getElementById('fn-error-message');

            errorMsg.textContent = '';

            const currentLevel = parseInt(currentLevelInput.value);
            const desiredLevel = parseInt(desiredLevelInput.value);

            if (isNaN(currentLevel) || isNaN(desiredLevel) || currentLevel < 1 || desiredLevel < 1) {
                priceDisplay.textContent = '...';
                return;
            }

            if (desiredLevel <= currentLevel) {
                priceDisplay.textContent = '...';
                errorMsg.textContent = 'المستوى المطلوب يجب أن يكون أعلى من الحالي.';
                return;
            }

            const levelDifference = desiredLevel - currentLevel;
            const pricePer5LevelsUSD = 1.5;
            const totalPriceUSD = (levelDifference / 5) * pricePer5LevelsUSD;

            let finalPrice = totalPriceUSD;
            let currencySymbol = 'USD';

            if (currentCurrency === 'EGP') {
                finalPrice = totalPriceUSD * exchangeRate;
                currencySymbol = 'EGP';
            }

            priceDisplay.textContent = `${finalPrice.toFixed(2)} ${currencySymbol}`;
        }

        function handleFortniteBoostingOrder() {
            const currentLevel = parseInt(document.getElementById('fn-current-level').value);
            const desiredLevel = parseInt(document.getElementById('fn-desired-level').value);
            const email = document.getElementById('fn-email').value;
            const password = document.getElementById('fn-password').value;
            const contact = document.getElementById('fn-contact').value;
            const errorMsg = document.getElementById('fn-error-message');

            if (isNaN(currentLevel) || isNaN(desiredLevel) || desiredLevel <= currentLevel) {
                errorMsg.textContent = 'الرجاء إدخال مستويات صحيحة.';
                return;
            }
            if (!email.trim() || !password.trim() || !contact.trim()) {
                errorMsg.textContent = 'الرجاء إدخال جميع بيانات الحساب المطلوبة.';
                return;
            }

            const levelDifference = desiredLevel - currentLevel;
            const pricePer5LevelsUSD = 1.5;
            const totalPriceUSD = (levelDifference / 5) * pricePer5LevelsUSD;
            const finalPriceEGP = totalPriceUSD * exchangeRate;

            // ✅ الخطوة 1: تخزين بيانات الطلب في المتغير المؤقت
            tempBoostingOrder = {
                title: `Fortnite Boosting: Level ${currentLevel} to ${desiredLevel}`,
                price: finalPriceEGP,
                extraData: {
                    'Account Email': email,
                    'Account Password': password,
                    'Contact Method': contact,
                    'Current Level': currentLevel,
                    'Desired Level': desiredLevel
                }
            };

            // ✅ الخطوة 2: فتح نافذة اختيار طريقة الدفع
            showModal('checkoutModal');
            renderBoostingCheckoutOptions(); // استدعاء دالة جديدة لعرض الخيارات
        }

        // ✅ دالة جديدة: لعرض خيارات الدفع الخاصة بالبوستينج
        function renderBoostingCheckoutOptions() {
            const container = document.getElementById('checkoutPaymentOptionsContainer');
            container.innerHTML = '';

            if (!tempBoostingOrder) return;

            const methods = [
                { id: 'vodafone', name: 'فودافون كاش', icon: './images/vf-cash.png', desc: 'الدفع عبر المحفظة الالكترونية' },
                { id: 'creditcard', name: 'فيزا / ماستر كارد', icon: './images/credit-card.png', desc: 'الدفع ببطاقة الائتمان' },
                { id: 'paypal', name: 'بايبال', icon: './images/paypal.png', desc: 'الدفع عبر حساب بايبال' }
            ];

            methods.forEach(method => {
                const card = document.createElement('div');
                card.className = 'payment-method-card';
                // استدعاء دالة جديدة عند الضغط
                card.onclick = () => processBoostingPayment(method.id);
                card.innerHTML = `
                                                                                                                                                                                <h3>
                                                                                                                                                                                    <img src="${method.icon}" alt="${method.name} Logo">
                                                                                                                                                                                    ${method.name}
                                                                                                                                                                                </h3>
                                                                                                                                                                                <p>${method.desc}</p>
                                                                                                                                                                            `;
                container.appendChild(card);
            });
        }

        // ✅ دالة جديدة: لمعالجة الدفع بعد اختيار الطريقة
        function processBoostingPayment(method) {
            if (!tempBoostingOrder) return;

            const { title, price, extraData } = tempBoostingOrder;

            // استدعاء دالة الدفع النهائية
            showPaymentDetails(method, price, title, extraData);

            // تفريغ المتغير المؤقت
            tempBoostingOrder = null;
        }

        // =================== END: Fortnite Boosting Logic (UPDATED) ===================

        // =================== END: Fortnite Boosting Logic ===================

        function loadCoDServices() {
            const codServicesSection = document.getElementById('cod-services');
            const bo6Container = document.getElementById('cod-bo6-container');
            const mw3Container = document.getElementById('cod-mw3-container');

            if (bo6Container) bo6Container.innerHTML = '';
            if (mw3Container) mw3Container.innerHTML = '';

            // ✅✅ بداية التعديل: ترتيب المنتجات المخصصة أولاً ✅✅
            const productIds = Object.keys(productsData);
            // فرز المنتجات لوضع المنتجات المخصصة في بداية القائمة
            productIds.sort((a, b) => {
                const isACustom = productsData[a].isCustomOrder;
                const isBCustom = productsData[b].isCustomOrder;
                if (isACustom && !isBCustom) return -1;
                if (!isACustom && isBCustom) return 1;
                return 0;
            });

            // استخدام القائمة المرتبة بدلاً من المرور العشوائي
            for (const productId of productIds) {
                // ✅✅ نهاية التعديل ✅✅

                const product = productsData[productId];

                // ✅✅ بداية التعديل: التعامل مع الكارت المخصص بشكل مختلف ✅✅
                if (product.isCustomOrder) {
                    const customCardHTML = `
                                                                                                                                                                                    <div class="service-offer-card" onclick="showModal('supportModal')">
                                                                                                                                                                                        <img src="${product.image}" alt="${product.title}" class="service-card-image">
                                                                                                                                                                                        <h3>${product.title}</h3>
                                                                                                                                                                                        <p class="service-card-description">${product.shortDescription}</p>
                                                                                                                                                                                        <button>اطلب الآن</button>
                                                                                                                                                                                    </div>
                                                                                                                                                                                `;
                    if (product.category === 'cod-bo6' && bo6Container) {
                        bo6Container.innerHTML += customCardHTML;
                    } else if (product.category === 'cod-mw3' && mw3Container) {
                        mw3Container.innerHTML += customCardHTML;
                    }
                    continue; // الانتقال للمنتج التالي وتجاهل الكود أدناه
                }
                // ✅✅ نهاية التعديل ✅✅

                if (product.category === 'cod-bo6' && bo6Container) {
                    renderProductItem(product, bo6Container, 'cod-services', true);
                } else if (product.category === 'cod-mw3' && mw3Container) {
                    renderProductItem(product, mw3Container, 'cod-services', true);
                }
            }

            const tabsContainer = document.querySelector('#cod-services .tabs-container');
            if (tabsContainer) {
                const tabButtons = tabsContainer.querySelectorAll('.tab-button');
                const tabContents = document.querySelectorAll('#cod-services .tab-content');

                const backgrounds = {
                    'cod-bo6-page': './images/bo6_background.png',
                    'cod-mw3-page': './images/mw3_background.png',
                    'cod-bo7-page': './images/cod_coming_soon_bg.png'
                };

                function showTab(tabId) {
                    if (backgrounds[tabId] && codServicesSection) {
                        codServicesSection.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.65), rgba(0, 0, 0, 0.65)), url('${backgrounds[tabId]}')`;
                    }

                    tabContents.forEach(content => content.classList.remove('active'));
                    tabButtons.forEach(button => button.classList.remove('active'));

                    const targetContent = document.getElementById(tabId);
                    const targetButton = tabsContainer.querySelector(`[data-tab="${tabId}"]`);

                    if (targetContent) targetContent.classList.add('active');
                    if (targetButton) targetButton.classList.add('active');
                }

                tabButtons.forEach(button => {
                    button.addEventListener('click', () => {
                        const targetTabId = button.dataset.tab;
                        showTab(targetTabId);
                    });
                });

                showTab('cod-bo6-page');
            }
        }

        // START: دالة مشاركة المنتج
        function shareProduct() {
            if (!currentProduct) return; // للتأكد من أن هناك منتج معروض

            const shareData = {
                title: currentProduct.title,
                text: `شاهد هذا المنتج الرائع "${currentProduct.title}" على Berlin Store!`,
                url: window.location.href // رابط الصفحة الحالي
            };

            // التحقق إذا كان المتصفح يدعم خاصية المشاركة المدمجة
            if (navigator.share) {
                navigator.share(shareData)
                    .then(() => console.log('تمت المشاركة بنجاح'))
                    .catch((error) => console.log('خطأ في المشاركة:', error));
            } else {
                // إذا كان المتصفح لا يدعم، قم بنسخ الرابط
                navigator.clipboard.writeText(shareData.url).then(() => {
                    showInfoToast('تم نسخ رابط المنتج بنجاح!', 3000);
                }).catch(err => {
                    console.error('فشل نسخ الرابط: ', err);
                    showInfoToast('فشل نسخ الرابط', 3000, 'error');
                });
            }
        }
        // ✅ دالة إظهار الحاسبة (معدلة)
        function showBoostingCalculator() {
            const boostingSection = document.getElementById('valorant-boosting');
            const cover = document.getElementById('boosting-cover');
            const calculator = document.getElementById('boosting-calculator-container');

            if (boostingSection && cover && calculator) {
                // تطبيق تأثير التعتيم والضبابية على الخلفية
                boostingSection.classList.add('calculator-view-active');

                cover.classList.add('fade-out');
                setTimeout(() => {
                    cover.style.display = 'none';
                    calculator.style.display = 'flex';
                    calculator.classList.add('visible');
                }, 500);
            }
        }

        // ✅ دالة إغلاق القسم (معدلة)
        function closeBoostingSection() {
            const boostingSection = document.getElementById('valorant-boosting');
            const cover = document.getElementById('boosting-cover');
            const calculator = document.getElementById('boosting-calculator-container');

            // إزالة تأثير الخلفية
            if (boostingSection) {
                boostingSection.classList.remove('calculator-view-active');
            }

            // إعادة الواجهة للحالة الأصلية
            if (cover) {
                cover.style.display = 'flex';
                // استخدام timeout لإعادة الشفافية بعد ظهور العنصر
                setTimeout(() => {
                    cover.classList.remove('fade-out');
                }, 10);
            }
            if (calculator) {
                calculator.classList.remove('visible');
                // تأخير بسيط لضمان اختفاء الحاسبة بسلاسة
                setTimeout(() => {
                    calculator.style.display = 'none';
                }, 500);
            }

            // إخفاء القسم بالكامل والعودة للرئيسية (نفس السلوك القديم)
            setTimeout(() => {
                if (boostingSection) {
                    boostingSection.style.display = 'none';
                    if (window.location.hash === '#valorant-boosting') {
                        window.location.hash = '#home';
                    }
                }
            }, 300); // انتظار بسيط قبل الإخفاء التام
        }

        // ✅ دالة محدثة لإغلاق القسم وإلغاء تأثير الخلفية
        function closeBoostingSection() {
            const boostingSection = document.getElementById('valorant-boosting');
            const cover = document.getElementById('boosting-cover');
            const calculator = document.getElementById('boosting-calculator-container');

            // إعادة الواجهة الداخلية للحالة الافتراضية
            if (cover) {
                cover.style.display = 'flex';
                cover.classList.remove('fade-out');
            }
            if (calculator) {
                calculator.classList.remove('visible');
            }

            // إلغاء تأثير التعتيم والضبابية من الخلفية
            if (boostingSection) {
                boostingSection.classList.remove('calculator-visible');
                boostingSection.style.display = 'none';
                if (window.location.hash === '#valorant-boosting') {
                    window.location.hash = '#home';
                }
            }
        }


        function handleBoostingOrder() {
            const errorMessage = document.getElementById('boosting-error-message');
            errorMessage.textContent = '';

            // --- جزء التحقق من البيانات وحساب السعر ---
            const emailInput = document.getElementById('boosting-email');
            const passwordInput = document.getElementById('boosting-password');
            const contactInput = document.getElementById('boosting-contact');
            const currentRankInput = document.querySelector('input[name="currentRank"]:checked');
            const desiredRankInput = document.querySelector('input[name="desiredRank"]:checked');

            if (!emailInput.value.trim() || !passwordInput.value.trim() || !contactInput.value.trim()) {
                errorMessage.textContent = 'الرجاء إدخال جميع بيانات الحساب المطلوبة.';
                return;
            }
            if (!currentRankInput) {
                errorMessage.textContent = 'الرجاء تحديد رتبتك الحالية.';
                return;
            }
            if (!desiredRankInput) {
                errorMessage.textContent = 'الرجاء تحديد الرتبة المطلوبة.';
                return;
            }
            const currentRank = valorantRanks[parseInt(currentRankInput.value)];
            const desiredRank = valorantRanks[parseInt(desiredRankInput.value)];
            if (desiredRank.value <= currentRank.value) {
                errorMessage.textContent = 'الرتبة المطلوبة يجب أن تكون أعلى من الرتبة الحالية.';
                return;
            }
            let totalUSD = 0;
            for (let i = currentRank.value; i < desiredRank.value; i++) {
                const division = valorantRanks[i];
                if (valorantTierPricesUSD[division.tier]) {
                    totalUSD += valorantTierPricesUSD[division.tier];
                }
            }
            const totalPriceEGP = totalUSD * exchangeRate;
            if (totalPriceEGP <= 0) {
                errorMessage.textContent = 'خطأ في حساب السعر. الرجاء التأكد من اختيارك.';
                return;
            }
            // --- نهاية جزء التحقق والحساب ---

            // ✅ الخطوة 1: تخزين بيانات الطلب في المتغير المؤقت
            tempBoostingOrder = {
                title: `Valorant Boosting: ${currentRank.name} to ${desiredRank.name}`,
                price: totalPriceEGP,
                extraData: {
                    'Account Email': emailInput.value,
                    'Account Password': passwordInput.value,
                    'Contact Method': contactInput.value,
                    'الرانك الحالي': currentRank.name,
                    'الرانك المطلوب': desiredRank.name
                }
            };

            // ✅ الخطوة 2: فتح نافذة اختيار طريقة الدفع
            showModal('checkoutModal');
            renderBoostingCheckoutOptions();
        }

        /* ====================================================== */
        /* START: VALORANT BOOSTING CALCULATOR SCRIPT             */
        /* ====================================================== */

        // 1. تعريف الرتب والأسعار
        const valorantRanks = [
            { id: 'iron_1', name: 'Iron 1', tier: 'iron', value: 0, image: './images/3624-valorant-iron-1.png' },
            { id: 'iron_2', name: 'Iron 2', tier: 'iron', value: 1, image: './images/7351-valorant-iron-2.png' },
            { id: 'iron_3', name: 'Iron 3', tier: 'iron', value: 2, image: './images/1854-valorant-iron-3.png' },
            { id: 'bronze_1', name: 'Bronze 1', tier: 'bronze', value: 3, image: './images/4159-valorant-bronze-1.png' },
            { id: 'bronze_2', name: 'Bronze 2', tier: 'bronze', value: 4, image: './images/4376-valorant-bronze-2.png' },
            { id: 'bronze_3', name: 'Bronze 3', tier: 'bronze', value: 5, image: './images/4590-valorant-bronze-3.png' },
            { id: 'silver_1', name: 'Silver 1', tier: 'silver', value: 6, image: './images/6335-valorant-silver-1.png' },
            { id: 'silver_2', name: 'Silver 2', tier: 'silver', value: 7, image: './images/8138-valorant-silver-2.png' },
            { id: 'silver_3', name: 'Silver 3', tier: 'silver', value: 8, image: './images/3293-valorant-silver-3.png' },
            { id: 'gold_1', name: 'Gold 1', tier: 'gold', value: 9, image: './images/5533-valorant-gold-1.png' },
            { id: 'gold_2', name: 'Gold 2', tier: 'gold', value: 10, image: './images/2060-valorant-gold-2.png' },
            { id: 'gold_3', name: 'Gold 3', tier: 'gold', value: 11, image: './images/3293-valorant-gold-3.png' },
            { id: 'platinum_1', name: 'Platinum 1', tier: 'platinum', value: 12, image: './images/4590-valorant-platinum-1.png' },
            { id: 'platinum_2', name: 'Platinum 2', tier: 'platinum', value: 13, image: './images/3255-valorant-platinum-2.png' },
            { id: 'platinum_3', name: 'Platinum 3', tier: 'platinum', value: 14, image: './images/5816-valorant-platinum-3.png' },
            { id: 'diamond_1', name: 'Diamond 1', tier: 'diamond', value: 15, image: './images/4590-valorant-diamond-1.png' },
            { id: 'diamond_2', name: 'Diamond 2', tier: 'diamond', value: 16, image: './images/3939-valorant-diamond-2.png' },
            { id: 'diamond_3', name: 'Diamond 3', tier: 'diamond', value: 17, image: './images/6354-valorant-diamond-3.png' },
            { id: 'ascendant_1', name: 'Ascendant 1', tier: 'ascendant', value: 18, image: './images/4590-valorant-ascendant-1.png' },
            { id: 'ascendant_2', name: 'Ascendant 2', tier: 'ascendant', value: 19, image: './images/8376-valorant-ascendant-2.png' },
            { id: 'ascendant_3', name: 'Ascendant 3', tier: 'ascendant', value: 20, image: './images/2309-valorant-ascendant-3.png' },
            // الرتب التالية لم يتم تحديد سعرها، لذا ستكون غير متاحة للاختيار
            { id: 'immortal_1', name: 'Immortal 1', tier: 'immortal', value: 21, image: './images/1775-valorant-immortal-1.png', disabled: true },
        ];

        const valorantTierPricesUSD = {
            iron: 1,
            bronze: 2,
            silver: 3, // تم استنتاج السعر بناءً على التسلسل
            gold: 4,   // تم تعديل السعر ليتبع التسلسل المنطقي
            platinum: 5, // تم تعديل السعر
            diamond: 7, // تم تعديل السعر
            ascendant: 8
        };

        // 2. دالة لإنشاء مربعات اختيار الرتب
        function generateRankSelectors() {
            const currentRankContainer = document.getElementById('current-rank-selector');
            const desiredRankContainer = document.getElementById('desired-rank-selector');

            if (!currentRankContainer || !desiredRankContainer) return;

            currentRankContainer.innerHTML = '';
            desiredRankContainer.innerHTML = '';

            valorantRanks.forEach(rank => {
                const optionHTML = `
                                                                                                                                                                                                                    <label class="rank-option ${rank.disabled ? 'disabled' : ''}" title="${rank.name}">
                                                                                                                                                                                                                        <input type="radio" name="currentRank" value="${rank.value}" onchange="calculateBoostingPrice()" ${rank.disabled ? 'disabled' : ''}>
                                                                                                                                                                                                                        <div class="rank-icon-wrapper">
                                                                                                                                                                                                                            <img src="${rank.image}" alt="${rank.name}" loading="lazy">
                                                                                                                                                                                                                            <span class="rank-name">${rank.name}</span>
                                                                                                                                                                                                                        </div>
                                                                                                                                                                                                                    </label>
                                                                                                                                                                                                                `;
                currentRankContainer.innerHTML += optionHTML;
            });

            valorantRanks.forEach(rank => {
                const optionHTML = `
                                                                                                                                                                                                                    <label class="rank-option ${rank.disabled ? 'disabled' : ''}" title="${rank.name}">
                                                                                                                                                                                                                        <input type="radio" name="desiredRank" value="${rank.value}" onchange="calculateBoostingPrice()" ${rank.disabled ? 'disabled' : ''}>
                                                                                                                                                                                                                        <div class="rank-icon-wrapper">
                                                                                                                                                                                                                            <img src="${rank.image}" alt="${rank.name}" loading="lazy">
                                                                                                                                                                                                                            <span class="rank-name">${rank.name}</span>
                                                                                                                                                                                                                        </div>
                                                                                                                                                                                                                    </label>
                                                                                                                                                                                                                `;
                desiredRankContainer.innerHTML += optionHTML;
            });
        }

        // 3. دالة حساب السعر
        function calculateBoostingPrice() {
            const currentRankInput = document.querySelector('input[name="currentRank"]:checked');
            const desiredRankInput = document.querySelector('input[name="desiredRank"]:checked');
            const priceDisplay = document.getElementById('boosting-price-display').querySelector('.price-value');
            const errorMessage = document.getElementById('boosting-error-message');

            errorMessage.textContent = ''; // Clear previous errors

            if (!currentRankInput || !desiredRankInput) {
                priceDisplay.textContent = `0.00 ${currentCurrency}`;
                return;
            }

            const currentRankValue = parseInt(currentRankInput.value);
            const desiredRankValue = parseInt(desiredRankInput.value);

            if (desiredRankValue <= currentRankValue) {
                errorMessage.textContent = 'الرتبة المطلوبة يجب أن تكون أعلى من الرتبة الحالية.';
                priceDisplay.textContent = `0.00 ${currentCurrency}`;
                return;
            }

            let totalUSD = 0;
            for (let i = currentRankValue; i < desiredRankValue; i++) {
                const currentDivision = valorantRanks[i];
                const tierPrice = valorantTierPricesUSD[currentDivision.tier];
                if (tierPrice) {
                    totalUSD += tierPrice;
                }
            }

            // تحويل العملة وعرضها
            let finalPrice = totalUSD * exchangeRate; // السعر الأساسي بالجنيه
            let currencySymbol = 'EGP';

            if (currentCurrency === 'USD') {
                finalPrice = totalUSD;
                currencySymbol = 'USD';
            }

            priceDisplay.textContent = `${finalPrice.toFixed(2)} ${currencySymbol}`;
        }




        // 5. دالة مخصصة لفتح نافذة الدفع لخدمة البوستنج
        function openPaymentModalForBoosting(title, price, extraData) {
            // هذه دالة افتراضية، يمكنك تعديلها لتتناسب مع دالة openPaymentModal الموجودة لديك
            // الغرض منها هو تمرير كل البيانات اللازمة
            currentProduct = {
                title: title,
                price: price,
                // يمكنك إضافة أي بيانات أخرى تحتاجها دالة الدفع
            };

            // استدعاء دالة الدفع الرئيسية
            showPaymentDetails('vodafone', price, title, extraData); // الافتراضي هو فودافون كاش
        }


        /* ====================================================== */
        /* END: VALORANT BOOSTING CALCULATOR SCRIPT               */
        /* ====================================================== */



        function loadValorantCoaching() {
            const container = document.getElementById('valorant-coaching');
            container.innerHTML = '';
            const productIds = ['valorant_coaching_session']; // Use the product ID from your productsData object
            productIds.forEach(id => renderProductItem(productsData[id], container, 'valorant-coaching'));
        }

        function loadFortniteCoaching() {
            const container = document.getElementById('fortnite-coaching');
            container.innerHTML = '';
            const productIds = ['fortnite_coaching_session']; // Use the product ID you added
            productIds.forEach(id => renderProductItem(productsData[id], container, 'fortnite-coaching'));
        }

        function loadFortniteBoosting() {
            const container = document.getElementById('fortnite-boosting');
            container.innerHTML = '';
            const productIds = ['fortnite_boosting_service']; // Use the product ID you added
            productIds.forEach(id => renderProductItem(productsData[id], container, 'fortnite-boosting'));
        }

        // يمكنك إنشاء دوال مشابهة لـ Boosting عند إضافة منتجات Boosting الفعلية

        // دالة للانتقال إلى الدفع بعد إدخال البيانات
        function proceedToGiftingPayment() {
            const friendCode = document.getElementById('giftingFriendCode').value;
            const gameName = document.getElementById('giftingGameName').value;
            const priceUSD = parseFloat(document.getElementById('giftingGamePriceUSD').value);

            // 1. التحقق من صحة البيانات
            if (!friendCode.trim()) {
                showInfoToast('الرجاء إدخال Steam Friend Code.', 3000, 'error');
                return;
            }
            if (!gameName.trim()) {
                showInfoToast('الرجاء إدخال اسم اللعبة.', 3000, 'error');
                return;
            }
            if (isNaN(priceUSD) || priceUSD <= 0) {
                showInfoToast('الرجاء إدخال سعر صحيح للعبة بالدولار.', 3000, 'error');
                return;
            }

            // 2. حساب السعر النهائي مرة أخرى للتأكيد
            const finalPriceEGP = (priceUSD * 66) + 20;

            // 3. إنشاء كائن بيانات إضافية لإرساله إلى Google Sheets
            const extraData = {
                'Steam Friend Code': friendCode,
                'Game Name': gameName,
                'Original Price (USD)': `$${priceUSD.toFixed(2)}`
            };

            const finalTitle = `لعبة جيفت: ${gameName}`;

            // 4. إغلاق نافذة الآلة الحاسبة وفتح نافذة الدفع
            closeModal('giftingCalculatorModal');

            // استدعاء دالة عرض الدفع مباشرة مع البيانات الجديدة
            showPaymentDetails('vodafone', finalPriceEGP, finalTitle, extraData);
            // ملاحظة: هنا فتحنا فودافون كاش كافتراضي، يمكن تعديلها لفتح نافذة اختيار الدفع أولاً إذا أردت.
        }

        // دالة لفتح نافذة الآلة الحاسبة
        function openGiftingCalculatorModal() {
            // إعادة تعيين الحقول عند كل فتح
            document.getElementById('giftingFriendCode').value = '';
            document.getElementById('giftingGameName').value = '';
            document.getElementById('giftingGamePriceUSD').value = '';
            document.getElementById('giftingFinalPriceDisplay').innerHTML = '';
            showModal('giftingCalculatorModal');
        }

        // دالة لحساب السعر تلقائياً عند الكتابة
        // دالة لحساب السعر تلقائياً عند الكتابة
        function calculateGiftingPrice() {
            const priceUSDInput = document.getElementById('giftingGamePriceUSD');
            const displayElement = document.getElementById('giftingFinalPriceDisplay');
            const priceUSD = parseFloat(priceUSDInput.value);

            if (isNaN(priceUSD) || priceUSD <= 0) {
                displayElement.innerHTML = '';
                return;
            }

            // المعادلة الحسابية: (السعر بالدولار * 66) + 20
            const finalPriceEGP = (priceUSD * 55) + 20;

            // ✅ هذا هو الجزء المهم: سيقوم بعرض العنوان والسعر بشكل منفصل ومنظم
            displayElement.innerHTML = `
                                                                                                                                                                                                                        <span class="price-label">المبلغ المطلوب</span>
                                                                                                                                                                                                                        <span class="price-value">${finalPriceEGP.toFixed(2)} ج.م</span>
                                                                                                                                                                                                                    `;
        }


        function doPost(e) {
            try {
                var SHEET_ID = "1cLYmsxH1peOUhRNH9PwoMij8mmrOmeu0LRq8nWPn4vs"; // تأكد من الـ ID
                var SHEET_NAME = "Sheet1"; // تأكد من اسم الصفحة
                var ADMIN_EMAIL = "sohaylso34@gmail.com"; // إيميلك

                var sheet = SpreadsheetApp.openById(SHEET_ID).getSheetByName(SHEET_NAME);
                var data = JSON.parse(e.postData.contents);

                var timestamp = new Date();
                var orderId = "BER-" + timestamp.getTime().toString().slice(-6) + Math.floor(Math.random() * 100);

                // --- استخراج البيانات الأساسية ---
                var productName = data.product || data.order_type || "N/A";
                var totalPrice = data.price || "N/A";
                var paymentMethod = data.payment_method || "Custom Order";
                var customerEmail = data.email || "N/A";
                var customerPhone = data.phone_number || data.contact || "N/A";
                var notes = data.notes_paypal || data.notes || data.order_details || "";

                // --- ✅ استخراج البيانات الجديدة بشكل منفصل ---
                var steamFriendCode = data["Steam Friend Code"] || "";
                var gameName = data["Game Name"] || "";

                // --- تجميع باقي البيانات الإضافية ---
                var extraData = [];
                if (data["Riot ID"]) extraData.push("Riot ID: " + data["Riot ID"]);
                if (data["Genshin UID"]) extraData.push("Genshin UID: " + data["Genshin UID"]);
                if (data["Marvel Rivals ID"]) extraData.push("Marvel Rivals ID: " + data["Marvel Rivals ID"]);
                if (data["Steam Profile Link"]) extraData.push("Steam Profile Link: " + data["Steam Profile Link"]);
                if (data["Account Email"]) extraData.push("Account Email: " + data["Account Email"]);
                if (data["Contact Method"]) extraData.push("Contact: " + data["Contact Method"]);
                if (data["Original Price (USD)"]) extraData.push("Original Price: " + data["Original Price (USD)"]);

                var extraDataString = extraData.join(' | ');

                // --- كتابة البيانات في الصفوف بالترتيب الصحيح ---
                sheet.appendRow([
                    orderId, timestamp, productName, totalPrice, paymentMethod,
                    customerEmail, customerPhone,
                    steamFriendCode, // ✅ العمود الجديد
                    gameName,      // ✅ العمود الجديد
                    extraDataString, notes
                ]);

                // --- إرسال الإيميلات (لا تغيير هنا) ---
                // ... (كود إرسال الإيميل يبقى كما هو)

                return ContentService.createTextOutput(JSON.stringify({ "result": "success", "orderId": orderId }))
                    .setMimeType(ContentService.MimeType.JSON);

            } catch (error) {
                Logger.log(error.toString());
                return ContentService.createTextOutput(JSON.stringify({ "result": "error", "error": error.toString() }))
                    .setMimeType(ContentService.MimeType.JSON);
            }
        }

        // دالة إرسال الإيميلات
        function sendEmailNotifications(adminEmail, customerEmail, orderId, productName, totalPrice, paymentMethod, extraData, notes) {
            if (!adminEmail.includes("@")) return;

            // --- 1. رسالة البريد الإلكتروني للمدير (Admin) ---
            const subjectAdmin = `🎉 طلب جديد | Berlin Store | ${orderId}`;
            const htmlBodyAdmin = `
                                                                                                                                                                                                                                <div style="font-family: sans-serif; border: 1px solid #ddd; padding: 15px; max-width: 600px;">
                                                                                                                                                                                                                                    <h2 style="color: #2c1a40;">تفاصيل طلب جديد</h2>
                                                                                                                                                                                                                                    <p><strong>كود الطلب:</strong> ${orderId}</p>
                                                                                                                                                                                                                                    <p><strong>المنتج/الخدمة:</strong> ${productName}</p>
                                                                                                                                                                                                                                    <p><strong>السعر الإجمالي:</strong> ${totalPrice}</p>
                                                                                                                                                                                                                                    <p><strong>طريقة الدفع:</strong> ${paymentMethod}</p>
                                                                                                                                                                                                                                    <hr>
                                                                                                                                                                                                                                    <p><strong>إيميل العميل:</strong> ${customerEmail}</p>
                                                                                                                                                                                                                                    <p><strong>بيانات إضافية:</strong> ${extraData || 'لا يوجد'}</p>
                                                                                                                                                                                                                                    <p><strong>ملاحظات العميل:</strong> ${notes || 'لا يوجد'}</p>
                                                                                                                                                                                                                                </div>
                                                                                                                                                                                                                            `;
            MailApp.sendEmail({
                to: adminEmail,
                subject: subjectAdmin,
                htmlBody: htmlBodyAdmin,
                name: 'Berlin Store Orders' // ✅ تم تغيير اسم مرسل رسالة المدير
            });

            // --- 2. رسالة البريد الإلكتروني للعميل (Customer) ---
            if (customerEmail && customerEmail !== 'N/A' && customerEmail.includes("@")) {
                const subjectCustomer = `✅ تم تأكيد طلبك من Berlin Store | رقم الطلب: ${orderId}`;
                const htmlBodyCustomer = `
                                                                                                                                                                                                                                <div dir="rtl" style="font-family: 'Tajawal', Arial, sans-serif; background-color: #f9f9f9; margin: 0; padding: 20px;">
                                                                                                                                                                                                                                    <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                                                                                                                                                                                                                        <tr>
                                                                                                                                                                                                                                            <td align="center">
                                                                                                                                                                                                                                                <table width="600" border="0" cellspacing="0" cellpadding="0" style="background-color: #ffffff; border: 1px solid #dedede; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
                                                                                                                                                                                                                                                    <tr>
                                                                                                                                                                                                                                                        <td align="center" style="background-color: #2c1a40; padding: 20px; border-radius: 8px 8px 0 0;">
                                                                                                                                                                                                                                                            <h1 style="color: #ffcc00; margin: 0; font-size: 28px; border: none;">Berlin Store</h1>
                                                                                                                                                                                                                                                        </td>
                                                                                                                                                                                                                                                    </tr>
                                                                                                                                                                                                                                                    <tr>
                                                                                                                                                                                                                                                        <td style="padding: 30px 25px;">
                                                                                                                                                                                                                                                            <h2 style="color: #333333; font-size: 22px; border: none; margin-bottom: 15px;">شكرًا لثقتك بنا!</h2>
                                                                                                                                                                                                                                                            <p style="color: #555555; line-height: 1.6;">مرحبًا، لقد استلمنا طلبك بنجاح وجاري مراجعته الآن. سيتم تنفيذه في أقرب وقت ممكن وإعلامك فور الانتهاء.</p>

                                                                                                                                                                                                                                                            <table width="100%" cellspacing="0" cellpadding="0" style="margin-top: 25px; border: 1px solid #eeeeee;">
                                                                                                                                                                                                                                                                <tr>
                                                                                                                                                                                                                                                                    <td colspan="2" style="background-color: #f5f5f5; padding: 12px; font-weight: bold; color: #333;">ملخص الطلب</td>
                                                                                                                                                                                                                                                                </tr>
                                                                                                                                                                                                                                                                <tr>
                                                                                                                                                                                                                                                                    <td style="padding: 10px; border-bottom: 1px solid #eeeeee; width: 40%;"><strong>كود الطلب:</strong></td>
                                                                                                                                                                                                                                                                    <td style="padding: 10px; border-bottom: 1px solid #eeeeee;">${orderId}</td>
                                                                                                                                                                                                                                                                </tr>
                                                                                                                                                                                                                                                                <tr>
                                                                                                                                                                                                                                                                    <td style="padding: 10px; border-bottom: 1px solid #eeeeee;"><strong>المنتج/الخدمة:</strong></td>
                                                                                                                                                                                                                                                                    <td style="padding: 10px; border-bottom: 1px solid #eeeeee;">${productName}</td>
                                                                                                                                                                                                                                                                </tr>
                                                                                                                                                                                                                                                                <tr>
                                                                                                                                                                                                                                                                    <td style="padding: 10px; border-bottom: 1px solid #eeeeee;"><strong>المبلغ الإجمالي:</strong></td>
                                                                                                                                                                                                                                                                    <td style="padding: 10px; border-bottom: 1px solid #eeeeee;">${totalPrice}</td>
                                                                                                                                                                                                                                                                </tr>
                                                                                                                                                                                                                                                                <tr>
                                                                                                                                                                                                                                                                    <td style="padding: 10px;"><strong>طريقة الدفع:</strong></td>
                                                                                                                                                                                                                                                                    <td style="padding: 10px;">${paymentMethod}</td>
                                                                                                                                                                                                                                                                </tr>
                                                                                                                                                                                                                                                            </table>
                                                                                                                                                                                                                                                        </td>
                                                                                                                                                                                                                                                    </tr>
                                                                                                                                                                                                                                                    <tr>
                                                                                                                                                                                                                                                        <td style="padding: 0 25px 30px 25px; text-align: center;">
                                                                                                                                                                                                                                                            <p style="color: #555555;">لأي استفسارات، أو لتتبع أسرع، لا تتردد في التواصل مع الدعم الفني عبر سيرفر الديسكورد:</p>
                                                                                                                                                                                                                                                            <a href="https://discord.gg/D3shcEb5xe" target="_blank" style="background-color: #5865F2; color: #ffffff; padding: 12px 25px; text-decoration: none; border-radius: 5px; font-weight: bold; display: inline-block;">انضم لسيرفر الدعم الفني</a>
                                                                                                                                                                                                                                                        </td>
                                                                                                                                                                                                                                                    </tr>
                                                                                                                                                                                                                                                    <tr>
                                                                                                                                                                                                                                                        <td align="center" style="background-color: #f5f5f5; padding: 15px; font-size: 12px; color: #888888; border-radius: 0 0 8px 8px;">
                                                                                                                                                                                                                                                            <p style="margin: 0;">&copy; ${new Date().getFullYear()} Berlin Store. جميع الحقوق محفوظة.</p>
                                                                                                                                                                                                                                                        </td>
                                                                                                                                                                                                                                                    </tr>
                                                                                                                                                                                                                                                </table>
                                                                                                                                                                                                                                            </td>
                                                                                                                                                                                                                                        </tr>
                                                                                                                                                                                                                                    </table>
                                                                                                                                                                                                                                </div>
                                                                                                                                                                                                                                `;

                MailApp.sendEmail({
                    to: customerEmail,
                    subject: subjectCustomer,
                    htmlBody: htmlBodyCustomer,
                    name: 'Berlin Store' // ✅ هذا هو السطر الجديد والمهم
                });
            }
        }


        // --- دالة جديدة لإظهار فورم الطلب بعد الضغط على زر "اطلب الآن" ---
        function revealOrderForm(buttonEl) {
            const card = buttonEl.closest('.custom-order-card');
            if (!card) return;

            const overlay = card.querySelector('.offer-overlay');
            const form = card.querySelector('.custom-order-form');

            if (overlay) {
                overlay.classList.add('hidden');
            }
            if (form) {
                form.classList.add('visible');
            }
        }

        let imageSliderInterval = null; // متغير للتحكم في السلايدر

        const translations = {
            // العربية (اللغة الافتراضية)
            ar: {
                'home': 'الرئيسية',
                'products': 'المنتجات',
                'subscriptions': 'الاشتراكات',
                'top_up': 'شحن رصيد',
                'steam': 'ستيم',
                'shipping': 'تتبع الشحن',
                'support': 'دعم فني',
                'welcome_message': 'أهلاً بك في Berlin Store!',
                'discover_products': 'اكتشف منتجاتنا الجديدة وتتبع حالة طلباتك بسهولة.',
                'join_discord': 'انضم لسيرفر الديسكورد',
                'track_order': 'تتبع شحن وتوصيل طلبك',
                'most_sold': 'الأكثر مبيعًا 🔥',
                'subscriptions_section': 'الاشتراكات',
                'top_up_section': 'شحن الألعاب - Top Up',
                'offline_steam': 'حسابات ستيم (اوفلاين دائم - اونلاين ايجار)',
                'enter_order_code': 'أدخل كود الطلب الخاص بك',
                'shipping_description': 'الصفحة دي لتتبع شحن وتوصيل المنتجات فقط وليس لها علاقة بالvideo gaming',
                'search': 'بحث',
                'search_placeholder': 'ابحث عن منتج...',
                'search_results': 'نتائج البحث',
                'no_results': 'عذراً، لم يتم العثور على أي منتجات تطابق بحثك.',
                'all_rights_reserved': 'جميع الحقوق محفوظة.',
                'payment_safe': 'دفع آمن 100%',
                'instant_delivery': 'تسليم فوري',
                'support_24_7': 'دعم فني 24/7',
                'price_from': 'يبدأ من',
                'price_per_item': 'السعر',
                'add_to_cart': 'أضف للسلة',
                'buy_now': 'شراء الآن',
                'cart': 'سلة التسوق',
                'cart_empty': 'سلتك فارغة.',
                'total': 'الإجمالي',
                'checkout': 'إتمام الشراء',
                'go_to_payment': 'اذهب للدفع',
                'payment_methods': 'طرق الدفع',
                'choose_payment_method': 'اختر طريقة الدفع المناسبة لك:',
                'back': 'رجوع',
                'select_currency_placeholder': 'اختر العملة',
                'enter_email': 'أدخل إيميلك',
                'enter_phone': 'الرقم اللي حولت منه',
                'optional_note': 'أضف ملاحظة (اختياري)',
                'discount_code': 'كود الخصم',
                'apply_discount': 'تطبيق',
                'payment_confirm': 'تم الدفع!',
                'about_us': 'من نحن؟',
                'terms': 'شروط الخدمة',
                'privacy': 'سياسة الخصوصية',
                'store_reviews': 'تقييمات المتجر',
                'first_to_rate': 'كن أول من يقيّم المتجر!',
                'leave_rating': 'اترك تقييمك',
                'your_name': 'اسمك',
                'your_review': 'اكتب تعليقك (اختياري)',
                'submit_review': 'أضف تقييمك',
                'product_page_desc': 'الوصف',
                'product_page_specs': 'مواصفات التشغيل للـPC',
                'product_page_reviews': 'تقييمات العملاء',
                'product_page_extra': 'معلومات إضافية',
                'product_page_faq': 'أسئلة وأجوبة',
                'quantity': 'الكمية',
                'add_to_cart_btn': 'أضف إلى السلة',
                'loading_sending_request': 'جاري إرسال طلبك... من فضلك انتظر.',
                'thanks_for_purchase': 'شكرا لشرائك من Berlin Store',
                'order_received': 'تم استلام طلبك بنجاح وسيتم ارساله في اقرب وقت.',
                'language': 'اللغة'
            },
            // English
            en: {
                'home': 'Home',
                'products': 'Products',
                'subscriptions': 'Subscriptions',
                'top_up': 'Top Up',
                'steam': 'Steam',
                'shipping': 'Track Order',
                'support': 'Support',
                'welcome_message': 'Welcome to Berlin Store!',
                'discover_products': 'Discover our new products and track your orders easily.',
                'join_discord': 'Join our Discord server',
                'track_order': 'Track your order\'s shipment and delivery',
                'most_sold': 'Most Sold 🔥',
                'subscriptions_section': 'Subscriptions',
                'top_up_section': 'Games Top Up',
                'offline_steam': 'Steam Accounts (Permanent Offline - Rental Online)',
                'enter_order_code': 'Enter your order code',
                'shipping_description': 'This page is for tracking physical shipments only and is not related to video gaming.',
                'search': 'Search',
                'search_placeholder': 'Search for a product...',
                'search_results': 'Search Results',
                'no_results': 'Sorry, no products were found matching your search.',
                'all_rights_reserved': 'All Rights Reserved.',
                'payment_safe': '100% Secure Payment',
                'instant_delivery': 'Instant Delivery',
                'support_24_7': '24/7 Support',
                'price_from': 'Starts from',
                'price_per_item': 'Price',
                'add_to_cart': 'Add to Cart',
                'buy_now': 'Buy Now',
                'cart': 'Shopping Cart',
                'cart_empty': 'Your cart is empty.',
                'total': 'Total',
                'checkout': 'Checkout',
                'go_to_payment': 'Go to Payment',
                'payment_methods': 'Payment Methods',
                'choose_payment_method': 'Choose your preferred payment method:',
                'back': 'Back',
                'select_currency_placeholder': 'Select Currency',
                'enter_email': 'Enter your email',
                'enter_phone': 'Phone number used for transfer',
                'optional_note': 'Add a note (optional)',
                'discount_code': 'Discount Code',
                'apply_discount': 'Apply',
                'payment_confirm': 'Paid!',
                'about_us': 'About Us',
                'terms': 'Terms of Service',
                'privacy': 'Privacy Policy',
                'store_reviews': 'Store Reviews',
                'first_to_rate': 'Be the first to rate the store!',
                'leave_rating': 'Leave a review',
                'your_name': 'Your Name',
                'your_review': 'Write your review here (optional)',
                'submit_review': 'Submit your review',
                'product_page_desc': 'Description',
                'product_page_specs': 'PC System Requirements',
                'product_page_reviews': 'Customer Reviews',
                'product_page_extra': 'Extra Information',
                'product_page_faq': 'FAQ',
                'quantity': 'Quantity',
                'add_to_cart_btn': 'Add to Cart',
                'loading_sending_request': 'Sending your request... Please wait.',
                'thanks_for_purchase': 'Thank you for your purchase from Berlin Store',
                'order_received': 'Your order has been received successfully and will be sent shortly.',
                'language': 'Language'
            }
        };

        let currentLanguage = 'ar';

        let currentCurrency = 'EGP';
        const exchangeRate = 42; // سعر 1 دولار = 50 جنيه مصري

        let currentPaymentTotal = 0;

        // --- دالة جديدة لمعالجة إرسال نماذج الطلبات المخصصة ---
        function handleCustomOrderSubmit(event) {
            event.preventDefault(); // منع التحديث التلقائي للصفحة
            const form = event.target;
            const submitButton = form.querySelector('button[type="submit"]');
            submitButton.textContent = 'جاري الإرسال...';
            submitButton.disabled = true;

            const formData = new FormData(form);

            // تحديد نوع الطلب بناءً على id الفورم
            let orderType = '';
            switch (form.id) {
                case 'website-design-form':
                    orderType = 'Website Design Package';
                    break;
                case 'discord-server-form':
                    orderType = 'Discord Server Design Package';
                    break;
                case 'graphic-design-form':
                    orderType = 'Graphic Design Package';
                    break;
                case 'video-editing-form':
                    orderType = 'Video Editing Package';
                    break;
                case 'gaming-content-form':
                    orderType = 'Gaming and Content Creation Design Package';
                    break;
                default:
                    orderType = 'Custom Order';
            }
            formData.append('order_type', orderType); // إضافة نوع الطلب للبيانات

            const data = Object.fromEntries(formData.entries());
            // ✅ السطر الجديد بعد التعديل
            // ✅ The final correct line
            const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzTnc9hTa4-Ho4r1p7rMdfJhRhVaP7ZQ1hE5Pg_4PaQEUVSB2CFs5cmJQFDSzVEopZI/exec";

            fetch(SCRIPT_URL, {
                method: 'POST',
                mode: 'no-cors',
                cache: 'no-cache',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            })
                .finally(() => {
                    showToast("تم إرسال طلبك بنجاح! سنتواصل معك قريبًا.");
                    form.reset();
                    submitButton.textContent = 'إرسال الطلب';
                    submitButton.disabled = false;
                });
        }

        // ربط الدالة بجميع النماذج المخصصة
        document.getElementById('website-design-form').addEventListener('submit', handleCustomOrderSubmit);
        document.getElementById('discord-server-form').addEventListener('submit', handleCustomOrderSubmit);
        document.getElementById('graphic-design-form').addEventListener('submit', handleCustomOrderSubmit);
        document.getElementById('video-editing-form').addEventListener('submit', handleCustomOrderSubmit);
        document.getElementById('gaming-content-form').addEventListener('submit', handleCustomOrderSubmit);




        function loadAllSections() {
            loadGamesToHome();
            loadSubscriptionsToHome();
            loadOfflineSteamGamesToHome();
            loadSteamGiftCardsToHome();
            loadSteamPointsToHome();
            loadSoftwareKeys();
            loadGenshinImpact();
            loadFortnite();
            loadRocketLeague();
            loadMarvelRivals();
            loadPlaystationSection();
            loadXboxSection(); // ✅✅ أضف هذا السطر هنا
            loadProducts();
            loadGameRentalsToHome();
            loadSubscriptions();
            loadCoDServices();
        }

        function changeCurrency() {
            const selector = document.getElementById('currency-selector');
            currentCurrency = selector.value;

            if (currentCurrency === 'USD') {
                setLanguage('en'); // استدعاء دالة الترجمة الإنجليزية
            } else {
                setLanguage('ar'); // استدعاء دالة الترجمة العربية
            }

            // إعادة تحميل جميع الأقسام لعرض الأسعار بالعملة الجديدة
            loadAllSections();

            loadPlaystationSection();

            // تحديث أسعار السلة
            renderCart();

            // ✅ السطر الجديد والمهم: تحديث سعر حاسبة البوستينج
            calculateBoostingPrice();

            const message = `Region and currency changed to ${currentCurrency}`;
            showInfoToast(message, 3000);
        }

        function addToCartWithAccountReminder(event, productId) {
            performAddToCart(productId, 1, event);
            const message = "لا تنسي اضافة الايميل والباسورد في الملاحظات عند اتمام الدفع من خلال السلة";
            showInfoToast(message, 8000); // 8 ثوانٍ
        }

        // دالة جديدة خاصة بـ Valorant
        function addToCartWithValorantReminder(event, productId) {
            performAddToCart(productId, 1, event);
            const message = "لا تنسي اضافة الـ Riot ID في الملاحظات عند اتمام الدفع من خلال السلة";
            showInfoToast(message, 8000); // 8 ثوانٍ
        }

        function addToCartWithGenshinReminder(event, productId) {
            // 1. تنفيذ الإضافة للسلة والأنيميشن كالمعتاد
            performAddToCart(productId, 1, event);

            // 2. إظهار الرسالة المخصصة لـ Genshin UID
            const message = "لا تنسي اضافة الـ Genshin UID في الملاحظات عند اتمام الدفع من خلال السلة";
            showInfoToast(message, 8000); // إظهار الرسالة لمدة 8 ثوانٍ
        }

        // الدالة الأولى: لعرض نافذة الملاحظات بالمدة المحددة
        function showInfoToast(message, duration) {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            toast.className = 'toast-notification info'; // استخدام التنسيق الأصفر الجديد
            toast.textContent = message;
            container.appendChild(toast);

            setTimeout(() => {
                toast.classList.add('show');
            }, 10); // تأخير بسيط لبدء الأنيميشن

            setTimeout(() => {
                toast.classList.remove('show');
                toast.addEventListener('transitionend', () => {
                    if (toast.parentElement) {
                        toast.remove();
                    }
                });
            }, duration); // استخدام المدة المحددة (5 ثوانٍ)
        }

        // الدالة الثانية: لتنفيذ الإضافة للسلة مع إظهار الرسالة
        function addToCartWithReminder(event, productId) {
            // 1. تنفيذ الإضافة للسلة والأنيميشن كالمعتاد
            performAddToCart(productId, 1, event);

            // 2. إظهار الرسالة المخصصة لمدة 5 ثوانٍ
            const message = "لا تنسي اضافة الـ Steam profile link في الملاحظات عند اتمام الدفع من خلال السلة";
            showInfoToast(message, 10000); // 5000 ميلي ثانية = 5 ثوانٍ
        }

        // دالة لعرض قائمة تقييمات المتجر
        function renderStoreReviews() {
            const reviewsContainer = document.getElementById('store-reviews-list');
            const ratings = JSON.parse(localStorage.getItem('storeRatings')) || [];

            reviewsContainer.innerHTML = ''; // تفريغ الحاوية قبل إعادة العرض

            ratings.forEach(review => {
                const reviewItem = document.createElement('div');
                reviewItem.className = 'comment-card'; // إعادة استخدام نفس تنسيق كارت التعليقات

                let starsHTML = '';
                for (let i = 1; i <= 5; i++) {
                    starsHTML += `<span class="star ${i <= review.rating ? 'filled' : ''}">★</span>`;
                }

                reviewItem.innerHTML = `
                                                                                                                                                                                                                                                                                <div class="comment-card-header">
                                                                                                                                                                                                                                                                                    <span class="comment-author">${review.name}</span>
                                                                                                                                                                                                                                                                                    <div class="comment-rating">${starsHTML}</div>
                                                                                                                                                                                                                                                                                </div>
                                                                                                                                                                                                                                                                                <p class="comment-text">${review.text}</p>
                                                                                                                                                                                                                                                                            `;
                reviewsContainer.appendChild(reviewItem);
            });
        }
        // دالة لحفظ وإرسال تقييم المتجر
        function submitStoreRating() {
            const nameInput = document.getElementById('rating-name');
            const textInput = document.getElementById('rating-text');
            const ratingInput = document.getElementById('storeRatingInput');
            const messageElement = document.getElementById('feedback-message');

            const name = nameInput.value;
            const text = textInput.value;
            const rating = parseInt(ratingInput.value);

            if (!name) {
                alert('الرجاء إدخال اسمك.');
                return;
            }
            if (rating === 0) {
                alert('الرجاء اختيار تقييم (من 1 إلى 5 نجوم).');
                return;
            }

            const newRating = {
                name: name,
                text: text || " ",
                rating: rating,
                date: new Date().toISOString()
            };

            // حفظ التقييمات في Local Storage
            let ratings = JSON.parse(localStorage.getItem('storeRatings')) || [];
            ratings.unshift(newRating); // إضافة التقييم الجديد في البداية
            localStorage.setItem('storeRatings', JSON.stringify(ratings));

            messageElement.textContent = "شكرًا لتقييمك! رأيك يهمنا.";
            messageElement.style.color = '#00ff00';

            // إعادة تحميل عرض التقييمات لتحديث المتوسط
            loadStoreRatings();

            // تفريغ الحقول
            nameInput.value = '';
            textInput.value = '';
            ratingInput.value = '0';
            document.getElementById('storeRatingStars').dataset.rating = '0';

            setTimeout(() => { messageElement.textContent = ''; }, 4000);
        }

        // دالة لجعل النجوم في فورم الإضافة تفاعلية
        function setupStoreRatingInput() {
            const starsContainer = document.getElementById('storeRatingStars');
            if (!starsContainer) return;

            const ratingInput = document.getElementById('storeRatingInput');
            const stars = starsContainer.querySelectorAll('.star');

            stars.forEach(star => {
                star.addEventListener('click', () => {
                    const value = star.dataset.value;
                    ratingInput.value = value;
                    starsContainer.dataset.rating = value;
                });
            });
        }

        // ✅ الكود الجديد والمعدل لدالة عرض التقييمات
        function loadStoreRatings() {
            const displayContainer = document.getElementById('store-average-rating-display');
            const reviewsListContainer = document.getElementById('store-reviews-list');

            // 1. جلب التقييمات الفعلية (التي حفظها المستخدمون)
            const ratings = JSON.parse(localStorage.getItem('storeRatings')) || [];

            // 2. حساب المتوسط الحقيقي
            let totalRating = 0;
            if (ratings.length > 0) {
                totalRating = ratings.reduce((sum, review) => sum + review.rating, 0);
            }

            // إذا لم يكن هناك تقييمات من المستخدمين، نستخدم قيم افتراضية منطقية.
            const reviewCount = ratings.length > 0 ? ratings.length : 212; // نعتمد على العدد الفعلي
            const averageRating = ratings.length > 0 ? (totalRating / ratings.length).toFixed(1) : '5.0'; // نعتمد على المتوسط الفعلي

            // 3. بناء شريط النجوم
            let starsHTML = '';
            const fullStars = Math.floor(averageRating);
            const hasHalfStar = (averageRating - fullStars) >= 0.5;

            for (let i = 1; i <= 5; i++) {
                if (i <= fullStars) {
                    starsHTML += `<span class="star filled">★</span>`; // نجوم ممتلئة
                } else if (i === fullStars + 1 && hasHalfStar) {
                    // يمكن استخدام أيقونة نصف نجمة هنا أو نجمة ممتلئة للمظهر
                    starsHTML += `<span class="star filled" style="opacity: 0.5;">★</span>`; // نصف نجمة (نستخدم نصف شفافية للنجمة الممتلئة)
                } else {
                    starsHTML += `<span class="star empty">★</span>`; // نجوم فارغة
                }
            }

            // 4. تحديث الواجهة
            displayContainer.innerHTML = `
                    <div class="stars">${starsHTML}</div>
                    <p class="summary-text" style="color: #fff;">
                        متوسط تقييم ${averageRating} نجوم
                        <br>
                        من إجمالي ${reviewCount} تقييم
                    </p>
                `;

            // 5. عرض قائمة التقييمات التفصيلية أيضاً
            renderStoreReviews();
        }

        function loadDiscordDecorations() {
            // هذه الدالة لم تعد تقوم بشيء لأن المحتوى أصبح ثابتًا في ملف HTML
        }

        function loadPlaystationSection() {
            const plusContainer = document.getElementById('ps-plus-container');
            const cardsContainer = document.getElementById('psn-gift-cards-container');

            if (!plusContainer || !cardsContainer) return;

            plusContainer.innerHTML = '';
            cardsContainer.innerHTML = '';

            for (const productId in productsData) {
                const product = productsData[productId];

                if (product.category === 'ps-plus') {
                    renderProductItem(product, plusContainer, 'subscriptions', true);
                }
                else if (product.category === 'psn-cards') {
                    renderProductItem(product, cardsContainer, 'psn-cards', true);
                }
            }
        }

        function performGlobalSearch(query) {
            const lowerQuery = query.toLowerCase().trim();

            if (lowerQuery === 'matrix') {
                document.body.classList.toggle('hacker-mode');
                showGameAlert("🕵️‍♂️ Matrix Mode Activated!", "cheat");
                return;
            }
            if (lowerQuery === 'hesoyam') {
                showGameAlert("💰 $250,000 Added (Just Kidding!)", "cheat");
                return;
            }
            if (lowerQuery === 'aimbot') {
                document.body.style.cursor = 'crosshair';
                showGameAlert("🎯 Aim Assist Enabled!", "cheat");
                return;
            }
            if (lowerQuery === 'itakura' || lowerQuery === 'aptx4869' || lowerQuery === 'vermouth') {
                triggerItakuraEffect();
                return;
            }
            // 1. ينقلك تلقائيًا إلى صفحة عرض نتائج البحث
            window.location.hash = '#searchResults';

            const searchTerm = query.toLowerCase().trim();
            if (searchTerm === 'matrix') {
                document.body.classList.toggle('hacker-mode');
                return; // الـ return مهمة عشان يوقف دالة البحث وميفتحش صفحة النتائج
            }
            const resultsContainer = document.getElementById('searchResultsContainer');
            const resultsTitle = document.getElementById('searchResultsTitle');
            const noResultsMsg = document.getElementById('noResultsMessage');

            calculateDiscordDecoPrice();

            // 2. يجهز الصفحة عن طريق تحديث العنوان وتفريغ النتائج القديمة
            resultsTitle.textContent = `نتائج البحث عن: "${query}"`;
            resultsContainer.innerHTML = '';
            noResultsMsg.style.display = 'none';

            let resultsFound = 0;

            // 3. يبدأ البحث في كل المنتجات الموجودة في قاعدة البيانات
            for (const productId in productsData) {
                const product = productsData[productId];

                // البحث في العنوان
                const productTitle = product.title.toLowerCase();

                // البحث في الوصف القصير
                const productShortDesc = (product.shortDescription || '').toLowerCase();

                // البحث في الوصف الكامل (مع إزالة أكواد HTML لضمان دقة البحث)
                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = product.fullDescription || '';
                const fullDescText = (tempDiv.textContent || '').toLowerCase();

                // 4. التحقق إذا كانت كلمة البحث موجودة في أي من الثلاثة (العنوان أو الوصفين)
                if (productTitle.includes(searchTerm) ||
                    productShortDesc.includes(searchTerm) ||
                    fullDescText.includes(searchTerm)) {

                    // إذا تم العثور على نتيجة، يتم عرض المنتج
                    renderProductItem(product, resultsContainer, 'search', true);
                    resultsFound++;
                }
            }

            // 5. في حالة عدم العثور على أي منتج مطابق، تظهر رسالة للمستخدم
            if (resultsFound === 0) {
                noResultsMsg.style.display = 'block';
            }
        }

        const productsData = {


            "thelastofus_offline": {
                id: "thelastofus_offline",
                title: "The Last of Us Part 2",
                price: 100,
                image: "./images/tlou2.png",
                images: [
                    "./images/tlou2_1.jpg", // الصورة الأولى في السلايدر
                    "./images/tlou2_2.jpg", // الصورة الثانية
                    "./images/tlou2_3.jpg", // الصورة الثالثة
                    "./images/tlou2_4.jpg"  // وهكذا...
                ],
                shortDescription: "معضلة الانتقام",
                fullDescription: "انطلق في رحلة عاطفية وبقائية لا تُنسى مع Ellie في عالم ما بعد الكارثة. هذا الحساب الأوفلاين يتيح لك تجربة القصة الكاملة للعبة.",
                platform: 'steam',
                badges: ['OFFLINE'],
                specs: `<h3>متطلبات تشغيل The Last of Us Part II الموصى بها</h3>
                                                                                                                                                                                                                                                            <ul>
                                                                                                                                                                                                                                                                <li><strong>نظام التشغيل:</strong> Windows 10 64-bit</li>
                                                                                                                                                                                                                                                                <li><strong>المعالج:</strong> Intel Core i7-8700K أو AMD Ryzen 5 3600X</li>
                                                                                                                                                                                                                                                                <li><strong>الذاكرة العشوائية (RAM):</strong> 16 GB</li>
                                                                                                                                                                                                                                                                <li><strong>بطاقة الرسومات (GPU):</strong> NVIDIA GeForce RTX 4060 أوRTX 3060 أو AMD Radeon RX 5700 XT (8 GB)</li>
                                                                                                                                                                                                                                                                <li><strong>مساحة تخزين:</strong> 100 GB SSD (موصى به)</li>

                                                                                                                                                                                                                                                            </ul>`
            },
            // =================== ALL COD OFFLINE GAMES (FINAL LOCAL IMAGES) START ===================
            "mw1_offline": {
                id: "mw1_offline",
                title: "Call of Duty: Modern Warfare (2019)",
                price: 100,
                usd_price: 2.38,
                image: "./images/cod_mw_2019.png",
                shortDescription: "القصص لا تكتب الأبطال. الأبطال يكتبون القصص.",
                fullDescription: "انغمس في قصة ملحمية تجسد حرب العصر الحديث. العب كعميل من المستوى الأول في ملحمة تؤثر على توازن القوى العالمي.",
                platform: 'steam',
                badges: ['OFFLINE'],
                category: "cod-games"
            },
            "mw2_offline": {
                id: "mw2_offline",
                title: "Call of Duty: Modern Warfare II (2022)",
                price: 130,
                usd_price: 3.10,
                image: "./images/cod_mw2_2022.png",
                shortDescription: "فرقة المهمات 141 تعود من جديد.",
                fullDescription: "انضم إلى فرقة المهمات 141 الأسطورية في حملة عالمية الطراز. استمتع بمهام متنوعة وأسلوب لعب متطور في طور القصة المثير.",
                platform: 'steam',
                badges: ['OFFLINE'],
                category: "cod-games"
            },
            "mw3_offline": {
                id: "mw3_offline",
                title: "Call of Duty: Modern Warfare III (2023)",
                price: 150,
                usd_price: 3.57,
                image: "./images/cod_mw3_2023.png",
                shortDescription: "التهديد المطلق ينتظر.",
                fullDescription: "يواجه الكابتن برايس وفرقة المهمات 141 التهديد المطلق. قاتل كما لم يحدث من قبل وأوقف فلاديمير ماكاروف.",
                platform: 'steam',
                badges: ['OFFLINE'],
                category: "cod-games"
            },
            "cod_bo_cold_war_offline": {
                id: "cod_bo_cold_war_offline",
                title: "Call of Duty: Black Ops Cold War",
                price: 130,
                usd_price: 3.10,
                image: "./images/cod_black_ops_cold_war.png",
                shortDescription: "لا تعرف التاريخ. اعرف الحقيقة.",
                fullDescription: "انغمس في عمق المعركة الجيوسياسية المتقلبة للحرب الباردة في أوائل الثمانينيات. لا شيء يبدو كما هو في طور القصة الفردي المثير.",
                platform: 'steam',
                badges: ['OFFLINE'],
                category: "cod-games"
            },
            "cod_vanguard_offline": {
                id: "cod_vanguard_offline",
                title: "Call of Duty: Vanguard",
                price: 120,
                usd_price: 2.86,
                image: "./images/cod_vanguard.png",
                shortDescription: "قم بتغيير مجرى التاريخ.",
                fullDescription: "قاتل في معارك محورية في الحرب العالمية الثانية من خلال عيون أبطال فرقة العمليات الخاصة الأولى.",
                platform: 'steam',
                badges: ['OFFLINE'],
                category: "cod-games"
            },
            "cod_bo3_offline": {
                id: "cod_bo3_offline",
                title: "Call of Duty: Black Ops III",
                price: 90,
                usd_price: 2.14,
                image: "./images/cod_black_ops_3.png",
                shortDescription: "مستقبل مظلم حيث الخطوط غير واضحة.",
                fullDescription: "ادخل إلى مستقبل مظلم حيث يظهر نوع جديد من جنود Black Ops وتصبح الخطوط غير واضحة بين الإنسانية والتكنولوجيا.",
                platform: 'steam',
                badges: ['OFFLINE'],
                category: "cod-games"
            },
            "cod_bo2_offline": {
                id: "cod_bo2_offline",
                title: "Call of Duty: Black Ops II",
                price: 80,
                usd_price: 1.90,
                image: "./images/cod_black_ops_2.png",
                shortDescription: "الحرب الباردة في القرن الحادي والعشرين.",
                fullDescription: "تدفع لعبة Black Ops II اللاعبين إلى مستقبل قريب، حيث تتلاقى التكنولوجيا والأسلحة لإنشاء جيل جديد من الحروب.",
                platform: 'steam',
                badges: ['OFFLINE'],
                category: "cod-games"
            },
            "cod_black_ops_offline": {
                id: "cod_black_ops_offline",
                title: "Call of Duty: Black Ops",
                price: 80,
                usd_price: 1.90,
                image: "./images/cod_black_ops_1.png",
                shortDescription: "ادخل في قلب الحرب الباردة.",
                fullDescription: "أكبر سلسلة أكشن منظور الشخص الأول في كل العصور تعود مع الجزء الملحمي Call of Duty: Black Ops.",
                platform: 'steam',
                badges: ['OFFLINE'],
                category: "cod-games"
            },
            "cod_advanced_warfare_offline": {
                id: "cod_advanced_warfare_offline",
                title: "Call of Duty: Advanced Warfare",
                price: 90,
                usd_price: 2.14,
                image: "./images/cod_advanced_warfare.png",
                shortDescription: "القوة تغير كل شيء.",
                fullDescription: "تقدم Call of Duty: Advanced Warfare رؤية قوية لمستقبل المعارك، حيث تلعب التكنولوجيا والخطط التكتيكية دورًا جديدًا.",
                platform: 'steam',
                badges: ['OFFLINE'],
                category: "cod-games"
            },
            "cod_infinite_warfare_offline": {
                id: "cod_infinite_warfare_offline",
                title: "Call of Duty: Infinite Warfare",
                price: 90,
                usd_price: 2.14,
                image: "./images/cod_infinite_warfare.png",
                shortDescription: "حرب تمتد عبر نظامنا الشمسي.",
                fullDescription: "تقدم Infinite Warfare ثلاثة أوضاع لعب فريدة: طور القصة الذي يعود إلى الجذور العسكرية القاسية للسلسلة، وطور اللعب الجماعي، وطور الزومبي.",
                platform: 'steam',
                badges: ['OFFLINE'],
                category: "cod-games"
            },
            "cod_wwii_offline": {
                id: "cod_wwii_offline",
                title: "Call of Duty: WWII",
                price: 90,
                usd_price: 2.14,
                image: "./images/cod_wwii.png",
                shortDescription: "عودة إلى جذور السلسلة.",
                fullDescription: "تقدم Call of Duty: WWII تجربة الحرب العالمية الثانية الحاسمة للجيل الجديد. اهبط في نورماندي وقاتل عبر أوروبا.",
                platform: 'steam',
                badges: ['OFFLINE'],
                category: "cod-games"
            },
            "cod_ghosts_offline": {
                id: "cod_ghosts_offline",
                title: "Call of Duty: Ghosts",
                price: 80,
                usd_price: 1.90,
                image: "./images/cod_ghosts.png",
                shortDescription: "تفوق عددي. تفوق تسليحي.",
                fullDescription: "بعد عشر سنوات من حدث مدمر، انضم إلى 'الأشباح'، بقايا قوات العمليات الخاصة، في قتال ضد قوة عالمية جديدة.",
                platform: 'steam',
                badges: ['OFFLINE'],
                category: "cod-games"
            },
            "cod_mw3_original_offline": {
                id: "cod_mw3_original_offline",
                title: "CoD: Modern Warfare 3 (2011)",
                price: 80,
                usd_price: 1.90,
                image: "./images/cod_mw3_2011.png",
                shortDescription: "نهاية ثلاثية Modern Warfare الأصلية.",
                fullDescription: "لعبة الأكشن الأكثر مبيعًا في كل العصور تعود مع التكملة الملحمية لـ Modern Warfare 2. استكمل القصة وواجه ماكاروف.",
                platform: 'steam',
                badges: ['OFFLINE'],
                category: "cod-games"
            },
            "cod_mw2_original_offline": {
                id: "cod_mw2_original_offline",
                title: "CoD: Modern Warfare 2 (2009)",
                price: 80,
                usd_price: 1.90,
                image: "./images/cod_mw2_2009.png",
                shortDescription: "التكملة الأكثر انتظارًا في التاريخ.",
                fullDescription: "تكملة لأفضل لعبة أكشن منظور شخص أول على الإطلاق، تواصل Modern Warfare 2 القصة الملحمية وتأخذ اللاعبين في مواجهة تهديد جديد.",
                platform: 'steam',
                badges: ['OFFLINE'],
                category: "cod-games"
            },
            "cod_mw_2007_offline": {
                id: "cod_mw_2007_offline",
                title: "CoD 4: Modern Warfare (2007)",
                price: 80,
                usd_price: 1.90,
                image: "./images/cod_mw_2007.png",
                shortDescription: "اللعبة التي غيرت كل شيء.",
                fullDescription: "واحدة من أكثر الألعاب شهرة في التاريخ، Call of Duty 4: Modern Warfare. استرجع واحدة من أكثر الحملات شهرة في التاريخ.",
                platform: 'steam',
                badges: ['OFFLINE'],
                category: "cod-games"
            },
            "cod_world_at_war_offline": {
                id: "cod_world_at_war_offline",
                title: "Call of Duty: World at War",
                price: 80,
                usd_price: 1.90,
                image: "./images/cod_world_at_war.png",
                shortDescription: "قاتل في ساحات معارك المحيط الهادئ وأوروبا.",
                fullDescription: "تأخذ Call of Duty: World at War اللاعبين إلى معارك الحرب العالمية الثانية النهائية ضد أعداء لم يستسلموا أبدًا.",
                platform: 'steam',
                badges: ['OFFLINE'],
                category: "cod-games"
            },
            "cod2_offline": {
                id: "cod2_offline",
                title: "Call of Duty 2",
                price: 70,
                usd_price: 1.67,
                image: "./images/cod_2.png",
                shortDescription: "تجربة مكثفة للحرب العالمية الثانية.",
                fullDescription: "تقدم Call of Duty 2 معارك أكبر وأكثر كثافة وواقعية من أي وقت مضى، بفضل رسوميات محرك COD™2 المذهلة.",
                platform: 'steam',
                badges: ['OFFLINE'],
                category: "cod-games"
            },
            "cod1_offline": {
                id: "cod1_offline",
                title: "Call of Duty (Original)",
                price: 70,
                usd_price: 1.67,
                image: "./images/cod_1.png",
                shortDescription: "اللعبة التي بدأت كل شيء.",
                fullDescription: "عش التجربة السينمائية المكثفة للحرب العالمية الثانية من خلال عيون جنود عاديين يقاتلون معًا في فرقة واحدة.",
                platform: 'steam',
                badges: ['OFFLINE'],
                category: "cod-games"
            },
            // =================== ALL COD OFFLINE GAMES END ===================,
            // =================== ALL COD OFFLINE GAMES END ===================
            "splitfiction_rent": {
                id: "splitfiction_rent",
                title: "Split Fiction",
                image: "./images/split.png",
                shortDescription: "أفضل لعبة تعاونية.",
                fullDescription: "احصل على حساب ستيم بإيجار للعبة Split Fiction. الخيار الأفضل لتجربة اللعبة بالكامل دون الحاجة للشراء الدائم.",
                platform: 'steam',
                isRentable: true,
                options: {
                    "two_weeks": { title: "أسبوعين", price: 99 },
                    "one_month": { title: "شهر", price: 140 },
                    "two_months": { title: "شهرين", price: 190 }
                }
            },
            "gta": {
                id: "gta",
                title: "حساب GTA 5 Steam",
                price: 750,
                image: "./images/GTA5Banner.png",
                shortDescription: "ابدأ رحلتك في لوس سانتوس",
                fullDescription: "انغمس في عالم لوس سانتوس المترامي الأطراف! أفضل تجربة عالمها مفتوح تشمل طور القصة والاونلاين، هذا الحساب يمنحك الصلاحيات كاملة .",
                platform: 'steam',
                specs: `<h3>متطلبات تشغيل Grand Theft Auto V</h3>
                                                                                                                                                                                                                                                                            <ul>
                                                                                                                                                                                                                                                                                <li><strong>نظام التشغيل:</strong> Windows 8.1 64 Bit, Windows 8 64 Bit, Windows 7 64 Bit Service Pack 1</li>
                                                                                                                                                                                                                                                                                <li><strong>المعالج:</strong> Intel Core 2 Quad CPU Q6600 @ 2.40GHz (4 CPUs) / AMD Phenom 9850 Quad-Core Processor (4 CPUs) @ 2.5GHz</li>
                                                                                                                                                                                                                                                                                <li><strong>الذاكرة العشوائية (RAM):</strong> 4 GB</li>
                                                                                                                                                                                                                                                                                <li><strong>بطاقة الرسومات (GPU):</strong> NVIDIA 9800 GT 1GB / AMD HD 4870 1GB (DX 10, 10.1, 11)</li>
                                                                                                                                                                                                                                                                                <li><strong>مساحة تخزين:</strong> 72 GB</li>
                                                                                                                                                                                                                                                                            </ul>
                                                                                                                                                                                                                                                                            <hr>
                                                                                                                                                                                                                                                                            <ul>
                                                                                                                                                                                                                                                                                <li><strong>نظام التشغيل:</strong> Windows 10 64 Bit</li>
                                                                                                                                                                                                                                                                                <li><strong>المعالج:</strong> Intel Core i5 3470 @ 3.2GHz (4 CPUs) / AMD X8 FX-8350 @ 4GHz (8 CPUs)</li>
                                                                                                                                                                                                                                                                                <li><strong>الذاكرة العشوائية (RAM):</strong> 8 GB</li>
                                                                                                                                                                                                                                                                                <li><strong>بطاقة الرسومات (GPU):</strong> NVIDIA GTX 660 2GB / AMD HD 7870 2GB</li>
                                                                                                                                                                                                                                                                                <li><strong>مساحة تخزين:</strong> 72 GB</li>
                                                                                                                                                                                                                                                                            </ul>`
            },
            "battlefield_6": {
                id: "battlefield_6",
                title: "حساب Battlefield 6",
                price: 1900,
                usd_price: 45.24,
                image: "./images/bf6.png", // ❗ تحتاج لإضافة صورة بهذا الاسم
                shortDescription: "ستيم - فل اكسس", // ✅ تم تعديل الوصف
                fullDescription: "احصل على حسابك الخاص للعبة Battlefield 6 (نسخة الـ PC). الحساب لك بالكامل بجميع بياناته.", // ✅ تم تعديل الوصف
                platform: 'steam',
                /* ❌ تم حذف 'badges' و 'requiresAccountDetails' لأنها حسابات عادية */
                specs: `<p>متطلبات التشغيل الرسمية سيتم تحديدها عند إطلاق اللعبة.</p>`
            },
            "fc_26": {
                id: "fc_26",
                title: "حساب EA Sports FC 26",
                price: 1900,
                usd_price: 45.24,
                image: "./images/fc26.png", // ❗ تحتاج لإضافة صورة بهذا الاسم
                shortDescription: "ستيم - فل اكسس", // ✅ تم تعديل الوصف
                fullDescription: "احصل على حسابك الخاص للعبة FC 26 (نسخة الـ PC). الحساب لك بالكامل بجميع بياناته لتستمتع بـ Ultimate Team و Career Mode.", // ✅ تم تعديل الوصف
                platform: 'steam',
                /* ❌ تم حذف 'badges' و 'requiresAccountDetails' */
                specs: `<p>متطلبات التشغيل الرسمية سيتم تحديدها عند إطلاق اللعبة.</p>`
            },
            " ": {
                id: "minecraft",
                title: "حساب Minecraft",
                price: 340,
                image: "./images/minecraft.png",
                shortDescription: "ابدأ رحلتك الماينكرافتة",
                fullDescription: "ابدأ رحلتك الماين كرافتية! ابن بيتك، استكشف كهوفاً غامضة، وحارب الوحوش في الليل. عش تجربة البقاء على قيد الحياة بمفردك أو التعاون مع أصدقائك، هذا الحساب الرسمي من يمنحك صلاحيات كاملة لتشكيل عالمك كما تتخيل. المغامرة تنتظرك في كل زاوية!",
                platform: 'microsoft',
                stock: 3,
                specs: `<h3>متطلبات تشغيل Minecraft: Java Edition</h3>
                                                                                                                                                                                                                                                                            <ul>
                                                                                                                                                                                                                                                                                <li><strong>نظام التشغيل:</strong> Windows 7 والإصدارات الأحدث</li>
                                                                                                                                                                                                                                                                                <li><strong>المعالج:</strong> Intel Core i3-3210 3.2 GHz / AMD A8-7600 APU 3.1 GHz أو ما يعادله</li>
                                                                                                                                                                                                                                                                                <li><strong>الذاكرة العشوائية (RAM):</strong> 4 GB</li>
                                                                                                                                                                                                                                                                                <li><strong>بطاقة الرسومات (GPU):</strong> Intel HD Graphics 4000 (Ivy Bridge) or AMD Radeon R5 series (Kaveri line) with OpenGL 4.4</li>
                                                                                                                                                                                                                                                                                <li><strong>مساحة تخزين:</strong> 1 GB</li>
                                                                                                                                                                                                                                                                            </ul>
                                                                                                                                                                                                                                                                            <hr>
                                                                                                                                                                                                                                                                            <ul>
                                                                                                                                                                                                                                                                                <li><strong>نظام التشغيل:</strong> Windows 10 64-bit</li>
                                                                                                                                                                                                                                                                                <li><strong>المعالج:</strong> Intel Core i5-4690 3.5GHz / AMD A10-7800 APU 3.5 GHz أو ما يعادله</li>
                                                                                                                                                                                                                                                                                <li><strong>الذاكرة العشوائية (RAM):</strong> 8 GB</li>
                                                                                                                                                                                                                                                                                <li><strong>بطاقة الرسومات (GPU):</strong> GeForce 700 Series or AMD Radeon Rx 200 Series (excluding integrated chipsets) with OpenGL 4.5</li>
                                                                                                                                                                                                                                                                                <li><strong>مساحة تخزين:</strong> 4 GB (SSD موصى به)</li>
                                                                                                                                                                                                                                                                            </ul>`
            },
            "residentevil_offline": {
                id: "residentevil_offline",
                title: "Resident Evil 8: Village",
                price: 150,
                image: "./images/residentevil8.png",
                shortDescription: "قصر لا مفر منه",
                fullDescription: "جرب قصة رعب البقاء على قيد الحياة النهائية في Resident Evil Village، الجزء الثامن من سلسلة Resident Evil. مع رسومات مفصلة للغاية، وأكشن عنيف من منظور الشخص الأول، وقصة بارعة، لم يكن الرعب أكثر واقعية من قبل.",
                platform: 'steam',
                badges: ['OFFLINE'],
                specs: `<h3>متطلبات تشغيل Resident Evil Village</h3>
                                                                                                                                                                                                                                                                            <ul>
                                                                                                                                                                                                                                                                                <li><strong>نظام التشغيل:</strong> Windows 10 (64-bit)</li>
                                                                                                                                                                                                                                                                                <li><strong>المعالج:</strong> Intel Core i5-7500 / AMD Ryzen 3 1200</li>
                                                                                                                                                                                                                                                                                <li><strong>الذاكرة العشوائية (RAM):</strong> 8 GB</li>
                                                                                                                                                                                                                                                                                <li><strong>بطاقة الرسومات (GPU):</strong> NVIDIA GeForce GTX 1050 Ti with 4GB VRAM / AMD Radeon RX 560 with 4GB VRAM</li>
                                                                                                                                                                                                                                                                                <li><strong>مساحة تخزين:</strong> 25 GB</li>
                                                                                                                                                                                                                                                                            </ul>`
            },
            "splitfiction": {
                id: "splitfiction",
                title: "حساب Split Fiction",
                price: 99,
                image: "./images/split.png",
                shortDescription: "أفضل تجربة CO-OP",
                fullDescription: "مستعد لتجربة قصة فريدة من نوعها؟ Split Fiction تقدم لك مغامرة سينمائية لا مثيل لها. استأجر اللعبة الآن لمدة أسبوعين، وهي فترة مثالية لإنهاء القصة المذهلة والاستمتاع بكل لحظاتها المشوقة دون الحاجة لشراء اللعبة كاملة. فرصة لا تعوض لتجربة واحدة من أروع الألعاب!",
                platform: 'steam',
                specs: `<p>لا توجد مواصفات رسمية لهذه اللعبة بعد.</p>`
            },
            // =================== COD OFFLINE GAMES START ===================
            "mw1_offline": {
                id: "mw1_offline",
                title: "Call of Duty: Modern Warfare (2019)",
                price: 100,
                usd_price: 2.38,
                image: "./images/cod_mw1.png", // ❗ تأكد من إضافة صورة بهذا الاسم
                shortDescription: "القصص لا تكتب الأبطال. الأبطال يكتبون القصص.",
                fullDescription: "انغمس في قصة ملحمية تجسد حرب العصر الحديث. العب كعميل من المستوى الأول في ملحمة تؤثر على توازن القوى العالمي. هذا الحساب يتيح لك تجربة طور القصة الكامل.",
                platform: 'steam',
                badges: ['OFFLINE'],
                category: "cod-games" // <-- فئة جديدة ومهمة
            },
            "mw2_offline": {
                id: "mw2_offline",
                title: "Call of Duty: Modern Warfare II (2022)",
                price: 130,
                usd_price: 3.10,
                image: "./images/cod_mw2.png", // ❗ تأكد من إضافة صورة بهذا الاسم
                shortDescription: "فرقة المهمات 141 تعود من جديد.",
                fullDescription: "انضم إلى فرقة المهمات 141 الأسطورية في حملة عالمية الطراز. استمتع بمهام متنوعة وأسلوب لعب متطور في طور القصة المثير لهذا الجزء.",
                platform: 'steam',
                badges: ['OFFLINE'],
                category: "cod-games" // <-- فئة جديدة ومهمة
            },
            "mw3_offline": {
                id: "mw3_offline",
                title: "Call of Duty: Modern Warfare III (2023)",
                price: 150,
                usd_price: 3.57,
                image: "./images/cod_mw3.png", // ❗ تأكد من إضافة صورة بهذا الاسم
                shortDescription: "التهديد المطلق ينتظر.",
                fullDescription: "يواجه الكابتن برايس وفرقة المهمات 141 التهديد المطلق. قاتل كما لم يحدث من قبل وأوقف فلاديمير ماكاروف قبل أن يبسط سيطرته على العالم.",
                platform: 'steam',
                badges: ['OFFLINE'],
                category: "cod-games" // <-- فئة جديدة ومهمة
            },
            // =================== COD OFFLINE GAMES END ===================

            "mafia": {
                id: "mafia",
                title: "Mafia: The Old Country",
                price: 75,
                image: "./images/mafia.png",
                shortDescription: "ابنِ إمبراطوريتك الإجرامية",
                fullDescription: "عد بالزمن إلى العصر الذهبي للمافيا. في Mafia: The Old Country، كل قرار قد يكلفك حياتك. ابنِ إمبراطوريتك الإجرامية، وتسلق المراتب في عالم لا يرحم من الولاء والخيانة. هل لديك ما يلزم لتصبح الزعيم؟ عش القصة الملحمية المليئة بالدراما والأكشن الذي يحبس الأنفاس.",
                platform: 'steam',
                specs: `<p>لا توجد مواصفات رسمية لهذه اللعبة بعد.</p>`
            },
            "rust": {
                id: "rust",
                title: "Rust",
                price: 220,
                image: "./images/Rust.png",
                shortDescription: "البقاء على قيد الحياة",
                fullDescription: "الهدف الوحيد في Rust هو البقاء على قيد الحياة. تغلب على الصراعات مثل الجوع والعطش والبرد. قم ببناء نار. قم ببناء مأوى. اقتل الحيوانات من أجل اللحم. احم نفسك من اللاعبين الآخرين، واقتلهم من أجل اللحم. قم بإنشاء تحالفات مع لاعبين آخرين وشكل مدينة. افعل كل ما يتطلبه الأمر للبقاء على قيد الحياة.",
                platform: 'steam',
                specs: `<h3>متطلبات تشغيل Rust</h3>
                                                                                                                                                                                                                                                                            <ul>
                                                                                                                                                                                                                                                                                <li><strong>نظام التشغيل:</strong> Windows 8.1 64bit</li>
                                                                                                                                                                                                                                                                                <li><strong>المعالج:</strong> Intel Core i7-3770 / AMD FX-9590 أو أفضل</li>
                                                                                                                                                                                                                                                                                <li><strong>الذاكرة العشوائية (RAM):</strong> 10 GB</li>
                                                                                                                                                                                                                                                                                <li><strong>بطاقة الرسومات (GPU):</strong> GTX 670 2GB / AMD R9 280 أو أفضل</li>
                                                                                                                                                                                                                                                                                <li><strong>مساحة تخزين:</strong> 25 GB (SSD موصى به)</li>
                                                                                                                                                                                                                                                                            </ul>
                                                                                                                                                                                                                                                                            <hr>
                                                                                                                                                                                                                                                                            <ul>
                                                                                                                                                                                                                                                                                <li><strong>نظام التشغيل:</strong> Windows 11 64bit</li>
                                                                                                                                                                                                                                                                                <li><strong>المعالج:</strong> Intel Core i7-4790K / AMD Ryzen 5 1600 أو أفضل</li>
                                                                                                                                                                                                                                                                                <li><strong>الذاكرة العشوائية (RAM):</strong> 16 GB</li>
                                                                                                                                                                                                                                                                                <li><strong>بطاقة الرسومات (GPU):</strong> GTX 980 / AMD R9 Fury أو أفضل</li>
                                                                                                                                                                                                                                                                                <li><strong>مساحة تخزين:</strong> 25 GB (SSD موصى به)</li>
                                                                                                                                                                                                                                                                            </ul>`
            },
            "wallpaperEngine": {
                id: "wallpaperEngine",
                title: "Wallpaper Engine",
                price: 90,
                image: "./images/we.png",
                shortDescription: "أفضل برنامج خلفيات للديسكتوب",
                fullDescription: "حوّل سطح مكتبك إلى تحفة فنية متحركة. استخدم خلفيات فيديو، أو تطبيقات تفاعلية، أو حتى مواقع ويب كخلفية لك. يدعم Wallpaper Engine جميع أنواع الشاشات ويوفر أداءً ممتازًا.",
                platform: 'steam',
                specs: `<h3>متطلبات تشغيل Wallpaper Engine</h3>
                                                                                                                                                                                                                                                                            <ul>
                                                                                                                                                                                                                                                                                <li><strong>نظام التشغيل:</strong> Windows 7 (with Aero), 8.1, 10, 11</li>
                                                                                                                                                                                                                                                                                <li><strong>المعالج:</strong> 1.66 GHz Intel i5 or equivalent</li>
                                                                                                                                                                                                                                                                                <li><strong>الذاكرة العشوائية (RAM):</strong> 1024 MB</li>
                                                                                                                                                                                                                                                                                <li><strong>بطاقة الرسومات (GPU):</strong> HD Graphics 4000 or above</li>
                                                                                                                                                                                                                                                                                <li><strong>مساحة تخزين:</strong> 512 MB</li>
                                                                                                                                                                                                                                                                            </ul>`
            },
            "hollowknight": {
                id: "hollowknight",
                title: "Hollow Knight: Silksong",
                price: 90,
                image: "./images/hollowknight.png",
                shortDescription: "مغامرة جديدة في مملكة Hallownest",
                fullDescription: "انطلق في مغامرة جديدة مع Hornet في لعبة Hollow Knight: Silksong. استكشف مملكة جديدة، وقابل شخصيات فريدة، وحارب أعداء أقوياء في طريقك.",
                platform: 'steam',
                specs: `<p>لا توجد مواصفات رسمية لهذه اللعبة بعد.</p>`
            },
            "seaofthieves": {
                id: "seaofthieves",
                title: "حساب Sea of Thieves",
                price: 380,
                image: "./images/sot.png",
                shortDescription: "رحلة القراصنة عبر البحار",
                fullDescription: "انطلق في مغامرات بحرية، ابحث عن الكنوز المفقودة، وحارب قراصنة آخرين في عالم Sea of Thieves الواسع. استمتع بتجربة القراصنة النهائية.",
                platform: 'steam',
                specs: `<h3>متطلبات تشغيل Sea of Thieves</h3>
                                                                                                                                                                                                                                                                            <ul>
                                                                                                                                                                                                                                                                                <li><strong>نظام التشغيل:</strong> Windows 10</li>
                                                                                                                                                                                                                                                                                <li><strong>المعالج:</strong> Intel Core i5-4690 أو AMD FX-8150</li>
                                                                                                                                                                                                                                                                                <li><strong>الذاكرة العشوائية (RAM):</strong> 8 GB</li>
                                                                                                                                                                                                                                                                                <li><strong>بطاقة الرسومات (GPU):</strong> Nvidia GeForce GTX 770 أو AMD Radeon R9 380x</li>
                                                                                                                                                                                                                                                                                <li><strong>مساحة تخزين:</strong> 50 GB</li>
                                                                                                                                                                                                                                                                            </ul>`
            },
            "tlou_bundle": {
                "id": "tlou_bundle",
                "title": "باندل The Last of Us الكاملة (Part I & II)",
                "price": 200,
                "usd_price": 4.75,
                "image": "./images/tlou_bundle.png",
                "shortDescription": "القصة الكاملة لجول وإيلي في باندل واحدة.",
                "fullDescription": "عِش التجربة الكاملة التي هزت عالم الألعاب. انطلق في رحلة البقاء المؤثرة مع جول وإيلي في The Last of Us Part I، ثم أكمل القصة في عالم أكثر قسوة ووحشية مع The Last of Us Part II. هذه الحزمة تجمع بين اللعبتين لتقديم قصة متكاملة عن الحب، الفقدان، ومعني الانتقام.",
                "platform": "steam",
                "badges": ["OFFLINE", "BUNDLE"],
                "category": "offline-steam",
                "specs": "<p>متطلبات التشغيل لكل لعبة متاحة على صفحتها الخاصة على متجر Steam.</p>"
            },
            "cod_category_card": {
                id: "cod_category_card",
                title: "حسابات أجزاء لعبة Call of Duty",
                image: "./images/cod_coming_soon_bg.png", // ❗ تأكد من إضافة صورة بهذا الاسم
                shortDescription: "أفضل تجربة شوتر قصصية",
                fullDescription: "اكتشف جميع خدماتنا الحصرية للعبة Call of Duty، بما في ذلك فتح الكاموهات النادرة مثل Interstellar و Dark Matter، وتنفيذ تحدي النيوك، وخدمات أخرى مميزة لجميع أجزاء اللعبة.",
                platform: 'activision',
                category: "offline-steam", // سنضعه في هذه الفئة ليظهر مع ألعاب الأوفلاين
                actionLink: '#all-cod-games'
            },
            "rdr2": {
                id: "rdr2",
                title: "حساب Red Dead Redemption 2",
                price: 850,
                image: "./images/rdr2.png",
                shortDescription: "يا تفاصيلك يروكستار !",
                fullDescription: "انغمس في قصة آرثر مورغان وعصابة فان دير ليند في ملحمة الغرب المتوحش. استكشف عالمًا مفتوحًا ضخمًا وشارك في مغامرات لا تُنسى.",
                platform: 'steam',
                specs: `<h3>متطلبات تشغيل Red Dead Redemption 2</h3>
                                                                                                                                                                                                                                                                            <ul>
                                                                                                                                                                                                                                                                                <li><strong>نظام التشغيل:</strong> Windows 7 Service Pack 1 (6.1.7601)</li>
                                                                                                                                                                                                                                                                                <li><strong>المعالج:</strong> Intel Core i5-2500K / AMD FX-6300</li>
                                                                                                                                                                                                                                                                                <li><strong>الذاكرة العشوائية (RAM):</strong> 8 GB</li>
                                                                                                                                                                                                                                                                                <li><strong>بطاقة الرسومات (GPU):</strong> Nvidia GeForce GTX 770 2GB / AMD Radeon R9 280 3GB</li>
                                                                                                                                                                                                                                                                                <li><strong>مساحة تخزين:</strong> 150 GB</li>
                                                                                                                                                                                                                                                                            </ul>`
            },
            "eldenring": {
                id: "eldenring",
                title: "حساب Elden Ring",
                price: 650,
                image: "./images/elden.png",
                shortDescription: "اكتشف عالم الأراضي الوسطى",
                fullDescription: "استعد للغوص في عالم خيالي واسع، مليء بالغموض والمخاطر والكائنات الأسطورية. عِش تجربة فريدة حيث تمتزج الملحمة بالمأساة، وانطلق في رحلة لا تنتهي عبر أراضٍ قاسية وأسرار مظلمة. مهمتك أن تستعيد قوة إلدن رنج التي تمزقت شظاياها، لتعيد التوازن لعالم يتأرجح بين النور والظلام، وتكتب أنت نهايته بقراراتك واختياراتك.",
                platform: 'steam',
                specs: `<h3>متطلبات تشغيل Elden Ring</h3>
                                                                                                                                                                                                                                                                            <ul>
                                                                                                                                                                                                                                                                                <li><strong>نظام التشغيل:</strong> Windows 10</li>
                                                                                                                                                                                                                                                                                <li><strong>المعالج:</strong> Intel Core i5-8400 أو AMD Ryzen 3 3300X</li>
                                                                                                                                                                                                                                                                                <li><strong>الذاكرة العشوائية (RAM):</strong> 12 GB</li>
                                                                                                                                                                                                                                                                                <li><strong>بطاقة الرسومات (GPU):</strong> Nvidia GeForce GTX 1060 3GB أو AMD Radeon RX 580 4GB</li>
                                                                                                                                                                                                                                                                                <li><strong>مساحة تخزين:</strong> 60 GB</li>
                                                                                                                                                                                                                                                                            </ul>`

            },
            "residentevil_offline": {
                id: "residentevil_offline",
                title: "Resident Evil 8: Village",
                price: 50,
                image: "./images/residentevil8.png",
                shortDescription: "لا مهرب من القصر",
                fullDescription: "جرب قصة رعب البقاء على قيد الحياة النهائية في Resident Evil Village، الجزء الثامن من سلسلة Resident Evil. مع رسومات مفصلة للغاية، وأكشن عنيف من منظور الشخص الأول، وقصة بارعة، لم يكن الرعب أكثر واقعية من قبل.",
                platform: 'steam',
                badges: ['OFFLINE'],
                specs: `<h3>متطلبات تشغيل Resident Evil Village</h3>
                                                                                                                                                                                                                                                                            <ul>
                                                                                                                                                                                                                                                                                <li><strong>نظام التشغيل:</strong> Windows 10 (64-bit)</li>
                                                                                                                                                                                                                                                                                <li><strong>المعالج:</strong> Intel Core i5-7500 / AMD Ryzen 3 1200</li>
                                                                                                                                                                                                                                                                                <li><strong>الذاكرة العشوائية (RAM):</strong> 8 GB</li>
                                                                                                                                                                                                                                                                                <li><strong>بطاقة الرسومات (GPU):</strong> NVIDIA GeForce GTX 1050 Ti with 4GB VRAM / AMD Radeon RX 560 with 4GB VRAM</li>
                                                                                                                                                                                                                                                                                <li><strong>مساحة تخزين:</strong> 25 GB</li>
                                                                                                                                                                                                                                                                            </ul>`
            },
            "black_myth_wukong_offline": {
                id: "black_myth_wukong_offline",
                title: "Black Myth: Wukong",
                price: 150, // يمكنك تعديل السعر
                image: "./images/blackmyth.png", // تأكد من وجود الصورة في مجلد images
                shortDescription: "مغامرة أسطورية في عالم صيني قديم.",
                fullDescription: "انطلق في مغامرة ملحمية مستوحاة من الأساطير الصينية. العب دور المحارب الأسطوري وواجه أعداءً أقوياء في قصة آسرة.",
                platform: 'steam',
                badges: ['OFFLINE'],
                specs: `<p>متطلبات تشغيل اللعبة متاحة على صفحة اللعبة على Steam.</p>`
            },
            "ac_shadows_offline": {
                id: "ac_shadows_offline",
                title: "Assassin's Creed Shadows",
                price: 130, // يمكنك تعديل السعر
                image: "./images/acs.png", // تأكد من وجود الصورة في مجلد images
                shortDescription: "أساسنز كريد في اليابان الإقطاعية.",
                fullDescription: "اكتشف قصة جديدة ومثيرة في سلسلة Assassin's Creed. استكشف عالم اليابان الإقطاعية والعب بشخصيتين مختلفتين، النينجا والساموراي، في رحلة مليئة بالخيانة والانتقام.",
                platform: 'steam',
                badges: ['OFFLINE'],
                specs: `<p>متطلبات تشغيل اللعبة متاحة على صفحة اللعبة على Steam.</p>`
            },
            "mafia": {
                id: "mafia",
                title: " حساب Mafia: The Old Country",
                price: 50,
                image: "./images/mafia.png",
                shortDescription: "ابنِ إمبراطوريتك الإجرامية",
                fullDescription: "عد بالزمن إلى العصر الذهبي للمافيا. في Mafia: The Old Country، كل قرار قد يكلفك حياتك. ابنِ إمبراطوريتك الإجرامية، وتسلق المراتب في عالم لا يرحم من الولاء والخيانة. هل لديك ما يلزم لتصبح الزعيم؟ عش القصة الملحمية المليئة بالدراما والأكشن الذي يحبس الأنفاس.",
                platform: 'steam',
                specs: `<p>لا توجد مواصفات رسمية لهذه اللعبة بعد.</p>`
            },
            "residentevil2_remake_offline": {
                id: "residentevil2_remake_offline",
                title: "Resident Evil 2 Remake",
                price: 100,
                usd_price: 2.38,
                image: "./images/re2remake.png", // ❗ تأكد من إضافة صورة بهذا الاسم
                shortDescription: "عودة كلاسيكية مرعبة",
                fullDescription: "اختبر الرعب الكلاسيكي مجددًا مع النسخة المحسنة بالكامل من Resident Evil 2. انضم إلى ليون كينيدي وكلير ريدفيلد في محاولتهما اليائسة للهروب من مدينة راكون سيتي المنكوبة.",
                platform: 'steam',
                badges: ['OFFLINE'],
                category: "offline-steam",
                specs: `<h3>متطلبات تشغيل Resident Evil 2 Remake</h3>
                                                                                                                                                                                    <ul>
                                                                                                                                                                                        <li><strong>نظام التشغيل:</strong> Windows 10 (64-bit)</li>
                                                                                                                                                                                        <li><strong>المعالج:</strong> Intel Core i5-4460 / AMD FX-6300</li>
                                                                                                                                                                                        <li><strong>الذاكرة العشوائية (RAM):</strong> 8 GB</li>
                                                                                                                                                                                        <li><strong>بطاقة الرسومات (GPU):</strong> NVIDIA GeForce GTX 960 / AMD Radeon RX 460</li>
                                                                                                                                                                                        <li><strong>مساحة تخزين:</strong> 26 GB</li>
                                                                                                                                                                                    </ul>`
            },
            "residentevil3_remake_offline": {
                id: "residentevil3_remake_offline",
                title: "Resident Evil 3 Remake",
                price: 100,
                usd_price: 2.38,
                image: "./images/re3remake.png", // ❗ تأكد من إضافة صورة بهذا الاسم
                shortDescription: "الهروب من Nemesis",
                fullDescription: "عش تجربة هروب جيل فالنتاين المروعة من مدينة راكون سيتي بينما يطاردها السلاح البيولوجي الذي لا يمكن إيقافه، Nemesis. نسخة محسنة بالكامل مع رسوميات حديثة وأسلوب لعب متطور.",
                platform: 'steam',
                badges: ['OFFLINE'],
                category: "offline-steam",
                specs: `<h3>متطلبات تشغيل Resident Evil 3 Remake</h3>
                                                                                                                                                                                    <ul>
                                                                                                                                                                                        <li><strong>نظام التشغيل:</strong> Windows 10 (64-bit)</li>
                                                                                                                                                                                        <li><strong>المعالج:</strong> Intel Core i5-4460 / AMD FX-6300</li>
                                                                                                                                                                                        <li><strong>الذاكرة العشوائية (RAM):</strong> 8 GB</li>
                                                                                                                                                                                        <li><strong>بطاقة الرسومات (GPU):</strong> NVIDIA GeForce GTX 960 / AMD Radeon RX 460</li>
                                                                                                                                                                                        <li><strong>مساحة تخزين:</strong> 45 GB</li>
                                                                                                                                                                                    </ul>`
            },
            "cuphead_offline": {
                id: "cuphead_offline",
                title: "Cuphead",
                price: 70,
                usd_price: 1.67,
                image: "./images/cuphead.png", // ❗ تأكد من إضافة صورة بهذا الاسم
                shortDescription: "مغامرة كرتونية كلاسيكية",
                fullDescription: "لعبة أكشن وإطلاق نار كلاسيكية مستوحاة من رسوم الكرتون في ثلاثينيات القرن العشرين. العب بشخصية Cuphead أو Mugman (في طور اللعب الفردي أو التعاوني المحلي) وأنت تجتاز عوالم غريبة وتهزم زعماء أصعب من الخيال.",
                platform: 'steam',
                badges: ['OFFLINE'],
                category: "offline-steam",
                specs: `<h3>متطلبات تشغيل Cuphead</h3>
                                                                                                                                                                                    <ul>
                                                                                                                                                                                        <li><strong>نظام التشغيل:</strong> Windows 7/8.1/10</li>
                                                                                                                                                                                        <li><strong>المعالج:</strong> Intel Core2 Duo E8400, 3.0GHz or AMD Athlon 64 X2 6000+, 3.0GHz or higher</li>
                                                                                                                                                                                        <li><strong>الذاكرة العشوائية (RAM):</strong> 3 GB</li>
                                                                                                                                                                                        <li><strong>بطاقة الرسومات (GPU):</strong> Geforce 9600 GT or AMD HD 3870 512MB</li>
                                                                                                                                                                                        <li><strong>مساحة تخزين:</strong> 4 GB</li>
                                                                                                                                                                                    </ul>`
            },

            "rust": {
                id: "rust",
                title: "Rust",
                price: 550,
                image: "./images/Rust.png",
                shortDescription: "الهدف هو البقاء على قيد الحياة",
                fullDescription: "الهدف الوحيد في Rust هو البقاء على قيد الحياة. تغلب على الصراعات مثل الجوع والعطش والبرد. قم ببناء نار. قم ببناء مأوى. اقتل الحيوانات من أجل اللحم. احم نفسك من اللاعبين الآخرين، واقتلهم من أجل اللحم. قم بإنشاء تحالفات مع لاعبين آخرين وشكل مدينة. افعل كل ما يتطلبه الأمر للبقاء على قيد الحياة.",
                platform: 'steam',
                specs: `<h3>متطلبات تشغيل Rust</h3>
                                                                                                                                                                                                                                                                            <ul>
                                                                                                                                                                                                                                                                                <li><strong>نظام التشغيل:</strong> Windows 8.1 64bit</li>
                                                                                                                                                                                                                                                                                <li><strong>المعالج:</strong> Intel Core i7-3770 / AMD FX-9590 أو أفضل</li>
                                                                                                                                                                                                                                                                                <li><strong>الذاكرة العشوائية (RAM):</strong> 10 GB</li>
                                                                                                                                                                                                                                                                                <li><strong>بطاقة الرسومات (GPU):</strong> GTX 670 2GB / AMD R9 280 أو أفضل</li>
                                                                                                                                                                                                                                                                                <li><strong>مساحة تخزين:</strong> 25 GB (SSD موصى به)</li>
                                                                                                                                                                                                                                                                            </ul>
                                                                                                                                                                                                                                                                            <hr>
                                                                                                                                                                                                                                                                            <ul>
                                                                                                                                                                                                                                                                                <li><strong>نظام التشغيل:</strong> Windows 11 64bit</li>
                                                                                                                                                                                                                                                                                <li><strong>المعالج:</strong> Intel Core i7-4790K / AMD Ryzen 5 1600 أو أفضل</li>
                                                                                                                                                                                                                                                                                <li><strong>الذاكرة العشوائية (RAM):</strong> 16 GB</li>
                                                                                                                                                                                                                                                                                <li><strong>بطاقة الرسومات (GPU):</strong> GTX 980 / AMD R9 Fury أو أفضل</li>
                                                                                                                                                                                                                                                                                <li><strong>مساحة تخزين:</strong> 25 GB (SSD موصى به)</li>
                                                                                                                                                                                                                                                                            </ul>`
            },
            "silent_hill_f_offline": {
                id: "silent_hill_f_offline",
                title: "Silent Hill F",
                price: 150,
                image: "./images/silenthillf.png", // تأكد من إضافة صورة بهذا الاسم
                shortDescription: "رعب نفسي في اليابان.",
                fullDescription: "تجربة رعب نفسي جديدة كليًا تدور أحداثها في اليابان خلال فترة الستينيات، تتميز بعالم جميل ومرعب في نفس الوقت.",
                platform: 'steam',
                badges: ['OFFLINE'],
                category: "offline-steam"
            },
            "cyberpunk_2077_offline": {
                id: "cyberpunk_2077_offline",
                title: "Cyberpunk 2077: Ultimate Edition",
                price: 150,
                image: "./images/cyberpunk.png",
                shortDescription: "مغامرة في عالم مستقبلي مفتوح.",
                fullDescription: "استكشف مدينة Night City الضخمة والخطيرة، وعش قصة V المليئة بالأكشن والخيارات الصعبة. النسخة الكاملة تشمل إضافة Phantom Liberty.",
                platform: 'steam',
                badges: ['OFFLINE'],
                category: "offline-steam"
            },
            "ghostoftsushima_offline": {
                id: "ghostoftsushima_offline",
                title: "Ghost of Tsushima Director's Cut",
                price: 150,
                image: "./images/ghostoftsushima.png",
                shortDescription: "كن شبح تسوشيما.",
                fullDescription: "خض تجربة الساموراي الكاملة في عالم اليابان الإقطاعية الساحر. قصة ملحمية ورسوميات تخطف الأنفاس.",
                platform: 'steam',
                badges: ['OFFLINE'],
                category: "offline-steam"
            },
            "witcher3_offline": {
                id: "witcher3_offline",
                title: "The Witcher 3: Wild Hunt - Complete",
                price: 100,
                image: "./images/witcher3.png",
                shortDescription: "من أفضل ألعاب التاريخ.",
                fullDescription: "عش مغامرة Geralt of Rivia الأسطورية في عالم ضخم وغني بالقصص والشخصيات التي لا تُنسى.",
                platform: 'steam',
                badges: ['OFFLINE'],
                category: "offline-steam"
            },
            "eldenring_offline": {
                id: "eldenring_offline",
                title: "Elden Ring",
                price: 130,
                image: "./images/elden.png",
                shortDescription: "اكتشف أسرار الأراضي الوسطى.",
                fullDescription: "لعبة العام من استوديو FromSoftware. استكشف عالمًا مفتوحًا شاسعًا، واجه زعماء أسطوريين، واكتب قصتك بنفسك.",
                platform: 'steam',
                badges: ['OFFLINE'],
                category: "offline-steam"
            },
            "silksong_offline": {
                id: "silksong_offline",
                title: " حساب Hollow Knight: Silksong",
                price: 90,
                image: "./images/hollowknight.png",
                shortDescription: "مغامرة منتظرة بشدة.",
                fullDescription: "انطلق في مغامرة جديدة مع Hornet في لعبة Hollow Knight: Silksong. استكشف مملكة جديدة، وقابل شخصيات فريدة، وحارب أعداء أقوياء في طريقك.",
                platform: 'steam',
                badges: ['OFFLINE'],
                category: "offline-steam"
            },
            "ragnarok_offline": {
                id: "ragnarok_offline",
                title: "God of War Ragnarök",
                price: 150,
                image: "./images/ragnarok.png",
                shortDescription: "نهاية أسطورة كريتوس.",
                fullDescription: "أكمل رحلة كريتوس وأتريوس الملحمية في مواجهة الآلهة الإسكندنافية. قصة سينمائية ومعارك لا مثيل لها.",
                platform: 'steam',
                badges: ['OFFLINE'],
                category: "offline-steam"
            },
            "re4_remake_offline": {
                id: "re4_remake_offline",
                title: "Resident Evil 4 (Remake)",
                price: 120,
                image: "./images/re4remake.png",
                shortDescription: "رحلة ليون و اشلي.",
                fullDescription: "ريميك لواحدة من أفضل ألعاب الرعب والبقاء على الإطلاق. رسوميات مذهلة وأسلوب لعب محدث وتجربة مرعبة لا تُنسى.",
                platform: 'steam',
                badges: ['OFFLINE'],
                category: "offline-steam"
            },
            "tlou1_offline": {
                id: "tlou1_offline",
                title: "The Last of Us Part I",
                price: 120,
                image: "./images/tlou1.png",
                shortDescription: "القصة التي غيرت كل شيء.",
                fullDescription: "عش قصة جويل وإيلي المؤثرة في عالم مدمر. نسخة محسنة بالكامل للكمبيوتر الشخصي لواحدة من أعظم الألعاب قصصيًا.",
                platform: 'steam',
                badges: ['OFFLINE'],
                category: "offline-steam"
            },
            "cyberpunk_re4_bundle": {
                "id": "cyberpunk_re4_bundle",
                "title": "باندل Cyberpunk 2077 & RE4: Separate Ways",
                "price": 220,
                "usd_price": 5.25,
                "image": "./images/cyberpunk_re4_bundle.png",
                "shortDescription": "تجربتان مستقلتان.",
                "fullDescription": "اجمع بين مستقبل **Cyberpunk 2077** المظلم والمفتوح، وقصة التجسس والأكشن المرعبة في إضافة **Resident Evil 4: Separate Ways**. هذه الحزمة تقدم تجربتين من أعلى طراز، لكل منهما أسلوبها الفريد.<br><br><strong>ملاحظة هامة:</strong> إضافة Separate Ways تشمل Resident Evil 4 Remake.",
                "platform": "steam",
                "badges": ["OFFLINE", "BUNDLE"],
                "category": "offline-steam",
                "specs": "<p>متطلبات التشغيل لكل لعبة متاحة على صفحتها الخاصة على متجر Steam.</p>"
            },
            "gow_got_bundle": {
                "id": "gow_got_bundle",
                "title": "باندل البلايستيشن فان بوي Gow Ragnarök & G.O.T",
                "price": 270,
                "usd_price": 6.50,
                "image": "./images/gow_got_bundle.png",
                "shortDescription": "أقوى حصريات بلايستيشن على الـ PC.",
                "fullDescription": "خض تجربتين من أروع ما قدمته PlayStation في باندل واحدة! انطلق في رحلة كريتوس وأتريوس الملحمية عبر العوالم الإسكندنافية في **God of War Ragnarök**، ثم تحوّل إلى شبح الساموراي لتدافع عن وطنك في عالم **Ghost of Tsushima** الساحر. قصص سينمائية، أسلوب قتال متقن، وعوالم تخطف الأنفاس.",
                "platform": "steam",
                "badges": ["OFFLINE", "BUNDLE"],
                "category": "offline-steam",
                "specs": "<p>متطلبات التشغيل لكل لعبة متاحة على صفحتها الخاصة على متجر Steam.</p>"
            },

            "wallpaperEngine": {
                id: "wallpaperEngine",
                title: "Wallpaper Engine",
                price: 90,
                image: "./images/we.png",
                shortDescription: "أفضل برنامج خلفيات للديسكتوب",
                fullDescription: "حوّل سطح مكتبك إلى تحفة فنية متحركة. استخدم خلفيات فيديو، أو تطبيقات تفاعلية، أو حتى مواقع ويب كخلفية لك. يدعم Wallpaper Engine جميع أنواع الشاشات ويوفر أداءً ممتازًا.",
                platform: 'steam',
                specs: `<h3>متطلبات تشغيل Wallpaper Engine</h3>
                                                                                                                                                                                                                                                                            <ul>
                                                                                                                                                                                                                                                                                <li><strong>نظام التشغيل:</strong> Windows 7 (with Aero), 8.1, 10, 11</li>
                                                                                                                                                                                                                                                                                <li><strong>المعالج:</strong> 1.66 GHz Intel i5 or equivalent</li>
                                                                                                                                                                                                                                                                                <li><strong>الذاكرة العشوائية (RAM):</strong> 1024 MB</li>
                                                                                                                                                                                                                                                                                <li><strong>بطاقة الرسومات (GPU):</strong> HD Graphics 4000 or above</li>
                                                                                                                                                                                                                                                                                <li><strong>مساحة تخزين:</strong> 512 MB</li>
                                                                                                                                                                                                                                                                            </ul>`
            },
            "hollowknight": {
                id: "hollowknight",
                title: "حساب Hollow Knight: Silksong",
                price: 45,
                image: "./images/hollowknight.png",
                shortDescription: "مغامرة جديدة في مملكة Hallownest",
                fullDescription: "انطلق في مغامرة جديدة مع Hornet في لعبة Hollow Knight: Silksong. استكشف مملكة جديدة، وقابل شخصيات فريدة، وحارب أعداء أقوياء في طريقك.",
                platform: 'steam',
                specs: `<p>لا توجد مواصفات رسمية لهذه اللعبة بعد.</p>`
            },
            "seaofthieves": {
                id: "seaofthieves",
                title: "حساب لعبة Sea of Thieves",
                price: 350,
                image: "./images/sot.png",
                shortDescription: "رحلة القراصنة عبر البحار",
                fullDescription: "انطلق في مغامرات بحرية، ابحث عن الكنوز المفقودة، وحارب قراصنة آخرين في عالم Sea of Thieves الواسع. استمتع بتجربة القراصنة النهائية.",
                platform: 'steam',
                specs: `<h3>متطلبات تشغيل Sea of Thieves</h3>
                                                                                                                                                                                                                                                                            <ul>
                                                                                                                                                                                                                                                                                <li><strong>نظام التشغيل:</strong> Windows 10</li>
                                                                                                                                                                                                                                                                                <li><strong>المعالج:</strong> Intel Core i5-4690 أو AMD FX-8150</li>
                                                                                                                                                                                                                                                                                <li><strong>الذاكرة العشوائية (RAM):</strong> 8 GB</li>
                                                                                                                                                                                                                                                                                <li><strong>بطاقة الرسومات (GPU):</strong> Nvidia GeForce GTX 770 أو AMD Radeon R9 380x</li>
                                                                                                                                                                                                                                                                                <li><strong>مساحة تخزين:</strong> 50 GB</li>
                                                                                                                                                                                                                                                                            </ul>`
            },
            "rdr2": {
                id: "rdr2",
                title: "حساب Red Dead Redemption 2",
                price: 850,
                image: "./images/rdr2.png",
                shortDescription: "يا تفاصيلك يا روك ستار !",
                fullDescription: "انغمس في قصة آرثر مورغان وعصابة فان دير ليند في ملحمة الغرب المتوحش. استكشف عالمًا مفتوحًا ضخمًا وشارك في مغامرات لا تُنسى.",
                platform: 'steam',
                specs: `<h3>متطلبات تشغيل Red Dead Redemption 2</h3>
                                                                                                                                                                                                                                                                            <ul>
                                                                                                                                                                                                                                                                                <li><strong>نظام التشغيل:</strong> Windows 7 Service Pack 1 (6.1.7601)</li>
                                                                                                                                                                                                                                                                                <li><strong>المعالج:</strong> Intel Core i5-2500K / AMD FX-6300</li>
                                                                                                                                                                                                                                                                                <li><strong>الذاكرة العشوائية (RAM):</strong> 8 GB</li>
                                                                                                                                                                                                                                                                                <li><strong>بطاقة الرسومات (GPU):</strong> Nvidia GeForce GTX 770 2GB / AMD Radeon R9 280 3GB</li>
                                                                                                                                                                                                                                                                                <li><strong>مساحة تخزين:</strong> 150 GB</li>
                                                                                                                                                                                                                                                                            </ul>`
            },
            "eldenring": {
                id: "eldenring",
                title: "حساب Elden Ring",
                price: 650,
                image: "./images/elden.png",
                shortDescription: "اكتشف عالم الدن الشاسع",
                fullDescription: "استعد للغوص في عالم خيالي واسع، مليء بالغموض والمخاطر والكائنات الأسطورية. ع، وانطلق في رحلة لا تنتهي عبر أراضٍ قاسية وأسرار مظلمة. مهمتك أن تستعيد قوة إلدن رنج، لتعيد التوازن عالم بين النور والظلام، وتكتب أنت نهايته بقراراتك واختياراتك.",
                platform: 'steam',
                specs: `<h3>متطلبات تشغيل Elden Ring</h3>
                                                                                                                                                                                                                                                                            <ul>
                                                                                                                                                                                                                                                                                <li><strong>نظام التشغيل:</strong> Windows 10</li>
                                                                                                                                                                                                                                                                                <li><strong>المعالج:</strong> Intel Core i5-8400 أو AMD Ryzen 3 3300X</li>
                                                                                                                                                                                                                                                                                <li><strong>الذاكرة العشوائية (RAM):</strong> 12 GB</li>
                                                                                                                                                                                                                                                                                <li><strong>بطاقة الرسومات (GPU):</strong> Nvidia GeForce GTX 1060 3GB أو AMD Radeon RX 580 4GB</li>
                                                                                                                                                                                                                                                                                <li><strong>مساحة تخزين:</strong> 60 GB</li>
                                                                                                                                                                                                                                                                            </ul>`

            },
            "re4_separate_ways_offline": {
                id: "re4_separate_ways_offline",
                title: "Resident Evil 4: Separate Ways DLC",
                price: 150,
                image: "./images/re4_separate_ways.png", // ❗ تأكد من إضافة صورة بهذا الاسم
                shortDescription: "العب بشخصية Ada Wong",
                fullDescription: "خض التجربة المفقودة من قصة Resident Evil 4 من منظور Ada Wong الغامض. هذا المحتوى الإضافي (DLC) يتطلب وجود اللعبة الأساسية (Resident Evil 4 Remake) ويعرض مهمتها السرية خلال أحداث اللعبة.",
                platform: 'steam',
                badges: ['OFFLINE', 'DLC'],
                category: "offline-steam",
                specs: `<h3>متطلبات تشغيل Resident Evil 4 Remake</h3>
                                                                                                                                                                                    <ul>
                                                                                                                                                                                        <li><strong>نظام التشغيل:</strong> Windows 10 (64-bit)</li>
                                                                                                                                                                                        <li><strong>المعالج:</strong> AMD Ryzen 3 1200 / Intel Core i5-7500</li>
                                                                                                                                                                                        <li><strong>الذاكرة العشوائية (RAM):</strong> 8 GB</li>
                                                                                                                                                                                        <li><strong>بطاقة الرسومات (GPU):</strong> AMD Radeon RX 560 with 4GB VRAM / NVIDIA GeForce GTX 1050 Ti with 4GB VRAM</li>
                                                                                                                                                                                        <li><strong>مساحة تخزين:</strong> 60 GB</li>
                                                                                                                                                                                    </ul>`
            },
            "genshin_charging_card": {
                id: "genshin_charging_card",
                title: "شحن Genshin Impact",
                image: "./images/genshin.png",
                shortDescription: "اشحن كريستالات جينسيس",
                platform: "hoyoverse",
                actionLink: "#genshinImpact"
            },
            "genshin_60": {
                id: "genshin_60",
                title: "60 كريستالة جينسيس",
                price: 35,
                image: "./images/genshinimpact.png",
                shortDescription: "اشحن 60 كريستالة",
                platform: "hoyoverse"
            },
            "genshin_300": {
                id: "genshin_300",
                title: "300 كريستالة جينسيس",
                price: 180,
                image: "./images/genshinimpact.png",
                shortDescription: "اشحن 300 كريستالة",
                platform: "hoyoverse"
            },
            "genshin_980": {
                id: "genshin_980",
                title: "980 كريستالة جينسيس",
                price: 550,
                image: "./images/genshinimpact.png",
                shortDescription: "اشحن 980 كريستالة",
                platform: "hoyoverse"
            },
            "rocketleague_500": {
                id: "rocketleague_500",
                title: "500 كريدت Rocket League",
                price: 300,
                image: "./images/rlc.png",
                shortDescription: "شحن 500 كريدت",
                fullDescription: "احصل على 500 كريدت للعبة Rocket League لتتمكن من شراء عناصر تجميلية أو تفعيل Battle Pass.",
                platform: 'epic',
                requiresAccountDetails: true
            },
            "rocketleague_1100": {
                id: "rocketleague_1100",
                title: "1100 كريدت Rocket League",
                price: 660,
                image: "./images/rlc.png",
                shortDescription: "شحن 1100 كريدت",
                fullDescription: "شحن 1100 كريدت للعبة Rocket League لتستمتع بأفضل عناصر اللعبة.",
                platform: 'epic',
                requiresAccountDetails: true
            },
            "rocketleague_3000": {
                id: "rocketleague_3000",
                title: "3000 كريدت Rocket League",
                price: 1450,
                image: "./images/rlc.png",
                shortDescription: "شحن 3000 كريدت",
                fullDescription: "أكبر باقة من كريدت Rocket League لتخصيص كل ما في حسابك.",
                platform: 'epic',
                requiresAccountDetails: true
            },

            "chatgpt_plus": {
                id: "chatgpt_plus",
                title: "ChatGPT Plus",
                price: 450, // السعر المبدئي لمدة شهر
                usd_price: 10.71,
                image: "./images/chatgpt.png", // تأكد من إضافة صورة باسم chatgpt.png
                shortDescription: "GPT 5",
                fullDescription: "احصل على وصول حصري لأحدث نماذج الذكاء الاصطناعي من OpenAI. يوفر اشتراك ChatGPT Plus استجابات أسرع، وصولاً مبكرًا للميزات الجديدة، وقدرات متقدمة مثل تحليل البيانات وتصفح الويب.",
                options: {
                    "1_month": { title: "شهر", price: 190, usd_price: 4.71 }
                },
                category: "software_subscription" // <-- تصنيف جديد
            },
            "spotify_premium": {
                id: "spotify_premium",
                title: "Spotify Premium",
                price: 59, // <-- السعر الجديد
                usd_price: 1.40, // (59 / 42)
                image: "./images/spotify_premium.png",
                shortDescription: "استمع بلا حدود",
                // <-- الوصف الجديد
                fullDescription: "اسمع الاغاني من غير انقطاع. هنبعتلك (رابط انفايت) للبرميم على حسابك الشخصي. استمتع بملايين الأغاني والبودكاست بدون إعلانات، مع إمكانية التنزيل والاستماع في وضع الاوفلاين.",
                category: "software_subscription",
                options: {
                    // <-- الخيارات الجديدة
                    "1_month": { title: "شهر واحد", price: 59, usd_price: 1.40 },
                    "2_months": { title: "شهرين", price: 115, usd_price: 2.74 },
                    "3_months": { title: "3 شهور", price: 150, usd_price: 3.57 }
                }
            },

            "youtube_premium": {
                id: "youtube_premium",
                title: "YouTube Premium",
                price: 59, // <-- السعر الجديد
                usd_price: 1.40, // (59 / 42)
                image: "./images/youtube_premium.png",
                shortDescription: "شاهد بلا إعلانات",
                // <-- الوصف الجديد
                fullDescription: "استمتع بمشاهدة مقاطع YouTube بدون إعلانات، مع إمكانية التشغيل في الخلفية وتنزيل المقاطع. يشمل الاشتراك وصولاً إلى YouTube Music Premium. (مطلوب إيميل الجيميل الخاص بك فقط لإضافتك للعائلة).",
                category: "tv_subscription",
                requiresGmail: true, // <-- ✅✅ إضافة الخاصية الجديدة
                options: {
                    // <-- الخيارات الجديدة
                    "1_month": { title: "شهر واحد", price: 59, usd_price: 1.40 },
                    "2_months": { title: "شهرين", price: 115, usd_price: 2.74 },
                    "3_months": { title: "3 شهور", price: 150, usd_price: 3.57 }
                }
            },
            "capcut_pro": {
                id: "capcut_pro",
                title: "CapCut Pro",
                price: 250, // السعر المبدئي لمدة شهر
                usd_price: 5.95,
                image: "./images/capcut.png", // تأكد من إضافة صورة باسم capcut.png
                shortDescription: "مستوى احترافي",
                fullDescription: "أطلق العنان لإبداعك مع CapCut Pro. استمتع بميزات حصرية مثل إزالة خلفية الفيديو، التأثيرات المتقدمة، القوالب الاحترافية، والتصدير بجودة عالية بدون علامة مائية.",
                options: {
                    "1_month": {
                        title: "شهر", price:
                            225, usd_price: 5.95
                    }
                },
                category: "software_subscription" // <-- تصنيف جديد
            },

            "valorant_coaching_session": {
                id: "valorant_coaching_session",
                title: "فالورانت كوتشينج | 1 جيم",
                price: 300,
                image: "./images/reyna.png",
                shortDescription: "تحليل كامل لأدائك ونصائح مخصصة.",
                fullDescription: "احجز جلسة تدريب خاصة مع أحد أفضل المدربين لدينا. ستحصل على تحليل كامل لأدائك ونصائح مخصصة لتحسين تصويبك، اتخاذ قراراتك، واستراتيجيات اللعبCoaching in Valorant: Rank up faster, improve aim, positioning, and game sense, learn agent-specific tips and strategies, get personalized feedback, and watch recorded videos with explanations. Sessions tailored to your current skill level and goals.",
                platform: 'riot',
                requiresAccountDetails: true
            },
            "valorant_boosting_service": {
                id: "valorant_boosting_service",
                title: "خدمة رفع رتبة فالورانت",
                price: 500, // سعر افتراضي
                image: "./images/valorant-boosting.png", // صورة لخدمة البوستنج
                shortDescription: "ارفع رانكك بسرعة وأمان.",
                fullDescription: "احصل على رتبة أعلى مع لاعبينا المحترفين. نضمن لك السرية والأمان والسرعة في التنفيذ.",
                platform: 'riot',
                requiresAccountDetails: true
            },
            "fortnite_coaching_session": {
                id: "fortnite_coaching_session",
                title: "جلسة تدريب فورتنايت فردية",
                price: 250,
                image: "./images/fortnite-coaching.png", // صورة لخدمة التدريب
                shortDescription: "أفضل مدربين لرفع مستواك.",
                fullDescription: "تعلم أسرار البناء والتصويب والاستراتيجيات المتقدمة من مدربين خبراء.",
                platform: 'epic',
                requiresAccountDetails: true
            },
            "fortnite_boosting_service": {
                id: "fortnite_boosting_service",
                title: "خدمة رفع رتبة فورتنايت",
                price: 400, // سعر افتراضي
                image: "./images/fortnite-boosting.png", // صورة لخدمة البوستنج
                shortDescription: "انتصارات متتالية ومكافآت حصرية.",
                fullDescription: "نساعدك على تحقيق الانتصارات التي تريدها دون عناء. نضمن لك السرية والسرعة في رفع رانكك.",
                platform: 'epic',
                requiresAccountDetails: true
            },
            "discord_decoration_custom": {
                id: "discord_decoration_custom",
                title: "Discord Profile Decoration",
                image: "./images/discord-decorations.png",
                shortDescription: "زين بروفايلك في ديسكورد",
                fullDescription: "احصل على مؤثرات وتزيينات لبروفايلك في الديسكورد. سيتم شحن المنتج مباشرة على حسابك بالقيمة التي تختارها.",
                platform: 'discord',
                requiresDiscordUsername: true, // خاصية جديدة لتفعيل طلب اليوزر عند الشراء
                category: "discord-decorations",
                isCustomPrice: true // خاصية جديدة لتمييز هذا المنتج
            },
            // ✅ --- بداية منتجات Lattices الجديدة ---
            "lattices_100": {
                id: "lattices_100",
                title: "100 Lattices",
                price: 70,
                image: "./images/100lattices_icon.png",
                shortDescription: "شحن 100 Lattices",
                fullDescription: "ابدأ رحلتك في عالم Marvel Rivals! اشحن حسابك بـ **100 Lattices**، العملة المميزة اللي هتساعدك في فتح شخصيات وإضافات جديدة. فرصة مثالية عشان تتعرف على اللعبة وتجهز نفسك للمعركة.",
                platform: 'steam',
                requiresMarvelId: true,
                category: "marvel-rivals"
            },
            "lattices_500": {
                id: "lattices_500",
                title: "500 Lattices",
                price: 295,
                image: "./images/500lattices_icon.png",
                shortDescription: "شحن 500 Lattices",
                fullDescription: "انطلق بقوة في Marvel Rivals مع **500 Lattices**! الباقة دي هتمنحك حرية أكبر في اختيار أبطالك المفضلين أو شراء حزم العروض الحصرية. جهّز فريق أحلامك وسيطر على ساحة المعركة.",
                platform: 'steam',
                requiresMarvelId: true,
                category: "marvel-rivals"
            },
            "lattices_1000": {
                id: "lattices_1000",
                title: "1000 Lattices",
                price: 550,
                image: "./images/1klattices_icon.png",
                shortDescription: "شحن 1000 Lattices",
                fullDescription: "باقة الأبطال الخارقين! احصل على **1000 Lattices** واستفد من قيمة أفضل. استخدمها لشراء الأزياء النادرة، أو افتح شخصيات قوية، أو عزّز مظهر فريقك بالكامل. خصّص تجربتك لتكون فريدة ومميزة.",
                platform: 'steam',
                requiresMarvelId: true,
                category: "marvel-rivals"
            },
            "lattices_2180": {
                id: "lattices_2180",
                title: "2180 Lattices",
                price: 1140,
                image: "./images/2klattices_icon.png",
                shortDescription: "الأنسب لشراء اي باندل",
                fullDescription: "أفضل قيمة مقابل المال! باقة **2180 Lattices** هتخليك تستمتع بكل ما هو جديد في اللعبة. عزز قوتك، واجمع كل العناصر التي تريدها، وكن مستعدًا لمواجهة أي تحدي. هذه الباقة مصممة للاعبين الجادين اللي عايزين يوصلوا للقمة.",
                platform: 'steam',
                requiresMarvelId: true,
                category: "marvel-rivals"
            },
            "lattices_5680": {
                id: "lattices_5680",
                title: "5680 Lattices",
                price: 2550,
                image: "./images/5klattices_icon.png",
                shortDescription: "الأكثر روعة",
                fullDescription: "قوة غير محدودة! مع **5680 Lattices**، تقدر تفتح كل اللي في اللعبة وتجهز نفسك لكل المواسم اللي جاية. باقة ممتازة لأي لاعب عايز يتفوق على منافسيه ويكون دايماً في المقدمة.",
                platform: 'steam',
                requiresMarvelId: true,
                category: "marvel-rivals"
            },
            "lattices_11680": {
                id: "lattices_11680",
                title: "11680 Lattices",
                price: 5200,
                image: "./images/kmhgzelattice.png",
                shortDescription: "الباقة الأضخم 🔥",
                fullDescription: "هي دي الباقة الأضخم في Marvel Rivals! مع **11680 Lattices**، هتكون معاك كل الموارد اللازمة للعبة. افتح كل الشخصيات الجديدة، واشتري كل السكنات النادرة، وعيش تجربة الأبطال الخارقين الكاملة. دي الباقة المثالية لإنك تحول حسابك لأسطورة حقيقية.",
                platform: 'steam',
                requiresMarvelId: true,
                category: "marvel-rivals"
            },


            "netflix": {
                id: "netflix",
                title: "نتفليكس",
                price: 50,
                image: "./images/netflix.png",
                shortDescription: "شاهد آلاف الأفلام والمسلسلات",
                category: "tv_subscription",
                fullDescription: "نوفر لك حساب مفعل بالمدة التي تختارها. استمتع بوصول غير محدود إلى مكتبة ضخمة من الأفلام والمسلسلات والبرامج الوثائقية الأصلية من Netflix. شاهد على أي جهاز، في أي وقت، وبأعلى جودة ممكنة.",
                options: {
                    "1_month": { title: "شهر واحد", price: 50 },
                    "2_months": { title: "شهرين", price: 90 },
                    "3_months": { title: "3 شهور", price: 135 },
                    "6_months": { title: "6 شهور", price: 270 }
                }
            },
            "disney": {
                id: "disney",
                title: "ديزني بلس",
                price: 39,
                image: "./images/disney.png",
                shortDescription: "عالم من الترفيه لكل العائلة",
                category: "tv_subscription",
                fullDescription: "نوفر لك حساب مفعل بالمدة التي تختارها. استمتع بعالم من الترفيه من Disney, Pixar, Marvel, Star Wars, و National Geographic. احصل على أحدث الإصدارات، والكلاسيكيات الخالدة، والأعمال الأصلية الحصرية، كل ذلك في مكان واحد.",
                options: {
                    "1_month": { title: "شهر واحد", price: 39 },
                    "2_months": { title: "شهرين", price: 75 },
                    "3_months": { title: "3 شهور", price: 105 }
                }
            },
            "crunchyroll": {
                id: "crunchyroll",
                title: "كرانشي رول",
                price: 50,
                image: "./images/crunshyyyy.png",
                shortDescription: "أكبر موقع انمي في العالم",
                category: "tv_subscription",
                fullDescription: "نوفر لك حساب مفعل بالمدة التي تختارها. استمتع بأكبر مكتبة للأنمي في العالم. شاهد أحدث الحلقات بعد ساعة من بثها في اليابان. استمتع بآلاف الحلقات من مسلسلاتك المفضلة بدون إعلانات وبجودة عالية.",
                options: {
                    "1_month": { title: "شهر واحد", price: 50 },
                    "2_months": { title: "شهرين", price: 90 },
                    "3_months": { title: "3 شهور", price: 110 }
                }
            },
            "valorant475": {
                id: "valorant475",
                title: "475 Valorant Points",
                price: 270,
                image: "./images/reyna - Copy.png",
                shortDescription: "شحن 475 نقطة فالورانت",
                fullDescription: "اشحن حسابك في لعبة فالورانت بـ 475 نقطة. استخدمها لشراء سكنات الأسلحة، Battle Pass، أو أي عناصر تجميلية أخرى داخل اللعبة.",
                platform: 'riot',
                specs: `<h3>متطلبات تشغيل VALORANT</h3>
                                                                                                                                                                                                                                                                            <ul>
                                                                                                                                                                                                                                                                                <li><strong>نظام التشغيل:</strong> Windows 7/8/10 64-Bit</li>
                                                                                                                                                                                                                                                                                <li><strong>المعالج:</strong> Intel Core 2 Duo E8400 / AMD Athlon 200GE</li>
                                                                                                                                                                                                                                                                                <li><strong>الذاكرة العشوائية (RAM):</strong> 4 GB</li>
                                                                                                                                                                                                                                                                                <li><strong>بطاقة الرسومات (GPU):</strong> Intel HD 4000 / Radeon R5 200</li>
                                                                                                                                                                                                                                                                                <li><strong>مساحة تخزين:</strong> 1 GB</li>
                                                                                                                                                                                                                                                                            </ul>`
            },
            "valorant1000": {
                id: "valorant1000",
                title: "1000 Valorant Points",
                price: 510,
                image: "./images/reyna - Copy.png",
                shortDescription: "شحن 1000 نقطة فالورانت",
                fullDescription: "عزز تجربتك في فالورانت بـ 1000 نقطة. هذه الباقة تمنحك المرونة الكافية للحصول على العناصر التي ترغب بها داخل اللعبة.",
                platform: 'riot',
                specs: `<h3>متطلبات تشغيل VALORANT</h3>
                                                                                                                                                                                                                                                                            <ul>
                                                                                                                                                                                                                                                                                <li><strong>نظام التشغيل:</strong> Windows 7/8/10 64-Bit</li>
                                                                                                                                                                                                                                                                                <li><strong>المعالج:</strong> Intel Core 2 Duo E8400 / AMD Athlon 200GE</li>
                                                                                                                                                                                                                                                                                <li><strong>الذاكرة العشوائية (RAM):</strong> 4 GB</li>
                                                                                                                                                                                                                                                                                <li><strong>بطاقة الرسومات (GPU):</strong> Intel HD 4000 / Radeon R5 200</li>
                                                                                                                                                                                                                                                                                <li><strong>مساحة تخزين:</strong> 1 GB</li>
                                                                                                                                                                                                                                                                            </ul>`
            },
            "valorant2050": {
                id: "valorant2050",
                title: "2050 Valorant Points",
                price: 990,
                image: "./images/reyna - Copy.png",
                shortDescription: "شحن 2050 نقطة فالورانت",
                fullDescription: "احصل على 2050 نقطة فالورانت لتتمكن من شراء حزم السكنات المميزة أو تجهيز شخصياتك بأفضل الإضافات التجميلية.",
                platform: 'riot',
                specs: `<h3>متطلبات تشغيل VALORANT</h3>
                                                                                                                                                                                                                                                                            <ul>
                                                                                                                                                                                                                                                                                <li><strong>نظام التشغيل:</strong> Windows 7/8/10 64-Bit</li>
                                                                                                                                                                                                                                                                                <li><strong>المعالج:</strong> Intel Core 2 Duo E8400 / AMD Athlon 200GE</li>
                                                                                                                                                                                                                                                                                <li><strong>الذاكرة العشوائية (RAM):</strong> 4 GB</li>
                                                                                                                                                                                                                                                                                <li><strong>بطاقة الرسومات (GPU):</strong> Intel HD 4000 / Radeon R5 200</li>
                                                                                                                                                                                                                                                                                <li><strong>مساحة تخزين:</strong> 1 GB</li>
                                                                                                                                                                                                                                                                            </ul>`
            },
            "valorant3650": {
                id: "valorant3650",
                title: "3650 Valorant Points",
                price: 1830,
                image: "./images/reyna - Copy.png",
                shortDescription: "شحن 3650 نقطة فالورانت",
                fullDescription: "باقة كبيرة من نقاط فالورانت تتيح لك حرية واسعة في الاختيار من بين أفضل العناصر والمجموعات الحصرية داخل اللعبة.",
                platform: 'riot',
                specs: `<h3>متطلبات تشغيل VALORANT</h3>
                                                                                                                                                                                                                                                                            <ul>
                                                                                                                                                                                                                                                                                <li><strong>نظام التشغيل:</strong> Windows 7/8/10 64-Bit</li>
                                                                                                                                                                                                                                                                                <li><strong>المعالج:</strong> Intel Core 2 Duo E8400 / AMD Athlon 200GE</li>
                                                                                                                                                                                                                                                                                <li><strong>الذاكرة العشوائية (RAM):</strong> 4 GB</li>
                                                                                                                                                                                                                                                                                <li><strong>بطاقة الرسومات (GPU):</strong> Intel HD 4000 / Radeon R5 200</li>
                                                                                                                                                                                                                                                                                <li><strong>مساحة تخزين:</strong> 1 GB</li>
                                                                                                                                                                                                                                                                            </ul>`
            },
            "valorant5350": {
                id: "valorant5350",
                title: "5350 Valorant Points",
                price: 2530,
                image: "./images/reyna - Copy.png",
                shortDescription: "شحن 5350 نقطة فالورانت",
                fullDescription: "وفر أكثر مع باقة 5350 نقطة. هذه هي فرصتك للحصول على كل ما تحلم به في فالورانت من سكنات نادرة وعناصر مميزة.",
                platform: 'riot',
                specs: `<h3>متطلبات تشغيل VALORANT</h3>
                                                                                                                                                                                                                                                                            <ul>
                                                                                                                                                                                                                                                                                <li><strong>نظام التشغيل:</strong> Windows 7/8/10 64-Bit</li>
                                                                                                                                                                                                                                                                                <li><strong>المعالج:</strong> Intel Core 2 Duo E8400 / AMD Athlon 200GE</li>
                                                                                                                                                                                                                                                                                <li><strong>الذاكرة العشوائية (RAM):</strong> 4 GB</li>
                                                                                                                                                                                                                                                                                <li><strong>بطاقة الرسومات (GPU):</strong> Intel HD 4000 / Radeon R5 200</li>
                                                                                                                                                                                                                                                                                <li><strong>مساحة تخزين:</strong> 1 GB</li>
                                                                                                                                                                                                                                                                            </ul>`
            },
            "valorant11000": {
                id: "valorant11000",
                title: "11000 Valorant Points",
                price: 4990,
                image: "./images/reyna - Copy.png",
                shortDescription: "شحن 11000 نقطة فالورانت",
                fullDescription: "الباقة الأكبر والأكثر توفيراً! 11000 نقطة تضمن لك الحصول على أندر المجموعات والعناصر داخل اللعبة لتتميز عن الجميع.",
                platform: 'riot',
                specs: `<h3>متطلبات تشغيل VALORANT</h3>
                                                                                                                                                                                                                                                                            <ul>
                                                                                                                                                                                                                                                                                <li><strong>نظام التشغيل:</strong> Windows 7/8/10 64-Bit</li>
                                                                                                                                                                                                                                                                                <li><strong>المعالج:</strong> Intel Core 2 Duo E8400 / AMD Athlon 200GE</li>
                                                                                                                                                                                                                                                                                <li><strong>الذاكرة العشوائية (RAM):</strong> 4 GB</li>
                                                                                                                                                                                                                                                                                <li><strong>بطاقة الرسومات (GPU):</strong> Intel HD 4000 / Radeon R5 200</li>
                                                                                                                                                                                                                                                                                <li><strong>مساحة تخزين:</strong> 1 GB</li>
                                                                                                                                                                                                                                                                            </ul>`
            },
            "steam10k": {
                id: "steam10k",
                title: "10 آلاف Steam Points",
                price: 140,
                image: "./images/steampoints2.png",
                shortDescription: "ابدأ في تخصيص بروفايلك",
                fullDescription: "احصل على 10,000 نقطة ستيم لتزيين بروفايلك بالخلفيات والإطارات والرموز التعبيرية التي تعجبك. <br><br><strong>المنصة:</strong> <img src='./images/steam.png' class='platform-icon-description' alt='Steam Icon'> <strong>Steam</strong>",
                platform: 'steam',
                requiresSteamProfileLink: true
            },
            "steam20k": {
                id: "steam20k",
                title: "20 ألف Steam Points",
                price: 255,
                image: "./images/steampoints2.png",
                shortDescription: "لتخصيص بروفايلك بالكامل",
                fullDescription: "استخدم 20,000 نقطة لشراء خلفيات، أيقونات، وتخصيصات فريدة لتميز نفسك بين اللاعبين. <br><br><strong>المنصة:</strong> <img src='./images/steam.png' class='platform-icon-description' alt='Steam Icon'> <strong>Steam</strong>",
                platform: 'steam',
                requiresSteamProfileLink: true
            },
            "steam50k": {
                id: "steam50k",
                title: "50 ألف Steam Points",
                price: 490,
                image: "./images/steampoints2.png",
                shortDescription: "اجعل بروفايلك خارقا",
                fullDescription: "باقة 50,000 نقطة تمنحك حرية أكبر في تزيين وتخصيص حسابك على ستيم بكل ما هو مميز. <br><br><strong>المنصة:</strong> <img src='./images/steam.png' class='platform-icon-description' alt='Steam Icon'> <strong>Steam</strong>",
                platform: 'steam',
                requiresSteamProfileLink: true
            },
            "steamGift5": {
                id: "steamGift5",
                title: "بطاقة هدايا ستيم 5$",
                price: 285,
                image: "./images/steamcards.png",
                shortDescription: "اشحن حسابك بـ 5 دولارات",
                fullDescription: "اشحن محفظة ستيم الخاصة بك بـ 5 دولارات! هذه البطاقة العالمية تتيح لك شراء الألعاب، الإضافات، والعناصر من متجر ستيم بسهولة وأمان. <br><br><strong>المنصة:</strong> <img src='./images/steam.png' class='platform-icon-description' alt='Steam Icon'> <strong>Steam</strong>",
                platform: 'steam'
            },
            "steamGift10": {
                id: "steamGift10",
                title: "بطاقة هدايا ستيم 10$",
                price: 570,
                image: "./images/steamcards.png",
                shortDescription: "اشحن حسابك بـ 10 دولارات",
                fullDescription: "أضف 10 دولارات إلى رصيدك في ستيم! هدية مثالية لنفسك أو لصديق، تفتح لك عالمًا من الألعاب الرائعة على منصة ستيم. <br><br><strong>المنصة:</strong> <img src='./images/steam.png' class='platform-icon-description' alt='Steam Icon'> <strong>Steam</strong>",
                platform: 'steam'
            },
            "steamGift20": {
                id: "steamGift20",
                title: "بطاقة هدايا ستيم 20$",
                price: 1140,
                image: "./images/steamcards.png",
                shortDescription: "املأ مكتبة ألعابك الآن",
                fullDescription: "عزز مكتبة ألعابك! مع بطاقة 20 دولار، يمكنك الحصول على أحدث الألعاب أو الإضافات التي طالما رغبت بها. <br><br><strong>المنصة:</strong> <img src='./images/steam.png' class='platform-icon-description' alt='Steam Icon'> <strong>Steam</strong>",
                platform: 'steam'
            },
            "steamGift50": {
                id: "steamGift50",
                title: "بطاقة هدايا ستيم 50$",
                price: 2790,
                image: "./images/steamcards.png",
                shortDescription: "باقة فاخرة لعشاق الألعاب",
                fullDescription: "باقة سخية لعشاق الألعاب! 50 دولارًا في محفظة ستيم تمنحك القدرة على شراء عدة ألعاب ضخمة أو الاستثمار في العناصر داخل اللعبة. <br><br><strong>المنصة:</strong> <img src='./images/steam.png' class='platform-icon-description' alt='Steam Icon'> <strong>Steam</strong>",
                platform: 'steam'
            },
            "steamGift100": {
                id: "steamGift100",
                title: "بطاقة هدايا ستيم 100$",
                price: 5550,
                image: "./images/steamcards.png",
                shortDescription: "الثراء ",
                fullDescription: "الهدية المثالية لأي لاعب! بطاقة 100 دولار تضمن لك الحصول على أي لعبة تريدها، والمشاركة في التخفيضات الكبرى دون تردد. <br><br><strong>المنصة:</strong> <img src='./images/steam.png' class='platform-icon-description' alt='Steam Icon'> <strong>Steam</strong>",
                platform: 'steam'
            },
            "roblox40": {
                id: "roblox40",
                title: "40 Robux",
                price: 40,
                image: "./images/roblox.png",
                shortDescription: "شحن 40 روبوكس",
                fullDescription: "احصل على 40 روبوكس لتخصيص شخصيتك وشراء عناصر مميزة داخل عالم Roblox.",
                platform: 'roblox'
            },
            "roblox80": {
                id: "roblox80",
                title: "80 Robux",
                price: 80,
                image: "./images/roblox.png",
                shortDescription: "شحن 80 روبوكس",
                fullDescription: "ضاعف المرح مع 80 روبوكس. باقة مثالية للبدء في تجميع العناصر الرائعة.",
                platform: 'roblox'
            },
            "roblox400": {
                id: "roblox400",
                title: "400 Robux",
                price: 310,
                image: "./images/roblox.png",
                shortDescription: "شحن 400 روبوكس",
                fullDescription: "باقة رائعة تمنحك 400 روبوكس لاستكشاف المزيد من الإمكانيات وشراء أفضل الإضافات.",
                platform: 'roblox'
            },
            "roblox800": {
                id: "roblox800",
                title: "800 Robux",
                price: 599,
                image: "./images/roblox.png",
                shortDescription: "شحن 800 روبوكس",
                fullDescription: "عزز تجربتك في Roblox مع 800 روبوكس. اشترِ Game Passes أو خصص شخصيتك بأفضل الملابس.",
                platform: 'roblox'
            },
            "roblox1700": {
                id: "roblox1700",
                title: "1700 Robux",
                price: 1300,
                image: "./images/roblox.png",
                shortDescription: "شحن 1700 روبوكس",
                fullDescription: "باقة كبيرة من الروبوكس تفتح لك أبوابًا واسعة من التخصيصات والعناصر النادرة.",
                platform: 'roblox'
            },
            "roblox4700": {
                id: "roblox4700",
                title: "4700 Robux",
                price: 1300,
                image: "./images/roblox.png",
                shortDescription: "شحن 4700 روبوكس",
                fullDescription: "قيمة هائلة! احصل على 4700 روبوكس لتكون جاهزًا لأي شيء في عالم Roblox.",
                platform: 'roblox'
            },
            "roblox4500": {
                id: "roblox4500",
                title: "4500 Robux",
                price: 3000,
                image: "./images/roblox.png",
                shortDescription: "شحن 4500 روبوكس",
                fullDescription: "واحدة من أكبر الباقات! 4500 روبوكس تضمن لك الحصول على أندر العناصر وأفضل الميزات.",
                platform: 'roblox'
            },
            "fortnite1000": {
                id: "fortnite1000",
                title: "1000 VBucks",
                price: 360,
                image: "./images/fortnite.png",
                shortDescription: "شحن 1000 VB",
                fullDescription: "احصل على 1000 V-Bucks لاستخدامها في Fortnite. يمكنك شراء عناصر تخصيص جديدة مثل الأزياء، والطائرات الشراعية، والفؤوس، والرقصات، ومغلفات الأسلحة بالإضافة إلى Battle Pass للموسم الجديد!",
                platform: 'epic'
            },
            "fortnite2800": {
                id: "fortnite2800",
                title: "2800 VBucks",
                price: 820,
                image: "./images/fortnite.png",
                shortDescription: "اشحن دلوقتي 2800 VB",
                fullDescription: "عزز تجربتك مع 2800 V-Bucks. باقة رائعة للحصول على Battle Pass والعديد من العناصر المميزة من متجر فورتنايت.",
                platform: 'epic'
            },

            "fortnite5000": {
                id: "fortnite5000",
                title: "5000 VBucks",
                price: 1350,
                image: "./images/fortnite.png",
                shortDescription: "اشحن دلوقتي 5000 VB",
                fullDescription: "باقة كبيرة تمنحك 5000 V-Bucks. كن مستعدًا لشراء أندر الأزياء والحزم التي يصدرها متجر فورتنايت.",
                platform: 'epic'
            },
            "fortnite13500": {
                id: "fortnite13500",
                title: "13500 VBucks",
                price: 2950,
                image: "./images/fortnite.png",
                shortDescription: "اشحن دلوقتي 13500 VB",
                fullDescription: "أكبر قيمة! احصل على 13500 V-Bucks لتضمن أنك لن تفوت أي عنصر حصري أو زي نادر في عالم فورتنايت.",
                platform: 'epic'
            },
            "fortniteCrew": {
                id: "fortniteCrew",
                title: "Crew Pack",
                price: 270,
                image: "./images/Fortnitecrew.png",
                shortDescription: "2500VB+Battlepass",
                fullDescription: "اشترك في طاقم فورتنايت لتحصل على Battle Pass للموسم الكامل، 1000 V-Bucks كل شهر، وحزمة طاقم حصرية تحتوي على زي وإكسسوارات فريدة لا يمكن الحصول عليها إلا من خلال الاشتراك.",
                platform: 'epic'
            },
            "fortniteStarter": {
                id: "fortniteStarter",
                title: "Starter Pack",
                price: 200,
                image: "./images/starterpack.png",
                shortDescription: "600VB + سكن وبيكاكس ",
                fullDescription: "أفضل طريقة للبدء في فورتنايت! تحتوي باندل الستارتر عادةً على زي حصري و 600 V-Bucks، مما يمنحك قيمة ممتازة بسعر منخفض.",
                platform: 'epic'
            },

            "graphic-design-package": {
                id: "graphic-design-package",
                title: "تصاميم سوشيال ميديا وجرافيك ديزاين",
                image: "./images/design-offer.png",
                shortDescription: "احصل على تصاميم احترافية لصفحاتك على السوشيال ميديا.",
                fullDescription: "احصل على تصاميم احترافية لصفحاتك على السوشيال ميديا، شعارات، أو أي عمل فني تحتاجه. تصاميم إبداعية تترك أثرًا لا يُنسى.",
                category: "designs"
            },
            "video-editing-package": {
                id: "video-editing-package",
                title: "تصميم مقاطع فيديو وموشن جرافيك",
                image: "./images/design-offer-two.png",
                shortDescription: "حوّل أفكارك إلى فيديو جذاب ومتحرك.",
                fullDescription: "نقدم خدمة تصميم فيديوهات إعلانية، مقدمات قنوات، ومقاطع موشن جرافيك عالية الجودة.",
                category: "designs"
            },
            "gaming-content-package": {
                id: "gaming-content-package",
                title: "تصميمات للجيمنج وصناعة المحتوى",
                image: "./images/gaming-content-design.png",
                shortDescription: "تصميمات مخصصة للاعبين وصانعي المحتوى.",
                fullDescription: "تصميمات مخصصة للاعبين وصانعي المحتوى: مقدمات وخواتم قنوات، شعارات للفرق، أغطية للقنوات، وأي عمل فني آخر لتجعل محتواك مميزًا.",
                category: "designs"
            },

            "exit_lag_1_month": {
                id: "exit_lag_1_month",
                title: "كود  ExitLag",
                price: 90,
                image: "./images/exitlag.png",
                shortDescription: "شهر واحد",
                fullDescription: "احصل على أفضل تجربة لعب مع ExitLag. قلل الـ Ping وحسّن استقرار الاتصال لمدة شهر كامل.",
                options: {
                    "1_month": { title: "Key - شهر", price: 90 }
                },
                type: "software"
            },
            "adobe_creative_cloud_1_month": {
                id: "adobe_creative_cloud_1_month",
                title: "كود Adobe Creative",
                price: 350,
                image: "./images/adobe.png",
                shortDescription: "كود شهر كامل",
                fullDescription: "احصل على اشتراك كامل في باندل Adobe Creative Cloud لمدة شهر، يشمل جميع برامج Adobe مثل Photoshop و Illustrator و Premiere Pro والمزيد.",
                options: {
                    "1_month": { title: "Key - شهر", price: 350 }
                },
                type: "software"
            },
            "google_play_gift_card": {
                id: "google_play_gift_card",
                title: "Google Play Gift Card",
                price: 60,
                usd_price: 1.43,
                image: "./images/googleplay.png",
                shortDescription: "بطاقات هدايا جوجل بلاي",
                fullDescription: "اشحن رصيد حسابك في Google Play بكل سهولة وأمان. استخدم الرصيد لشراء التطبيقات، الألعاب، الكتب، والمحتوى داخل الألعاب.",
                isGiftCard: true,
                options: {
                    "5_dollar": { title: "5$", price: 275, usd_price: 5 },
                    "10_dollar": { title: "10$", price: 550, usd_price: 10 },
                    "25_dollar": { title: "25$", price: 1375, usd_price: 25 },
                    "50_dollar": { title: "50$", price: 2750, usd_price: 50 }
                },
                type: "software" // ✅ إضافة نوع المنتج لتصنيفه
            },
            "gamepass": {
                id: "gamepass",
                title: "كود PC Game Pass ",
                price: 220,
                usd_price: 5.23,
                image: "./images/Xbox.png",
                shortDescription: "مئات الألعاب عالية الجودة",
                fullDescription: "احصل على وصول غير محدود إلى مكتبة ضخمة تضم مئات الألعاب عالية الجودة على الكونسول والكمبيوتر الشخصي. استمتع بكل حصريات Xbox من اليوم الأول للإصدار، بالإضافة إلى اشتراك EA Play بدون تكلفة إضافية.",
                platform: 'microsoft',
                options: {
                    "1_month": { title: "شهر واحد", price: 220, usd_price: 5.23 }
                },
                type: "software" // ✅ إضافة نوع المنتج لتصنيفه
            },
            "windows11_pro_key": {
                id: "windows11_pro_key",
                title: "Windows 11 Pro Key", // عنوان أقصر ليناسب الكارت
                price: 199, // السعر الأساسي
                usd_price: 4.75,
                image: "./images/win11.png",
                shortDescription: "مفتاح تفعيل أصلي", // سيظهر هذا النص فوق الصورة
                fullDescription: "احصل على مفتاح تفعيل أصلي وشرعي لنظام التشغيل Windows 11 Pro. استمتع بجميع ميزات الأمان والأداء التي يقدمها ويندوز 11 برو.",
                platform: 'microsoft',
                category: "software_subscription", // <-- تم تغيير التصنيف
                // ✅ تم إضافة هذا الجزء ليتوافق مع شكل كارت الاشتراكات
                options: {
                    "lifetime": { title: "مدى الحياة", price: 199, usd_price: 4.75 }
                },
            },
            // COD
            "cod_custom_order_bo6": {
                id: "cod_custom_order_bo6",
                title: "طلب خدمة مخصصة",
                image: "./images/cod_custom_order.png",
                shortDescription: "هل لديك طلب غير موجود؟",
                fullDescription: "إذا كانت لديك خدمة معينة تريدها وغير مدرجة في القائمة، تواصل معنا مباشرة عبر الدعم الفني وسنبذل قصارى جهدنا لتلبيتها.",
                platform: 'activision',
                category: "cod-bo6", // <-- مهم: لوضعه في قسم BO6
                isCustomOrder: true // <-- خاصية جديدة لتمييز هذا الكارت
            },
            "cod_custom_order_mw3": {
                id: "cod_custom_order_mw3",
                title: "طلب خدمة مخصصة",
                image: "./images/cod_custom_order.png",
                shortDescription: "هل لديك طلب غير موجود؟",
                fullDescription: "إذا كانت لديك خدمة معينة تريدها وغير مدرجة في القائمة، تواصل معنا مباشرة عبر الدعم الفني وسنبذل قصارى جهدنا لتلبيتها.",
                platform: 'activision',
                category: "cod-mw3", // <-- مهم: لوضعه في قسم MW3
                isCustomOrder: true // <-- خاصية جديدة لتمييز هذا الكارت
            },
            "bo6_gold_camo": {
                id: "bo6_gold_camo",
                title: "Gold Camo + Max Weapon",
                usd_price: 3.03,
                image: "./images/cod_gold_camo.png",
                shortDescription: "لكل أسلحة BO6",
                fullDescription: "احصل على كامو الجولد لأي سلاح من اختيارك، بالإضافة إلى رفع مستوى السلاح إلى الحد الأقصى (Max Level).",
                platform: 'activision',
                requiresAccountDetails: true,
                category: "cod-bo6"
            },
            "bo6_zombies_augment": {
                id: "bo6_zombies_augment",
                title: "Unlock 1 Zombies Augment",
                usd_price: 2.70,
                image: "./images/cod_zombies_augment.png",
                shortDescription: "اختر أي تطوير للزومبي",
                fullDescription: "فتح أي تطوير (Augment) من اختيارك في طور الزومبي لمساعدتك على البقاء على قيد الحياة لفترة أطول.",
                platform: 'activision',
                requiresAccountDetails: true,
                category: "cod-bo6"
            },
            "bo6_unlock_any_item": {
                id: "bo6_unlock_any_item",
                title: "Unlock any item in Armory",
                usd_price: 3.00,
                image: "./images/cod_armory.png",
                shortDescription: "فتح أي عنصر من الترسانة",
                fullDescription: "فتح أي عنصر تريده مباشرة من الترسانة (Armory Unlocks) دون الحاجة لإكمال التحديات الخاصة به.",
                platform: 'activision',
                requiresAccountDetails: true,
                category: "cod-bo6"
            },
            "bo6_nuke_card": {
                id: "bo6_nuke_card",
                title: "Nuke Calling Card",
                usd_price: 8.00,
                image: "./images/cod_nuke_card.png",
                shortDescription: "احصل على بطاقة النيوك النادرة",
                fullDescription: "سنقوم بتنفيذ تحدي النيوك الصعب (Nuke Challenge) على حسابك لفتح بطاقة التعريف (Calling Card) الحصرية والمميزة.",
                platform: 'activision',
                requiresAccountDetails: true,
                category: "cod-bo6"
            },
            "bo6_dark_matter": {
                id: "bo6_dark_matter",
                title: "33 Dark matter",
                usd_price: 39.00,
                image: "./images/cod_dark_matter.png", // تأكد من أن لديك صورة للكامو
                shortDescription: "BO6 | Choose the weapons",
                fullDescription: "احصل على كامو الـ Dark Matter لكل 33 سلاح في لعبة Modern Warfare 3. هذه الخدمة تتطلب الدخول إلى حسابك وتمنحك أندر وأجمل الكاموهات في اللعبة.",
                platform: 'activision',
                requiresAccountDetails: true,
                category: "cod-bo6" // هذا التصنيف مهم جداً لظهوره في القسم الصحيح
            },
            "bo6_hard_break_card": {
                id: "bo6_hard_break_card",
                title: "Hard Break Calling Card",
                usd_price: 3.00,
                image: "./images/cod_hard_break_card.png",
                shortDescription: "بطاقة تعريف تحدي Hard Breakup",
                fullDescription: "إكمال تحدي 'Hard Breakup' وفتح بطاقة التعريف الخاصة به.",
                platform: 'activision',
                requiresAccountDetails: true,
                category: "cod-bo6"
            },

            "mw3_interstellar_camo": {
                id: "mw3_interstellar_camo",
                title: "Interstellar Camo",
                usd_price: 25.00,
                image: "./images/cod_interstellar_camo.png",
                shortDescription: "لكل أسلحة MW3",
                fullDescription: "احصل على كامو Interstellar النادر والمميز لجميع أسلحة Modern Warfare 3. الخدمة تتطلب الدخول لحسابك.",
                platform: 'activision',
                requiresAccountDetails: true,
                category: "cod-mw3"
            },
            "mw3_nuke_skin": {
                id: "mw3_nuke_skin",
                title: "Nuke Skin Operator",
                usd_price: 15.00,
                image: "./images/cod_nuke_skin.png",
                shortDescription: "افتح سكن النيوك النادر",
                fullDescription: "سنقوم بتنفيذ تحدي النيوك الصعب (Nuke Challenge) في Modern Warfare 3 لفتح سكن العميل (Operator Skin) الحصري.",
                platform: 'activision',
                requiresAccountDetails: true,
                category: "cod-mw3"
            },
            "mw3_gold_camo": {
                id: "mw3_gold_camo",
                title: "Gold Camo + Max Weapon",
                usd_price: 3.03, // نفس السعر
                image: "./images/cod_gold_camo.png", // نفس الصورة
                shortDescription: "لكل أسلحة MW3",
                fullDescription: "احصل على كامو الذهب لأي سلاح من اختيارك في Modern Warfare 3، بالإضافة إلى رفع مستوى السلاح إلى الحد الأقصى.",
                platform: 'activision',
                requiresAccountDetails: true,
                category: "cod-mw3" // مهم جدًا لوضعه في قسم MW3
            },
            // =================== XBOX PRODUCTS START ===================
            "xbox_gift_card_10": {
                id: "xbox_gift_card_10",
                title: "10$ Gift card",
                price: 650,
                usd_price: 11.33,
                image: "./images/xbox_card.png", // ❗ مطلوب منك إضافة صورة بهذا الاسم
                fullDescription: "اشحن رصيد حسابك على متجر Xbox (للحسابات الأمريكية) لشراء الألعاب، الإضافات، أو اشتراك الجيم باس.",
                platform: 'microsoft',
                category: "xbox-cards", // <-- فئة جديدة
                isGiftCard: true
            },
            "xbox_gift_card_15": {
                id: "xbox_gift_card_15",
                title: "15$ Gift card",
                price: 950, //
                usd_price: 17, // (تقريباً 17 دولار بعد حساب الرسوم)
                image: "./images/xbox_card.png",
                shortDescription: "اشحن حسابك بـ 15$ (حساب أمريكي)",
                fullDescription: "اشحن رصيد حسابك على متجر Xbox (للحسابات الأمريكية) لشراء الألعاب، الإضافات، أو اشتراك الجيم باس.",
                platform: 'microsoft',
                category: "xbox-cards", // ✅ هذا السطر يضمن ظهوره في قسم الكروت الرفيعة
                isGiftCard: true
            },
            "xbox_gift_card_25": {
                id: "xbox_gift_card_25",
                title: "25$ Gift card",
                price: 1499,
                usd_price: 27.25,
                image: "./images/xbox_card.png", // ❗ مطلوب منك إضافة صورة بهذا الاسم
                fullDescription: "اشحن رصيد حسابك على متجر Xbox (للحسابات الأمريكية) لشراء الألعاب، الإضافات، أو اشتراك الجيم باس.",
                platform: 'microsoft',
                category: "xbox-cards",
                isGiftCard: true
            },
            "xbox_gift_card_50": {
                id: "xbox_gift_card_50",
                title: "50$ Gift card",
                price: 2998, // يمكنك تعديل السعر
                usd_price: 54.50, // يمكنك تعديل السعر
                image: "./images/xbox_card.png",
                shortDescription: "اشحن حسابك بـ 50$ (حساب أمريكي)",
                fullDescription: "اشحن رصيد حسابك على متجر Xbox (للحسابات الأمريكية) لشراء الألعاب، الإضافات، أو اشتراك الجيم باس.",
                platform: 'microsoft',
                category: "xbox-cards", // <-- أهم شيء هو الكاتيجوري
                isGiftCard: true
            },
            "xbox_game_pass_ultimate": {
                id: "xbox_game_pass_ultimate",
                title: "Game Pass Ultimate (1 Month)",
                price: 900,
                usd_price: 21.43,
                image: "./images/Xbox.png",
                shortDescription: "مئات الألعاب. كل المزايا. (US)",
                fullDescription: "احصل على كل مزايا Game Pass Core، بالإضافة إلى مئات الألعاب عالية الجودة على الكونسول والكمبيوتر، و EA Play. (يعمل على الحسابات الأمريكية).",
                platform: 'microsoft',
                category: "xbox-popular",
                requiresAccountDetails: true, // ✅✅ تم إضافة هذا السطر
                isGiftCard: true
            },
            "minecraft": {
                id: "minecraft",
                title: "حساب Minecraft",
                price: 340,
                image: "./images/minecraft.png",
                shortDescription: "ابدأ رحلتك الماينكرافتة",
                fullDescription: "انغمس في عالم لوس سانتوس المترامي الأطراف! أفضل تجربة عالمها مفتوح تشمل طور القصة والاونلاين، هذا الحساب يمنحك الصلاحيات كاملة .",
                platform: 'microsoft',
                // --- تم حذف سطر الكاتيجوري من هنا ---
                stock: 3, // <-- سيبنا العداد هنا عشان "الأكثر مبيعاً"
                specs: `<h3>Potato PC`
            }, // <--- ✅✅ تأكد من وجود الفاصلة (comma) دي هنا
            "minecraft_xbox": {
                id: "minecraft_xbox",
                title: "على اكونتك Minecraft (Xbox/PC)",
                price: 340,
                usd_price: 8.10,
                image: "./images/minecraft.png",
                shortDescription: "ابدأ رحلتك الماينكرافتة",
                fullDescription: "انغمس في عالم لوس سانتوس المترامي الأطراف! أفضل تجربة عالمها مفتوح تشمل طور القصة والاونلاين، هذا الحساب يمنحك الصلاحيات كاملة .",
                platform: 'microsoft',
                category: "xbox-popular",
                requiresAccountDetails: true, // ✅✅ تم إضافة هذا السطر
                specs: `<h3>متطلبات تشغيل Minecraft: Java Edition</h3>... (باقي الكود)`
            },
            // =================== XBOX PRODUCTS END ===================
            // =================== COD PRODUCTS END ===================
            "it_takes_two_rent": {
                id: "it_takes_two_rent",
                title: "It Takes Two",
                price: 70,
                image: "./images/it-takes-two.png",
                shortDescription: "مغامرة تعاونية لا مثيل لها.",
                platform: 'steam',
                isRentable: true,
                options: {
                    "one_week": { title: "أسبوع", price: 70 },
                    "two_weeks": { title: "أسبوعين", price: 100 },
                    "one_month": { title: "شهر", price: 150 },
                    "two_months": { title: "شهرين", price: 220 },
                }
            },

            "a_way_out_rent": {
                id: "a_way_out_rent",
                title: "A Way Out",
                price: 70,
                image: "./images/a-way-out.png",
                shortDescription: "رحلة درامية للهرب من السجن بالتعاون مع صديقك.",
                platform: 'steam',
                isRentable: true,
                options: {
                    "one_week": { title: "أسبوع", price: 70 },
                    "two_weeks": { title: "أسبوعين", price: 100 },
                    "one_month": { title: "شهر", price: 150 },
                    "two_months": { title: "شهرين", price: 220 },
                }
            },
            "little_nightmares_3_rent": {
                id: "little_nightmares_3_rent",
                title: "Little Nightmares III",
                price: 80,
                image: "./images/ln3.png",
                shortDescription: "التعاون في عالم مرعب!",
                platform: 'steam',
                isRentable: true,
                options: {
                    "one_week": { title: "أسبوع", price: 80 },
                    "two_weeks": { title: "أسبوعين", price: 120 },
                    "one_month": { title: "شهر", price: 180 },
                    "two_months": { title: "شهرين", price: 260 },
                }
            },
            "silent_hollow_bundle": {
                "id": "silent_hollow_bundle",
                // ✅✅ تم تصحيح العنوان هنا
                "title": "باندل الغموض Silent Hill F & Hollow Knight: Silksong",
                "price": 200,
                "usd_price": 4.50,
                "image": "./images/silent_hollow_bundle.png",
                "shortDescription": "مغامرتان فريدتان في عالمين غامضين.",
                "fullDescription": "اجمع بين تجربتين لا مثيل لهما! انغمس في الرعب النفسي والجمال المخيف للعبة Silent Hill F التي تأخذك إلى اليابان في حقبة الستينيات، ثم انطلق في مغامرة ملحمية في مملكة الحشرات المنسية مع Hollow Knight: Silksong. هذه الحزمة مثالية للاعبين الذين يعشقون القصص العميقة والأجواء الغامرة.",
                "platform": "steam",
                "badges": ["OFFLINE", "BUNDLE"],
                "category": "offline-steam",
                "specs": "<p>متطلبات التشغيل لكل لعبة متاحة على صفحتها الخاصة على متجر Steam.</p>"
            },
            // --- (هنا يمكنك إضافة باقي منتجاتك القديمة، مع التأكد من وجود فاصلة بينهم) ---
            "gta": {
                id: "gta",
                title: "حساب GTA 5 Steam",
                price: 750,
                image: "./images/GTA5Banner.png",
                shortDescription: "ابدأ رحلتك في لوس سانتوس",
                fullDescription: "انغمس في عالم لوس سانتوس المترامي الأطراف!",
                platform: 'steam'
            },
            // =================== PLAYSTATION PRODUCTS START ===================
            "ps_plus_subscription": {
                id: "ps_plus_subscription",
                title: "اشتراك PlayStation Plus",
                price: 250,
                usd_price: 6.00,
                image: "./images/ps_plus.png",
                shortDescription: "Essential, Extra, Deluxe",
                fullDescription: "احصل على وصول لمكتبة ضخمة من الألعاب، اللعب أونلاين، خصومات حصرية، والمزيد مع باقات PlayStation Plus. اختر الباقة والمدة التي تناسبك.",
                platform: 'playstation',
                options: {
                    "essential_1": { title: "Essential - شهر", price: 250, usd_price: 6.00 },
                    "essential_3": { title: "Essential - 3 شهور", price: 650, usd_price: 15.50 },
                    "essential_12": { title: "Essential - سنة", price: 1800, usd_price: 42.85 },
                    "extra_1": { title: "Extra - شهر", price: 380, usd_price: 9.05 },
                    "extra_3": { title: "Extra - 3 شهور", price: 1050, usd_price: 25.00 },
                    "extra_12": { title: "Extra - سنة", price: 3000, usd_price: 71.40 },
                    "deluxe_1": { title: "Deluxe - شهر", price: 450, usd_price: 10.70 },
                    "deluxe_3": { title: "Deluxe - 3 شهور", price: 1250, usd_price: 29.75 },
                    "deluxe_12": { title: "Deluxe - سنة", price: 3500, usd_price: 83.33 }
                },
                category: "ps-plus",
            },
            "psn_gift_card_10": {
                id: "psn_gift_card_10",
                title: "10$",
                price: 650,
                usd_price: 11.33,
                image: "./images/psn_card.png",
                shortDescription: "اشحن محفظتك بـ 10$ (حساب أمريكي)",
                fullDescription: "اشحن رصيد محفظتك على PlayStation Store لشراء الألعاب، الإضافات (DLCs)، وكل ما تريده. الكود يعمل على الحسابات الأمريكية.",
                platform: 'playstation',
                category: "psn-cards",
                isGiftCard: true
            },
            "psn_gift_card_20": {
                id: "psn_gift_card_20",
                title: "20$",
                price: 1190,
                usd_price: 22.20,
                image: "./images/psn_card.png",
                shortDescription: "اشحن محفظتك بـ 20$ (حساب أمريكي)",
                fullDescription: "اشحن رصيد محفظتك على PlayStation Store لشراء الألعاب، الإضافات (DLCs)، وكل ما تريده. الكود يعمل على الحسابات الأمريكية.",
                platform: 'playstation',
                category: "psn-cards",
                isGiftCard: true
            },
            "psn_gift_card_25": {
                id: "psn_gift_card_25",
                title: "25$",
                price: 1499,
                usd_price: 27.25,
                image: "./images/psn_card.png",
                shortDescription: "اشحن محفظتك بـ 25$ (حساب أمريكي)",
                fullDescription: "اشحن رصيد محفظتك على PlayStation Store لشراء الألعاب، الإضافات (DLCs)، وكل ما تريده. الكود يعمل على الحسابات الأمريكية.",
                platform: 'playstation',
                category: "psn-cards",
                isGiftCard: true
            },
            "psn_gift_card_50": {
                id: "psn_gift_card_50",
                title: "50$",
                price: 2750,
                usd_price: 55,
                image: "./images/psn_card.png",
                shortDescription: "اشحن محفظتك بـ 50$ (حساب أمريكي)",
                fullDescription: "اشحن رصيد محفظتك على PlayStation Store لشراء الألعاب، الإضافات (DLCs)، وكل ما تريده. الكود يعمل على الحسابات الأمريكية.",
                platform: 'playstation',
                category: "psn-cards",
                isGiftCard: true
            },
            "psn_gift_card_100": {
                id: "psn_gift_card_100",
                title: "100$",
                price: 5499,
                usd_price: 119,
                image: "./images/psn_card.png",
                shortDescription: "اشحن محفظتك بـ 100$ (حساب أمريكي)",
                fullDescription: "اشحن رصيد محفظتك على PlayStation Store لشراء الألعاب، الإضافات (DLCs)، وكل ما تريده. الكود يعمل على الحسابات الأمريكية.",
                platform: 'playstation',
                category: "psn-cards",
                isGiftCard: true
            },
            "spiderman2_ps_offline": {
                id: "spiderman2_ps_offline",
                title: "Marvel's Spider-Man 2",
                price: 150,
                usd_price: 3.57,
                image: "./images/spiderman2.png",
                shortDescription: "كن أعظم.",
                fullDescription: "عش تجربة الرجل العنكبوت المذهلة مع بيتر باركر ومايلز موراليس. واجه أعداء جدد أقوياء مثل فينوم في قصة ملحمية لا تُنسى.",
                platform: 'playstation',
                badges: ['OFFLINE'],
                category: "ps-offline-games" // <-- تأكد من هذا الاسم
            },
            "helldivers2_ps_offline": {
                id: "helldivers2_ps_offline",
                title: "Helldivers 2",
                price: 130,
                usd_price: 3.10,
                image: "./images/helldivers2.png",
                shortDescription: "انشر الديمقراطية في المجرة.",
                fullDescription: "انضم إلى فرقة Helldivers وحارب من أجل الحرية في مجرة معادية في لعبة إطلاق نار تعاونية من منظور الشخص الثالث.",
                platform: 'playstation',
                badges: ['OFFLINE', 'CO-OP'],
                category: "ps-offline-games" // <-- تأكد من هذا الاسم
            },
            // =================== PLAYSTATION PRODUCTS END ===================

        };




        const orders = {
            "74562341": { status: "تم الشحن", img: "images/my-shipped.png" },
            "12345678": { status: "تم التوصيل", img: "images/my-delivered.png" },
            "87654321": { status: "قيد التجهيز", img: "images/my-processing.png" },
            "10101010": { status: "خرج للتوصيل", img: "images/my-outfordelivery.png" }
        };
        const discountCodes = {
            "SAMA": { percentage: 2 },
            "SOHAYL": { percentage: 1 },
            "GOE": { percentage: 3 },
            "HEX": { percentage: 3 }

        };

        let currentProduct = null;
        let cart = JSON.parse(localStorage.getItem('cart')) || {};
        let paymentTimerInterval = null;
        let appliedDiscount = null;
        let animationEventTarget = null; // سيحتفظ بمكان النقرة لتشغيل الأنيميشن

        function initializeFakeRatings() {
            const productIds = Object.keys(productsData);

            productIds.forEach(id => {
                const storageKey = `comments_${id}`;
                if (!localStorage.getItem(storageKey)) {
                    const fakeComments = [];
                    const reviewCount = Math.floor(Math.random() * 10) + 1;

                    for (let i = 0; i < reviewCount; i++) {
                        fakeComments.push({
                            name: `عميل #${i + 1}`,
                            text: "منتج ممتاز وخدمة سريعة!",
                            rating: 5,
                            date: new Date().toISOString(),
                            helpfulCount: 0
                        });
                    }
                    localStorage.setItem(storageKey, JSON.stringify(fakeComments));
                }
            });
        }


        function handlePaymentSubmit(form) { // لاحظ التغيير هنا: استقبلنا الفورم مباشرة

            // 🛑 تم حذف event.preventDefault() لأننا منعناه في مكان آخر



            const loadingSection = document.getElementById('loading');

            const loadingText = document.getElementById('loading-text');

            const confirmationSection = document.getElementById('confirmationMessage');



            const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzt27JC9nearJ6_WJneWlGEAwCcah34lNQeytvmbWneKSi2d0x0s7eQwbFPBlr8P_7e/exec";



            form.closest('.modal-content-section').classList.remove('is-visible');

            loadingText.textContent = "جاري إرسال طلبك... من فضلك انتظر.";

            loadingSection.classList.add('is-visible');

            loadingSection.style.display = 'block';



            const formData = new FormData(form);

            const data = Object.fromEntries(formData.entries());



            fetch(SCRIPT_URL, {

                method: 'POST',

                mode: 'no-cors',

                cache: 'no-cache',

                headers: {

                    'Content-Type': 'application/json'

                },

                body: JSON.stringify(data)

            })

                .finally(() => {

                    loadingSection.classList.remove('is-visible');

                    loadingSection.style.display = 'none';



                    // 🛑🛑 التعديل هنا: استخدام هيكل HTML الجديد بالكامل 🛑🛑

                    confirmationSection.innerHTML = `

                        <div class="thank-you-message-wrapper">



                            <i class="fa-solid fa-circle-check checkmark-icon"></i>



                            <h2 class="thank-you-title">شكراً لشرائك من Berlin Store</h2>



                            <hr class="thank-you-divider">



                            <p class="thank-you-text">تم استلام طلبك بنجاح وسيتم إرساله في أقرب وقت.</p>

                        </div>

                    `;

                    // 🛑 تم إزالة تعيين اللون المباشر لأنه تم تعريفه في تنسيقات CSS سابقة (أو يجب إضافته)

                    // confirmationSection.style.color = "#00ff00";



                    confirmationSection.classList.add('is-visible');



                    // 💡 ملاحظة: يجب إضافة التنسيقات (CSS) المذكورة سابقًا في ملف  ليعمل هذا المظهر بشكل صحيح.



                    cart = {};

                    localStorage.setItem('cart', JSON.stringify(cart));

                    updateCartCount();



                    setTimeout(() => {

                        closeModal('paymentModal');

                    }, 4000);

                });

        }

        function showToast(message) {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            toast.className = 'toast-notification';
            toast.textContent = message;
            container.appendChild(toast);

            setTimeout(() => {
                toast.classList.add('show');
            }, 10);

            setTimeout(() => {
                toast.classList.remove('show');
                toast.addEventListener('transitionend', () => {
                    if (toast.parentElement) {
                        toast.remove();
                    }
                });
            }, 3000);
        }


        function loadOfflineSteamGamesToHome() {
            const container = document.getElementById('offlineSteamContainer');
            const loadMoreBtn = document.getElementById('loadMoreOfflineGamesBtn');
            if (!container || !loadMoreBtn) return;

            const allOfflineSteamIds = [
                // ✅ تم التأكيد على وجود البطاقة هنا
                'mafia', 'residentevil_offline', 'black_myth_wukong_offline', 'thelastofus_offline',
                'ac_shadows_offline', 'silent_hill_f_offline', 'silent_hill_2_remake_offline', 'stalker_2_offline',
                'cyberpunk_2077_offline', 'ghostoftsushima_offline', 'witcher3_offline', 'eldenring_offline',
                'silksong_offline', 'ragnarok_offline', 're4_remake_offline', 're4_separate_ways_offline', 'tlou1_offline',
                'residentevil2_remake_offline', 'residentevil3_remake_offline', 'cuphead_offline', 'cod_category_card',
                'silent_hollow_bundle', 'tlou_bundle', 'gow_got_bundle', 'cyberpunk_re4_bundle'
            ];

            const regularIds = allOfflineSteamIds.filter(id => !id.includes('bundle'));
            const bundleIds = allOfflineSteamIds.filter(id => id.includes('bundle'));

            const renderQueue = [...regularIds];
            if (regularIds.length > 0 && bundleIds.length > 0) {
                renderQueue.push('SEPARATOR');
            }
            renderQueue.push(...bundleIds);

            const initialCount = 4;
            const initialItems = renderQueue.slice(0, initialCount);
            const moreItems = renderQueue.slice(initialCount);

            container.innerHTML = '';

            const renderItem = (item) => {
                if (item === 'SEPARATOR') {
                    const separator = document.createElement('div');
                    separator.className = 'product-separator';
                    container.appendChild(separator);
                } else if (productsData[item]) {
                    renderProductItem(productsData[item], container, 'games', true);
                }
            };

            initialItems.forEach(renderItem);

            if (moreItems.length > 0) {
                loadMoreBtn.style.display = 'inline-flex';
                loadMoreBtn.dataset.state = 'more';

                const updateButtonState = () => {
                    if (loadMoreBtn.dataset.state === 'more') {
                        loadMoreBtn.innerHTML = `<span>عرض المزيد</span> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>`;
                    } else {
                        loadMoreBtn.innerHTML = `<span>إخفاء</span> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="18 15 12 9 6 15"></polyline></svg>`;
                    }
                };
                updateButtonState();

                loadMoreBtn.onclick = () => {
                    if (loadMoreBtn.dataset.state === 'more') {
                        const hiddenItems = container.querySelectorAll('.newly-added');
                        if (hiddenItems.length > 0) {
                            hiddenItems.forEach(item => {
                                item.style.display = 'flex';
                                // إعادة تشغيل الأنيميشن عند إظهارهم مرة أخرى
                                item.classList.add('card-enter');
                            });
                        } else {
                            moreItems.forEach((item, index) => {
                                if (item === 'SEPARATOR') {
                                    const separator = document.createElement('div');
                                    separator.className = 'product-separator newly-added';
                                    container.appendChild(separator);
                                } else if (productsData[item]) {
                                    const newItem = renderProductItem(productsData[item], container, 'games', true, true);
                                    newItem.classList.add('newly-added');
                                    newItem.style.opacity = '0';

                                    setTimeout(() => {
                                        newItem.classList.add('card-enter');

                                        // ✅✅ الكود الجديد يبدأ هنا ✅✅
                                        // نستمع لحدث انتهاء الأنيميشن
                                        newItem.addEventListener('animationend', () => {
                                            // بمجرد انتهاء الأنيميشن، نزيل الكلاس ونضبط الشفافية
                                            newItem.classList.remove('card-enter');
                                            newItem.style.opacity = '';
                                        }, { once: true }); // { once: true } تضمن أن المستمع يعمل مرة واحدة فقط ثم يحذف نفسه
                                        // ✅✅ الكود الجديد ينتهي هنا ✅✅

                                    }, index * 100);
                                }
                            });
                        }
                        loadMoreBtn.dataset.state = 'less';
                    } else {
                        const itemsToHide = container.querySelectorAll('.newly-added');
                        itemsToHide.forEach(item => {
                            item.style.display = 'none';
                            // إزالة الكلاس عند الإخفاء لضمان إعادة تشغيل الأنيميشن لاحقًا
                            item.classList.remove('card-enter');
                        });
                        loadMoreBtn.dataset.state = 'more';
                        document.getElementById('offline-steam-section').scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                    updateButtonState();
                };
            } else {
                loadMoreBtn.style.display = 'none';
            }
        }


        function loadSteamGamesGifting() {
            const container = document.getElementById('steamGamesGiftingContainer');
            container.innerHTML = '';
            const gameGiftIds = ['gta_gift', 'rust_gift', 'seaofthieves_gift', 'rdr2_gift', 'eldenring_gift', 'wallpaperEngine_gift'];
            gameGiftIds.forEach(id => {
                if (productsData[id]) {
                    renderProductItem(productsData[id], container, 'steam_gifting', true);
                }
            });
        }


        document.addEventListener('DOMContentLoaded', () => {

            if (window.location.hash.startsWith('#global')) {
                // 1. تغيير العملة برمجيًا إلى الدولار
                currentCurrency = 'USD';

                // 2. تحديث شكل القائمة المنسدلة لتظهر كلمة "GLOBAL"
                document.getElementById('currency-selector').value = 'USD';

                // 3. تنظيف الرابط لكي تعمل باقي أجزاء الموقع بشكل سليم
                let cleanHash = window.location.hash.substring(7); // حذف كلمة #global
                if (cleanHash.startsWith('/')) {
                    cleanHash = '#' + cleanHash.substring(1);
                } else {
                    cleanHash = '#home'; // إذا كان الرابط #global فقط، اذهب للرئيسية
                }
                // تحديث الرابط في المتصفح بدون إعادة تحميل الصفحة
                history.replaceState(null, null, ' ' + cleanHash);
            }
            const searchInput = document.getElementById('navbarProductSearch');
            const searchResultsContainer = document.getElementById('navbar-search-results');

            window.addEventListener('click', function (event) {
                if (searchInput && searchResultsContainer && !searchInput.contains(event.target) && !searchResultsContainer.contains(event.target)) {
                    closeInstantSearch();
                }
            });

            const paymentSelector = document.getElementById('custom-payment-selector');
            const paymentOptions = document.getElementById('custom-payment-options');
            const paymentContainer = document.querySelector('.custom-select-container');
            const realSelect = document.getElementById('modalPaymentMethod');

            if (paymentSelector) {
                // 1. فتح وإغلاق القائمة
                paymentSelector.addEventListener('click', (e) => {
                    e.stopPropagation(); // منع إغلاق القائمة فوراً
                    paymentContainer.classList.toggle('open');
                });

                // 2. اختيار عنصر
                paymentOptions.addEventListener('click', (e) => {
                    const option = e.target.closest('.custom-option');
                    if (!option) return;

                    const selectedValue = option.dataset.value;
                    const selectedText = option.querySelector('span').textContent;

                    // 3. تحديث القائمة المخفية الأصلية
                    realSelect.value = selectedValue;

                    // 4. تحديث الزر الظاهر
                    paymentSelector.querySelector('span').textContent = selectedText;

                    // 5. إغلاق القائمة
                    paymentContainer.classList.remove('open');
                });
                // S <-- ✅✅ تم مسح حرف S من هنا
            }

            // 6. إغلاق القائمة عند الضغط في أي مكان آخر
            window.addEventListener('click', () => {
                if (paymentContainer && paymentContainer.classList.contains('open')) {
                    paymentContainer.classList.remove('open');
                }
            }); // <-- ✅✅ تم إضافة القوس الناقص هنا

            const toggleLink = document.getElementById('toggle-discount-link');
            const discountWrapper = document.getElementById('discount-wrapper');

            toggleLink.addEventListener('click', () => {
                discountWrapper.classList.toggle('visible');
            });

            document.body.addEventListener('click', function (event) {
                // نبحث عن أقرب رابط ضغطه المستخدم
                const link = event.target.closest('a');

                // نتأكد أن الرابط موجود وموجه لداخل الصفحة (يبدأ بـ #)
                if (link && link.getAttribute('href').startsWith('#')) {
                    // نصعد لأعلى الصفحة
                    window.scrollTo(0, 0);
                }
            });

            document.getElementById('discord-deco-decrease').addEventListener('click', () => {
                const quantityInput = document.getElementById('discord-deco-quantity');
                let currentValue = parseInt(quantityInput.value);
                if (currentValue > 1) {
                    quantityInput.value = currentValue - 1;
                    calculateDiscordDecoPrice();
                }
            });

            document.getElementById('discord-deco-increase').addEventListener('click', () => {
                const quantityInput = document.getElementById('discord-deco-quantity');
                quantityInput.value = parseInt(quantityInput.value) + 1;
                calculateDiscordDecoPrice();
            });

            // ✅✅ الكود الجديد لزر تبديل الثيم ✅✅
            const themeToggleButton = document.getElementById('theme-toggle-btn');
            const initialTheme = localStorage.getItem('theme') || 'dark-mode';

            // تطبيق الثيم عند تحميل الصفحة
            document.body.classList.toggle('light-mode', initialTheme === 'light-mode');

            // إضافة حدث النقر للزر
            themeToggleButton.addEventListener('click', () => {
                document.body.classList.toggle('light-mode');

                let newTheme = document.body.classList.contains('light-mode') ? 'light-mode' : 'dark-mode';
                localStorage.setItem('theme', newTheme);
            });

            // ====================================================================
            // START: تحديد العملة تلقائيًا عند تحميل الصفحة بناءً على الرابط
            // ====================================================================
            if (window.location.hash.startsWith('#global')) {
                // 1. تغيير العملة برمجيًا إلى الدولار
                currentCurrency = 'USD';

                // 2. تحديث شكل القائمة المنسدلة لتظهر كلمة "GLOBAL"
                document.getElementById('currency-selector').value = 'USD';

                // 3. تنظيف الرابط لكي تعمل باقي أجزاء الموقع بشكل سليم
                let cleanHash = window.location.hash.substring(7); // حذف كلمة #global
                if (cleanHash.startsWith('/')) {
                    cleanHash = '#' + cleanHash.substring(1);
                } else {
                    cleanHash = '#home'; // إذا كان الرابط #global فقط، اذهب للرئيسية
                }
                // تحديث الرابط في المتصفح بدون إعادة تحميل الصفحة
                history.replaceState(null, '', ' ' + cleanHash);
            }
            // ====================================================================
            // END: تحديد العملة تلقائيًا
            // ====================================================================

            // الكود القديم الموجود عندك يبدأ من هنا ويكمل زي ما هو
            initializeFakeRatings();
            // ...

            initializeFakeRatings();

            generateRankSelectors();
            loadGamesToHome();
            loadDiscordDecorations();
            loadSubscriptionsToHome();
            loadOfflineSteamGamesToHome();
            loadSteamGiftCardsToHome();
            loadPlaystationSection();
            loadSteamPointsToHome();
            updateCartCount();
            loadXboxSection();
            loadSoftwareKeys();
            loadGameRentalsToHome();
            setupStarRatingInput();
            loadStoreRatings();
            setupStoreRatingInput();
            renderStoreReviews();

            // ====================================================================== //
            // START: تعديل نافذة التأكيد المدمجة للدفع (مع ذاكرة مؤقتة)             //
            // ====================================================================== //

            // --- التعامل مع فورم فودافون كاش ---
            const vodafoneForm = document.getElementById('vodafoneForm');
            const vfFormFields = document.getElementById('vodafone-form-fields');
            const vfConfirmationView = document.getElementById('vodafone-confirmation-view');

            vodafoneForm.addEventListener('submit', function (event) {
                event.preventDefault(); // امنع الإرسال دائمًا

                // ✅ التحقق من الذاكرة
                if (hasConfirmedOnce) {
                    handlePaymentSubmit(this); // إذا تم التأكيد من قبل، أرسل مباشرة
                } else {
                    vfFormFields.style.display = 'none'; // إذا كانت أول مرة، أظهر نافذة التأكيد
                    vfConfirmationView.style.display = 'block';
                }
            });

            document.getElementById('vodafone-confirm-yes').addEventListener('click', () => {
                hasConfirmedOnce = true; // ✅ قم بتحديث الذاكرة
                handlePaymentSubmit(vodafoneForm); // نفذ الدالة الأصلية
            });

            document.getElementById('vodafone-confirm-no').addEventListener('click', () => {
                vfConfirmationView.style.display = 'none';
                vfFormFields.style.display = 'flex';
            });


            // --- التعامل مع فورم باي بال ---
            const paypalForm = document.getElementById('paypalForm');
            const ppFormFields = document.getElementById('paypal-form-fields');
            const ppConfirmationView = document.getElementById('paypal-confirmation-view');

            paypalForm.addEventListener('submit', function (event) {
                event.preventDefault(); // امنع الإرسال دائمًا

                // ✅ التحقق من الذاكرة
                if (hasConfirmedOnce) {
                    handlePaymentSubmit(this); // إذا تم التأكيد من قبل، أرسل مباشرة
                } else {
                    ppFormFields.style.display = 'none'; // إذا كانت أول مرة، أظهر نافذة التأكيد
                    ppConfirmationView.style.display = 'block';
                }
            });

            document.getElementById('paypal-confirm-yes').addEventListener('click', () => {
                hasConfirmedOnce = true; // ✅ قم بتحديث الذاكرة
                handlePaymentSubmit(paypalForm);
            });

            document.getElementById('paypal-confirm-no').addEventListener('click', () => {
                ppConfirmationView.style.display = 'none';
                ppFormFields.style.display = 'block';
            });

            // ====================================================================== //
            // END: تعديل نافذة التأكيد المدمجة للدفع                                  //
            // ====================================================================== //


            const navbar = document.getElementById('navbar');
            window.addEventListener('scroll', () => {
                if (window.scrollY > 10) {
                    navbar.classList.add('navbar-scrolled');
                } else {
                    navbar.classList.remove('navbar-scrolled');
                }
            });

            handleRouting();
            window.addEventListener('hashchange', handleRouting);
        });

        function setupStarRatingInput() {
            const starsContainer = document.getElementById('ratingStars');
            if (!starsContainer) return;

            const ratingInput = document.getElementById('commentRating');
            const stars = starsContainer.querySelectorAll('.star');

            stars.forEach(star => {
                star.addEventListener('click', () => {
                    const value = star.dataset.value;
                    ratingInput.value = value;
                    starsContainer.dataset.rating = value;
                });
            });
        }
        function addPaymentLogos() {
            const selectElement = document.getElementById('modalPaymentMethod');
            if (selectElement) {
                const options = selectElement.options;
                for (let i = 0; i < options.length; i++) {
                    const option = options[i];
                    if (option.value === 'vodafone') {
                        option.textContent = 'فودافون كاش - محفظة';
                        const img = document.createElement('img');
                        img.src = './images/vf-cash.png';
                        img.className = 'payment-option-logo';
                        option.prepend(img);
                    } else if (option.value === 'paypal') {
                        option.textContent = 'بايبال';
                        const img = document.createElement('img');
                        img.src = './images/paypal.png';
                        img.className = 'payment-option-logo';
                        option.prepend(img);
                    }
                }
            }
        }

        function handleRouting() {
            const hash = window.location.hash || '#home';
            const [section, param] = hash.substring(1).split('/');
            const sections = document.querySelectorAll('.section');
            sections.forEach(s => s.style.display = 'none');

            document.querySelectorAll('.section').forEach(s => s.style.display = 'none');
            if (document.getElementById('my-orders-page')) {
                document.getElementById('my-orders-page').style.display = 'none';
            }

            if (document.getElementById('my-orders-auth-page')) {
                document.getElementById('my-orders-auth-page').style.display = 'none';
            }
            const user = firebase.auth().currentUser;
            switch (section) {
                case 'home':
                case 'subscriptions-section':
                case 'software-keys-section':
                case 'offline-steam-section':
                case 'steam-points-section':
                case 'game-topup-section':
                case 'personal-gifting-section':
                case 'playstation-section':
                case 'xbox-gifting-section':
                    document.getElementById('home').style.display = 'block';
                    if (section !== 'home') {
                        setTimeout(() => {

                            const targetSection = document.getElementById(section);
                            if (targetSection) {
                                targetSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                            }
                        }, 100);
                    }
                    break;
                case 'products':
                    showSection('products');
                    loadProducts();
                    break;
                case 'my-orders-page':
                    showSection('my-orders-page');
                    if (typeof fetchUserOrders === 'function') {
                        fetchUserOrders();
                    }
                    break;
                case 'profile-settings':
                    // 2. وهنا مكتوب اسم ديف البروفايل
                    showSection('profile-settings-page');
                    break; // 🛑🛑
                case 'my-orders-page':
                    if (user) {
                        // لو مسجل، اعرض الصفحة وهات البيانات
                        const page = document.getElementById('my-orders-page');
                        if (page) page.style.display = 'flex'; // مهم: display flex عشان التوسيط
                        fetchUserOrders();
                    } else {
                        // لو مش مسجل وبيحاول يفتحها، رجعه لصفحة التسجيل
                        window.location.hash = '#my-orders-auth-page';
                    }
                    break;

                // ✅ الحالة 2: صفحة تسجيل الدخول للطلبات
                case 'my-orders-auth-page':
                    if (user) {
                        // 🚀 لو هو أصلاً مسجل دخول ورايح هنا بالغلط، حوله فوراً لطلباته
                        window.location.hash = '#my-orders-page';
                    } else {
                        // لو مش مسجل، اعرض له صفحة التسجيل عادي
                        const authPage = document.getElementById('my-orders-auth-page');
                        if (authPage) authPage.style.display = 'flex';
                    }
                    break;
                case 'subscriptions':
                    // هذه الحالة لم تعد ضرورية
                    break;
                case 'my-orders-auth-page':
                    showSection('my-orders-auth-page');
                    break;
                case 'valorantPoints':
                    showSection('valorantPoints');
                    loadValorantPoints();
                    break;
                case 'roblox':
                    showSection('roblox');
                    loadRobux();
                    break;
                case 'fortnite':
                    showSection('fortnite');
                    loadFortnite();
                    break;
                case 'steamGiftCards':
                    // التعديل: توجيه المستخدم لقسم الصفحة الرئيسية بدلاً من الصفحة المنفصلة
                    showSection('steam-gift-cards-section');
                    // لا نحتاج لاستدعاء دالة تحميل البيانات لأنها محملة بالفعل في الصفحة الرئيسية
                    break;
                case 'cod-services':
                    showSection('cod-services');
                    loadCoDServices();
                    break;
                case 'playstation-games-page':
                    showSection('playstation-games-page');
                    loadPlaystationGamesPage();
                    break;

                // ✅ أضف الحالة الجديدة هنا
                case 'all-cod-games':
                    showSection('all-cod-games');
                    loadAllCodGames();
                    break;
                case 'valorant-boosting':
                    showSection(section);
                    generateRankSelectors(); // <--- أضف هذا السطر
                    loadValorantBoosting();
                    break;
                case 'steamGamesGifting':
                    showSection('steamGamesGifting');
                    loadSteamGamesGifting();
                    break;
                case 'genshinImpact':
                    showSection('genshinImpact');
                    loadGenshinImpact();
                    break;
                case 'rocketleague':
                    showSection('rocketleague');
                    loadRocketLeague();
                    break;
                case 'marvelRivals':
                    showSection('marvelRivals');
                    loadMarvelRivals();
                    break;
                case 'designs':
                    showSection('designs');
                    break;
                case 'developing':
                    showSection('developing');
                    break;
                case 'shipping':
                    showSection('shipping');
                    break;
                case 'about':
                    showSection('about');
                    break;
                case 'terms':
                    showSection('terms');
                    break;
                case 'privacy':
                    showSection('privacy');
                    break;
                case 'about':
                    showSection('about');
                    break;
                case 'terms':
                    showSection('terms');
                    break;
                case 'privacy':
                    showSection('privacy');
                    break;
                case 'faq':
                    showSection('faq');
                    break;
                case 'valorant-boosting':
                    showSection(section);
                    loadValorantBoosting();
                    break;
                case 'valorant-coaching':
                    showSection(section);
                    loadValorantCoaching();
                    break;
                case 'fortnite-coaching':
                    showSection(section);
                    loadFortniteCoaching();
                    break;
                case 'fortnite-boosting':
                    showSection(section); // ✅ هذا السطر يبقي كما هو لإظهار القسم
                    break;              // ✅ وهذا يبقي كما هو
                case 'cod-services':
                    showSection('cod-services');
                    loadCoDServices();
                    break;
                case 'rocketleague':
                    showSection('rocketleague');
                    loadRocketLeague();
                    break;

                case 'discordDecorationsPage': // ✅ أضف هذه الحالة الجديدة
                    showSection('discordDecorationsPage');
                    loadDiscordDecorations();
                    break;
                case 'playstation-games-page':
                    showSection('playstation-games-page');
                    loadPlaystationGamesPage(); // استدعاء الدالة التي تعرض الألعاب
                    break;

                case 'marvelRivals':
                    showSection('marvelRivals');
                    loadMarvelRivals();
                    break;
                case 'product':
                    if (param && productsData[param]) {
                        showProductPage(param);
                    } else {
                        showSection('home');
                    }
                    break;
                case 'searchResults':
                    showSection('searchResults');
                    break;
                default:
                    showSection('home');
                    break;
                case 'fortnite-boosting':
                    showSection(section);
                    break;
            }
        }

        /* === START: JavaScript for Navbar Search Bar === */
        function performNavbarSearch() {
            const query = document.getElementById('navbarProductSearch').value;
            if (query.trim() === '') return;
            performGlobalSearch(query);
        }

        function loadSoftwareKeys() {
            const container = document.getElementById('softwareKeysContainer');
            container.innerHTML = '';
            const softwareKeysIds = ['windows11_pro_key', 'exit_lag_1_month', 'adobe_creative_cloud_1_month', 'google_play_gift_card', 'gamepass'];
            softwareKeysIds.forEach(id => {
                if (productsData[id]) {
                    // ✅ هنا نستخدم الكلاس الجديد
                    renderProductItem(productsData[id], container, 'software_keys', false, 'software-card-unique');
                }
            });
        }

        // تعريف أقسام الصفحة الرئيسية التي يجب أن تظهر مع بعضها (نظام الصفحة الطويلة)
        const mainPageSections = [
            'home',
            'games-section',
            'subscriptions-section',
            'game-topup-section',
            'offline-steam-section',
            'personal-gifting-section',
            'game-rentals-section',
            'xbox-gifting-section',
            'steam-gift-cards-section',
            'steam-points-section',
            'discord-decorations-section',
            'software-keys-section',
            'playstation-section',
            'services-section',
            'gaming-services-section',
            'feedback-section',
            'products'
        ];

        function showSection(sectionId) {
            // نحدد هل القسم المطلوب هو جزء من الصفحة الرئيسية الطويلة أم صفحة منفصلة؟
            const isMainSection = mainPageSections.includes(sectionId);

            // 1. نحضر جميع الأقسام الموجودة في الموقع (أي عنصر واخد كلاس section)
            const allSections = document.querySelectorAll('.section');

            if (isMainSection) {
                // === الحالة الأولى: المستخدم عايز يروح لجزء في الصفحة الرئيسية ===

                allSections.forEach(sec => {
                    // لو القسم ده تبع الصفحة الرئيسية -> اظهره، غير كده -> اخفيه
                    if (mainPageSections.includes(sec.id)) {
                        sec.style.display = 'block';
                    } else {
                        sec.style.display = 'none';
                    }
                });

                // عمل سكرول ناعم للقسم المحدد داخل الصفحة الرئيسية
                const target = document.getElementById(sectionId);
                if (target) {
                    setTimeout(() => {
                        target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }, 50);
                }

            } else {
                // === الحالة الثانية: المستخدم عايز يروح لصفحة منفصلة (مثل صفحة منتج) ===

                // نخفي كل الأقسام بلا استثناء
                allSections.forEach(sec => {
                    sec.style.display = 'none';
                });

                // نظهر فقط القسم المستهدف
                const target = document.getElementById(sectionId);
                if (target) {
                    target.style.display = 'block';
                    // في الصفحات المنفصلة، دايماً نطلع لأول الصفحة
                    window.scrollTo({ top: 0, behavior: 'auto' });
                }
            }
        }

        function showModal(modalId) {
            const modal = document.getElementById(modalId);
            const overlay = document.getElementById('overlay');

            // إخفاء كل النوافذ المنبثقة الأخرى قبل فتح النافذة الجديدة
            document.querySelectorAll('.modal').forEach(m => m.classList.remove('is-visible'));

            if (modal && overlay) {
                modal.classList.add('is-visible');
                overlay.style.display = 'block';
                document.body.style.overflow = 'hidden';
            }
        }

        function closeModal(modalId) {
            const modals = document.querySelectorAll('.modal');
            const overlay = document.getElementById('overlay');

            if (modalId === 'all') {
                modals.forEach(m => m.classList.remove('is-visible'));
            } else {
                const modal = document.getElementById(modalId);
                if (modal) {
                    modal.classList.remove('is-visible');
                }
            }

            const visibleModals = document.querySelectorAll('.modal.is-visible');
            if (visibleModals.length === 0 && overlay) {
                overlay.style.display = 'none';
                document.body.style.overflow = 'auto';
            }

            clearInterval(paymentTimerInterval);
            document.querySelectorAll('.confirm-payment-btn').forEach(btn => btn.disabled = false);

            const paymentModal = document.getElementById('paymentModal');
            if (paymentModal) {
                const allSections = paymentModal.querySelectorAll('.modal-content-section');
                allSections.forEach(section => section.classList.remove('is-visible'));
                document.getElementById('modalCommonContent').classList.add('is-visible');
            }
        }

        // هذه الدالة الجديدة تحتوي على منطق الإضافة الفعلي
        // النسخة النهائية والمعدلة - تقوم بحفظ البيانات الإضافية داخل السلة
        function performAddToCart(productId, quantity, event, extraData = {}) {
            const audio = new Audio('https://www.myinstants.com/media/sounds/mario-coin.mp3'); // صوت عملة ماريو
            audio.volume = 0.5;
            audio.play();
            if (event) {
                // لا نمرر الزر نفسه، بل الحدث الخاص بالماوس
                flyToCart(event);
            }
            showToast("تمت إضافة المنتج للسلة بنجاح!");

            // التحقق مما إذا كان المنتج موجودًا بالفعل في السلة
            if (cart[productId]) {
                // إذا كان موجودًا، فقط قم بزيادة الكمية
                cart[productId].quantity += quantity;
            } else {
                // إذا كان منتجًا جديدًا، قم بإنشائه ودمج البيانات الإضافية معه
                cart[productId] = {
                    ...productsData[productId], // نسخ بيانات المنتج الأساسية
                    quantity: quantity,
                    ...extraData // <-- هذا هو السطر الأهم: دمج كل البيانات الإضافية
                };
            }

            // حفظ السلة المحدثة وتحديث الواجهة
            localStorage.setItem('cart', JSON.stringify(cart));
            setTimeout(() => {
                updateCartCount();
                const cartButton = document.querySelector('.fixed-cart-button');
                cartButton.classList.add('added');
                setTimeout(() => {
                    cartButton.classList.remove('added');
                }, 400);
            }, 500); // تأخير بسيط لให้ الأنيميشن يكتمل
        }

        // هذه هي النسخة المحدثة من الدالة الأصلية
        function addToCartHandler(event, productId, quantity) {
            const product = productsData[productId];
            const requiresInfo = product.platform === 'riot' ||
                product.platform === 'roblox' ||
                product.platform === 'epic' ||
                product.requiresSteamFriendCode ||
                product.requiresSteamProfileLink;

            if (requiresInfo) {
                animationEventTarget = event.target;
                openPaymentModal(productId, 'addToCartMode');
            } else {
                performAddToCart(productId, quantity, event);
            }
        }

        function loadMarvelRivals() {
            const container = document.getElementById('marvelRivalsContainer');
            if (!container) return;
            container.innerHTML = '';

            for (const productId in productsData) {
                const product = productsData[productId];
                if (product.category === 'marvel-rivals') {
                    renderProductItem(product, container, 'marvel-rivals', true);
                }
            }
        }

        function flyToCart(event) {
            const cartBtn = document.querySelector('.fixed-cart-button');
            if (!cartBtn || !event) return;

            const productCard = event.target.closest('.product-item, .subscription-item');
            let sourceImageElement;

            if (productCard) {
                sourceImageElement = productCard.querySelector('.product-image-wrapper img, .sub-image-wrapper img');
            } else {
                sourceImageElement = document.getElementById('productPageImage');
            }

            if (!sourceImageElement) return;

            const sourceRect = sourceImageElement.getBoundingClientRect();
            const cartRect = cartBtn.getBoundingClientRect();

            const flyingImg = document.createElement('img');
            flyingImg.src = sourceImageElement.src;
            flyingImg.className = 'product-image-fly';
            document.body.appendChild(flyingImg);

            flyingImg.style.left = `${sourceRect.left}px`;
            flyingImg.style.top = `${sourceRect.top}px`;
            flyingImg.style.width = `${sourceRect.width}px`;
            flyingImg.style.height = `${sourceRect.height}px`;

            requestAnimationFrame(() => {
                flyingImg.style.left = `${cartRect.left + cartRect.width / 2}px`;
                flyingImg.style.top = `${cartRect.top + cartRect.height / 2}px`;
                flyingImg.style.width = '0px';
                flyingImg.style.height = '0px';
                flyingImg.style.opacity = '0.5';
                flyingImg.style.transform = 'rotate(180deg)';
            });

            setTimeout(() => {
                flyingImg.remove();
            }, 800);
        }

        // ✅✅ الدالة بعد تعديلها لتفتح نافذة الشراء للاشتراكات مباشرة ✅✅
        function renderProductItem(product, container, sectionType, showRating, returnElement = false) {
            let productPrice, currencySymbol;
            let priceDisplay = '';

            if (product.category === 'cod-bo6' || product.category === 'cod-mw3') {
                productPrice = product.usd_price ? product.usd_price.toFixed(2) : 'N/A';
                currencySymbol = 'USD';
                priceDisplay = `السعر: <span class="product-price">${productPrice}</span> <span class="currency-symbol">${currencySymbol}</span>`;
            } else if (product.actionLink) {
                priceDisplay = '';
            } else {
                currencySymbol = currentCurrency === 'USD' ? 'USD' : 'EGP';
                if (product.options) {
                    const firstOptionKey = Object.keys(product.options)[0];
                    const firstOptionData = product.options[firstOptionKey];

                    // --- (التعديل يبدأ هنا) ---
                    if (currentCurrency === 'USD') {
                        let baseUsdPrice = firstOptionData.usd_price || (firstOptionData.price / exchangeRate);

                        // ✅ الإضافة: التحقق إذا كان المنتج إكسبوكس
                        if (product.platform === 'microsoft') {
                            baseUsdPrice = baseUsdPrice * 0.70; // ✅ تم التعديل إلى 80%
                        }
                        productPrice = baseUsdPrice.toFixed(2);
                    } else {
                        productPrice = firstOptionData.price; // السعر بالجنيه
                    }
                    // --- (التعديل ينتهي هنا) ---

                    priceDisplay = `يبدأ من ${productPrice} ${currencySymbol}`;

                } else if (product.price !== undefined) {

                    // --- (التعديل يبدأ هنا) ---
                    if (currentCurrency === 'USD') {
                        let baseUsdPrice = product.usd_price || (product.price / exchangeRate);

                        // ✅ الإضافة: التحقق إذا كان المنتج إكسبوكس
                        if (product.platform === 'microsoft') {
                            baseUsdPrice = baseUsdPrice * 1.20; // إضافة 20%
                        }
                        productPrice = baseUsdPrice.toFixed(2);
                    } else {
                        productPrice = product.price; // السعر بالجنيه
                    }
                    // --- (التعديل ينتهي هنا) ---

                    priceDisplay = `السعر: <span class="product-price">${productPrice}</span> <span class="currency-symbol">${currencySymbol}</span>`;
                }
            }

            let item = document.createElement('div');
            let buttonsHTML = '';
            let platformIconHTML = '';
            let itemClass = 'product-item glass-card';

            // ✅✅ بداية التعديل الرئيسي ✅✅
            // تحديد الإجراء عند الضغط على الصورة
            let clickHandler;
            const isSubscription = product.category === 'tv_subscription' || product.category === 'software_subscription' || product.category === 'ps-plus';

            if (isSubscription) {
                // إذا كان المنتج اشتراكًا، افتح نافذة الشراء مباشرة
                clickHandler = `openPaymentModal('${product.id}', 'buyNow')`;
            } else if (product.actionLink) {
                // إذا كان رابطًا، اذهب للرابط
                clickHandler = `window.location.hash = '${product.actionLink}'`;
            } else {
                // لباقي المنتجات، اذهب لصفحة المنتج
                clickHandler = `window.location.hash = '#product/${product.id}'`;
            }
            // ✅✅ نهاية التعديل الرئيسي ✅✅


            if (product.options && !product.isRentable) {
                itemClass = 'subscription-item';
                if (product.category === 'ps-plus') {
                    itemClass += ' ps-plus-card';
                }
                buttonsHTML = `
                                                                                                                                                                    <div class="product-buttons-container">
                                                                                                                                                                        <button onclick="openPaymentModal('${product.id}', 'buyNow')" class="buy-btn">اشتري الآن</button>
                                                                                                                                                                        <button onclick="openPaymentModal('${product.id}', 'addToCartMode')" class="add-to-cart-btn">
                                                                                                                                                                            <img src="./images/cartt.png" alt="Add to cart icon" loading="lazy">
                                                                                                                                                                        </button>
                                                                                                                                                                    </div>`;
                item.className = itemClass;

                const title = (currentLanguage === 'en' && product.title_en) ? product.title_en : product.title;

                item.innerHTML = `
                                                                                                                                                                    <div class="sub-image-wrapper" onclick="${clickHandler}">
                                                                                                                                                                        <div class="sub-description-overlay">${product.shortDescription || ''}</div>
                                                                                                                                                                        <img src="${product.image}" alt="${title}" loading="lazy" onerror="this.onerror=null;this.src='./images/placeholder.png';">
                                                                                                                                                                    </div>
                                                                                                                                                                    <div class="sub-content">
                                                                                                                                                                        <h3 onclick="${clickHandler}">${title}</h3>
                                                                                                                                                                        <div class="sub-footer">
                                                                                                                                                                            <span class="sub-price">${priceDisplay}</span>
                                                                                                                                                                            ${buttonsHTML}
                                                                                                                                                                        </div>
                                                                                                                                                                    </div>`;
            } else {
                // ... (باقي كود الدالة للمنتجات العادية يبقى كما هو بدون تغيير)
                if (product.category === 'offline-steam') {
                    itemClass += ' product-item--offline';
                } else if (product.category === 'psn-cards') {
                    itemClass += ' psn-gift-card-item';
                }
                if (product.id.includes('bundle') || (product.badges && product.badges.includes('BUNDLE'))) {
                    itemClass += ' bundle-card';
                }
                if (['valorant', 'roblox', 'fortnite', 'genshin'].includes(sectionType)) {
                    item.classList.add('valorant-item');
                }
                if (product.platform) {
                    let iconSrc = '';
                    switch (product.platform) {
                        case 'steam': iconSrc = './images/steam.png'; break;
                        case 'microsoft': iconSrc = './images/microsoft.png'; break;
                        case 'riot': iconSrc = './images/riotgames.png'; break;
                        case 'roblox': iconSrc = './images/robloxlogo.png'; break;
                        case 'epic': iconSrc = './images/epicgames.png'; break;
                        case 'hoyoverse': iconSrc = './images/hoyoverse.png'; break;
                        case 'activision': iconSrc = './images/activision.png'; break;
                        case 'discord': iconSrc = './images/discord.png'; break;
                    }
                    if (iconSrc) {
                        platformIconHTML = `<div class="platform-icon"><img src="${iconSrc}" alt="${product.platform} Icon" loading="lazy"></div>`;
                    }
                }

                if (product.actionLink) {
                    buttonsHTML = `<div class="product-buttons-container" style="justify-content: center;"><button onclick="${clickHandler}" class="buy-btn" style="background-color: #00a8ff; border-color: #00a8ff;">اختار الجزء</button></div>`;
                } else if (product.id.startsWith('steamGift')) {
                    buttonsHTML = `<div class="product-buttons-container"><button onclick="addToCartHandler(event, '${product.id}', 1)" class="add-to-cart-text-btn">أضف إلى السلة</button></div>`;
                } else if (product.requiresSteamProfileLink || product.requiresSteamFriendCode) {
                    buttonsHTML = `<div class="product-buttons-container"><button onclick="openPaymentModal('${product.id}', 'buyNow')" class="buy-btn">شراء الآن</button><button onclick="addToCartWithReminder(event, '${product.id}')" class="add-to-cart-btn"><img src="./images/cartt.png" alt="Add to cart icon" loading="lazy"></button></div>`;
                } else if (product.platform === 'hoyoverse') {
                    buttonsHTML = `<div class="product-buttons-container"><button onclick="openPaymentModal('${product.id}', 'buyNow')" class="buy-btn">شراء الآن</button><button onclick="addToCartWithGenshinReminder(event, '${product.id}')" class="add-to-cart-btn"><img src="./images/cartt.png" alt="Add to cart icon" loading="lazy"></button></div>`;
                } else if (product.platform === 'riot') {
                    buttonsHTML = `<div class="product-buttons-container"><button onclick="openPaymentModal('${product.id}', 'buyNow')" class="buy-btn">شراء الآن</button><button onclick="addToCartWithValorantReminder(event, '${product.id}')" class="add-to-cart-btn"><img src="./images/cartt.png" alt="Add to cart icon" loading="lazy"></button></div>`;
                } else if (product.platform === 'epic' || product.platform === 'roblox' || product.requiresAccountDetails || product.requiresMarvelId) {
                    buttonsHTML = `<div class="product-buttons-container"><button onclick="openPaymentModal('${product.id}', 'buyNow')" class="buy-btn">شراء الآن</button><button onclick="addToCartWithAccountReminder(event, '${product.id}')" class="add-to-cart-btn"><img src="./images/cartt.png" alt="Add to cart icon" loading="lazy"></button></div>`;
                } else {
                    buttonsHTML = `<div class="product-buttons-container"><button onclick="openPaymentModal('${product.id}', 'buyNow')" class="buy-btn">شراء الآن</button><button onclick="addToCartHandler(event, '${product.id}', 1)" class="add-to-cart-btn"><img src="./images/cartt.png" alt="Add to cart icon" loading="lazy"></button></div>`;
                }

                const title = (currentLanguage === 'en' && product.title_en) ? product.title_en : product.title;
                const shortDescription = (currentLanguage === 'en' && product.shortDescription_en) ? product.shortDescription_en : (product.shortDescription || '');
                let displayedTitle = title;
                const bundleRegex = /(باندل|Bundle)/gi;
                if (bundleRegex.test(displayedTitle)) {
                    displayedTitle = displayedTitle.replace(bundleRegex, `<span class="bundle-glow-effect">$&</span>`);
                }

                item.className = itemClass;
                item.innerHTML = `
                                                                                                                                                                    ${platformIconHTML}
                                                                                                                                                                    <div class="fire-particles-container">
                                                                                                                                                                        <i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i>
                                                                                                                                                                    </div>
                                                                                                                                                                    <div class="product-image-wrapper" onclick="${clickHandler}">
                                                                                                                                                                        <img src="${product.image}" alt="${title}" loading="lazy" onerror="this.onerror=null;this.src='./images/placeholder.png';">
                                                                                                                                                                    </div>
                                                                                                                                                                    <div class="product-content-overlay">
                                                                                                                                                                        <h3 onclick="${clickHandler}">${displayedTitle}</h3>
                                                                                                                                                                        <p class="product-description-text">${shortDescription}</p>
                                                                                                                                                                        <p>${priceDisplay}</p>
                                                                                                                                                                        ${product.stock ? `<p class="product-urgency">🔥 2 قطع فقط متبقية!</p>` : ''}
                                                                                                                                                                        <div class="product-buttons-wrapper" style="margin-top: auto;">
                                                                                                                                                                            ${buttonsHTML}
                                                                                                                                                                        </div>
                                                                                                                                                                    </div>`;
            }

            container.appendChild(item);

            if (returnElement) {
                return item;
            }
        }

        // قائمة المنتجات التي ستظهر في كلا القسمين
        const allGamesIds = ['gta', 'minecraft', 'splitfiction', 'mafia', 'rust', 'wallpaperEngine', 'hollowknight', 'rdr2', 'battlefield_6', 'fc_26'];

        // الكود الأصلي
        // دالة لتغيير العملة
        function changeCurrency() {
            const selector = document.getElementById('currency-selector');
            currentCurrency = selector.value;

            // إعادة تحميل جميع الأقسام لعرض الأسعار بالعملة الجديدة
            loadGamesToHome();
            loadSubscriptionsToHome();
            loadOfflineSteamGamesToHome();
            loadSteamGiftCardsToHome();
            loadSteamPointsToHome();
            loadSoftwareKeys(); // ✅ هذا السطر كان مفقودًا
            loadGenshinImpact();
            loadFortnite();
            loadRocketLeague();
            loadMarvelRivals(); // ✅ هذا السطر كان مفقودًا

            // تحديث أسعار السلة
            renderCart();

            const message = `Region and curreny changed to ${currentCurrency}`;
            showInfoToast(message, 3000);
        }

        function loadGamesToHome() {
            const gamesContainer = document.getElementById('gamesContainer');
            renderSkeletonLoader(gamesContainer, 4); // عرض 4 هياكل تحميل

            // محاكاة تأخير التحميل
            setTimeout(() => {
                gamesContainer.innerHTML = ''; // تفريغ الهياكل
                allGamesIds.forEach(id => renderProductItem(productsData[id], gamesContainer, 'games', true));
            }, 800); // 800ms = 0.8 ثانية
        }

        function loadGenshinImpact() {
            const container = document.getElementById('genshinImpactContainer');
            container.innerHTML = '';
            const genshinIds = ['genshin_60', 'genshin_300', 'genshin_980'];
            genshinIds.forEach(id => renderProductItem(productsData[id], container, 'genshin', true));
        }


        function loadRobuxToHome() {
            const robloxContainer = document.getElementById('robloxHomeContainer');
            robloxContainer.innerHTML = '';
            const robloxIds = ['roblox40', 'roblox80', 'roblox400', 'roblox800', 'roblox1700', 'roblox4500'];
            robloxIds.forEach(id => renderProductItem(productsData[id], robloxContainer, 'roblox', true));
        }

        function loadRocketLeague() {
            const container = document.getElementById('rocketleagueContainer');
            container.innerHTML = '';
            const rocketleagueIds = ['rocketleague_500', 'rocketleague_1100', 'rocketleague_3000'];
            rocketleagueIds.forEach(id => renderProductItem(productsData[id], container, 'rocketleague', true));
        }

        function loadSubscriptionsToHome() {
            const tvContainer = document.getElementById('homeTvSubscriptionsContainer');
            const softwareContainer = document.getElementById('homeSoftwareSubscriptionsContainer');

            // تفريغ الحاويات قبل البدء
            tvContainer.innerHTML = '';
            softwareContainer.innerHTML = '';

            // تعريف معرفات المنتجات لكل قسم
            const tvSubscriptionIds = ['netflix', 'disney', 'crunchyroll', 'youtube_premium']; // <-- تم إضافة يوتيوب هنا
            const softwareSubscriptionIds = ['chatgpt_plus', 'capcut_pro', 'spotify_premium']; // <-- تم إضافة سبوتيفاي هنا

            // عرض اشتراكات التلفزيون
            tvSubscriptionIds.forEach(id => {
                if (productsData[id]) {
                    renderProductItem(productsData[id], tvContainer, 'subscriptions', true);
                }
            });

            // عرض اشتراكات البرامج
            softwareSubscriptionIds.forEach(id => {
                if (productsData[id]) {
                    renderProductItem(productsData[id], softwareContainer, 'subscriptions', true);
                }
            });
        }


        function loadSteamPointsToHome() {
            const steamPointsContainer = document.getElementById('steamPointsContainer');
            steamPointsContainer.innerHTML = '';
            const steamPointIds = ['steam10k', 'steam20k', 'steam50k'];
            steamPointIds.forEach(id => renderProductItem(productsData[id], steamPointsContainer, 'steam', true));
        }

        function loadSteamGiftCardsToHome() {
            const container = document.getElementById('steamGiftCardsHomeContainer');
            container.innerHTML = '';
            const giftCardIds = ['steamGift5', 'steamGift10', 'steamGift20', 'steamGift50', 'steamGift100'];
            giftCardIds.forEach(id => renderProductItem(productsData[id], container, 'steam', true));
        }

        function loadProducts() {
            const productsContainer = document.getElementById('productsContainer');
            productsContainer.innerHTML = '';
            // استخدام نفس القائمة الموحدة
            allGamesIds.forEach(id => renderProductItem(productsData[id], productsContainer, 'games', false));
        }

        function loadSubscriptions() {
            const subscriptionsContainer = document.getElementById('subscriptionsContainer');
            subscriptionsContainer.innerHTML = '';
            const subscriptionIds = ['netflix', 'disney', 'crunchyroll', 'gamepass'];
            subscriptionIds.forEach(id => renderProductItem(productsData[id], subscriptionsContainer, 'subscriptions', false));
        }

        function loadValorantPoints() {
            const valorantContainer = document.getElementById('valorantPointsPageContainer');
            valorantContainer.innerHTML = '';
            const valorantIds = ['valorant475', 'valorant1000', 'valorant2050', 'valorant3650', 'valorant5350', 'valorant11000'];
            valorantIds.forEach(id => renderProductItem(productsData[id], valorantContainer, 'valorant', true));
        }

        function loadRobux() {
            const robloxContainer = document.getElementById('robloxContainer');
            robloxContainer.innerHTML = '';
            const robloxIds = ['roblox40', 'roblox80', 'roblox400', 'roblox800', 'roblox800_discount', 'roblox1700', 'roblox4700', 'roblox4500'];
            robloxIds.forEach(id => renderProductItem(productsData[id], robloxContainer, 'roblox', true));
        }

        function loadFortnite() {
            const fortniteContainer = document.getElementById('fortniteContainer');
            fortniteContainer.innerHTML = '';
            const fortniteIds = ['fortnite1000', 'fortnite2800', 'fortnite5000', 'fortnite13500', 'fortniteCrew', 'fortniteStarter'];
            fortniteIds.forEach(id => renderProductItem(productsData[id], fortniteContainer, 'fortnite', true));
        }

        function loadSteamPoints() {
            const steamPointsContainer = document.getElementById('steamPointsPageContainer');
            steamPointsContainer.innerHTML = '';
            const steamPointIds = ['steam10k', 'steam20k', 'steam50k'];
            steamPointIds.forEach(id => renderProductItem(productsData[id], steamPointsContainer, 'steam', false));
        }

        function loadSteamGiftCards() {
            const steamGiftCardsContainer = document.getElementById('steamGiftCardsPageContainer');
            steamGiftCardsContainer.innerHTML = '';
            const giftCardIds = ['steamGift5', 'steamGift10', 'steamGift20', 'steamGift50', 'steamGift100'];
            giftCardIds.forEach(id => renderProductItem(productsData[id], steamGiftCardsContainer, 'steam', false));
        }

        function searchProducts() {
            const query = document.getElementById('productSearch').value;
            if (query.trim() === '') {
                loadProducts(); // إذا كان البحث فارغًا، أعد عرض كل المنتجات
                return;
            }
            performGlobalSearch(query);
        }

        function checkOrder() {
            const orderCode = document.getElementById('orderCode').value;
            const statusContainer = document.getElementById('statusContainer');
            const resultText = document.getElementById('resultText');
            const statusImage = document.getElementById('statusImage');


            if (orders[orderCode]) {
                const order = orders[orderCode];
                resultText.textContent = `حالة الطلب: ${order.status}`;
                statusImage.src = order.img;
                statusImage.style.display = 'block';
                resultText.style.color = '#00ff00';
            } else {
                resultText.textContent = "عذراً، لم يتم العثور على هذا الطلب.";
                statusImage.style.display = 'none';
                resultText.style.color = 'red';
            }

            resultText.style.opacity = 1;
            statusImage.style.opacity = 1;
        }

        function showProductPage(productId) {
            // ✅ التعديل: لا تصعد للأعلى إذا كنا في وضع الطفل
            if (!document.body.classList.contains('aptx-child-mode')) {
                window.scrollTo(0, 0);
            }

            // التحقق من الرابط وتحديثه إذا لزم الأمر
            if (`#product/${productId}` !== window.location.hash) {
                window.location.hash = `product/${productId}`;
                return;
            }

            currentProduct = productsData[productId];
            showSection('productPage'); // عرض قسم صفحة المنتج

            // --- ✅ بداية التعديل ---
            const productPageElement = document.getElementById('productPage');

            // ✅✅ الكود المحدث بعد إزالة خاصية 'fixed' من الخلفيات ✅✅

            if (productId === 'cyberpunk_2077_offline') {
                // خلفية سايبر بانك
                productPageElement.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/cyberpunk-background.jpg')`;
                productPageElement.style.backgroundSize = 'cover';
                productPageElement.style.backgroundPosition = 'center';
                productPageElement.style.backgroundAttachment = 'fixed'; // ✅ تمت إضافة هذا السطر
                productPageElement.style.border = '1px solid #888';

            } else if (productId === 'thelastofus_offline') {
                // خلفية ذا لاست أوف أس 2
                productPageElement.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/tlou2-background.jpg')`;
                productPageElement.style.backgroundSize = 'cover';
                productPageElement.style.backgroundPosition = 'center';
                productPageElement.style.backgroundAttachment = 'fixed'; // ✅ تمت إضافة هذا السطر
                productPageElement.style.border = '1px solid #888';

            } else if (productId === 're4_separate_ways_offline') {
                // خلفية ريزدنت إيفل 4 سبيريت وايس
                productPageElement.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/re4sw-background.jpg')`;
                productPageElement.style.backgroundSize = 'cover';
                productPageElement.style.backgroundPosition = 'center';
                productPageElement.style.backgroundAttachment = 'fixed'; // ✅ تمت إضافة هذا السطر
                productPageElement.style.border = '1px solid #888';

            } else if (productId === 'silent_hill_f_offline') {
                // خلفية سايلنت هيل
                productPageElement.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/silenthillf-background.jpg')`;
                productPageElement.style.backgroundSize = 'cover';
                productPageElement.style.backgroundPosition = 'center';
                productPageElement.style.backgroundAttachment = 'fixed'; // ✅ تمت إضافة هذا السطر
                productPageElement.style.border = '1px solid #888';

            } else if (productId === 'mafia') {
                // خلفية مافيا
                productPageElement.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/mafia-background.jpg')`;
                productPageElement.style.backgroundSize = 'cover';
                productPageElement.style.backgroundPosition = 'center';
                productPageElement.style.backgroundAttachment = 'fixed'; // ✅ تمت إضافة هذا السطر
                productPageElement.style.border = '1px solid #888';

            } else if (productId === 'residentevil_offline') {
                // خلفية ريزدنت إيفل 8
                productPageElement.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/re8-background.jpg')`;
                productPageElement.style.backgroundSize = 'cover';
                productPageElement.style.backgroundPosition = 'center';
                productPageElement.style.backgroundAttachment = 'fixed'; // ✅ تمت إضافة هذا السطر
                productPageElement.style.border = '1px solid #888';

            } else if (productId === 'residentevil7_offline') {
                // خلفية ريزدنت إيفل 7
                productPageElement.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/re7-background.jpg')`;
                productPageElement.style.backgroundSize = 'cover';
                productPageElement.style.backgroundPosition = 'center';
                productPageElement.style.backgroundAttachment = 'fixed'; // ✅ تمت إضافة هذا السطر
                productPageElement.style.border = '1px solid #888';

            } else if (productId === 'black_myth_wukong_offline') {
                // خلفية بلاك ميث ووكونج
                productPageElement.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/wukong-background.jpg')`;
                productPageElement.style.backgroundSize = 'cover';
                productPageElement.style.backgroundPosition = 'center';
                productPageElement.style.backgroundAttachment = 'fixed'; // ✅ تمت إضافة هذا السطر
                productPageElement.style.border = '1px solid #888';

            } else if (productId === 'ac_shadows_offline') {
                // خلفية أساسنز كريد شادوز
                productPageElement.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/ac-shadows-background.jpg')`;
                productPageElement.style.backgroundSize = 'cover';
                productPageElement.style.backgroundPosition = 'center';
                productPageElement.style.backgroundAttachment = 'fixed'; // ✅ تمت إضافة هذا السطر
                productPageElement.style.border = '1px solid #888';

            } else if (productId === 'ghostoftsushima_offline') {
                // خلفية جوست أوف تسوشيما
                productPageElement.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/tsushima-background.jpg')`;
                productPageElement.style.backgroundSize = 'cover';
                productPageElement.style.backgroundPosition = 'center';
                productPageElement.style.backgroundAttachment = 'fixed'; // ✅ تمت إضافة هذا السطر
                productPageElement.style.border = '1px solid #888';

            } else if (productId === 'witcher3_offline') {
                // خلفية ذا ويتشر 3
                productPageElement.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/witcher3-background.jpg')`;
                productPageElement.style.backgroundSize = 'cover';
                productPageElement.style.backgroundPosition = 'center';
                productPageElement.style.backgroundAttachment = 'fixed'; // ✅ تمت إضافة هذا السطر
                productPageElement.style.border = '1px solid #888';

            } else if (productId === 'eldenring_offline') {
                // خلفية إلدن رينج
                productPageElement.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/eldenring-background.jpg')`;
                productPageElement.style.backgroundSize = 'cover';
                productPageElement.style.backgroundPosition = 'center';
                productPageElement.style.backgroundAttachment = 'fixed'; // ✅ تمت إضافة هذا السطر
                productPageElement.style.border = '1px solid #888';

            } else if (productId === 'ragnarok_offline') {
                // خلفية جود أوف وور راجناروك
                productPageElement.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/ragnarok-background.jpg')`;
                productPageElement.style.backgroundSize = 'cover';
                productPageElement.style.backgroundPosition = 'center';
                productPageElement.style.backgroundAttachment = 'fixed'; // ✅ تمت إضافة هذا السطر
                productPageElement.style.border = '1px solid #888';

            } else if (productId === 'tlou1_offline') {
                // خلفية ذا لاست أوف أس 1
                productPageElement.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/tlou1-background.jpg')`;
                productPageElement.style.backgroundSize = 'cover';
                productPageElement.style.backgroundPosition = 'center';
                productPageElement.style.backgroundAttachment = 'fixed'; // ✅ تمت إضافة هذا السطر
                productPageElement.style.border = '1px solid #888';
            } else if (productId === 'cyberpunk_re4_bundle') {
                // خلفية باندل الباندل
                productPageElement.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/cyberpunk_re4_bundle.png')`;
                productPageElement.style.backgroundSize = 'cover';
                productPageElement.style.backgroundPosition = 'center';
                productPageElement.style.backgroundAttachment = 'fixed';
                productPageElement.style.border = '1px solid #888';
            } else if (productId === 'silksong_offline') {
                // خلفية Hollow Knight: Silksong
                productPageElement.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/silksong-background.jpg')`;
                productPageElement.style.backgroundSize = 'cover';
                productPageElement.style.backgroundPosition = 'center';
                productPageElement.style.backgroundAttachment = 'fixed';
                productPageElement.style.border = '1px solid #888';
            } else if (productId === 'gow_got_bundle') {
                // خلفية باندل البلايستيشن فان بوي
                productPageElement.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/gow_got_bundle.png')`;
                productPageElement.style.backgroundSize = 'cover';
                productPageElement.style.backgroundPosition = 'center';
                productPageElement.style.backgroundAttachment = 'fixed';
                productPageElement.style.border = '1px solid #888';
            } else if (productId === 'tlou_bundle') {
                // خلفية باندل The Last of Us الكاملة
                productPageElement.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/tlou2_1.jpg')`;
                productPageElement.style.backgroundSize = 'cover';
                productPageElement.style.backgroundPosition = 'center';
                productPageElement.style.backgroundAttachment = 'fixed';
                productPageElement.style.border = '1px solid #888';
            } else if (productId === 'silent_hollow_bundle') {
                // خلفية باندل الرعب والغموض
                productPageElement.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('./images/silent_hollow_bundle.png')`;
                productPageElement.style.backgroundSize = 'cover';
                productPageElement.style.backgroundPosition = 'center';
                productPageElement.style.backgroundAttachment = 'fixed';
                productPageElement.style.border = '1px solid #888';
            } else {
                // إرجاع الخلفية الافتراضية لجميع المنتجات الأخرى
                productPageElement.style.backgroundImage = 'linear-gradient(145deg, #1f1133, #110e1a)';
                productPageElement.style.border = '1px solid var(--main-purple)';
                productPageElement.style.backgroundAttachment = 'scroll'; // التأكد من أن الخلفية الافتراضية متحركة
            }


            if (imageSliderInterval) {
                clearInterval(imageSliderInterval);
            }

            const mainImage = document.getElementById('productPageImage');
            const imagePlaceholder = document.querySelector('#mainImageContainer .main-image-placeholder');

            imagePlaceholder.style.display = 'flex';
            mainImage.style.display = 'none';

            if (currentProduct.images && currentProduct.images.length > 0) {
                let currentImageIndex = 0;
                mainImage.src = currentProduct.images[currentImageIndex];

                imageSliderInterval = setInterval(() => {
                    currentImageIndex = (currentImageIndex + 1) % currentProduct.images.length;
                    mainImage.style.opacity = 0;
                    setTimeout(() => {
                        mainImage.src = currentProduct.images[currentImageIndex];
                        mainImage.style.opacity = 1;
                    }, 300);
                }, 2000);

            } else {
                mainImage.src = currentProduct.image;
            }

            mainImage.onload = () => {
                imagePlaceholder.style.display = 'none';
                mainImage.style.display = 'block';
            };

            document.getElementById('productPageTitle').textContent = currentProduct.title;
            document.getElementById('productPagePrice').textContent = `${currentProduct.price} EGP`;
            const shortDescElement = document.getElementById('productPageShortDescription');
            shortDescElement.textContent = currentProduct.shortDescription || '';
            shortDescElement.style.marginTop = '-150px'; // أضف هذا السطر
            document.getElementById('productPageFullDescription').innerHTML = `<h2>الوصف :</h2>${currentProduct.fullDescription || ''}`;
            document.getElementById('specs').innerHTML = currentProduct.specs || '<p>i5 4500 - gtx 750ti</p>';

            const platformContainer = document.getElementById('productPagePlatform');
            platformContainer.innerHTML = '';
            if (currentProduct.platform) {
                let platformName = '',
                    platformIconSrc = '';
                if (currentProduct.platform === 'steam') { platformName = 'Steam'; platformIconSrc = './images/steam.png'; }
                else if (currentProduct.platform === 'microsoft') { platformName = 'Microsoft'; platformIconSrc = './images/microsoft.png'; }
                else if (currentProduct.platform === 'riot') { platformName = 'Riot Games'; platformIconSrc = './images/riotgames.png'; }
                else if (currentProduct.platform === 'roblox') { platformName = 'Roblox'; platformIconSrc = './images/robloxlogo.png'; }
                else if (currentProduct.platform === 'epic') { platformName = 'Epic Games'; platformIconSrc = './images/epicgames.png'; }

                if (platformName) {
                    platformContainer.innerHTML = `
                                                                                                                                                                                                                        <span>المنصة :</span>
                                                                                                                                                                                                                        <strong>${platformName}</strong>
                                                                                                                                                                                                                        <img src="${platformIconSrc}" alt="${platformName} Logo">`;
                }
            }

            const quantityInput = document.getElementById('productPageQuantity');
            quantityInput.value = 1;
            document.getElementById('decreaseProductPageQuantity').onclick = () => {
                if (quantityInput.value > 1) quantityInput.value--;
            };
            document.getElementById('increaseProductPageQuantity').onclick = () => {
                quantityInput.value++;
            };

            document.getElementById('addToCartBtn').onclick = (event) => {
                const quantity = parseInt(quantityInput.value);
                addToCartHandler(event, currentProduct.id, quantity);
            };

            setupTabs();
            loadComments(productId);
            updateProductPageAverageRating(productId);

            loadRelatedProducts(productId);
        }



        // ======================================================
        // START: دالة عرض المنتجات المشابهة (النسخة الذكية)
        // ======================================================
        function loadRelatedProducts(currentProductId) {
            const container = document.getElementById('related-products-container');
            const section = document.getElementById('related-products-section');
            container.innerHTML = ''; // تفريغ الحاوية

            const currentProduct = productsData[currentProductId];
            if (!currentProduct) {
                section.style.display = 'none';
                return;
            }

            let relatedProducts = [];
            let productIds = Object.keys(productsData);

            // 1. المحاولة الأولى: البحث حسب الفئة (Category)
            if (currentProduct.category) {
                relatedProducts = productIds
                    .filter(id => id !== currentProductId && productsData[id].category === currentProduct.category)
                    .map(id => productsData[id]);
            }

            // 2. المحاولة الثانية (إذا لم نجد ما يكفي): البحث حسب المنصة (Platform)
            if (relatedProducts.length < 4 && currentProduct.platform) {
                const platformProducts = productIds
                    .filter(id => id !== currentProductId && productsData[id].platform === currentProduct.platform)
                    .map(id => productsData[id]);

                // إضافة المنتجات الجديدة مع التأكد من عدم تكرارها
                platformProducts.forEach(p => {
                    if (!relatedProducts.some(rp => rp.id === p.id)) {
                        relatedProducts.push(p);
                    }
                });
            }

            // 3. المحاولة الثالثة (إذا لم نجد ما يكفي): إضافة منتجات عشوائية
            if (relatedProducts.length < 4) {
                // خلط المنتجات عشوائيًا
                const shuffledIds = productIds.sort(() => 0.5 - Math.random());

                shuffledIds.forEach(id => {
                    if (relatedProducts.length >= 4) return;
                    // التأكد من أنه ليس المنتج الحالي أو منتج مكرر
                    if (id !== currentProductId && !relatedProducts.some(rp => rp.id === id)) {
                        relatedProducts.push(productsData[id]);
                    }
                });
            }

            const finalProductsToShow = relatedProducts.slice(0, 4);

            if (finalProductsToShow.length > 0) {
                section.style.display = 'block';
                finalProductsToShow.forEach(product => {
                    renderProductItem(product, container, 'related');
                });
            } else {
                section.style.display = 'none';
            }
        }
        // ======================================================
        // END: دالة عرض المنتجات المشابهة
        // ======================================================

        function setupTabs() {
            const tabContainers = document.querySelectorAll('.tabs-container');
            tabContainers.forEach(container => {
                const tabButtons = container.querySelectorAll('.tab-button');
                const tabContents = container.querySelectorAll('.tab-content');

                tabButtons.forEach(button => {
                    button.onclick = () => {
                        tabButtons.forEach(btn => btn.classList.remove('active'));
                        button.classList.add('active');

                        const targetTabId = button.dataset.tab;
                        tabContents.forEach(content => {
                            if (content.id === targetTabId) {
                                content.classList.add('active');
                            } else {
                                content.classList.remove('active');
                            }
                        });
                    };
                });
            });
        }

        function updateSteamProductTotal() {
            if (!currentProduct || !currentProduct.id.startsWith('steam')) {
                return;
            }

            const quantityInput = document.getElementById('quantityInput');
            let quantity = parseInt(quantityInput.value);

            if (isNaN(quantity) || quantity < 1) {
                quantity = 1;
                quantityInput.value = 1;
            }

            const basePrice = currentProduct.price;
            const totalPrice = basePrice * quantity;

            document.getElementById('totalPriceDisplay').textContent = totalPrice;

            const finalTitle = `${currentProduct.title} (x${quantity})`;
            document.getElementById('vodafone_product_price').value = totalPrice;
            document.getElementById('paypal_product_price').value = totalPrice;
            document.getElementById('vodafone_product_name').value = finalTitle;
            document.getElementById('paypal_product_name').value = finalTitle;
        }

        // ✅✅ الكود الصحيح والكامل للدالة - قم باستبدال الدالة القديمة بهذه ✅✅
        function openPaymentModal(productId, mode = 'buyNow', customPrice = null, customTitle = null, customExtraData = {}) {
            currentProduct = {
                ...productsData[productId]
            };
            if (customPrice !== null) {
                currentProduct.price = customPrice;
            }
            if (customTitle !== null) {
                currentProduct.title = customTitle;
            }

            const gmailInputGroup = document.getElementById('gmail-input-group');
            const modal = document.getElementById('paymentModal');
            const modalImageElement = document.getElementById('modalImage');
            modalImageElement.src = currentProduct.image;
            modalImageElement.classList.add('product-modal-image');
            document.getElementById('modalTitle').textContent = currentProduct.title;

            const infoContainer = document.getElementById('modalProductInfo');
            infoContainer.innerHTML = '';

            let platformHTML = '';
            if (currentProduct.platform) {
                let platformName = '',
                    platformIconSrc = '';
                if (currentProduct.platform === 'steam') {
                    platformName = 'Steam';
                    platformIconSrc = './images/steam.png';
                } else if (currentProduct.platform === 'microsoft') {
                    platformName = 'Microsoft';
                    platformIconSrc = './images/microsoft.png';
                } else if (currentProduct.platform === 'riot') {
                    platformName = 'Riot Games';
                    platformIconSrc = './images/riotgames.png';
                } else if (currentProduct.platform === 'roblox') {
                    platformName = 'Roblox';
                    platformIconSrc = './images/robloxlogo.png';
                } else if (currentProduct.platform === 'epic') {
                    platformName = 'Epic Games';
                    platformIconSrc = './images/epicgames.png';
                } else if (currentProduct.platform === 'hoyoverse') {
                    platformName = 'Genshin Impact';
                    platformIconSrc = './images/hoyoverse.png';
                } else if (currentProduct.platform === 'activision') {
                    platformName = 'Call of Duty';
                    platformIconSrc = './images/activision.png';
                } else if (currentProduct.platform === 'discord') {
                    platformName = 'Discord';
                    platformIconSrc = './images/discord.png';
                } else if (currentProduct.platform === 'playstation') {
                    platformName = 'PlayStation';
                    platformIconSrc = './images/playstation-icon.png';
                }

                if (platformName) {
                    platformHTML = `<div class="platform-display" style="justify-content: center; gap: 8px;"><span>المنصة:</span><strong>${platformName}</strong><img src="${platformIconSrc}" alt="${platformName} Logo" style="height: 18px; width: auto;"></div>`;
                }
            }

            const descriptionHTML = currentProduct.fullDescription ? `<div class="description-display">${currentProduct.fullDescription}</div>` : '';
            infoContainer.innerHTML = platformHTML + descriptionHTML;

            const accountDetailsContainer = document.getElementById('account-details-container');
            const riotIdGroup = document.getElementById('riot-id-group');
            const genshinIdGroup = document.getElementById('genshin-id-group');
            const marvelRivalsIdGroup = document.getElementById('marvel-rivals-id-group');
            const steamFriendCodeGroup = document.getElementById('steam-friend-code-group');
            const steamProfileLinkGroup = document.getElementById('steam-profile-link-group');
            const subscriptionGroup = document.getElementById('subscription-group');
            const discordUsernameGroup = document.getElementById('discord-username-group');
            const priceDisplayElement = document.getElementById('modalPrice');
            const actionButton = document.getElementById('modal-action-button');

            accountDetailsContainer.style.display = 'none';
            riotIdGroup.style.display = 'none';
            if (genshinIdGroup) genshinIdGroup.style.display = 'none';
            if (marvelRivalsIdGroup) marvelRivalsIdGroup.style.display = 'none';
            steamFriendCodeGroup.style.display = 'none';
            steamProfileLinkGroup.style.display = 'none';
            subscriptionGroup.style.display = 'none';
            discordUsernameGroup.style.display = 'none';
            priceDisplayElement.style.display = 'block';
            if (gmailInputGroup) gmailInputGroup.style.display = 'none';

            if (document.getElementById('gmail_input')) document.getElementById('gmail_input').required = false;
            if (document.getElementById('genshin_id_input')) document.getElementById('genshin_id_input').required = false;
            if (document.getElementById('riot_id_input')) document.getElementById('riot_id_input').required = false;
            if (document.getElementById('steam_friend_code_input')) document.getElementById('steam_friend_code_input').required = false;
            if (document.getElementById('steam_profile_link_input')) document.getElementById('steam_profile_link_input').required = false;
            if (document.getElementById('account_email')) document.getElementById('account_email').required = false;
            if (document.getElementById('account_password')) document.getElementById('account_password').required = false;
            if (document.getElementById('account_contact')) document.getElementById('account_contact').required = false;
            if (document.getElementById('marvel_rivals_id_input')) document.getElementById('marvel_rivals_id_input').required = false;
            if (document.getElementById('discord_username_input')) document.getElementById('discord_username_input').required = false;

            if (currentProduct.requiresDiscordUsername) {
                discordUsernameGroup.style.display = 'flex';
                document.getElementById('discord_username_input').required = true;
            } else if (currentProduct.platform === 'hoyoverse') {
                if (genshinIdGroup) genshinIdGroup.style.display = 'block';
                if (document.getElementById('genshin_id_input')) document.getElementById('genshin_id_input').required = true;
            } else if (currentProduct.requiresMarvelId) {
                if (marvelRivalsIdGroup) marvelRivalsIdGroup.style.display = 'block';
                if (document.getElementById('marvel_rivals_id_input')) document.getElementById('marvel_rivals_id_input').required = true;
            } else if (currentProduct.platform === 'epic' || currentProduct.platform === 'roblox' || currentProduct.requiresAccountDetails) {
                accountDetailsContainer.style.display = 'flex';
                document.getElementById('account_email').required = true;
                document.getElementById('account_password').required = true;
                document.getElementById('account_contact').required = true;
            } else if (currentProduct.platform === 'riot') {
                riotIdGroup.style.display = 'block';
                document.getElementById('riot_id_input').required = true;
            } else if (currentProduct.requiresSteamFriendCode) {
                steamFriendCodeGroup.style.display = 'block';
                document.getElementById('steam_friend_code_input').required = true;
            } else if (currentProduct.requiresSteamProfileLink) {
                steamProfileLinkGroup.style.display = 'block';
                document.getElementById('steam_profile_link_input').required = true;
            }
            else if (currentProduct.requiresGmail) { // ✅✅ أضف هذا البلوك
                if (gmailInputGroup) gmailInputGroup.style.display = 'flex';
                if (document.getElementById('gmail_input')) document.getElementById('gmail_input').required = true;
            }


            if (currentProduct.options) {
                subscriptionGroup.style.display = 'block';
                const optionsContainer = document.getElementById('subscription-options-container');
                optionsContainer.innerHTML = '';

                if (currentProduct.id === 'ps_plus_subscription') {
                    optionsContainer.className = 'tabbed-layout';

                    const tabsDiv = document.createElement('div');
                    tabsDiv.className = 'tier-tabs';
                    optionsContainer.appendChild(tabsDiv);

                    const contentDiv = document.createElement('div');
                    contentDiv.className = 'tier-content-container';
                    optionsContainer.appendChild(contentDiv);

                    const tiers = {
                        essential: 'Essential',
                        extra: 'Extra',
                        deluxe: 'Deluxe'
                    };

                    for (const tierId in tiers) {
                        const tierName = tiers[tierId];
                        const tabButton = document.createElement('button');
                        tabButton.className = 'tier-tab-button';
                        tabButton.textContent = tierName;
                        tabButton.dataset.tier = tierId;
                        tabsDiv.appendChild(tabButton);

                        const tierContent = document.createElement('div');
                        tierContent.id = `tier-content-${tierId}`;
                        tierContent.className = 'tier-content';
                        contentDiv.appendChild(tierContent);
                    }

                    for (const key in currentProduct.options) {
                        const optionData = currentProduct.options[key];
                        const tierId = key.split('_')[0];
                        const tierContent = document.getElementById(`tier-content-${tierId}`);

                        if (tierContent) {
                            const optionLabel = document.createElement('label');
                            optionLabel.className = 'subscription-option-label';
                            optionLabel.innerHTML = `<input type="radio" name="subscriptionPeriod" value="${key}" onchange="updateModalPriceForSubscription()"><div class="subscription-option-card"><span class="period">${optionData.title}</span><span class="price">${optionData.price} EGP</span></div>`;
                            tierContent.appendChild(optionLabel);
                        }
                    }

                    const tabButtons = tabsDiv.querySelectorAll('.tier-tab-button');
                    const tierContents = contentDiv.querySelectorAll('.tier-content');

                    function activateTab(tierId) {
                        tabButtons.forEach(btn => btn.classList.toggle('active', btn.dataset.tier === tierId));
                        tierContents.forEach(content => content.classList.toggle('active', content.id === `tier-content-${tierId}`));
                        const activeRadios = document.querySelectorAll('input[name="subscriptionPeriod"]:checked');
                        activeRadios.forEach(radio => radio.checked = false);
                        updateModalPriceForSubscription();
                    }

                    tabButtons.forEach(button => button.addEventListener('click', () => activateTab(button.dataset.tier)));
                    activateTab('essential');

                } else {
                    optionsContainer.className = '';
                    const optionKeys = Object.keys(currentProduct.options);
                    if (optionKeys.length === 1) {
                        optionsContainer.classList.add('single-option');
                    }
                    for (const key in currentProduct.options) {
                        const optionData = currentProduct.options[key];
                        const optionLabel = document.createElement('label');
                        optionLabel.className = 'subscription-option-label';
                        const checkedAttribute = '';
                        optionLabel.innerHTML = `<input type="radio" name="subscriptionPeriod" value="${key}" ${checkedAttribute} onchange="updateModalPriceForSubscription()"><div class="subscription-option-card"><span class="period">${optionData.title}</span><span class="price">${optionData.price} EGP</span></div>`;
                        optionsContainer.appendChild(optionLabel);
                    }
                }
                updateModalPriceForSubscription();

            } else {
                priceDisplayElement.innerHTML = `<span class="price-badge">السعر: ${currentProduct.price} EGP</span>`;
            }

            if (mode === 'addToCartMode') {
                actionButton.textContent = 'تأكيد وإضافة للسلة';
                actionButton.onclick = () => handleAddToCartFromModal();
            } else {
                actionButton.textContent = 'اذهب للدفع';
                actionButton.onclick = () => goToPaymentDetails();
            }
            showModal('paymentModal');
        }

        // ✅ دالة جديدة لمعالجة الاشتراك
        function handleSubscriptionAction(mode) {
            const selectedRadio = document.querySelector('input[name="subscriptionPeriod"]:checked');
            if (!selectedRadio) {
                // إذا لم يتم اختيار مدة، اعرض رسالة الخطأ المنبثقة
                showInfoToast("يجب اختيار مدة الاشتراك.", 3000, 'error'); // ✅ أضفنا النوع 'error'
                return; // أوقف العملية
            }

            // إذا تم الاختيار، أكمل العملية بناءً على الوضع
            if (mode === 'buyNow') {
                goToPaymentDetails();
            } else {
                handleAddToCartFromModal();
            }
        }

        // دالة showInfoToast المعدلة لتقبل نوع الرسالة
        function showInfoToast(message, duration, type = 'info') {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            toast.className = `toast-notification ${type}`; // استخدام النوع الجديد
            toast.textContent = message;
            container.appendChild(toast);

            setTimeout(() => {
                toast.classList.add('show');
            }, 10);

            setTimeout(() => {
                toast.classList.remove('show');
                toast.addEventListener('transitionend', () => {
                    if (toast.parentElement) {
                        toast.remove();
                    }
                });
            }, duration);
        }

        // أضف هذه الدالة الجديدة بالكامل مع باقي الدوال
        function handleAddToCartFromModal() {
            const extraData = {};
            let isValid = true;

            if (currentProduct.requiresSteamFriendCode) {
                const friendCode = document.getElementById('steam_friend_code_input').value;
                if (!friendCode) {
                    alert('الرجاء إدخال كود الصداقة.');
                    isValid = false;
                } else {
                    extraData['Steam Friend Code'] = friendCode;
                }
            } else if (currentProduct.requiresSteamProfileLink) {
                const profileLink = document.getElementById('steam_profile_link_input').value;
                if (!profileLink) {
                    alert('الرجاء إدخال رابط بروفايل ستيم.');
                    isValid = false;
                } else {
                    extraData['Steam Profile Link'] = profileLink;
                }
            } else if (currentProduct.platform === 'riot') {
                const riotId = document.getElementById('riot_id_input').value;
                if (!riotId || !riotId.includes('#')) {
                    alert('الرجاء إدخال Riot ID صحيح.');
                    isValid = false;
                } else {
                    extraData['Riot ID'] = riotId;
                }
            } else if (currentProduct.platform === 'hoyoverse') {
                const genshinId = document.getElementById('genshin_id_input').value;
                if (!genshinId) {
                    alert('الرجاء إدخال Genshin UID.');
                    isValid = false;
                } else {
                    extraData['Genshin UID'] = genshinId;
                }
            } else if (currentProduct.id.startsWith('marvelRivals')) {
                const marvelRivalsId = document.getElementById('marvel_rivals_id_input').value;
                if (!marvelRivalsId) {
                    alert('الرجاء إدخال Marvel Rivals ID.');
                    isValid = false;
                } else {
                    extraData['Marvel Rivals ID'] = marvelRivalsId;
                }
            } else if (currentProduct.platform === 'epic' || currentProduct.platform === 'roblox' || currentProduct.requiresAccountDetails) {
                const accountEmail = document.getElementById('account_email').value;
                const accountPassword = document.getElementById('account_password').value;
                const accountContact = document.getElementById('account_contact').value;
                if (!accountEmail || !accountPassword || !accountContact) {
                    alert('الرجاء إدخال جميع بيانات الحساب المطلوبة.');
                    isValid = false;
                } else {
                    extraData['Account Email'] = accountEmail;
                    extraData['Account Password'] = accountPassword;
                    extraData['Contact Method'] = accountContact;
                }
            }

            if (currentProduct.options) {
                const selectedRadio = document.querySelector('input[name="subscriptionPeriod"]:checked');
                if (!selectedRadio) {
                    alert('يجب اختيار مدة الاشتراك.');
                    isValid = false;
                } else {
                    const period = selectedRadio.value;
                    const selectedOption = currentProduct.options[period];
                    extraData.price = selectedOption.price;
                    extraData.title = `${currentProduct.title} (${selectedOption.title})`;
                    extraData.selectedOption = selectedOption;
                }
            }

            if (isValid) {
                performAddToCart(currentProduct.id, 1, null, extraData);
                closeModal('paymentModal');
            }
        }


        function updateModalPriceForSubscription() {
            const selectedRadio = document.querySelector('input[name="subscriptionPeriod"]:checked');
            if (!selectedRadio) {
                // إذا لم يتم اختيار أي خيار، استخدم سعر المنتج الرئيسي
                let price = currentProduct.price;
                let currencySymbol = 'EGP';

                if (currentCurrency === 'USD') {
                    price = (price / exchangeRate).toFixed(2);
                    currencySymbol = 'USD';
                }

                document.getElementById('modalPrice').innerHTML = `<span class="price-badge">السعر: ${price} ${currencySymbol}</span>`;
                document.getElementById('vodafone_product_price').value = price;
                document.getElementById('paypal_product_price').value = price;
                document.getElementById('vodafone_product_name').value = currentProduct.title;
                document.getElementById('paypal_product_name').value = currentProduct.title;
                return;
            }

            const period = selectedRadio.value;
            const selectedOption = currentProduct.options[period];
            let price = selectedOption.price;
            let currencySymbol = 'EGP';

            // ✅ هذا هو الجزء الصحيح: يتم تطبيق سعر الصرف على سعر الخيار المختار
            if (currentCurrency === 'USD') {
                price = (price / exchangeRate).toFixed(2);
                currencySymbol = 'USD';
            }

            const title = `${currentProduct.title} (${selectedOption.title})`;

            document.getElementById('modalPrice').innerHTML = `<span class="price-badge">السعر: ${price} ${currencySymbol}</span>`;
            document.getElementById('vodafone_product_price').value = price;
            document.getElementById('paypal_product_price').value = price;
            document.getElementById('vodafone_product_name').value = title;
            document.getElementById('paypal_product_name').value = title;
        }

        function startPaymentTimer(duration, display, form) {
            clearInterval(paymentTimerInterval);
            let timer = duration;
            const submitButton = form.querySelector('button[type="submit"]');

            paymentTimerInterval = setInterval(function () {
                let minutes = parseInt(timer / 60, 10);
                let seconds = parseInt(timer % 60, 10);

                minutes = minutes < 10 ? "0" + minutes : minutes;
                seconds = seconds < 10 ? "0" + seconds : seconds;

                display.textContent = minutes + ":" + seconds;
                display.classList.remove('expired');

                if (--timer < 0) {
                    clearInterval(paymentTimerInterval);
                    display.textContent = "انتهت المهلة";
                    display.classList.add('expired');
                    if (submitButton) submitButton.disabled = true;
                }
            }, 1000);
        }

        function goToPaymentDetails() {
            let finalPrice;
            let finalTitle;
            const extraData = {};
            let isValid = true;

            // التحقق من حقول الاشتراك أولاً
            if (currentProduct.options) {
                const selectedRadio = document.querySelector('input[name="subscriptionPeriod"]:checked');
                if (!selectedRadio) {
                    showInfoToast('يجب اختيار مدة الاشتراك.', 3000, 'error');
                    return;
                }
                const period = selectedRadio.value;
                const selectedOption = currentProduct.options[period];
                finalPrice = selectedOption.price;
                finalTitle = `${currentProduct.title} (${selectedOption.title})`;
            } else {
                finalPrice = currentProduct.price;
                finalTitle = currentProduct.title;
            }

            // ✅ التعديل يبدأ من هنا
            // التحقق من الحقول المطلوبة بناءً على نوع المنتج
            if (currentProduct.requiresSteamFriendCode) {
                const friendCodeInput = document.getElementById('steam_friend_code_input');
                if (!friendCodeInput.value) {
                    showInfoToast('الرجاء إدخال كود الصداقة الخاص بك.', 3000, 'error');
                    return;
                }
                extraData['Steam Friend Code'] = friendCodeInput.value;
            } else if (currentProduct.requiresSteamProfileLink) {
                const profileLink = document.getElementById('steam_profile_link_input');
                if (!profileLink.value) {
                    showInfoToast('الرجاء إدخال رابط بروفايل ستيم.', 3000, 'error');
                    return;
                }
                extraData['Steam Profile Link'] = profileLink.value;
            } else if (currentProduct.platform === 'riot') {
                const riotIdInput = document.getElementById('riot_id_input');
                if (!riotIdInput.value || !riotIdInput.value.includes('#')) {
                    showInfoToast('الرجاء إدخال Riot ID صحيح بالشكل التالي: Name#TAG.', 3000, 'error');
                    return;
                }
                extraData['Riot ID'] = riotIdInput.value;
            } else if (currentProduct.platform === 'hoyoverse') {
                const genshinIdInput = document.getElementById('genshin_id_input');
                if (!genshinIdInput.value) {
                    showInfoToast('الرجاء إدخال Genshin UID.', 3000, 'error');
                    return;
                }
            } else if (currentProduct.requiresGmail) { // ✅✅ أضف هذا البلوك
                const gmailInput = document.getElementById('gmail_input');
                if (!gmailInput.value || !gmailInput.value.includes('@')) {
                    showInfoToast('الرجاء إدخال إيميل جوجل (الجيميل) صحيح.', 3000, 'error');
                    isValid = false; // امنع المتابعة
                    return; // أوقف الدالة
                }
                extraData['Gmail (Email)'] = gmailInput.value;
                extraData['Genshin UID'] = genshinIdInput.value;
            } else if (currentProduct.requiresMarvelId) {
                const marvelRivalsIdInput = document.getElementById('marvel_rivals_id_input');
                if (!marvelRivalsIdInput.value) {
                    showInfoToast('الرجاء إدخال Marvel Rivals ID.', 3000, 'error');
                    return;
                }
                extraData['Marvel Rivals ID'] = marvelRivalsIdInput.value;
            } else if (currentProduct.platform === 'epic' || currentProduct.platform === 'roblox' || currentProduct.requiresAccountDetails) {
                const accountEmail = document.getElementById('account_email');
                const accountPassword = document.getElementById('account_password');
                const accountContact = document.getElementById('account_contact');
                if (!accountEmail.value || !accountPassword.value || !accountContact.value) {
                    showInfoToast('الرجاء إدخال جميع بيانات الحساب المطلوبة.', 3000, 'error');
                    return;
                }
                extraData['Account Email'] = accountEmail.value;
                extraData['Account Password'] = accountPassword.value;
                extraData['Contact Method'] = accountContact.value;
            }
            // ✅ التعديل ينتهي هنا

            const method = document.getElementById('modalPaymentMethod').value;
            showPaymentDetails(method, finalPrice, finalTitle, extraData);
        }

        function generateStarsHTML(rating) {
            let starsHTML = '';
            for (let i = 1; i <= 5; i++) {
                const starClass = i <= rating ? 'star filled' : 'star';
                starsHTML += `<span class="${starClass}">&#9733;</span>`;
            }
            return `<div class="comment-rating">${starsHTML}</div>`;
        }

        function markHelpful(event, productId, commentIndex) {
            const comments = JSON.parse(localStorage.getItem(`comments_${productId}`)) || [];
            if (comments[commentIndex]) {
                if (!comments[commentIndex].helpfulCount) {
                    comments[commentIndex].helpfulCount = 0;
                }
                comments[commentIndex].helpfulCount++;
                localStorage.setItem(`comments_${productId}`, JSON.stringify(comments));

                const button = event.target;
                const countSpan = button.nextElementSibling;
                countSpan.textContent = `(${comments[commentIndex].helpfulCount})`;
                button.disabled = true;
            }
        }

        function loadComments(productId) {
            const commentsContainer = document.getElementById('commentList');
            const loadMoreBtn = document.getElementById('loadMoreComments');

            allComments = JSON.parse(localStorage.getItem(`comments_${productId}`)) || [];
            allComments.sort((a, b) => new Date(b.date) - new Date(a.date));

            commentsContainer.innerHTML = '';
            commentsLoaded = 0;

            if (allComments.length === 0) {
                commentsContainer.innerHTML = `<p style="text-align: center; color: #ccc;">لا توجد تعليقات حتى الآن. كن أول من يعلق!</p>`;
                loadMoreBtn.style.display = 'none';
            } else {
                renderMoreComments();
                if (allComments.length > commentsPerPage) {
                    loadMoreBtn.style.display = 'block';
                } else {
                    loadMoreBtn.style.display = 'none';
                }
            }

            loadMoreBtn.onclick = renderMoreComments;
        }

        function renderMoreComments() {
            const commentsContainer = document.getElementById('commentList');
            const loadMoreBtn = document.getElementById('loadMoreComments');
            const startIndex = commentsLoaded;
            const commentsToLoad = allComments.slice(startIndex, startIndex + commentsPerPage);

            commentsToLoad.forEach((comment, index) => {
                const absoluteIndex = startIndex + index;
                const commentItem = document.createElement('div');
                commentItem.className = 'comment-card';

                const starsHTML = generateStarsHTML(comment.rating || 0);
                const helpfulCount = comment.helpfulCount || 0;

                commentItem.innerHTML = `
                                                                                                                                                                                                                                                                                                                        <div class="comment-card-header">
                                                                                                                                                                                                                                                                                                                            <span class="comment-author">${comment.name}</span>
                                                                                                                                                                                                                                                                                                                            ${starsHTML}
                                                                                                                                                                                                                                                                                                                        </div>
                                                                                                                                                                                                                                                                                                                        <p class="comment-text">${comment.text}</p>
                                                                                                                                                                                                                                                                                                                        <div class="comment-footer">
                                                                                                                                                                                                                                                                                                                            <span>هل كان هذا التقييم مفيداً؟</span>
                                                                                                                                                                                                                                                                                                                            <button class="helpful-btn" onclick="markHelpful(event, '${currentProduct.id}', ${absoluteIndex})">نعم</button>
                                                                                                                                                                                                                                                                                                                            <span>(${helpfulCount})</span>
                                                                                                                                                                                                                                                                                                                        </div>`;
                commentsContainer.appendChild(commentItem);
            });

            commentsLoaded += commentsToLoad.length;
            if (commentsLoaded >= allComments.length) {
                loadMoreBtn.style.display = 'none';
            }
        }

        function submitComment(event) {
            event.preventDefault();
            const name = document.getElementById('commentName').value;
            const text = document.getElementById('commentText').value;
            const rating = document.getElementById('commentRating').value;
            const productId = currentProduct.id;

            if (!name) {
                alert('الرجاء إدخال اسمك.');
                return;
            }
            if (parseInt(rating) === 0) {
                alert('الرجاء إضافة تقييم للمنتج.');
                return;
            }

            const newComment = {
                name,
                text: text || " ",
                rating: parseInt(rating),
                date: new Date().toISOString(),
                helpfulCount: 0
            };
            const comments = JSON.parse(localStorage.getItem(`comments_${productId}`)) || [];
            comments.unshift(newComment);
            localStorage.setItem(`comments_${productId}`, JSON.stringify(comments));

            document.getElementById('commentName').value = '';
            document.getElementById('commentText').value = '';
            document.getElementById('commentRating').value = '0';
            document.getElementById('ratingStars').dataset.rating = '0';

            loadComments(productId);
            updateProductPageAverageRating(productId);
        }


        function updateProductPageAverageRating(productId) {
            const ratingContainer = document.getElementById('productPageAverageRating');
            if (!ratingContainer) return;

            const comments = JSON.parse(localStorage.getItem(`comments_${productId}`)) || [];

            if (comments.length === 0) {
                ratingContainer.innerHTML = `<span class="rating-summary">لا توجد تقييمات بعد.</span>`;
                return;
            }

            const totalRating = comments.reduce((sum, comment) => sum + (comment.rating || 0), 0);
            const averageRating = totalRating / comments.length;
            const roundedAverage = Math.round(averageRating);

            let starsHTML = '';
            for (let i = 1; i <= 5; i++) {
                const starClass = i <= roundedAverage ? 'star' : 'star empty';
                starsHTML += `<span class="${starClass}">&#9733;</span>`;
            }

            ratingContainer.innerHTML = `
                                                                                                                                                                                                                                                                                                                                        <div class="stars">${starsHTML}</div>
                                                                                                                                                                                                                                                                                                                                        <span class="rating-summary">${averageRating.toFixed(1)} من 5 (${comments.length} تقييم)</span>
                                                                                                                                                                                                                                                                                                                                        `;
        }

        // --- (الكود المعدل) ---
        function updateCartCount() {
            const totalItems = Object.values(cart).reduce((total, item) => total + item.quantity, 0);

            // 1. تحديث زر السلة العائم (للكومبيوتر)
            const cartCountDesktop = document.getElementById('cart-count');
            if (cartCountDesktop) {
                cartCountDesktop.textContent = totalItems;
            }

            // 2. ✅ (الإضافة الجديدة) تحديث زر السلة السفلي (للموبايل)
            const cartCountMobile = document.getElementById('mobile-cart-count');
            if (cartCountMobile) {
                cartCountMobile.textContent = totalItems;
            }
        }

        function applyDiscount(context = 'cart') {
            let inputEl, messageEl;

            // 1. تحديد الحقول التي سيتم التعامل معها بناءً على مكان الزر (سلة التسوق أو نافذة الدفع)
            if (context === 'vodafone') {
                inputEl = document.getElementById('vodafoneDiscountCodeInput');
                messageEl = document.getElementById('vodafoneDiscountMessage');
            } else { // الحالة الافتراضية هي سلة التسوق
                inputEl = document.getElementById('discountCodeInput');
                messageEl = document.getElementById('discountMessage');
            }

            const code = inputEl.value.toUpperCase();

            // 2. التحقق من صلاحية كود الخصم
            if (discountCodes[code]) {
                appliedDiscount = {
                    code: code,
                    percentage: discountCodes[code].percentage
                };
                messageEl.textContent = `تم تطبيق خصم ${appliedDiscount.percentage}% بنجاح!`;
                messageEl.className = 'discount-message success';
            } else {
                appliedDiscount = null;
                messageEl.textContent = 'كود الخصم غير صالح.';
                messageEl.className = 'discount-message error';
            }

            // 3. تحديث السعر الإجمالي في المكان الصحيح
            if (context === 'vodafone') {
                let finalTotal = currentPaymentTotal;
                if (appliedDiscount) {
                    const discountAmount = currentPaymentTotal * (appliedDiscount.percentage / 100);
                    finalTotal -= discountAmount;
                }

                // تحديث السعر المعروض في نافذة الدفع والحقل المخفي بالنموذج
                document.getElementById('vodafoneTotalAmount').textContent = `${finalTotal.toFixed(2)} ج.م`;
                document.getElementById('vodafone_product_price').value = finalTotal.toFixed(2);

            } else {
                // تحديث السعر في سلة التسوق الرئيسية كالمعتاد
                renderCart();
            }
        }

        function renderCart() {
            const cartItemsContainer = document.getElementById('cartItemsContainer');
            const cartTotalContainer = document.getElementById('cartTotalContainer');
            const currencySymbol = currentCurrency;
            cartItemsContainer.innerHTML = '';
            let total = 0;

            if (Object.keys(cart).length === 0) {
                cartItemsContainer.innerHTML = `<p style="text-align: center; color: #ccc;">سلتك فارغة.</p>`;
            } else {
                for (const productId in cart) {
                    const item = cart[productId];
                    let itemPrice = item.price;

                    if (item.options && item.selectedOption) {
                        itemPrice = item.selectedOption.price;
                    }

                    let displayedPrice = itemPrice;
                    if (currentCurrency === 'USD') {
                        displayedPrice = (itemPrice / exchangeRate).toFixed(2);
                    }

                    let extraInfoHTML = '';
                    if (item.riot_id) {
                        extraInfoHTML = `<div class="cart-item-extra-info">ID: ${item.riot_id}</div>`;
                    } else if (item.steam_friend_code) {
                        extraInfoHTML = `<div class="cart-item-extra-info">Friend Code: ${item.steam_friend_code}</div>`;
                    } else if (item.account_email) {
                        extraInfoHTML = `<div class="cart-item-extra-info">Account: ${item.account_email}</div>`;
                    } else if (item.selectedOption) {
                        extraInfoHTML = `<div class="cart-item-extra-info">المدة: ${item.selectedOption.title}</div>`;
                    }

                    const itemElement = document.createElement('div');
                    itemElement.className = 'cart-modal-item';
                    itemElement.innerHTML = `
                                                                                                                                                                                                                                                                            <img src="${item.image}" alt="${item.title}">
                                                                                                                                                                                                                                                                            <div class="item-details">
                                                                                                                                                                                                                                                                                <div style="display: flex; justify-content: space-between; align-items: flex-start; width: 100%;">
                                                                                                                                                                                                                                                                                    <h4>${item.title}</h4>
                                                                                                                                                                                                                                                                                    <button class="remove-item-btn" onclick="removeFromCart('${productId}')">&times;</button>
                                                                                                                                                                                                                                                                                </div>
                                                                                                                                                                                                                                                                                <p>${displayedPrice} ${currencySymbol}</p>
                                                                                                                                                                                                                                                                                ${extraInfoHTML}
                                                                                                                                                                                                                                                                            </div>
                                                                                                                                                                                                                                                                            <div class="quantity-controls">
                                                                                                                                                                                                                                                                                <button onclick="changeQuantity('${productId}', -1)">-</button>
                                                                                                                                                                                                                                                                                <span>${item.quantity}</span>
                                                                                                                                                                                                                                                                                <button onclick="changeQuantity('${productId}', 1)">+</button>
                                                                                                                                                                                                                                                                            </div>
                                                                                                                                                                                                                                                                        `;
                    cartItemsContainer.appendChild(itemElement);
                    total += itemPrice * item.quantity;
                }
            }

            const originalTotal = total;
            let finalTotal = total;

            if (appliedDiscount) {
                const discountAmount = finalTotal * (appliedDiscount.percentage / 100);
                finalTotal -= discountAmount;
            }

            let displayedOriginalTotal = originalTotal.toFixed(2);
            let displayedFinalTotal = finalTotal.toFixed(2);

            if (currentCurrency === 'USD') {
                displayedOriginalTotal = (originalTotal / exchangeRate).toFixed(2);
                displayedFinalTotal = (finalTotal / exchangeRate).toFixed(2);
            }

            if (appliedDiscount) {
                cartTotalContainer.innerHTML = `
                                                                                                                                                                                                                                                                        الإجمالي: <span class="original-price">${displayedOriginalTotal} ${currencySymbol}</span>
                                                                                                                                                                                                                                                                        <span id="cartTotalPrice">${displayedFinalTotal}</span> ${currencySymbol}
                                                                                                                                                                                                                                                                    `;
            } else {
                cartTotalContainer.innerHTML = `الإجمالي: <span id="cartTotalPrice">${displayedFinalTotal}</span> ${currencySymbol}`;
            }
        }

        function changeQuantity(productId, change) {
            if (cart[productId]) {
                cart[productId].quantity += change;
                if (cart[productId].quantity <= 0) {
                    delete cart[productId];
                }
                localStorage.setItem('cart', JSON.stringify(cart));
                updateCartCount();
                renderCart();
            }
        }

        function removeFromCart(productId) {
            if (cart[productId]) {
                delete cart[productId];
                localStorage.setItem('cart', JSON.stringify(cart));
                updateCartCount();
                renderCart();
            }
        }

        function goToCheckout() {
            if (Object.keys(cart).length === 0) {
                // 1. إغلاق نافذة السلة أولاً
                closeModal('cartModal');

                // 2. استدعاء دالة عرض رسالة الخطأ المخصصة (التي سنضيفها في الخطوة 2)
                showEmptyCartModal();
                return;
            }
            closeModal('cartModal');
            showModal('checkoutModal');
            renderCheckoutPaymentOptions();
        }

        function renderCheckoutPaymentOptions() {
            const container = document.getElementById('checkoutPaymentOptionsContainer');
            container.innerHTML = '';

            let total = Object.values(cart).reduce((sum, item) => sum + (item.price * item.quantity), 0);

            if (appliedDiscount) {
                const discountAmount = total * (appliedDiscount.percentage / 100);
                total = total - discountAmount;
            }

            const vodafoneCard = document.createElement('div');
            vodafoneCard.className = 'payment-method-card';
            vodafoneCard.onclick = () => showPaymentDetails('vodafone', total);
            vodafoneCard.innerHTML = `
                                                                                                                                                                                                        <h3>
                                                                                                                                                                                                            <img src="./images/vf-cash.png" alt="Vodafone Cash Logo">
                                                                                                                                                                                                             فودافون كاش - انستا باي - محفظة
                                                                                                                                                                                                        </h3>
                                                                                                                                                                                                        <p> الدفع عبر المحفظة الالكترونية</p>
                                                                                                                                                                                                    `;
            container.appendChild(vodafoneCard);

            const paypalCard = document.createElement('div');
            paypalCard.className = 'payment-method-card';
            paypalCard.onclick = () => showPaymentDetails('paypal', total);
            paypalCard.innerHTML = `
                                                                                                                                                                                                        <h3>
                                                                                                                                                                                                            <img src="./images/paypal.png" alt="PayPal Logo">
                                                                                                                                                                                                            بايبال
                                                                                                                                                                                                        </h3>
                                                                                                                                                                                                        <p>الدفع عبر حساب بايبال</p>
                                                                                                                                                                                                    `;
            container.appendChild(paypalCard);

            // ✅ إضافة بطاقة الدفع الجديدة بالكريديت كارد
            const creditcardCard = document.createElement('div');
            creditcardCard.className = 'payment-method-card';
            creditcardCard.onclick = () => showPaymentDetails('creditcard', total);
            creditcardCard.innerHTML = `
                                                                                                                                                                                                        <h3>
                                                                                                                                                                                                            <img src="./images/credit-card.png" alt="Credit Card Logo">
                                                                                                                                                                                                            فيزا / ماستر كارد
                                                                                                                                                                                                        </h3>
                                                                                                                                                                                                        <p>الدفع ببطاقة الائتمان أو الخصم</p>
                                                                                                                                                                                                    `;
            container.appendChild(creditcardCard);
        }

        function showPaymentDetails(method, total, singleProductTitle = null, singleProductExtraData = {}) {
            hasConfirmedOnce = false;
            currentPaymentTotal = total;
            closeModal('checkoutModal');
            const paymentModal = document.getElementById('paymentModal');
            if (!paymentModal.classList.contains('is-visible')) {
                showModal('paymentModal');
            }


            const allSections = paymentModal.querySelectorAll('.modal-content-section');
            allSections.forEach(section => section.classList.remove('is-visible'));

            const detailsSection = document.getElementById(`${method}Details`);
            if (detailsSection) {
                detailsSection.classList.add('is-visible');

                let productSummaryText = '';
                if (singleProductTitle) {
                    productSummaryText = singleProductTitle;
                } else if (Object.keys(cart).length > 0) {
                    const cartItems = Object.values(cart);
                    if (cartItems.length === 1) {
                        const item = cartItems[0];
                        productSummaryText = item.selectedOption ? `${item.title} (${item.selectedOption.title}) (x${item.quantity})` : `${item.title} (x${item.quantity})`;
                    } else {
                        productSummaryText = `${cartItems[0].title} + ${cartItems.length - 1} منتجات أخرى`;
                    }
                }

                const summaryDisplay = detailsSection.querySelector('.payment-summary-value');
                if (summaryDisplay) {
                    summaryDisplay.textContent = productSummaryText;
                    summaryDisplay.title = productSummaryText;
                }

                const summaryContainer = detailsSection.querySelector('.order-summary-container');
                if (summaryContainer) {
                    summaryContainer.innerHTML = '';
                    let summaryHTML = '<h4>ملخص الطلب</h4>';
                    if (singleProductTitle) {
                        summaryHTML += `<div class="summary-item"><strong>الخدمة:</strong> <span>${singleProductTitle}</span></div>`;
                        for (const key in singleProductExtraData) {
                            if (key.toLowerCase().includes('password')) continue;
                            summaryHTML += `<div class="summary-item"><strong>${key}:</strong> <span>${singleProductExtraData[key]}</span></div>`;
                        }
                    } else if (Object.keys(cart).length > 0) {
                        Object.values(cart).forEach(item => {
                            const itemTitle = item.selectedOption ? `${item.title} (${item.selectedOption.title})` : item.title;
                            summaryHTML += `<div class="summary-item"><strong>- ${itemTitle} (x${item.quantity})</strong></div>`;
                        });
                    }
                    summaryContainer.innerHTML = summaryHTML;
                }

                let productSummary = '';
                const allExtraData = {};
                if (singleProductTitle) {
                    productSummary = singleProductTitle;
                    Object.assign(allExtraData, singleProductExtraData);
                } else {
                    const extraDataLines = [];
                    productSummary = Object.values(cart).map(item => {
                        let title = item.title;
                        if (item.selectedOption) title = `${item.title} (${item.selectedOption.title})`;
                        if (item['Genshin UID']) extraDataLines.push(`[${title}] UID: ${item['Genshin UID']}`);
                        if (item['Riot ID']) extraDataLines.push(`[${title}] Riot ID: ${item['Riot ID']}`);
                        if (item['Steam Profile Link']) extraDataLines.push(`[${title}] Profile Link: ${item['Steam Profile Link']}`);
                        if (item['Steam Friend Code']) extraDataLines.push(`[${title}] Friend Code: ${item['Steam Friend Code']}`);
                        if (item['Account Email']) extraDataLines.push(`[${title}] Account: ${item['Account Email']}`);
                        if (item['Account Password']) extraDataLines.push(`[${title}] Password: ${item['Account Password']}`);
                        if (item['Contact Method']) extraDataLines.push(`[${title}] Contact: ${item['Contact Method']}`);
                        if (item['Marvel Rivals ID']) extraDataLines.push(`[${title}] Marvel Rivals ID: ${item['Marvel Rivals ID']}`);
                        return `${title} (x${item.quantity})`;
                    }).join(' | ');
                    if (extraDataLines.length > 0) allExtraData['Extra Data'] = extraDataLines.join(' || ');
                }

                let displayedPrice = total;
                let currencySymbol = 'EGP';
                if (['paypal', 'creditcard'].includes(method)) {
                    displayedPrice = (total / exchangeRate).toFixed(2);
                    currencySymbol = 'USD';
                } else if (currentCurrency === 'USD') {
                    displayedPrice = (total / exchangeRate).toFixed(2);
                    currencySymbol = 'USD';
                }

                const totalAmountText = `${displayedPrice} ${currencySymbol}`;
                const timerDisplay = detailsSection.querySelector('.payment-timer-value');
                const totalAmountSpan = detailsSection.querySelector('.payment-total-amount-value');
                const paymentAmountDisplay = detailsSection.querySelector(`#${method}AmountDisplay`);
                if (totalAmountSpan) totalAmountSpan.textContent = totalAmountText;
                if (paymentAmountDisplay) paymentAmountDisplay.textContent = totalAmountText;

                const form = document.getElementById(`${method}Form`);
                if (form) {
                    // ملء الحقول المخفية بالبيانات
                    form.querySelector(`#${method}_product_name`).value = productSummary;
                    form.querySelector(`#${method}_product_price`).value = displayedPrice;
                    for (const key in allExtraData) {
                        const input = form.querySelector(`input[name="${key}"]`);
                        if (input) input.value = allExtraData[key];
                    }
                    startPaymentTimer(3600, timerDisplay, form);
                }
                const user = firebase.auth().currentUser;
                if (user && user.email) {
                    // البحث عن حقل الإيميل الظاهر في النموذج وتعبئته
                    const emailInput = detailsSection.querySelector('input[name="email"]');
                    if (emailInput) {
                        emailInput.value = user.email;
                        // emailInput.readOnly = true; // (اختياري: لجعله غير قابل للتعديل)
                    }
                }
            }
        }

        function submitFeedback() {
            const name = document.getElementById('feedback-name').value;
            const feedbackText = document.getElementById('feedback-text').value;
            const messageElement = document.getElementById('feedback-message');

            if (!feedbackText.trim()) {
                messageElement.textContent = "من فضلك اكتب ملاحظاتك قبل الإرسال.";
                messageElement.style.color = 'red';
                return;
            }

            const formData = new FormData();
            formData.append('name', name || 'غير محدد');
            formData.append('feedback', feedbackText);

            fetch(formspreeEndpoints.feedback, {
                method: 'POST',
                body: formData,
                headers: { 'Accept': 'application/json' }
            })
                .then(response => {
                    if (response.ok) {
                        messageElement.textContent = "شكراً لمشاركتك! تم إرسال ملاحظاتك بنجاح.";
                        messageElement.style.color = '#00ff00';
                        document.getElementById('feedback-name').value = '';
                        document.getElementById('feedback-text').value = '';
                    } else {
                        response.json().then(data => {
                            messageElement.textContent = data.errors ? data.errors.map(error => error.message).join(", ") : "حدث خطأ ما. يرجى المحاولة مرة أخرى.";
                        });
                        messageElement.style.color = 'red';
                    }
                })
                .catch(() => {
                    messageElement.textContent = "حدث خطأ في الاتصال. يرجى التحقق من اتصالك بالإنترنت.";
                    messageElement.style.color = 'red';
                });
        }

        function submitCreditCardOrder() {
            // 1. الحصول على قيمة الإيميل من الحقل المرئي
            const emailInput = document.getElementById('creditcard_email_input');
            const emailValue = emailInput.value;

            // 2. التحقق من أن حقل الإيميل ليس فارغًا
            if (!emailValue.trim() || !emailValue.includes('@')) {
                showInfoToast('الرجاء إدخال بريد إلكتروني صحيح لتأكيد الطلب.', 4000, 'error');
                return; // إيقاف العملية إذا كان الحقل فارغًا أو غير صالح
            }

            // 3. وضع قيمة الإيميل في الحقل المخفي داخل الفورم
            document.getElementById('creditcard_email').value = emailValue;

            // 4. الحصول على الفورم المخفي
            const form = document.getElementById('creditcardForm');

            // 5. استدعاء الدالة المسؤولة عن إظهار التحميل وإرسال البيانات
            handlePaymentSubmit(form);
        }

        // --- كود إخفاء شاشة التحميل واللوجو (مُعدل ومحسّن) ---
        document.addEventListener('DOMContentLoaded', function () {

            // 1. إخفاء شاشة التحميل
            const loadingScreen = document.getElementById('loading-screen');
            if (loadingScreen) {
                setTimeout(() => {
                    loadingScreen.classList.add('hidden');
                }, 3000); // 3 ثواني
            }

            // 2. إيستر إيج اللوجو (Rage Quit)
            let logoClicks = 0;
            let logoTimer;
            const logoLink = document.querySelector('#navbar .logo-area a');

            if (logoLink) {
                logoLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    clearTimeout(logoTimer);
                    logoClicks++;

                    if (logoClicks === 5) {
                        // ✅ استخدام الإشعار الجديد
                        showGameAlert("😤 Chill bro! It's just a store.", "error");
                        logoClicks = 0;
                    } else {
                        logoTimer = setTimeout(() => {
                            window.location.hash = '#home';
                            logoClicks = 0;
                        }, 500);
                    }
                });
            }

        });


    </script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

    <script>


        // ======================================================
        // 1. تعريف المتغيرات العامة والدوال المساعدة
        // ======================================================
        window.isLoginMode = true;

        // دالة تحديث نصوص النافذة (تبديل بين دخول وإنشاء حساب)
        function updateAuthModalUI() {
            const authTitle = document.getElementById('authTitle');
            const submitBtn = document.getElementById('submitAuthBtn');
            const toggleText = document.getElementById('toggleAuthText');
            const toggleBtn = document.getElementById('toggleAuthBtn');

            if (window.isLoginMode) {
                if (authTitle) authTitle.textContent = "تسجيل الدخول";
                if (submitBtn) submitBtn.textContent = "تسجيل الدخول";
                if (toggleText) toggleText.textContent = "ليس لديك حساب؟";
                if (toggleBtn) toggleBtn.textContent = "إنشاء حساب جديد";
            } else {
                if (authTitle) authTitle.textContent = "إنشاء حساب جديد";
                if (submitBtn) submitBtn.textContent = "إنشاء حساب";
                if (toggleText) toggleText.textContent = "لديك حساب بالفعل؟";
                if (toggleBtn) toggleBtn.textContent = "تسجيل الدخول";
            }
        }

        // ======================================================
        // 2. الدالة الأساسية لفتح النافذة (التي تبحث عنها الأزرار)
        // ======================================================
        window.openAuthModal = function (mode) {
            const modal = document.getElementById('authModal');
            const overlay = document.getElementById('overlay');

            // تحديد الوضع بناءً على الزر
            if (mode === 'login') {
                window.isLoginMode = true;
            } else {
                window.isLoginMode = false;
            }

            // تحديث النصوص
            updateAuthModalUI();

            // إظهار النافذة
            if (modal && overlay) {
                modal.style.display = 'flex';
                overlay.style.display = 'block';
                // تأخير بسيط لتفعيل الأنيميشن
                setTimeout(() => {
                    modal.classList.add('is-visible');
                }, 10);
            } else {
                console.error("خطأ: عنصر النافذة (authModal) أو الخلفية (overlay) غير موجود في الصفحة.");
            }
        };

        // دالة لإغلاق النافذة
        window.closeAuthModal = function () {
            const modal = document.getElementById('authModal');
            const overlay = document.getElementById('overlay');

            if (modal) {
                modal.classList.remove('is-visible');
                setTimeout(() => {
                    modal.style.display = 'none';
                }, 300);
            }
            if (overlay) overlay.style.display = 'none';
        };

        // ======================================================
        // 3. تهيئة فايربيس ومراقبة المستخدم (بعد تحميل الصفحة)
        // ======================================================
        document.addEventListener('DOMContentLoaded', function () {

            // التأكد من أن مكتبة فايربيس محملة
            if (typeof firebase === 'undefined') {
                console.error("خطأ: لم يتم تحميل مكتبة Firebase بشكل صحيح.");
                return;
            }

            // إعدادات المشروع (Config) - ضرورية عشان الاتصال يشتغل
            const firebaseConfig = {
                apiKey: "AIzaSyAsrl6fyQ65lGU22WlTsm8HDtjhKYKw4bs",
                authDomain: "berlin-storegoe-login.firebaseapp.com",
                projectId: "berlin-storegoe-login",
                storageBucket: "berlin-storegoe-login.firebasestorage.app",
                messagingSenderId: "429636991312",
                appId: "1:429636991312:web:38bb70e5186173ae809455",
                measurementId: "G-WGF1G0B6FD"
            };

            // تهيئة التطبيق إذا لم يكن مهيأ
            if (!firebase.apps.length) {
                firebase.initializeApp(firebaseConfig);
            }

            const auth = firebase.auth();

            // عناصر الأزرار الرئيسية في الهيدر
            const mainLoginBtn = document.getElementById('btn-login');
            const mainSignupBtn = document.getElementById('btn-signup');

            // مراقب حالة تسجيل الدخول
            auth.onAuthStateChanged((user) => {
                if (user) {
                    console.log("✅ المستخدم مسجل دخول:", user.email);

                    // 1. توجيه المستخدم إذا كان في صفحة الدخول
                    if (window.location.hash === '#my-orders-auth-page') {
                        window.location.hash = '#my-orders-page';
                        if (typeof fetchUserOrders === 'function') fetchUserOrders();
                    }

                    // 2. تحديث واجهة المستخدم (إخفاء زر الدخول)
                    if (mainLoginBtn) mainLoginBtn.style.display = 'none';

                    // 3. تحديث زر "إنشاء حساب" ليصبح اسم المستخدم
                    if (mainSignupBtn) {
                        const username = user.displayName || user.email.split('@')[0];
                        mainSignupBtn.textContent = "👤 " + username;

                        // عند الضغط عليه يفتح صفحة الطلبات بدلاً من نافذة التسجيل
                        mainSignupBtn.onclick = function (e) {
                            e.preventDefault();
                            window.location.hash = '#my-orders-page';
                            if (typeof fetchUserOrders === 'function') fetchUserOrders();
                        };
                    }

                } else {
                    console.log("❌ المستخدم غير مسجل.");

                    // إعادة الأزرار لطبيعتها
                    if (mainLoginBtn) {
                        mainLoginBtn.style.display = 'inline-block';
                        mainLoginBtn.onclick = () => window.openAuthModal('login');
                    }
                    if (mainSignupBtn) {
                        mainSignupBtn.textContent = "إنشاء حساب جديد";
                        mainSignupBtn.style.display = 'inline-block';
                        mainSignupBtn.onclick = () => window.openAuthModal('signup');
                    }
                }
            });
        });
    </script>
</body>
</html>


